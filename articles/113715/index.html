<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>UTF-8 in PHP. Part 1</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello, with this post I would like to try to bring a bright future closer, in which everyone uses the ‚Äúkosher‚Äù encoding of UTF-8. In particular, this ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>UTF-8 in PHP. Part 1</h1><div class="post__text post__text-html js-mediator-article">  Hello, with this post I would like to try to bring a bright future closer, in which everyone uses the ‚Äúkosher‚Äù encoding of UTF-8.  In particular, this concerns the environment closest to me - the web and programming language - PHP, and at the end of the series we will come to the practical part and develop another bicycle library. <br><a name="habracut"></a><br><h4>  1. Introduction </h4><br>  To understand the following text, beginners need to know some details on the coding in general.  I will try to simplify the presentation of the material.  For those who don‚Äôt know anything about bitwise operations, you must first familiarize yourself with the materials on <a href="http://ru.wikipedia.org/wiki/%25D0%2591%25D0%25B8%25D1%2582%25D0%25BE%25D0%25B2%25D1%258B%25D0%25B5_%25D0%25BE%25D0%25BF%25D0%25B5%25D1%2580%25D0%25B0%25D1%2586%25D0%25B8%25D0%25B8">Wikipedia</a> . <br><br>  You need to start with the understanding that the computer works with numbers and store the string (and the symbol, as part of it), also in a numerical form.  For these purposes, there are encodings.  In fact, these are tables in which the correspondence between numbers and symbols is indicated.  Historically, the basic ASCII encoding contains only control codes and Latin characters, a total of 128 (127 is the maximum number that can be stored in 7 bits). <br><br>  In order to store other ASCII-based texts, many other encodings were created, in which the 8th bit was added.  They can already store up to 256 characters, the first 128 of which traditionally corresponded to ASCII, but for the rest, everyone shoved everything he wanted.  So it turned out that each operating system vendor has its own set of encodings, and each satisfies the needs of only a relatively narrow circle of people.  The situation was even more complicated by the lack of common standards, it became algorithmically impossible to distinguish between them and now it looks more like a guessing (more on this in the following sections). 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      As a result, a universal exit was needed, a coding that can store all possible characters and will take into account differences in the letter of different nations (for example, the direction of the letter).  The task was solved by the creation of Unicode, which is capable of encoding virtually all writing systems in the world in a single encoding. <br><br>  UTF-8 has become the most popular web encoding, which has several significant advantages: <ul><li>  full compatibility with ASCII; </li><li>  it can be <a href="http://www.w3.org/International/questions/qa-forms-utf-8.ru.php">distinguished</a> with high accuracy <a href="http://www.w3.org/International/questions/qa-forms-utf-8.ru.php">from other encodings</a> ; </li><li>  each character can occupy from 1 to 4 bytes (in the standard, bytes are called octets; attention, I can replace these terms with each other!) depending on the numeric value that needs to be stored. </li></ul><br><br>  I would like to elaborate on the last paragraph.  This means that if earlier it was possible to perform a simple conversion on a table and record the result, then now the method of saving this result is also determined, depending on the bit depth that is required for its storage.  On the example of the principle of storage you can see in the table (x - stored data bits): <br><table><tbody><tr><th>  Bit </th><th>  Maximum Stored Value </th><th>  1 octet </th><th>  2 octets </th><th>  3 octets </th><th>  4 octets </th></tr><tr><th></th><th>  Initial octet </th><th colspan="4">  Continuing octets </th></tr><tr><td>  7 </td><td>  U + 007F </td><td>  0xxxxxxx </td><td></td><td></td><td></td></tr><tr><td>  eleven </td><td>  U + 07FF </td><td>  110xxxxx </td><td>  10xxxxxx </td><td></td><td></td></tr><tr><td>  sixteen </td><td>  U + FFFF </td><td>  1110xxxx </td><td>  10xxxxxx </td><td>  10xxxxxx </td><td></td></tr><tr><td>  21 </td><td>  U + 10FFFF (according to the standard, but really U + 1FFFFF) </td><td>  11110xxx </td><td>  10xxxxxx </td><td>  10xxxxxx </td><td>  10xxxxxx </td></tr></tbody></table><br><br>  It is easy to see that in the high bits of the initial octet there is always a counter indicating the number of bytes in the sequence ‚Äî this is the number of leading ones, after which there is a zero.  Note: if there is only one octet, then the leading unit is not indicated, so that the initial octets are easily distinguished from the continuing ones. <br><br>  For example, let's see how the string ‚ÄúHi Hi‚Äù will look in UTF-8 encoding. <br><br>  <b>Step one.</b>  Translate each character into its numeric representation (I will use hexadecimal numbering system) according to the <a href="http://www.utf8-chartable.de/unicode-utf8-table.pl%3Fstart%3D1024%26view%3D3">table</a> . <br><br>  Hi Hi = 0x041F 0x0440 0x0438 0x0432 0x044D 0x0442 0x0020 0x0048 0x0069 <br>  <i>Do not forget that the space is also a symbol.</i> <br><br>  <b>Step two.</b>  Convert numbers from hexadecimal to binary.  We use the calculator Windows 7 (in programmer mode). <br><br>  0x041F = 0000 0100 0001 1111 <br>  0x0440 = 0000 0100 0100 0000 <br>  0x0438 = 0000 0100 0011 1000 <br>  0x0432 = 0000 0100 0011 0010 <br>  0x0435 = 0000 0100 0011 0101 <br>  0x0442 = 0000 0100 0100 0010 <br>  0x0020 = 0010 0000 <br>  0x0048 = 0100 1000 <br>  0x0069 = 0110 1001 <br>  <i>For clarity, I added zeros to the high bits.</i>  <i>Please note: characters can occupy a different number of bytes.</i> <br><br>  <b>Step three.</b>  Translate numeric representations into UTF-8 octet sequences. <br><br>  0x041F = 100 0001 1111 = <b>110</b> xxxxx 10xxxxxx = <b>110</b> 10000 <b>10</b> 011111 <br>  0x0440 = 100 0100 0000 = <b>110</b> xxxxx 10xxxxxx = <b>110</b> 10001 <b>10</b> 000000 <br>  0x0438 = 100 0011 1000 = <b>110</b> xxxxx 10xxxxxx = <b>110</b> 10000 <b>10</b> 111000 <br>  0x0432 = 100 0011 0010 = <b>110</b> xxxxx 10xxxxxx = <b>110</b> 10000 <b>10</b> 110010 <br>  0x0435 = 100 0011 0101 = <b>110</b> xxxxx 10xxxxxx = <b>110</b> 10000 <b>10</b> 110101 <br>  0x0442 = 100 0100 0010 = <b>110</b> xxxxx 10xxxxxx = <b>110</b> 10001 <b>10</b> 000010 <br>  0x0020 = 010 0000 = <b>0</b> xxxxxx = <b>0</b> 0100000 <br>  0x0048 = 100 1000 = <b>0</b> xxxxxx = <b>0</b> 1001000 <br>  0x0069 = 110 1001 = <b>0</b> xxxxxx = <b>0</b> 1101001 <br>  <i>Counters in bold.</i>  <i>Please note: characters with codes up to 0x0080 remain unchanged, this is ASCII compatibility.</i>  <i>It should also be understood that UTF-8 will take 2 times more space (2 bytes) for Russian-language text than Windows-1251, which uses only 1 byte.</i> <br><br>  As a solution, you can record the entire sequence in a row (hopefully without errors): ‚Äú11010000 10011111 11010001 10000000 11010000 10111000 11010000 10110010 11010000 10110101 11010001 10000010 00100000 01001000 01101001‚Äù. <br><br>  You can check the solution with the code: <br><blockquote>  <font color="#000088">$ tmp</font> <font color="#339933">=</font> <font color="#0000ff">"</font> <font color="#339933">;</font> <br>  <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#990000">explode</font> <font color="#009900">(</font> <font color="#0000ff">''</font> <font color="#339933">,</font> <font color="#0000ff">'11010000 10011111 11010001 10000000 11010000 10111000 11010000 10110010 11010000 10110101 11010001 10000010 00100000 01001000 01101001'</font> <font color="#009900">)</font> <font color="#b1b100">as</font> <font color="#000088">$ octet</font> <font color="#009900">)</font> <font color="#009900">{</font> <br>  <font color="#000088">$ tmp</font> <font color="#339933">. =</font> <font color="#990000">chr</font> <font color="#009900">(</font> <font color="#990000">bindec</font> <font color="#009900">(</font> <font color="#000088">$ octet</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#009900">}</font> <br>  <font color="#b1b100">echo</font> <font color="#000088">$ tmp</font> <font color="#339933">;</font> </blockquote><br><br>  To perform the reverse operation in the code we need (simplified): <ol><li>  Determine the number of octets in the 1st character and save this value; </li><li>  From the first byte, discard the octet counter, save the remainder; </li><li>  If, in a sequence of more than 1 octet, shift the remainder after operation 2 by 6 bits to the left and record information in them from the lower 6 bits of the subsequent octet; </li><li>  Repeat from 1 point to meet :). </li></ol><br><br>  Optimized PHP code that allows you to get a numeric representation of characters and the inverse operation (publish the full version at the end of the cycle): <br><blockquote><code><a href="http://s-c.me/11935/s"></a> <a href="http://s-c.me/11935/h"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <font color="black">Copy Source | Copy HTML <font color="#0000ff">class</font> String_Multibyte { <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*    UTF-8 ,       $index   $char.</font> &lt;br/&gt; <font color="#696969">*  ,    , BOM  0x10FFFE-0x10FFFF  FALSE.</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* [...]   ,    .</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* @author Andrew Dryga &lt;anddriga at gmail&gt;, {@link http://andryx.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param  string    $char     ().</font> &lt;br/&gt; <font color="#696969">* @param int        &amp;$index    ,        .       ,   .</font> &lt;br/&gt; <font color="#696969">* @return int|false     FALSE      ,   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getCodePoint( <font color="#cc6633">$char</font> , &amp; <font color="#cc6633">$index</font> = <font color="#008000">0</font> ) { <font color="#696969">//    </font> <font color="#cc6633">$octet1</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//      ASCII  (  0bbb bbbb),   .</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">7</font> == <font color="#008000">0x00</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$octet1</font> ; } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { <font color="#696969">//    </font> <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#696969">//   </font> <font color="#cc6633">$octet2</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//     (   10bb bbbb)</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet2</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#696969">//     6 </font> <font color="#cc6633">$octet2</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#696969">//         ,   </font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">5</font> == <font color="#008000">0x06</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x1F</font> ) &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet2</font> ; <font color="#696969">//       </font> <font color="#0000ff">if</font> ( <font color="#008000">0x80</font> &lt; <font color="#cc6633">$result</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet3</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">4</font> == <font color="#008000">0x0E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x0F</font> ) &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet3</font> ; <font color="#696969">//   ;  ,    BOM</font> <font color="#0000ff">if</font> ( <font color="#008000">0x800</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; !( <font color="#008000">0xD7FF</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF900</font> ) &amp;&amp; <font color="#cc6633">$result</font> != <font color="#008000">0xFEFF</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet4</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">3</font> == <font color="#008000">0x1E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x07</font> ) &lt;&lt; <font color="#008000">18</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet3</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet4</font> ; <font color="#696969">//   ;       ;</font> <font color="#696969">// ,         Unicode 10FFFF</font> <font color="#0000ff">if</font> ( <font color="#008000">0x10000</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF0000</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } } } <font color="#0000ff">return false</font> ; } } <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*  UTF-8    .</font> &lt;br/&gt; <font color="#696969">* [...]</font> &lt;br/&gt; <font color="#696969">* @author ur001 &lt;ur001ur001@gmail.com&gt;, {@link http://ur001.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param string $codePoint Unicode character ordinal.</font> &lt;br/&gt; <font color="#696969">* @return string|FALSE UTF-8   FALSE   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getChar( <font color="#cc6633">$codePoint</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x80</font> ) { <font color="#0000ff">return</font> chr( <font color="#cc6633">$codePoint</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x800</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xC0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x10000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xE0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x110000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xF0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">18</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">else</font> { <font color="#0000ff">return false</font> ; } } }</font></code> <ol> <li> <code><font color="black"><a href="http://s-c.me/11935/s"></a> <a href="http://s-c.me/11935/h"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> Copy Source | Copy HTML <font color="#0000ff">class</font> String_Multibyte { <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*    UTF-8 ,       $index   $char.</font> &lt;br/&gt; <font color="#696969">*  ,    , BOM  0x10FFFE-0x10FFFF  FALSE.</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* [...]   ,    .</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* @author Andrew Dryga &lt;anddriga at gmail&gt;, {@link http://andryx.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param  string    $char     ().</font> &lt;br/&gt; <font color="#696969">* @param int        &amp;$index    ,        .       ,   .</font> &lt;br/&gt; <font color="#696969">* @return int|false     FALSE      ,   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getCodePoint( <font color="#cc6633">$char</font> , &amp; <font color="#cc6633">$index</font> = <font color="#008000">0</font> ) { <font color="#696969">//    </font> <font color="#cc6633">$octet1</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//      ASCII  (  0bbb bbbb),   .</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">7</font> == <font color="#008000">0x00</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$octet1</font> ; } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { <font color="#696969">//    </font> <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#696969">//   </font> <font color="#cc6633">$octet2</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//     (   10bb bbbb)</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet2</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#696969">//     6 </font> <font color="#cc6633">$octet2</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#696969">//         ,   </font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">5</font> == <font color="#008000">0x06</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x1F</font> ) &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet2</font> ; <font color="#696969">//       </font> <font color="#0000ff">if</font> ( <font color="#008000">0x80</font> &lt; <font color="#cc6633">$result</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet3</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">4</font> == <font color="#008000">0x0E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x0F</font> ) &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet3</font> ; <font color="#696969">//   ;  ,    BOM</font> <font color="#0000ff">if</font> ( <font color="#008000">0x800</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; !( <font color="#008000">0xD7FF</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF900</font> ) &amp;&amp; <font color="#cc6633">$result</font> != <font color="#008000">0xFEFF</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet4</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">3</font> == <font color="#008000">0x1E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x07</font> ) &lt;&lt; <font color="#008000">18</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet3</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet4</font> ; <font color="#696969">//   ;       ;</font> <font color="#696969">// ,         Unicode 10FFFF</font> <font color="#0000ff">if</font> ( <font color="#008000">0x10000</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF0000</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } } } <font color="#0000ff">return false</font> ; } } <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*  UTF-8    .</font> &lt;br/&gt; <font color="#696969">* [...]</font> &lt;br/&gt; <font color="#696969">* @author ur001 &lt;ur001ur001@gmail.com&gt;, {@link http://ur001.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param string $codePoint Unicode character ordinal.</font> &lt;br/&gt; <font color="#696969">* @return string|FALSE UTF-8   FALSE   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getChar( <font color="#cc6633">$codePoint</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x80</font> ) { <font color="#0000ff">return</font> chr( <font color="#cc6633">$codePoint</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x800</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xC0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x10000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xE0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x110000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xF0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">18</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">else</font> { <font color="#0000ff">return false</font> ; } } }</font></code> </li> <li> <code><font color="black"><a href="http://s-c.me/11935/s"></a> <a href="http://s-c.me/11935/h"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> Copy Source | Copy HTML <font color="#0000ff">class</font> String_Multibyte { <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*    UTF-8 ,       $index   $char.</font> &lt;br/&gt; <font color="#696969">*  ,    , BOM  0x10FFFE-0x10FFFF  FALSE.</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* [...]   ,    .</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* @author Andrew Dryga &lt;anddriga at gmail&gt;, {@link http://andryx.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param  string    $char     ().</font> &lt;br/&gt; <font color="#696969">* @param int        &amp;$index    ,        .       ,   .</font> &lt;br/&gt; <font color="#696969">* @return int|false     FALSE      ,   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getCodePoint( <font color="#cc6633">$char</font> , &amp; <font color="#cc6633">$index</font> = <font color="#008000">0</font> ) { <font color="#696969">//    </font> <font color="#cc6633">$octet1</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//      ASCII  (  0bbb bbbb),   .</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">7</font> == <font color="#008000">0x00</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$octet1</font> ; } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { <font color="#696969">//    </font> <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#696969">//   </font> <font color="#cc6633">$octet2</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//     (   10bb bbbb)</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet2</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#696969">//     6 </font> <font color="#cc6633">$octet2</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#696969">//         ,   </font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">5</font> == <font color="#008000">0x06</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x1F</font> ) &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet2</font> ; <font color="#696969">//       </font> <font color="#0000ff">if</font> ( <font color="#008000">0x80</font> &lt; <font color="#cc6633">$result</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet3</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">4</font> == <font color="#008000">0x0E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x0F</font> ) &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet3</font> ; <font color="#696969">//   ;  ,    BOM</font> <font color="#0000ff">if</font> ( <font color="#008000">0x800</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; !( <font color="#008000">0xD7FF</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF900</font> ) &amp;&amp; <font color="#cc6633">$result</font> != <font color="#008000">0xFEFF</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet4</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">3</font> == <font color="#008000">0x1E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x07</font> ) &lt;&lt; <font color="#008000">18</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet3</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet4</font> ; <font color="#696969">//   ;       ;</font> <font color="#696969">// ,         Unicode 10FFFF</font> <font color="#0000ff">if</font> ( <font color="#008000">0x10000</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF0000</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } } } <font color="#0000ff">return false</font> ; } } <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*  UTF-8    .</font> &lt;br/&gt; <font color="#696969">* [...]</font> &lt;br/&gt; <font color="#696969">* @author ur001 &lt;ur001ur001@gmail.com&gt;, {@link http://ur001.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param string $codePoint Unicode character ordinal.</font> &lt;br/&gt; <font color="#696969">* @return string|FALSE UTF-8   FALSE   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getChar( <font color="#cc6633">$codePoint</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x80</font> ) { <font color="#0000ff">return</font> chr( <font color="#cc6633">$codePoint</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x800</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xC0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x10000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xE0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x110000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xF0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">18</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">else</font> { <font color="#0000ff">return false</font> ; } } }</font></code> </li> <li> <code><font color="black"><a href="http://s-c.me/11935/s"></a> <a href="http://s-c.me/11935/h"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> Copy Source | Copy HTML <font color="#0000ff">class</font> String_Multibyte { <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*    UTF-8 ,       $index   $char.</font> &lt;br/&gt; <font color="#696969">*  ,    , BOM  0x10FFFE-0x10FFFF  FALSE.</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* [...]   ,    .</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* @author Andrew Dryga &lt;anddriga at gmail&gt;, {@link http://andryx.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param  string    $char     ().</font> &lt;br/&gt; <font color="#696969">* @param int        &amp;$index    ,        .       ,   .</font> &lt;br/&gt; <font color="#696969">* @return int|false     FALSE      ,   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getCodePoint( <font color="#cc6633">$char</font> , &amp; <font color="#cc6633">$index</font> = <font color="#008000">0</font> ) { <font color="#696969">//    </font> <font color="#cc6633">$octet1</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//      ASCII  (  0bbb bbbb),   .</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">7</font> == <font color="#008000">0x00</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$octet1</font> ; } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { <font color="#696969">//    </font> <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#696969">//   </font> <font color="#cc6633">$octet2</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//     (   10bb bbbb)</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet2</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#696969">//     6 </font> <font color="#cc6633">$octet2</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#696969">//         ,   </font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">5</font> == <font color="#008000">0x06</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x1F</font> ) &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet2</font> ; <font color="#696969">//       </font> <font color="#0000ff">if</font> ( <font color="#008000">0x80</font> &lt; <font color="#cc6633">$result</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet3</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">4</font> == <font color="#008000">0x0E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x0F</font> ) &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet3</font> ; <font color="#696969">//   ;  ,    BOM</font> <font color="#0000ff">if</font> ( <font color="#008000">0x800</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; !( <font color="#008000">0xD7FF</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF900</font> ) &amp;&amp; <font color="#cc6633">$result</font> != <font color="#008000">0xFEFF</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet4</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">3</font> == <font color="#008000">0x1E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x07</font> ) &lt;&lt; <font color="#008000">18</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet3</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet4</font> ; <font color="#696969">//   ;       ;</font> <font color="#696969">// ,         Unicode 10FFFF</font> <font color="#0000ff">if</font> ( <font color="#008000">0x10000</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF0000</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } } } <font color="#0000ff">return false</font> ; } } <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*  UTF-8    .</font> &lt;br/&gt; <font color="#696969">* [...]</font> &lt;br/&gt; <font color="#696969">* @author ur001 &lt;ur001ur001@gmail.com&gt;, {@link http://ur001.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param string $codePoint Unicode character ordinal.</font> &lt;br/&gt; <font color="#696969">* @return string|FALSE UTF-8   FALSE   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getChar( <font color="#cc6633">$codePoint</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x80</font> ) { <font color="#0000ff">return</font> chr( <font color="#cc6633">$codePoint</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x800</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xC0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x10000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xE0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x110000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xF0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">18</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">else</font> { <font color="#0000ff">return false</font> ; } } }</font></code> </li> <li> <code><font color="black"><a href="http://s-c.me/11935/s"></a> <a href="http://s-c.me/11935/h"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> Copy Source | Copy HTML <font color="#0000ff">class</font> String_Multibyte { <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*    UTF-8 ,       $index   $char.</font> &lt;br/&gt; <font color="#696969">*  ,    , BOM  0x10FFFE-0x10FFFF  FALSE.</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* [...]   ,    .</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* @author Andrew Dryga &lt;anddriga at gmail&gt;, {@link http://andryx.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param  string    $char     ().</font> &lt;br/&gt; <font color="#696969">* @param int        &amp;$index    ,        .       ,   .</font> &lt;br/&gt; <font color="#696969">* @return int|false     FALSE      ,   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getCodePoint( <font color="#cc6633">$char</font> , &amp; <font color="#cc6633">$index</font> = <font color="#008000">0</font> ) { <font color="#696969">//    </font> <font color="#cc6633">$octet1</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//      ASCII  (  0bbb bbbb),   .</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">7</font> == <font color="#008000">0x00</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$octet1</font> ; } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { <font color="#696969">//    </font> <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#696969">//   </font> <font color="#cc6633">$octet2</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//     (   10bb bbbb)</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet2</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#696969">//     6 </font> <font color="#cc6633">$octet2</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#696969">//         ,   </font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">5</font> == <font color="#008000">0x06</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x1F</font> ) &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet2</font> ; <font color="#696969">//       </font> <font color="#0000ff">if</font> ( <font color="#008000">0x80</font> &lt; <font color="#cc6633">$result</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet3</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">4</font> == <font color="#008000">0x0E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x0F</font> ) &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet3</font> ; <font color="#696969">//   ;  ,    BOM</font> <font color="#0000ff">if</font> ( <font color="#008000">0x800</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; !( <font color="#008000">0xD7FF</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF900</font> ) &amp;&amp; <font color="#cc6633">$result</font> != <font color="#008000">0xFEFF</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet4</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">3</font> == <font color="#008000">0x1E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x07</font> ) &lt;&lt; <font color="#008000">18</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet3</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet4</font> ; <font color="#696969">//   ;       ;</font> <font color="#696969">// ,         Unicode 10FFFF</font> <font color="#0000ff">if</font> ( <font color="#008000">0x10000</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF0000</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } } } <font color="#0000ff">return false</font> ; } } <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*  UTF-8    .</font> &lt;br/&gt; <font color="#696969">* [...]</font> &lt;br/&gt; <font color="#696969">* @author ur001 &lt;ur001ur001@gmail.com&gt;, {@link http://ur001.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param string $codePoint Unicode character ordinal.</font> &lt;br/&gt; <font color="#696969">* @return string|FALSE UTF-8   FALSE   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getChar( <font color="#cc6633">$codePoint</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x80</font> ) { <font color="#0000ff">return</font> chr( <font color="#cc6633">$codePoint</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x800</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xC0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x10000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xE0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x110000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xF0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">18</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">else</font> { <font color="#0000ff">return false</font> ; } } }</font></code> </li> <li> <code><font color="black"><a href="http://s-c.me/11935/s"></a> <a href="http://s-c.me/11935/h"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> Copy Source | Copy HTML <font color="#0000ff">class</font> String_Multibyte { <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*    UTF-8 ,       $index   $char.</font> &lt;br/&gt; <font color="#696969">*  ,    , BOM  0x10FFFE-0x10FFFF  FALSE.</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* [...]   ,    .</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* @author Andrew Dryga &lt;anddriga at gmail&gt;, {@link http://andryx.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param  string    $char     ().</font> &lt;br/&gt; <font color="#696969">* @param int        &amp;$index    ,        .       ,   .</font> &lt;br/&gt; <font color="#696969">* @return int|false     FALSE      ,   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getCodePoint( <font color="#cc6633">$char</font> , &amp; <font color="#cc6633">$index</font> = <font color="#008000">0</font> ) { <font color="#696969">//    </font> <font color="#cc6633">$octet1</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//      ASCII  (  0bbb bbbb),   .</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">7</font> == <font color="#008000">0x00</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$octet1</font> ; } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { <font color="#696969">//    </font> <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#696969">//   </font> <font color="#cc6633">$octet2</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//     (   10bb bbbb)</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet2</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#696969">//     6 </font> <font color="#cc6633">$octet2</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#696969">//         ,   </font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">5</font> == <font color="#008000">0x06</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x1F</font> ) &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet2</font> ; <font color="#696969">//       </font> <font color="#0000ff">if</font> ( <font color="#008000">0x80</font> &lt; <font color="#cc6633">$result</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet3</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">4</font> == <font color="#008000">0x0E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x0F</font> ) &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet3</font> ; <font color="#696969">//   ;  ,    BOM</font> <font color="#0000ff">if</font> ( <font color="#008000">0x800</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; !( <font color="#008000">0xD7FF</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF900</font> ) &amp;&amp; <font color="#cc6633">$result</font> != <font color="#008000">0xFEFF</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet4</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">3</font> == <font color="#008000">0x1E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x07</font> ) &lt;&lt; <font color="#008000">18</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet3</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet4</font> ; <font color="#696969">//   ;       ;</font> <font color="#696969">// ,         Unicode 10FFFF</font> <font color="#0000ff">if</font> ( <font color="#008000">0x10000</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF0000</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } } } <font color="#0000ff">return false</font> ; } } <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*  UTF-8    .</font> &lt;br/&gt; <font color="#696969">* [...]</font> &lt;br/&gt; <font color="#696969">* @author ur001 &lt;ur001ur001@gmail.com&gt;, {@link http://ur001.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param string $codePoint Unicode character ordinal.</font> &lt;br/&gt; <font color="#696969">* @return string|FALSE UTF-8   FALSE   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getChar( <font color="#cc6633">$codePoint</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x80</font> ) { <font color="#0000ff">return</font> chr( <font color="#cc6633">$codePoint</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x800</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xC0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x10000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xE0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x110000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xF0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">18</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">else</font> { <font color="#0000ff">return false</font> ; } } }</font></code> </li> <li> <code><font color="black"><font color="#696969"><a href="http://s-c.me/11935/s"></a> <a href="http://s-c.me/11935/h"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> Copy Source | Copy HTML <font color="#0000ff">class</font> String_Multibyte { <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*    UTF-8 ,       $index   $char.</font> &lt;br/&gt; <font color="#696969">*  ,    , BOM  0x10FFFE-0x10FFFF  FALSE.</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* [...]   ,    .</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* @author Andrew Dryga &lt;anddriga at gmail&gt;, {@link http://andryx.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param  string    $char     ().</font> &lt;br/&gt; <font color="#696969">* @param int        &amp;$index    ,        .       ,   .</font> &lt;br/&gt; <font color="#696969">* @return int|false     FALSE      ,   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getCodePoint( <font color="#cc6633">$char</font> , &amp; <font color="#cc6633">$index</font> = <font color="#008000">0</font> ) { //     <font color="#cc6633">$octet1</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//      ASCII  (  0bbb bbbb),   .</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">7</font> == <font color="#008000">0x00</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$octet1</font> ; } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { <font color="#696969">//    </font> <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#696969">//   </font> <font color="#cc6633">$octet2</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//     (   10bb bbbb)</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet2</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#696969">//     6 </font> <font color="#cc6633">$octet2</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#696969">//         ,   </font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">5</font> == <font color="#008000">0x06</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x1F</font> ) &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet2</font> ; <font color="#696969">//       </font> <font color="#0000ff">if</font> ( <font color="#008000">0x80</font> &lt; <font color="#cc6633">$result</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet3</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">4</font> == <font color="#008000">0x0E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x0F</font> ) &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet3</font> ; <font color="#696969">//   ;  ,    BOM</font> <font color="#0000ff">if</font> ( <font color="#008000">0x800</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; !( <font color="#008000">0xD7FF</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF900</font> ) &amp;&amp; <font color="#cc6633">$result</font> != <font color="#008000">0xFEFF</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet4</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">3</font> == <font color="#008000">0x1E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x07</font> ) &lt;&lt; <font color="#008000">18</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet3</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet4</font> ; <font color="#696969">//   ;       ;</font> <font color="#696969">// ,         Unicode 10FFFF</font> <font color="#0000ff">if</font> ( <font color="#008000">0x10000</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF0000</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } } } <font color="#0000ff">return false</font> ; } } <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*  UTF-8    .</font> &lt;br/&gt; <font color="#696969">* [...]</font> &lt;br/&gt; <font color="#696969">* @author ur001 &lt;ur001ur001@gmail.com&gt;, {@link http://ur001.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param string $codePoint Unicode character ordinal.</font> &lt;br/&gt; <font color="#696969">* @return string|FALSE UTF-8   FALSE   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getChar( <font color="#cc6633">$codePoint</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x80</font> ) { <font color="#0000ff">return</font> chr( <font color="#cc6633">$codePoint</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x800</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xC0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x10000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xE0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x110000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xF0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">18</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">else</font> { <font color="#0000ff">return false</font> ; } } }</font></font></code> </li> <li> <code><font color="black"><a href="http://s-c.me/11935/s"></a> <a href="http://s-c.me/11935/h"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> Copy Source | Copy HTML <font color="#0000ff">class</font> String_Multibyte { <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*    UTF-8 ,       $index   $char.</font> &lt;br/&gt; <font color="#696969">*  ,    , BOM  0x10FFFE-0x10FFFF  FALSE.</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* [...]   ,    .</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* @author Andrew Dryga &lt;anddriga at gmail&gt;, {@link http://andryx.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param  string    $char     ().</font> &lt;br/&gt; <font color="#696969">* @param int        &amp;$index    ,        .       ,   .</font> &lt;br/&gt; <font color="#696969">* @return int|false     FALSE      ,   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getCodePoint( <font color="#cc6633">$char</font> , &amp; <font color="#cc6633">$index</font> = <font color="#008000">0</font> ) { <font color="#696969">//    </font> <font color="#cc6633">$octet1</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//      ASCII  (  0bbb bbbb),   .</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">7</font> == <font color="#008000">0x00</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$octet1</font> ; } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { <font color="#696969">//    </font> <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#696969">//   </font> <font color="#cc6633">$octet2</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//     (   10bb bbbb)</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet2</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#696969">//     6 </font> <font color="#cc6633">$octet2</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#696969">//         ,   </font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">5</font> == <font color="#008000">0x06</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x1F</font> ) &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet2</font> ; <font color="#696969">//       </font> <font color="#0000ff">if</font> ( <font color="#008000">0x80</font> &lt; <font color="#cc6633">$result</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet3</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">4</font> == <font color="#008000">0x0E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x0F</font> ) &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet3</font> ; <font color="#696969">//   ;  ,    BOM</font> <font color="#0000ff">if</font> ( <font color="#008000">0x800</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; !( <font color="#008000">0xD7FF</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF900</font> ) &amp;&amp; <font color="#cc6633">$result</font> != <font color="#008000">0xFEFF</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet4</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">3</font> == <font color="#008000">0x1E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x07</font> ) &lt;&lt; <font color="#008000">18</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet3</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet4</font> ; <font color="#696969">//   ;       ;</font> <font color="#696969">// ,         Unicode 10FFFF</font> <font color="#0000ff">if</font> ( <font color="#008000">0x10000</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF0000</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } } } <font color="#0000ff">return false</font> ; } } <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*  UTF-8    .</font> &lt;br/&gt; <font color="#696969">* [...]</font> &lt;br/&gt; <font color="#696969">* @author ur001 &lt;ur001ur001@gmail.com&gt;, {@link http://ur001.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param string $codePoint Unicode character ordinal.</font> &lt;br/&gt; <font color="#696969">* @return string|FALSE UTF-8   FALSE   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getChar( <font color="#cc6633">$codePoint</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x80</font> ) { <font color="#0000ff">return</font> chr( <font color="#cc6633">$codePoint</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x800</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xC0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x10000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xE0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x110000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xF0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">18</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">else</font> { <font color="#0000ff">return false</font> ; } } }</font></code> </li> <li> <code><font color="black"><font color="#696969"><a href="http://s-c.me/11935/s"></a> <a href="http://s-c.me/11935/h"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> Copy Source | Copy HTML <font color="#0000ff">class</font> String_Multibyte { <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*    UTF-8 ,       $index   $char.</font> &lt;br/&gt; <font color="#696969">*  ,    , BOM  0x10FFFE-0x10FFFF  FALSE.</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* [...]   ,    .</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* @author Andrew Dryga &lt;anddriga at gmail&gt;, {@link http://andryx.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param  string    $char     ().</font> &lt;br/&gt; <font color="#696969">* @param int        &amp;$index    ,        .       ,   .</font> &lt;br/&gt; <font color="#696969">* @return int|false     FALSE      ,   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getCodePoint( <font color="#cc6633">$char</font> , &amp; <font color="#cc6633">$index</font> = <font color="#008000">0</font> ) { <font color="#696969">//    </font> <font color="#cc6633">$octet1</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); //      ASCII  (  0bbb bbbb),   . <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">7</font> == <font color="#008000">0x00</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$octet1</font> ; } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { <font color="#696969">//    </font> <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#696969">//   </font> <font color="#cc6633">$octet2</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//     (   10bb bbbb)</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet2</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#696969">//     6 </font> <font color="#cc6633">$octet2</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#696969">//         ,   </font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">5</font> == <font color="#008000">0x06</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x1F</font> ) &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet2</font> ; <font color="#696969">//       </font> <font color="#0000ff">if</font> ( <font color="#008000">0x80</font> &lt; <font color="#cc6633">$result</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet3</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">4</font> == <font color="#008000">0x0E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x0F</font> ) &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet3</font> ; <font color="#696969">//   ;  ,    BOM</font> <font color="#0000ff">if</font> ( <font color="#008000">0x800</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; !( <font color="#008000">0xD7FF</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF900</font> ) &amp;&amp; <font color="#cc6633">$result</font> != <font color="#008000">0xFEFF</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet4</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">3</font> == <font color="#008000">0x1E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x07</font> ) &lt;&lt; <font color="#008000">18</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet3</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet4</font> ; <font color="#696969">//   ;       ;</font> <font color="#696969">// ,         Unicode 10FFFF</font> <font color="#0000ff">if</font> ( <font color="#008000">0x10000</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF0000</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } } } <font color="#0000ff">return false</font> ; } } <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*  UTF-8    .</font> &lt;br/&gt; <font color="#696969">* [...]</font> &lt;br/&gt; <font color="#696969">* @author ur001 &lt;ur001ur001@gmail.com&gt;, {@link http://ur001.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param string $codePoint Unicode character ordinal.</font> &lt;br/&gt; <font color="#696969">* @return string|FALSE UTF-8   FALSE   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getChar( <font color="#cc6633">$codePoint</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x80</font> ) { <font color="#0000ff">return</font> chr( <font color="#cc6633">$codePoint</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x800</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xC0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x10000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xE0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x110000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xF0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">18</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">else</font> { <font color="#0000ff">return false</font> ; } } }</font></font></code> </li> <li> <code><font color="black"><a href="http://s-c.me/11935/s"></a> <a href="http://s-c.me/11935/h"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> Copy Source | Copy HTML <font color="#0000ff">class</font> String_Multibyte { <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*    UTF-8 ,       $index   $char.</font> &lt;br/&gt; <font color="#696969">*  ,    , BOM  0x10FFFE-0x10FFFF  FALSE.</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* [...]   ,    .</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* @author Andrew Dryga &lt;anddriga at gmail&gt;, {@link http://andryx.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param  string    $char     ().</font> &lt;br/&gt; <font color="#696969">* @param int        &amp;$index    ,        .       ,   .</font> &lt;br/&gt; <font color="#696969">* @return int|false     FALSE      ,   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getCodePoint( <font color="#cc6633">$char</font> , &amp; <font color="#cc6633">$index</font> = <font color="#008000">0</font> ) { <font color="#696969">//    </font> <font color="#cc6633">$octet1</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//      ASCII  (  0bbb bbbb),   .</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">7</font> == <font color="#008000">0x00</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$octet1</font> ; } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { <font color="#696969">//    </font> <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#696969">//   </font> <font color="#cc6633">$octet2</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//     (   10bb bbbb)</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet2</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#696969">//     6 </font> <font color="#cc6633">$octet2</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#696969">//         ,   </font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">5</font> == <font color="#008000">0x06</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x1F</font> ) &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet2</font> ; <font color="#696969">//       </font> <font color="#0000ff">if</font> ( <font color="#008000">0x80</font> &lt; <font color="#cc6633">$result</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet3</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">4</font> == <font color="#008000">0x0E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x0F</font> ) &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet3</font> ; <font color="#696969">//   ;  ,    BOM</font> <font color="#0000ff">if</font> ( <font color="#008000">0x800</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; !( <font color="#008000">0xD7FF</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF900</font> ) &amp;&amp; <font color="#cc6633">$result</font> != <font color="#008000">0xFEFF</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet4</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">3</font> == <font color="#008000">0x1E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x07</font> ) &lt;&lt; <font color="#008000">18</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet3</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet4</font> ; <font color="#696969">//   ;       ;</font> <font color="#696969">// ,         Unicode 10FFFF</font> <font color="#0000ff">if</font> ( <font color="#008000">0x10000</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF0000</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } } } <font color="#0000ff">return false</font> ; } } <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*  UTF-8    .</font> &lt;br/&gt; <font color="#696969">* [...]</font> &lt;br/&gt; <font color="#696969">* @author ur001 &lt;ur001ur001@gmail.com&gt;, {@link http://ur001.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param string $codePoint Unicode character ordinal.</font> &lt;br/&gt; <font color="#696969">* @return string|FALSE UTF-8   FALSE   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getChar( <font color="#cc6633">$codePoint</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x80</font> ) { <font color="#0000ff">return</font> chr( <font color="#cc6633">$codePoint</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x800</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xC0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x10000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xE0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x110000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xF0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">18</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">else</font> { <font color="#0000ff">return false</font> ; } } }</font></code> </li> <li> <code><font color="black"><a href="http://s-c.me/11935/s"></a> <a href="http://s-c.me/11935/h"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> Copy Source | Copy HTML <font color="#0000ff">class</font> String_Multibyte { <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*    UTF-8 ,       $index   $char.</font> &lt;br/&gt; <font color="#696969">*  ,    , BOM  0x10FFFE-0x10FFFF  FALSE.</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* [...]   ,    .</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* @author Andrew Dryga &lt;anddriga at gmail&gt;, {@link http://andryx.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param  string    $char     ().</font> &lt;br/&gt; <font color="#696969">* @param int        &amp;$index    ,        .       ,   .</font> &lt;br/&gt; <font color="#696969">* @return int|false     FALSE      ,   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getCodePoint( <font color="#cc6633">$char</font> , &amp; <font color="#cc6633">$index</font> = <font color="#008000">0</font> ) { <font color="#696969">//    </font> <font color="#cc6633">$octet1</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//      ASCII  (  0bbb bbbb),   .</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">7</font> == <font color="#008000">0x00</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$octet1</font> ; } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { <font color="#696969">//    </font> <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#696969">//   </font> <font color="#cc6633">$octet2</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//     (   10bb bbbb)</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet2</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#696969">//     6 </font> <font color="#cc6633">$octet2</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#696969">//         ,   </font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">5</font> == <font color="#008000">0x06</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x1F</font> ) &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet2</font> ; <font color="#696969">//       </font> <font color="#0000ff">if</font> ( <font color="#008000">0x80</font> &lt; <font color="#cc6633">$result</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet3</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">4</font> == <font color="#008000">0x0E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x0F</font> ) &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet3</font> ; <font color="#696969">//   ;  ,    BOM</font> <font color="#0000ff">if</font> ( <font color="#008000">0x800</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; !( <font color="#008000">0xD7FF</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF900</font> ) &amp;&amp; <font color="#cc6633">$result</font> != <font color="#008000">0xFEFF</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet4</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">3</font> == <font color="#008000">0x1E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x07</font> ) &lt;&lt; <font color="#008000">18</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet3</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet4</font> ; <font color="#696969">//   ;       ;</font> <font color="#696969">// ,         Unicode 10FFFF</font> <font color="#0000ff">if</font> ( <font color="#008000">0x10000</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF0000</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } } } <font color="#0000ff">return false</font> ; } } <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*  UTF-8    .</font> &lt;br/&gt; <font color="#696969">* [...]</font> &lt;br/&gt; <font color="#696969">* @author ur001 &lt;ur001ur001@gmail.com&gt;, {@link http://ur001.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param string $codePoint Unicode character ordinal.</font> &lt;br/&gt; <font color="#696969">* @return string|FALSE UTF-8   FALSE   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getChar( <font color="#cc6633">$codePoint</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x80</font> ) { <font color="#0000ff">return</font> chr( <font color="#cc6633">$codePoint</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x800</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xC0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x10000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xE0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x110000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xF0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">18</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">else</font> { <font color="#0000ff">return false</font> ; } } }</font></code> </li> <li> <code><font color="black"><a href="http://s-c.me/11935/s"></a> <a href="http://s-c.me/11935/h"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> Copy Source | Copy HTML <font color="#0000ff">class</font> String_Multibyte { <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*    UTF-8 ,       $index   $char.</font> &lt;br/&gt; <font color="#696969">*  ,    , BOM  0x10FFFE-0x10FFFF  FALSE.</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* [...]   ,    .</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* @author Andrew Dryga &lt;anddriga at gmail&gt;, {@link http://andryx.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param  string    $char     ().</font> &lt;br/&gt; <font color="#696969">* @param int        &amp;$index    ,        .       ,   .</font> &lt;br/&gt; <font color="#696969">* @return int|false     FALSE      ,   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getCodePoint( <font color="#cc6633">$char</font> , &amp; <font color="#cc6633">$index</font> = <font color="#008000">0</font> ) { <font color="#696969">//    </font> <font color="#cc6633">$octet1</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//      ASCII  (  0bbb bbbb),   .</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">7</font> == <font color="#008000">0x00</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$octet1</font> ; } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { <font color="#696969">//    </font> <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#696969">//   </font> <font color="#cc6633">$octet2</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//     (   10bb bbbb)</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet2</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#696969">//     6 </font> <font color="#cc6633">$octet2</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#696969">//         ,   </font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">5</font> == <font color="#008000">0x06</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x1F</font> ) &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet2</font> ; <font color="#696969">//       </font> <font color="#0000ff">if</font> ( <font color="#008000">0x80</font> &lt; <font color="#cc6633">$result</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet3</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">4</font> == <font color="#008000">0x0E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x0F</font> ) &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet3</font> ; <font color="#696969">//   ;  ,    BOM</font> <font color="#0000ff">if</font> ( <font color="#008000">0x800</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; !( <font color="#008000">0xD7FF</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF900</font> ) &amp;&amp; <font color="#cc6633">$result</font> != <font color="#008000">0xFEFF</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet4</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">3</font> == <font color="#008000">0x1E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x07</font> ) &lt;&lt; <font color="#008000">18</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet3</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet4</font> ; <font color="#696969">//   ;       ;</font> <font color="#696969">// ,         Unicode 10FFFF</font> <font color="#0000ff">if</font> ( <font color="#008000">0x10000</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF0000</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } } } <font color="#0000ff">return false</font> ; } } <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*  UTF-8    .</font> &lt;br/&gt; <font color="#696969">* [...]</font> &lt;br/&gt; <font color="#696969">* @author ur001 &lt;ur001ur001@gmail.com&gt;, {@link http://ur001.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param string $codePoint Unicode character ordinal.</font> &lt;br/&gt; <font color="#696969">* @return string|FALSE UTF-8   FALSE   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getChar( <font color="#cc6633">$codePoint</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x80</font> ) { <font color="#0000ff">return</font> chr( <font color="#cc6633">$codePoint</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x800</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xC0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x10000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xE0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x110000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xF0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">18</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">else</font> { <font color="#0000ff">return false</font> ; } } }</font></code> </li> <li> <code><font color="black"><font color="#696969"><a href="http://s-c.me/11935/s"></a> <a href="http://s-c.me/11935/h"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> Copy Source | Copy HTML <font color="#0000ff">class</font> String_Multibyte { <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*    UTF-8 ,       $index   $char.</font> &lt;br/&gt; <font color="#696969">*  ,    , BOM  0x10FFFE-0x10FFFF  FALSE.</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* [...]   ,    .</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* @author Andrew Dryga &lt;anddriga at gmail&gt;, {@link http://andryx.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param  string    $char     ().</font> &lt;br/&gt; <font color="#696969">* @param int        &amp;$index    ,        .       ,   .</font> &lt;br/&gt; <font color="#696969">* @return int|false     FALSE      ,   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getCodePoint( <font color="#cc6633">$char</font> , &amp; <font color="#cc6633">$index</font> = <font color="#008000">0</font> ) { <font color="#696969">//    </font> <font color="#cc6633">$octet1</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//      ASCII  (  0bbb bbbb),   .</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">7</font> == <font color="#008000">0x00</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$octet1</font> ; } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { //     <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#696969">//   </font> <font color="#cc6633">$octet2</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//     (   10bb bbbb)</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet2</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#696969">//     6 </font> <font color="#cc6633">$octet2</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#696969">//         ,   </font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">5</font> == <font color="#008000">0x06</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x1F</font> ) &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet2</font> ; <font color="#696969">//       </font> <font color="#0000ff">if</font> ( <font color="#008000">0x80</font> &lt; <font color="#cc6633">$result</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet3</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">4</font> == <font color="#008000">0x0E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x0F</font> ) &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet3</font> ; <font color="#696969">//   ;  ,    BOM</font> <font color="#0000ff">if</font> ( <font color="#008000">0x800</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; !( <font color="#008000">0xD7FF</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF900</font> ) &amp;&amp; <font color="#cc6633">$result</font> != <font color="#008000">0xFEFF</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet4</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">3</font> == <font color="#008000">0x1E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x07</font> ) &lt;&lt; <font color="#008000">18</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet3</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet4</font> ; <font color="#696969">//   ;       ;</font> <font color="#696969">// ,         Unicode 10FFFF</font> <font color="#0000ff">if</font> ( <font color="#008000">0x10000</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF0000</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } } } <font color="#0000ff">return false</font> ; } } <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*  UTF-8    .</font> &lt;br/&gt; <font color="#696969">* [...]</font> &lt;br/&gt; <font color="#696969">* @author ur001 &lt;ur001ur001@gmail.com&gt;, {@link http://ur001.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param string $codePoint Unicode character ordinal.</font> &lt;br/&gt; <font color="#696969">* @return string|FALSE UTF-8   FALSE   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getChar( <font color="#cc6633">$codePoint</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x80</font> ) { <font color="#0000ff">return</font> chr( <font color="#cc6633">$codePoint</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x800</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xC0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x10000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xE0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x110000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xF0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">18</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">else</font> { <font color="#0000ff">return false</font> ; } } }</font></font></code> </li> <li> <code><font color="black"><a href="http://s-c.me/11935/s"></a> <a href="http://s-c.me/11935/h"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> Copy Source | Copy HTML <font color="#0000ff">class</font> String_Multibyte { <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*    UTF-8 ,       $index   $char.</font> &lt;br/&gt; <font color="#696969">*  ,    , BOM  0x10FFFE-0x10FFFF  FALSE.</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* [...]   ,    .</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* @author Andrew Dryga &lt;anddriga at gmail&gt;, {@link http://andryx.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param  string    $char     ().</font> &lt;br/&gt; <font color="#696969">* @param int        &amp;$index    ,        .       ,   .</font> &lt;br/&gt; <font color="#696969">* @return int|false     FALSE      ,   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getCodePoint( <font color="#cc6633">$char</font> , &amp; <font color="#cc6633">$index</font> = <font color="#008000">0</font> ) { <font color="#696969">//    </font> <font color="#cc6633">$octet1</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//      ASCII  (  0bbb bbbb),   .</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">7</font> == <font color="#008000">0x00</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$octet1</font> ; } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { <font color="#696969">//    </font> <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#696969">//   </font> <font color="#cc6633">$octet2</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//     (   10bb bbbb)</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet2</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#696969">//     6 </font> <font color="#cc6633">$octet2</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#696969">//         ,   </font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">5</font> == <font color="#008000">0x06</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x1F</font> ) &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet2</font> ; <font color="#696969">//       </font> <font color="#0000ff">if</font> ( <font color="#008000">0x80</font> &lt; <font color="#cc6633">$result</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet3</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">4</font> == <font color="#008000">0x0E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x0F</font> ) &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet3</font> ; <font color="#696969">//   ;  ,    BOM</font> <font color="#0000ff">if</font> ( <font color="#008000">0x800</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; !( <font color="#008000">0xD7FF</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF900</font> ) &amp;&amp; <font color="#cc6633">$result</font> != <font color="#008000">0xFEFF</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet4</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">3</font> == <font color="#008000">0x1E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x07</font> ) &lt;&lt; <font color="#008000">18</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet3</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet4</font> ; <font color="#696969">//   ;       ;</font> <font color="#696969">// ,         Unicode 10FFFF</font> <font color="#0000ff">if</font> ( <font color="#008000">0x10000</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF0000</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } } } <font color="#0000ff">return false</font> ; } } <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*  UTF-8    .</font> &lt;br/&gt; <font color="#696969">* [...]</font> &lt;br/&gt; <font color="#696969">* @author ur001 &lt;ur001ur001@gmail.com&gt;, {@link http://ur001.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param string $codePoint Unicode character ordinal.</font> &lt;br/&gt; <font color="#696969">* @return string|FALSE UTF-8   FALSE   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getChar( <font color="#cc6633">$codePoint</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x80</font> ) { <font color="#0000ff">return</font> chr( <font color="#cc6633">$codePoint</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x800</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xC0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x10000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xE0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x110000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xF0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">18</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">else</font> { <font color="#0000ff">return false</font> ; } } }</font></code> </li> <li> <code><font color="black"><a href="http://s-c.me/11935/s"></a> <a href="http://s-c.me/11935/h"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> Copy Source | Copy HTML <font color="#0000ff">class</font> String_Multibyte { <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*    UTF-8 ,       $index   $char.</font> &lt;br/&gt; <font color="#696969">*  ,    , BOM  0x10FFFE-0x10FFFF  FALSE.</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* [...]   ,    .</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* @author Andrew Dryga &lt;anddriga at gmail&gt;, {@link http://andryx.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param  string    $char     ().</font> &lt;br/&gt; <font color="#696969">* @param int        &amp;$index    ,        .       ,   .</font> &lt;br/&gt; <font color="#696969">* @return int|false     FALSE      ,   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getCodePoint( <font color="#cc6633">$char</font> , &amp; <font color="#cc6633">$index</font> = <font color="#008000">0</font> ) { <font color="#696969">//    </font> <font color="#cc6633">$octet1</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//      ASCII  (  0bbb bbbb),   .</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">7</font> == <font color="#008000">0x00</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$octet1</font> ; } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { <font color="#696969">//    </font> <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#696969">//   </font> <font color="#cc6633">$octet2</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//     (   10bb bbbb)</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet2</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#696969">//     6 </font> <font color="#cc6633">$octet2</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#696969">//         ,   </font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">5</font> == <font color="#008000">0x06</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x1F</font> ) &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet2</font> ; <font color="#696969">//       </font> <font color="#0000ff">if</font> ( <font color="#008000">0x80</font> &lt; <font color="#cc6633">$result</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet3</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">4</font> == <font color="#008000">0x0E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x0F</font> ) &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet3</font> ; <font color="#696969">//   ;  ,    BOM</font> <font color="#0000ff">if</font> ( <font color="#008000">0x800</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; !( <font color="#008000">0xD7FF</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF900</font> ) &amp;&amp; <font color="#cc6633">$result</font> != <font color="#008000">0xFEFF</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet4</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">3</font> == <font color="#008000">0x1E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x07</font> ) &lt;&lt; <font color="#008000">18</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet3</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet4</font> ; <font color="#696969">//   ;       ;</font> <font color="#696969">// ,         Unicode 10FFFF</font> <font color="#0000ff">if</font> ( <font color="#008000">0x10000</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF0000</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } } } <font color="#0000ff">return false</font> ; } } <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*  UTF-8    .</font> &lt;br/&gt; <font color="#696969">* [...]</font> &lt;br/&gt; <font color="#696969">* @author ur001 &lt;ur001ur001@gmail.com&gt;, {@link http://ur001.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param string $codePoint Unicode character ordinal.</font> &lt;br/&gt; <font color="#696969">* @return string|FALSE UTF-8   FALSE   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getChar( <font color="#cc6633">$codePoint</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x80</font> ) { <font color="#0000ff">return</font> chr( <font color="#cc6633">$codePoint</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x800</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xC0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x10000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xE0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x110000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xF0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">18</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">else</font> { <font color="#0000ff">return false</font> ; } } }</font></code> </li> <li> <code><font color="black"><a href="http://s-c.me/11935/s"></a> <a href="http://s-c.me/11935/h"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> Copy Source | Copy HTML <font color="#0000ff">class</font> String_Multibyte { <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*    UTF-8 ,       $index   $char.</font> &lt;br/&gt; <font color="#696969">*  ,    , BOM  0x10FFFE-0x10FFFF  FALSE.</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* [...]   ,    .</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* @author Andrew Dryga &lt;anddriga at gmail&gt;, {@link http://andryx.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param  string    $char     ().</font> &lt;br/&gt; <font color="#696969">* @param int        &amp;$index    ,        .       ,   .</font> &lt;br/&gt; <font color="#696969">* @return int|false     FALSE      ,   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getCodePoint( <font color="#cc6633">$char</font> , &amp; <font color="#cc6633">$index</font> = <font color="#008000">0</font> ) { <font color="#696969">//    </font> <font color="#cc6633">$octet1</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//      ASCII  (  0bbb bbbb),   .</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">7</font> == <font color="#008000">0x00</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$octet1</font> ; } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { <font color="#696969">//    </font> <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#696969">//   </font> <font color="#cc6633">$octet2</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//     (   10bb bbbb)</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet2</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#696969">//     6 </font> <font color="#cc6633">$octet2</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#696969">//         ,   </font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">5</font> == <font color="#008000">0x06</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x1F</font> ) &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet2</font> ; <font color="#696969">//       </font> <font color="#0000ff">if</font> ( <font color="#008000">0x80</font> &lt; <font color="#cc6633">$result</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet3</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">4</font> == <font color="#008000">0x0E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x0F</font> ) &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet3</font> ; <font color="#696969">//   ;  ,    BOM</font> <font color="#0000ff">if</font> ( <font color="#008000">0x800</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; !( <font color="#008000">0xD7FF</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF900</font> ) &amp;&amp; <font color="#cc6633">$result</font> != <font color="#008000">0xFEFF</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet4</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">3</font> == <font color="#008000">0x1E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x07</font> ) &lt;&lt; <font color="#008000">18</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet3</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet4</font> ; <font color="#696969">//   ;       ;</font> <font color="#696969">// ,         Unicode 10FFFF</font> <font color="#0000ff">if</font> ( <font color="#008000">0x10000</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF0000</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } } } <font color="#0000ff">return false</font> ; } } <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*  UTF-8    .</font> &lt;br/&gt; <font color="#696969">* [...]</font> &lt;br/&gt; <font color="#696969">* @author ur001 &lt;ur001ur001@gmail.com&gt;, {@link http://ur001.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param string $codePoint Unicode character ordinal.</font> &lt;br/&gt; <font color="#696969">* @return string|FALSE UTF-8   FALSE   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getChar( <font color="#cc6633">$codePoint</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x80</font> ) { <font color="#0000ff">return</font> chr( <font color="#cc6633">$codePoint</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x800</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xC0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x10000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xE0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x110000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xF0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">18</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">else</font> { <font color="#0000ff">return false</font> ; } } }</font></code> </li> <li> <code><font color="black"><font color="#696969"><a href="http://s-c.me/11935/s"></a> <a href="http://s-c.me/11935/h"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> Copy Source | Copy HTML <font color="#0000ff">class</font> String_Multibyte { <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*    UTF-8 ,       $index   $char.</font> &lt;br/&gt; <font color="#696969">*  ,    , BOM  0x10FFFE-0x10FFFF  FALSE.</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* [...]   ,    .</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* @author Andrew Dryga &lt;anddriga at gmail&gt;, {@link http://andryx.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param  string    $char     ().</font> &lt;br/&gt; <font color="#696969">* @param int        &amp;$index    ,        .       ,   .</font> &lt;br/&gt; <font color="#696969">* @return int|false     FALSE      ,   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getCodePoint( <font color="#cc6633">$char</font> , &amp; <font color="#cc6633">$index</font> = <font color="#008000">0</font> ) { <font color="#696969">//    </font> <font color="#cc6633">$octet1</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//      ASCII  (  0bbb bbbb),   .</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">7</font> == <font color="#008000">0x00</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$octet1</font> ; } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { <font color="#696969">//    </font> <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } //    <font color="#cc6633">$octet2</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//     (   10bb bbbb)</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet2</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#696969">//     6 </font> <font color="#cc6633">$octet2</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#696969">//         ,   </font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">5</font> == <font color="#008000">0x06</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x1F</font> ) &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet2</font> ; <font color="#696969">//       </font> <font color="#0000ff">if</font> ( <font color="#008000">0x80</font> &lt; <font color="#cc6633">$result</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet3</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">4</font> == <font color="#008000">0x0E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x0F</font> ) &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet3</font> ; <font color="#696969">//   ;  ,    BOM</font> <font color="#0000ff">if</font> ( <font color="#008000">0x800</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; !( <font color="#008000">0xD7FF</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF900</font> ) &amp;&amp; <font color="#cc6633">$result</font> != <font color="#008000">0xFEFF</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet4</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">3</font> == <font color="#008000">0x1E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x07</font> ) &lt;&lt; <font color="#008000">18</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet3</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet4</font> ; <font color="#696969">//   ;       ;</font> <font color="#696969">// ,         Unicode 10FFFF</font> <font color="#0000ff">if</font> ( <font color="#008000">0x10000</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF0000</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } } } <font color="#0000ff">return false</font> ; } } <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*  UTF-8    .</font> &lt;br/&gt; <font color="#696969">* [...]</font> &lt;br/&gt; <font color="#696969">* @author ur001 &lt;ur001ur001@gmail.com&gt;, {@link http://ur001.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param string $codePoint Unicode character ordinal.</font> &lt;br/&gt; <font color="#696969">* @return string|FALSE UTF-8   FALSE   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getChar( <font color="#cc6633">$codePoint</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x80</font> ) { <font color="#0000ff">return</font> chr( <font color="#cc6633">$codePoint</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x800</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xC0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x10000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xE0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x110000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xF0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">18</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">else</font> { <font color="#0000ff">return false</font> ; } } }</font></font></code> </li> <li> <code><font color="black"><a href="http://s-c.me/11935/s"></a> <a href="http://s-c.me/11935/h"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> Copy Source | Copy HTML <font color="#0000ff">class</font> String_Multibyte { <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*    UTF-8 ,       $index   $char.</font> &lt;br/&gt; <font color="#696969">*  ,    , BOM  0x10FFFE-0x10FFFF  FALSE.</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* [...]   ,    .</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* @author Andrew Dryga &lt;anddriga at gmail&gt;, {@link http://andryx.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param  string    $char     ().</font> &lt;br/&gt; <font color="#696969">* @param int        &amp;$index    ,        .       ,   .</font> &lt;br/&gt; <font color="#696969">* @return int|false     FALSE      ,   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getCodePoint( <font color="#cc6633">$char</font> , &amp; <font color="#cc6633">$index</font> = <font color="#008000">0</font> ) { <font color="#696969">//    </font> <font color="#cc6633">$octet1</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//      ASCII  (  0bbb bbbb),   .</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">7</font> == <font color="#008000">0x00</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$octet1</font> ; } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { <font color="#696969">//    </font> <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#696969">//   </font> <font color="#cc6633">$octet2</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//     (   10bb bbbb)</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet2</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#696969">//     6 </font> <font color="#cc6633">$octet2</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#696969">//         ,   </font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">5</font> == <font color="#008000">0x06</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x1F</font> ) &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet2</font> ; <font color="#696969">//       </font> <font color="#0000ff">if</font> ( <font color="#008000">0x80</font> &lt; <font color="#cc6633">$result</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet3</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">4</font> == <font color="#008000">0x0E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x0F</font> ) &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet3</font> ; <font color="#696969">//   ;  ,    BOM</font> <font color="#0000ff">if</font> ( <font color="#008000">0x800</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; !( <font color="#008000">0xD7FF</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF900</font> ) &amp;&amp; <font color="#cc6633">$result</font> != <font color="#008000">0xFEFF</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet4</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">3</font> == <font color="#008000">0x1E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x07</font> ) &lt;&lt; <font color="#008000">18</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet3</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet4</font> ; <font color="#696969">//   ;       ;</font> <font color="#696969">// ,         Unicode 10FFFF</font> <font color="#0000ff">if</font> ( <font color="#008000">0x10000</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF0000</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } } } <font color="#0000ff">return false</font> ; } } <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*  UTF-8    .</font> &lt;br/&gt; <font color="#696969">* [...]</font> &lt;br/&gt; <font color="#696969">* @author ur001 &lt;ur001ur001@gmail.com&gt;, {@link http://ur001.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param string $codePoint Unicode character ordinal.</font> &lt;br/&gt; <font color="#696969">* @return string|FALSE UTF-8   FALSE   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getChar( <font color="#cc6633">$codePoint</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x80</font> ) { <font color="#0000ff">return</font> chr( <font color="#cc6633">$codePoint</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x800</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xC0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x10000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xE0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x110000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xF0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">18</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">else</font> { <font color="#0000ff">return false</font> ; } } }</font></code> </li> <li> <code><font color="black"><font color="#696969"><a href="http://s-c.me/11935/s"></a> <a href="http://s-c.me/11935/h"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> Copy Source | Copy HTML <font color="#0000ff">class</font> String_Multibyte { <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*    UTF-8 ,       $index   $char.</font> &lt;br/&gt; <font color="#696969">*  ,    , BOM  0x10FFFE-0x10FFFF  FALSE.</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* [...]   ,    .</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* @author Andrew Dryga &lt;anddriga at gmail&gt;, {@link http://andryx.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param  string    $char     ().</font> &lt;br/&gt; <font color="#696969">* @param int        &amp;$index    ,        .       ,   .</font> &lt;br/&gt; <font color="#696969">* @return int|false     FALSE      ,   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getCodePoint( <font color="#cc6633">$char</font> , &amp; <font color="#cc6633">$index</font> = <font color="#008000">0</font> ) { <font color="#696969">//    </font> <font color="#cc6633">$octet1</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//      ASCII  (  0bbb bbbb),   .</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">7</font> == <font color="#008000">0x00</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$octet1</font> ; } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { <font color="#696969">//    </font> <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#696969">//   </font> <font color="#cc6633">$octet2</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); //     (   10bb bbbb) <font color="#0000ff">if</font> ( <font color="#cc6633">$octet2</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#696969">//     6 </font> <font color="#cc6633">$octet2</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#696969">//         ,   </font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">5</font> == <font color="#008000">0x06</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x1F</font> ) &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet2</font> ; <font color="#696969">//       </font> <font color="#0000ff">if</font> ( <font color="#008000">0x80</font> &lt; <font color="#cc6633">$result</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet3</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">4</font> == <font color="#008000">0x0E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x0F</font> ) &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet3</font> ; <font color="#696969">//   ;  ,    BOM</font> <font color="#0000ff">if</font> ( <font color="#008000">0x800</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; !( <font color="#008000">0xD7FF</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF900</font> ) &amp;&amp; <font color="#cc6633">$result</font> != <font color="#008000">0xFEFF</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet4</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">3</font> == <font color="#008000">0x1E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x07</font> ) &lt;&lt; <font color="#008000">18</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet3</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet4</font> ; <font color="#696969">//   ;       ;</font> <font color="#696969">// ,         Unicode 10FFFF</font> <font color="#0000ff">if</font> ( <font color="#008000">0x10000</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF0000</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } } } <font color="#0000ff">return false</font> ; } } <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*  UTF-8    .</font> &lt;br/&gt; <font color="#696969">* [...]</font> &lt;br/&gt; <font color="#696969">* @author ur001 &lt;ur001ur001@gmail.com&gt;, {@link http://ur001.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param string $codePoint Unicode character ordinal.</font> &lt;br/&gt; <font color="#696969">* @return string|FALSE UTF-8   FALSE   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getChar( <font color="#cc6633">$codePoint</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x80</font> ) { <font color="#0000ff">return</font> chr( <font color="#cc6633">$codePoint</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x800</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xC0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x10000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xE0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x110000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xF0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">18</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">else</font> { <font color="#0000ff">return false</font> ; } } }</font></font></code> </li> <li> <code><font color="black"><a href="http://s-c.me/11935/s"></a> <a href="http://s-c.me/11935/h"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> Copy Source | Copy HTML <font color="#0000ff">class</font> String_Multibyte { <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*    UTF-8 ,       $index   $char.</font> &lt;br/&gt; <font color="#696969">*  ,    , BOM  0x10FFFE-0x10FFFF  FALSE.</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* [...]   ,    .</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* @author Andrew Dryga &lt;anddriga at gmail&gt;, {@link http://andryx.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param  string    $char     ().</font> &lt;br/&gt; <font color="#696969">* @param int        &amp;$index    ,        .       ,   .</font> &lt;br/&gt; <font color="#696969">* @return int|false     FALSE      ,   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getCodePoint( <font color="#cc6633">$char</font> , &amp; <font color="#cc6633">$index</font> = <font color="#008000">0</font> ) { <font color="#696969">//    </font> <font color="#cc6633">$octet1</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//      ASCII  (  0bbb bbbb),   .</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">7</font> == <font color="#008000">0x00</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$octet1</font> ; } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { <font color="#696969">//    </font> <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#696969">//   </font> <font color="#cc6633">$octet2</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//     (   10bb bbbb)</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet2</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#696969">//     6 </font> <font color="#cc6633">$octet2</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#696969">//         ,   </font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">5</font> == <font color="#008000">0x06</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x1F</font> ) &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet2</font> ; <font color="#696969">//       </font> <font color="#0000ff">if</font> ( <font color="#008000">0x80</font> &lt; <font color="#cc6633">$result</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet3</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">4</font> == <font color="#008000">0x0E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x0F</font> ) &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet3</font> ; <font color="#696969">//   ;  ,    BOM</font> <font color="#0000ff">if</font> ( <font color="#008000">0x800</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; !( <font color="#008000">0xD7FF</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF900</font> ) &amp;&amp; <font color="#cc6633">$result</font> != <font color="#008000">0xFEFF</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet4</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">3</font> == <font color="#008000">0x1E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x07</font> ) &lt;&lt; <font color="#008000">18</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet3</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet4</font> ; <font color="#696969">//   ;       ;</font> <font color="#696969">// ,         Unicode 10FFFF</font> <font color="#0000ff">if</font> ( <font color="#008000">0x10000</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF0000</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } } } <font color="#0000ff">return false</font> ; } } <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*  UTF-8    .</font> &lt;br/&gt; <font color="#696969">* [...]</font> &lt;br/&gt; <font color="#696969">* @author ur001 &lt;ur001ur001@gmail.com&gt;, {@link http://ur001.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param string $codePoint Unicode character ordinal.</font> &lt;br/&gt; <font color="#696969">* @return string|FALSE UTF-8   FALSE   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getChar( <font color="#cc6633">$codePoint</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x80</font> ) { <font color="#0000ff">return</font> chr( <font color="#cc6633">$codePoint</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x800</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xC0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x10000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xE0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x110000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xF0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">18</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">else</font> { <font color="#0000ff">return false</font> ; } } }</font></code> </li> <li> <code><font color="black"><a href="http://s-c.me/11935/s"></a> <a href="http://s-c.me/11935/h"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> Copy Source | Copy HTML <font color="#0000ff">class</font> String_Multibyte { <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*    UTF-8 ,       $index   $char.</font> &lt;br/&gt; <font color="#696969">*  ,    , BOM  0x10FFFE-0x10FFFF  FALSE.</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* [...]   ,    .</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* @author Andrew Dryga &lt;anddriga at gmail&gt;, {@link http://andryx.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param  string    $char     ().</font> &lt;br/&gt; <font color="#696969">* @param int        &amp;$index    ,        .       ,   .</font> &lt;br/&gt; <font color="#696969">* @return int|false     FALSE      ,   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getCodePoint( <font color="#cc6633">$char</font> , &amp; <font color="#cc6633">$index</font> = <font color="#008000">0</font> ) { <font color="#696969">//    </font> <font color="#cc6633">$octet1</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//      ASCII  (  0bbb bbbb),   .</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">7</font> == <font color="#008000">0x00</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$octet1</font> ; } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { <font color="#696969">//    </font> <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#696969">//   </font> <font color="#cc6633">$octet2</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//     (   10bb bbbb)</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet2</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#696969">//     6 </font> <font color="#cc6633">$octet2</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#696969">//         ,   </font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">5</font> == <font color="#008000">0x06</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x1F</font> ) &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet2</font> ; <font color="#696969">//       </font> <font color="#0000ff">if</font> ( <font color="#008000">0x80</font> &lt; <font color="#cc6633">$result</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet3</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">4</font> == <font color="#008000">0x0E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x0F</font> ) &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet3</font> ; <font color="#696969">//   ;  ,    BOM</font> <font color="#0000ff">if</font> ( <font color="#008000">0x800</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; !( <font color="#008000">0xD7FF</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF900</font> ) &amp;&amp; <font color="#cc6633">$result</font> != <font color="#008000">0xFEFF</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet4</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">3</font> == <font color="#008000">0x1E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x07</font> ) &lt;&lt; <font color="#008000">18</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet3</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet4</font> ; <font color="#696969">//   ;       ;</font> <font color="#696969">// ,         Unicode 10FFFF</font> <font color="#0000ff">if</font> ( <font color="#008000">0x10000</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF0000</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } } } <font color="#0000ff">return false</font> ; } } <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*  UTF-8    .</font> &lt;br/&gt; <font color="#696969">* [...]</font> &lt;br/&gt; <font color="#696969">* @author ur001 &lt;ur001ur001@gmail.com&gt;, {@link http://ur001.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param string $codePoint Unicode character ordinal.</font> &lt;br/&gt; <font color="#696969">* @return string|FALSE UTF-8   FALSE   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getChar( <font color="#cc6633">$codePoint</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x80</font> ) { <font color="#0000ff">return</font> chr( <font color="#cc6633">$codePoint</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x800</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xC0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x10000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xE0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x110000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xF0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">18</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">else</font> { <font color="#0000ff">return false</font> ; } } }</font></code> </li> <li> <code><font color="black"><a href="http://s-c.me/11935/s"></a> <a href="http://s-c.me/11935/h"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> Copy Source | Copy HTML <font color="#0000ff">class</font> String_Multibyte { <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*    UTF-8 ,       $index   $char.</font> &lt;br/&gt; <font color="#696969">*  ,    , BOM  0x10FFFE-0x10FFFF  FALSE.</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* [...]   ,    .</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* @author Andrew Dryga &lt;anddriga at gmail&gt;, {@link http://andryx.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param  string    $char     ().</font> &lt;br/&gt; <font color="#696969">* @param int        &amp;$index    ,        .       ,   .</font> &lt;br/&gt; <font color="#696969">* @return int|false     FALSE      ,   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getCodePoint( <font color="#cc6633">$char</font> , &amp; <font color="#cc6633">$index</font> = <font color="#008000">0</font> ) { <font color="#696969">//    </font> <font color="#cc6633">$octet1</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//      ASCII  (  0bbb bbbb),   .</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">7</font> == <font color="#008000">0x00</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$octet1</font> ; } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { <font color="#696969">//    </font> <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#696969">//   </font> <font color="#cc6633">$octet2</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//     (   10bb bbbb)</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet2</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#696969">//     6 </font> <font color="#cc6633">$octet2</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#696969">//         ,   </font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">5</font> == <font color="#008000">0x06</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x1F</font> ) &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet2</font> ; <font color="#696969">//       </font> <font color="#0000ff">if</font> ( <font color="#008000">0x80</font> &lt; <font color="#cc6633">$result</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet3</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">4</font> == <font color="#008000">0x0E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x0F</font> ) &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet3</font> ; <font color="#696969">//   ;  ,    BOM</font> <font color="#0000ff">if</font> ( <font color="#008000">0x800</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; !( <font color="#008000">0xD7FF</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF900</font> ) &amp;&amp; <font color="#cc6633">$result</font> != <font color="#008000">0xFEFF</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet4</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">3</font> == <font color="#008000">0x1E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x07</font> ) &lt;&lt; <font color="#008000">18</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet3</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet4</font> ; <font color="#696969">//   ;       ;</font> <font color="#696969">// ,         Unicode 10FFFF</font> <font color="#0000ff">if</font> ( <font color="#008000">0x10000</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF0000</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } } } <font color="#0000ff">return false</font> ; } } <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*  UTF-8    .</font> &lt;br/&gt; <font color="#696969">* [...]</font> &lt;br/&gt; <font color="#696969">* @author ur001 &lt;ur001ur001@gmail.com&gt;, {@link http://ur001.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param string $codePoint Unicode character ordinal.</font> &lt;br/&gt; <font color="#696969">* @return string|FALSE UTF-8   FALSE   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getChar( <font color="#cc6633">$codePoint</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x80</font> ) { <font color="#0000ff">return</font> chr( <font color="#cc6633">$codePoint</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x800</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xC0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x10000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xE0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x110000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xF0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">18</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">else</font> { <font color="#0000ff">return false</font> ; } } }</font></code> </li> <li> <code><font color="black"><a href="http://s-c.me/11935/s"></a> <a href="http://s-c.me/11935/h"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> Copy Source | Copy HTML <font color="#0000ff">class</font> String_Multibyte { <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*    UTF-8 ,       $index   $char.</font> &lt;br/&gt; <font color="#696969">*  ,    , BOM  0x10FFFE-0x10FFFF  FALSE.</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* [...]   ,    .</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* @author Andrew Dryga &lt;anddriga at gmail&gt;, {@link http://andryx.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param  string    $char     ().</font> &lt;br/&gt; <font color="#696969">* @param int        &amp;$index    ,        .       ,   .</font> &lt;br/&gt; <font color="#696969">* @return int|false     FALSE      ,   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getCodePoint( <font color="#cc6633">$char</font> , &amp; <font color="#cc6633">$index</font> = <font color="#008000">0</font> ) { <font color="#696969">//    </font> <font color="#cc6633">$octet1</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//      ASCII  (  0bbb bbbb),   .</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">7</font> == <font color="#008000">0x00</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$octet1</font> ; } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { <font color="#696969">//    </font> <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#696969">//   </font> <font color="#cc6633">$octet2</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//     (   10bb bbbb)</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet2</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#696969">//     6 </font> <font color="#cc6633">$octet2</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#696969">//         ,   </font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">5</font> == <font color="#008000">0x06</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x1F</font> ) &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet2</font> ; <font color="#696969">//       </font> <font color="#0000ff">if</font> ( <font color="#008000">0x80</font> &lt; <font color="#cc6633">$result</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet3</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">4</font> == <font color="#008000">0x0E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x0F</font> ) &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet3</font> ; <font color="#696969">//   ;  ,    BOM</font> <font color="#0000ff">if</font> ( <font color="#008000">0x800</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; !( <font color="#008000">0xD7FF</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF900</font> ) &amp;&amp; <font color="#cc6633">$result</font> != <font color="#008000">0xFEFF</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet4</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">3</font> == <font color="#008000">0x1E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x07</font> ) &lt;&lt; <font color="#008000">18</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet3</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet4</font> ; <font color="#696969">//   ;       ;</font> <font color="#696969">// ,         Unicode 10FFFF</font> <font color="#0000ff">if</font> ( <font color="#008000">0x10000</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF0000</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } } } <font color="#0000ff">return false</font> ; } } <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*  UTF-8    .</font> &lt;br/&gt; <font color="#696969">* [...]</font> &lt;br/&gt; <font color="#696969">* @author ur001 &lt;ur001ur001@gmail.com&gt;, {@link http://ur001.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param string $codePoint Unicode character ordinal.</font> &lt;br/&gt; <font color="#696969">* @return string|FALSE UTF-8   FALSE   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getChar( <font color="#cc6633">$codePoint</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x80</font> ) { <font color="#0000ff">return</font> chr( <font color="#cc6633">$codePoint</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x800</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xC0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x10000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xE0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x110000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xF0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">18</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">else</font> { <font color="#0000ff">return false</font> ; } } }</font></code> </li> <li> <code><font color="black"><font color="#696969"><a href="http://s-c.me/11935/s"></a> <a href="http://s-c.me/11935/h"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> Copy Source | Copy HTML <font color="#0000ff">class</font> String_Multibyte { <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*    UTF-8 ,       $index   $char.</font> &lt;br/&gt; <font color="#696969">*  ,    , BOM  0x10FFFE-0x10FFFF  FALSE.</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* [...]   ,    .</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* @author Andrew Dryga &lt;anddriga at gmail&gt;, {@link http://andryx.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param  string    $char     ().</font> &lt;br/&gt; <font color="#696969">* @param int        &amp;$index    ,        .       ,   .</font> &lt;br/&gt; <font color="#696969">* @return int|false     FALSE      ,   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getCodePoint( <font color="#cc6633">$char</font> , &amp; <font color="#cc6633">$index</font> = <font color="#008000">0</font> ) { <font color="#696969">//    </font> <font color="#cc6633">$octet1</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//      ASCII  (  0bbb bbbb),   .</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">7</font> == <font color="#008000">0x00</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$octet1</font> ; } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { <font color="#696969">//    </font> <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#696969">//   </font> <font color="#cc6633">$octet2</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//     (   10bb bbbb)</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet2</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } //     6  <font color="#cc6633">$octet2</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#696969">//         ,   </font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">5</font> == <font color="#008000">0x06</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x1F</font> ) &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet2</font> ; <font color="#696969">//       </font> <font color="#0000ff">if</font> ( <font color="#008000">0x80</font> &lt; <font color="#cc6633">$result</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet3</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">4</font> == <font color="#008000">0x0E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x0F</font> ) &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet3</font> ; <font color="#696969">//   ;  ,    BOM</font> <font color="#0000ff">if</font> ( <font color="#008000">0x800</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; !( <font color="#008000">0xD7FF</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF900</font> ) &amp;&amp; <font color="#cc6633">$result</font> != <font color="#008000">0xFEFF</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet4</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">3</font> == <font color="#008000">0x1E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x07</font> ) &lt;&lt; <font color="#008000">18</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet3</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet4</font> ; <font color="#696969">//   ;       ;</font> <font color="#696969">// ,         Unicode 10FFFF</font> <font color="#0000ff">if</font> ( <font color="#008000">0x10000</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF0000</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } } } <font color="#0000ff">return false</font> ; } } <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*  UTF-8    .</font> &lt;br/&gt; <font color="#696969">* [...]</font> &lt;br/&gt; <font color="#696969">* @author ur001 &lt;ur001ur001@gmail.com&gt;, {@link http://ur001.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param string $codePoint Unicode character ordinal.</font> &lt;br/&gt; <font color="#696969">* @return string|FALSE UTF-8   FALSE   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getChar( <font color="#cc6633">$codePoint</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x80</font> ) { <font color="#0000ff">return</font> chr( <font color="#cc6633">$codePoint</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x800</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xC0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x10000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xE0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x110000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xF0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">18</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">else</font> { <font color="#0000ff">return false</font> ; } } }</font></font></code> </li> <li> <code><font color="black"><a href="http://s-c.me/11935/s"></a> <a href="http://s-c.me/11935/h"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> Copy Source | Copy HTML <font color="#0000ff">class</font> String_Multibyte { <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*    UTF-8 ,       $index   $char.</font> &lt;br/&gt; <font color="#696969">*  ,    , BOM  0x10FFFE-0x10FFFF  FALSE.</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* [...]   ,    .</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* @author Andrew Dryga &lt;anddriga at gmail&gt;, {@link http://andryx.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param  string    $char     ().</font> &lt;br/&gt; <font color="#696969">* @param int        &amp;$index    ,        .       ,   .</font> &lt;br/&gt; <font color="#696969">* @return int|false     FALSE      ,   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getCodePoint( <font color="#cc6633">$char</font> , &amp; <font color="#cc6633">$index</font> = <font color="#008000">0</font> ) { <font color="#696969">//    </font> <font color="#cc6633">$octet1</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//      ASCII  (  0bbb bbbb),   .</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">7</font> == <font color="#008000">0x00</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$octet1</font> ; } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { <font color="#696969">//    </font> <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#696969">//   </font> <font color="#cc6633">$octet2</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//     (   10bb bbbb)</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet2</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#696969">//     6 </font> <font color="#cc6633">$octet2</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#696969">//         ,   </font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">5</font> == <font color="#008000">0x06</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x1F</font> ) &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet2</font> ; <font color="#696969">//       </font> <font color="#0000ff">if</font> ( <font color="#008000">0x80</font> &lt; <font color="#cc6633">$result</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet3</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">4</font> == <font color="#008000">0x0E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x0F</font> ) &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet3</font> ; <font color="#696969">//   ;  ,    BOM</font> <font color="#0000ff">if</font> ( <font color="#008000">0x800</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; !( <font color="#008000">0xD7FF</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF900</font> ) &amp;&amp; <font color="#cc6633">$result</font> != <font color="#008000">0xFEFF</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet4</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">3</font> == <font color="#008000">0x1E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x07</font> ) &lt;&lt; <font color="#008000">18</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet3</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet4</font> ; <font color="#696969">//   ;       ;</font> <font color="#696969">// ,         Unicode 10FFFF</font> <font color="#0000ff">if</font> ( <font color="#008000">0x10000</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF0000</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } } } <font color="#0000ff">return false</font> ; } } <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*  UTF-8    .</font> &lt;br/&gt; <font color="#696969">* [...]</font> &lt;br/&gt; <font color="#696969">* @author ur001 &lt;ur001ur001@gmail.com&gt;, {@link http://ur001.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param string $codePoint Unicode character ordinal.</font> &lt;br/&gt; <font color="#696969">* @return string|FALSE UTF-8   FALSE   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getChar( <font color="#cc6633">$codePoint</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x80</font> ) { <font color="#0000ff">return</font> chr( <font color="#cc6633">$codePoint</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x800</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xC0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x10000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xE0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x110000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xF0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">18</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">else</font> { <font color="#0000ff">return false</font> ; } } }</font></code> </li> <li></li><li> <code><font color="black"><font color="#696969"><a href="http://s-c.me/11935/s"></a> <a href="http://s-c.me/11935/h"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> Copy Source | Copy HTML <font color="#0000ff">class</font> String_Multibyte { <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*    UTF-8 ,       $index   $char.</font> &lt;br/&gt; <font color="#696969">*  ,    , BOM  0x10FFFE-0x10FFFF  FALSE.</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* [...]   ,    .</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* @author Andrew Dryga &lt;anddriga at gmail&gt;, {@link http://andryx.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param  string    $char     ().</font> &lt;br/&gt; <font color="#696969">* @param int        &amp;$index    ,        .       ,   .</font> &lt;br/&gt; <font color="#696969">* @return int|false     FALSE      ,   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getCodePoint( <font color="#cc6633">$char</font> , &amp; <font color="#cc6633">$index</font> = <font color="#008000">0</font> ) { <font color="#696969">//    </font> <font color="#cc6633">$octet1</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//      ASCII  (  0bbb bbbb),   .</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">7</font> == <font color="#008000">0x00</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$octet1</font> ; } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { <font color="#696969">//    </font> <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#696969">//   </font> <font color="#cc6633">$octet2</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//     (   10bb bbbb)</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet2</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#696969">//     6 </font> <font color="#cc6633">$octet2</font> &amp;= <font color="#008000">0x3F</font> ; //         ,    <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">5</font> == <font color="#008000">0x06</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x1F</font> ) &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet2</font> ; <font color="#696969">//       </font> <font color="#0000ff">if</font> ( <font color="#008000">0x80</font> &lt; <font color="#cc6633">$result</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet3</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">4</font> == <font color="#008000">0x0E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x0F</font> ) &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet3</font> ; <font color="#696969">//   ;  ,    BOM</font> <font color="#0000ff">if</font> ( <font color="#008000">0x800</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; !( <font color="#008000">0xD7FF</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF900</font> ) &amp;&amp; <font color="#cc6633">$result</font> != <font color="#008000">0xFEFF</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet4</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">3</font> == <font color="#008000">0x1E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x07</font> ) &lt;&lt; <font color="#008000">18</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet3</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet4</font> ; <font color="#696969">//   ;       ;</font> <font color="#696969">// ,         Unicode 10FFFF</font> <font color="#0000ff">if</font> ( <font color="#008000">0x10000</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF0000</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } } } <font color="#0000ff">return false</font> ; } } <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*  UTF-8    .</font> &lt;br/&gt; <font color="#696969">* [...]</font> &lt;br/&gt; <font color="#696969">* @author ur001 &lt;ur001ur001@gmail.com&gt;, {@link http://ur001.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param string $codePoint Unicode character ordinal.</font> &lt;br/&gt; <font color="#696969">* @return string|FALSE UTF-8   FALSE   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getChar( <font color="#cc6633">$codePoint</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x80</font> ) { <font color="#0000ff">return</font> chr( <font color="#cc6633">$codePoint</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x800</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xC0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x10000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xE0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x110000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xF0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">18</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">else</font> { <font color="#0000ff">return false</font> ; } } }</font></font></code> </li> <li> <code><font color="black"><a href="http://s-c.me/11935/s"></a> <a href="http://s-c.me/11935/h"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> Copy Source | Copy HTML <font color="#0000ff">class</font> String_Multibyte { <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*    UTF-8 ,       $index   $char.</font> &lt;br/&gt; <font color="#696969">*  ,    , BOM  0x10FFFE-0x10FFFF  FALSE.</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* [...]   ,    .</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* @author Andrew Dryga &lt;anddriga at gmail&gt;, {@link http://andryx.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param  string    $char     ().</font> &lt;br/&gt; <font color="#696969">* @param int        &amp;$index    ,        .       ,   .</font> &lt;br/&gt; <font color="#696969">* @return int|false     FALSE      ,   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getCodePoint( <font color="#cc6633">$char</font> , &amp; <font color="#cc6633">$index</font> = <font color="#008000">0</font> ) { <font color="#696969">//    </font> <font color="#cc6633">$octet1</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//      ASCII  (  0bbb bbbb),   .</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">7</font> == <font color="#008000">0x00</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$octet1</font> ; } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { <font color="#696969">//    </font> <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#696969">//   </font> <font color="#cc6633">$octet2</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//     (   10bb bbbb)</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet2</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#696969">//     6 </font> <font color="#cc6633">$octet2</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#696969">//         ,   </font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">5</font> == <font color="#008000">0x06</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x1F</font> ) &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet2</font> ; <font color="#696969">//       </font> <font color="#0000ff">if</font> ( <font color="#008000">0x80</font> &lt; <font color="#cc6633">$result</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet3</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">4</font> == <font color="#008000">0x0E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x0F</font> ) &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet3</font> ; <font color="#696969">//   ;  ,    BOM</font> <font color="#0000ff">if</font> ( <font color="#008000">0x800</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; !( <font color="#008000">0xD7FF</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF900</font> ) &amp;&amp; <font color="#cc6633">$result</font> != <font color="#008000">0xFEFF</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet4</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">3</font> == <font color="#008000">0x1E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x07</font> ) &lt;&lt; <font color="#008000">18</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet3</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet4</font> ; <font color="#696969">//   ;       ;</font> <font color="#696969">// ,         Unicode 10FFFF</font> <font color="#0000ff">if</font> ( <font color="#008000">0x10000</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF0000</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } } } <font color="#0000ff">return false</font> ; } } <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*  UTF-8    .</font> &lt;br/&gt; <font color="#696969">* [...]</font> &lt;br/&gt; <font color="#696969">* @author ur001 &lt;ur001ur001@gmail.com&gt;, {@link http://ur001.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param string $codePoint Unicode character ordinal.</font> &lt;br/&gt; <font color="#696969">* @return string|FALSE UTF-8   FALSE   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getChar( <font color="#cc6633">$codePoint</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x80</font> ) { <font color="#0000ff">return</font> chr( <font color="#cc6633">$codePoint</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x800</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xC0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x10000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xE0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x110000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xF0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">18</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">else</font> { <font color="#0000ff">return false</font> ; } } }</font></code> </li> <li> <code><font color="black"><a href="http://s-c.me/11935/s"></a> <a href="http://s-c.me/11935/h"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> Copy Source | Copy HTML <font color="#0000ff">class</font> String_Multibyte { <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*    UTF-8 ,       $index   $char.</font> &lt;br/&gt; <font color="#696969">*  ,    , BOM  0x10FFFE-0x10FFFF  FALSE.</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* [...]   ,    .</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* @author Andrew Dryga &lt;anddriga at gmail&gt;, {@link http://andryx.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param  string    $char     ().</font> &lt;br/&gt; <font color="#696969">* @param int        &amp;$index    ,        .       ,   .</font> &lt;br/&gt; <font color="#696969">* @return int|false     FALSE      ,   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getCodePoint( <font color="#cc6633">$char</font> , &amp; <font color="#cc6633">$index</font> = <font color="#008000">0</font> ) { <font color="#696969">//    </font> <font color="#cc6633">$octet1</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//      ASCII  (  0bbb bbbb),   .</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">7</font> == <font color="#008000">0x00</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$octet1</font> ; } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { <font color="#696969">//    </font> <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#696969">//   </font> <font color="#cc6633">$octet2</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//     (   10bb bbbb)</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet2</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#696969">//     6 </font> <font color="#cc6633">$octet2</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#696969">//         ,   </font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">5</font> == <font color="#008000">0x06</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x1F</font> ) &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet2</font> ; <font color="#696969">//       </font> <font color="#0000ff">if</font> ( <font color="#008000">0x80</font> &lt; <font color="#cc6633">$result</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet3</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">4</font> == <font color="#008000">0x0E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x0F</font> ) &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet3</font> ; <font color="#696969">//   ;  ,    BOM</font> <font color="#0000ff">if</font> ( <font color="#008000">0x800</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; !( <font color="#008000">0xD7FF</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF900</font> ) &amp;&amp; <font color="#cc6633">$result</font> != <font color="#008000">0xFEFF</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet4</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">3</font> == <font color="#008000">0x1E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x07</font> ) &lt;&lt; <font color="#008000">18</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet3</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet4</font> ; <font color="#696969">//   ;       ;</font> <font color="#696969">// ,         Unicode 10FFFF</font> <font color="#0000ff">if</font> ( <font color="#008000">0x10000</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF0000</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } } } <font color="#0000ff">return false</font> ; } } <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*  UTF-8    .</font> &lt;br/&gt; <font color="#696969">* [...]</font> &lt;br/&gt; <font color="#696969">* @author ur001 &lt;ur001ur001@gmail.com&gt;, {@link http://ur001.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param string $codePoint Unicode character ordinal.</font> &lt;br/&gt; <font color="#696969">* @return string|FALSE UTF-8   FALSE   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getChar( <font color="#cc6633">$codePoint</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x80</font> ) { <font color="#0000ff">return</font> chr( <font color="#cc6633">$codePoint</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x800</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xC0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x10000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xE0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x110000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xF0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">18</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">else</font> { <font color="#0000ff">return false</font> ; } } }</font></code> </li> <li> <code><font color="black"><font color="#696969"><a href="http://s-c.me/11935/s"></a> <a href="http://s-c.me/11935/h"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> Copy Source | Copy HTML <font color="#0000ff">class</font> String_Multibyte { <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*    UTF-8 ,       $index   $char.</font> &lt;br/&gt; <font color="#696969">*  ,    , BOM  0x10FFFE-0x10FFFF  FALSE.</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* [...]   ,    .</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* @author Andrew Dryga &lt;anddriga at gmail&gt;, {@link http://andryx.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param  string    $char     ().</font> &lt;br/&gt; <font color="#696969">* @param int        &amp;$index    ,        .       ,   .</font> &lt;br/&gt; <font color="#696969">* @return int|false     FALSE      ,   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getCodePoint( <font color="#cc6633">$char</font> , &amp; <font color="#cc6633">$index</font> = <font color="#008000">0</font> ) { <font color="#696969">//    </font> <font color="#cc6633">$octet1</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//      ASCII  (  0bbb bbbb),   .</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">7</font> == <font color="#008000">0x00</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$octet1</font> ; } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { <font color="#696969">//    </font> <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#696969">//   </font> <font color="#cc6633">$octet2</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//     (   10bb bbbb)</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet2</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#696969">//     6 </font> <font color="#cc6633">$octet2</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#696969">//         ,   </font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">5</font> == <font color="#008000">0x06</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x1F</font> ) &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet2</font> ; //        <font color="#0000ff">if</font> ( <font color="#008000">0x80</font> &lt; <font color="#cc6633">$result</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet3</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">4</font> == <font color="#008000">0x0E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x0F</font> ) &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet3</font> ; <font color="#696969">//   ;  ,    BOM</font> <font color="#0000ff">if</font> ( <font color="#008000">0x800</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; !( <font color="#008000">0xD7FF</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF900</font> ) &amp;&amp; <font color="#cc6633">$result</font> != <font color="#008000">0xFEFF</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet4</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">3</font> == <font color="#008000">0x1E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x07</font> ) &lt;&lt; <font color="#008000">18</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet3</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet4</font> ; <font color="#696969">//   ;       ;</font> <font color="#696969">// ,         Unicode 10FFFF</font> <font color="#0000ff">if</font> ( <font color="#008000">0x10000</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF0000</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } } } <font color="#0000ff">return false</font> ; } } <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*  UTF-8    .</font> &lt;br/&gt; <font color="#696969">* [...]</font> &lt;br/&gt; <font color="#696969">* @author ur001 &lt;ur001ur001@gmail.com&gt;, {@link http://ur001.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param string $codePoint Unicode character ordinal.</font> &lt;br/&gt; <font color="#696969">* @return string|FALSE UTF-8   FALSE   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getChar( <font color="#cc6633">$codePoint</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x80</font> ) { <font color="#0000ff">return</font> chr( <font color="#cc6633">$codePoint</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x800</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xC0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x10000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xE0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x110000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xF0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">18</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">else</font> { <font color="#0000ff">return false</font> ; } } }</font></font></code> </li> <li> <code><font color="black"><a href="http://s-c.me/11935/s"></a> <a href="http://s-c.me/11935/h"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> Copy Source | Copy HTML <font color="#0000ff">class</font> String_Multibyte { <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*    UTF-8 ,       $index   $char.</font> &lt;br/&gt; <font color="#696969">*  ,    , BOM  0x10FFFE-0x10FFFF  FALSE.</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* [...]   ,    .</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* @author Andrew Dryga &lt;anddriga at gmail&gt;, {@link http://andryx.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param  string    $char     ().</font> &lt;br/&gt; <font color="#696969">* @param int        &amp;$index    ,        .       ,   .</font> &lt;br/&gt; <font color="#696969">* @return int|false     FALSE      ,   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getCodePoint( <font color="#cc6633">$char</font> , &amp; <font color="#cc6633">$index</font> = <font color="#008000">0</font> ) { <font color="#696969">//    </font> <font color="#cc6633">$octet1</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//      ASCII  (  0bbb bbbb),   .</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">7</font> == <font color="#008000">0x00</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$octet1</font> ; } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { <font color="#696969">//    </font> <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#696969">//   </font> <font color="#cc6633">$octet2</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//     (   10bb bbbb)</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet2</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#696969">//     6 </font> <font color="#cc6633">$octet2</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#696969">//         ,   </font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">5</font> == <font color="#008000">0x06</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x1F</font> ) &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet2</font> ; <font color="#696969">//       </font> <font color="#0000ff">if</font> ( <font color="#008000">0x80</font> &lt; <font color="#cc6633">$result</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet3</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">4</font> == <font color="#008000">0x0E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x0F</font> ) &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet3</font> ; <font color="#696969">//   ;  ,    BOM</font> <font color="#0000ff">if</font> ( <font color="#008000">0x800</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; !( <font color="#008000">0xD7FF</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF900</font> ) &amp;&amp; <font color="#cc6633">$result</font> != <font color="#008000">0xFEFF</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet4</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">3</font> == <font color="#008000">0x1E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x07</font> ) &lt;&lt; <font color="#008000">18</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet3</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet4</font> ; <font color="#696969">//   ;       ;</font> <font color="#696969">// ,         Unicode 10FFFF</font> <font color="#0000ff">if</font> ( <font color="#008000">0x10000</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF0000</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } } } <font color="#0000ff">return false</font> ; } } <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*  UTF-8    .</font> &lt;br/&gt; <font color="#696969">* [...]</font> &lt;br/&gt; <font color="#696969">* @author ur001 &lt;ur001ur001@gmail.com&gt;, {@link http://ur001.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param string $codePoint Unicode character ordinal.</font> &lt;br/&gt; <font color="#696969">* @return string|FALSE UTF-8   FALSE   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getChar( <font color="#cc6633">$codePoint</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x80</font> ) { <font color="#0000ff">return</font> chr( <font color="#cc6633">$codePoint</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x800</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xC0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x10000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xE0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x110000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xF0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">18</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">else</font> { <font color="#0000ff">return false</font> ; } } }</font></code> </li> <li> <code><font color="black"><a href="http://s-c.me/11935/s"></a> <a href="http://s-c.me/11935/h"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> Copy Source | Copy HTML <font color="#0000ff">class</font> String_Multibyte { <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*    UTF-8 ,       $index   $char.</font> &lt;br/&gt; <font color="#696969">*  ,    , BOM  0x10FFFE-0x10FFFF  FALSE.</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* [...]   ,    .</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* @author Andrew Dryga &lt;anddriga at gmail&gt;, {@link http://andryx.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param  string    $char     ().</font> &lt;br/&gt; <font color="#696969">* @param int        &amp;$index    ,        .       ,   .</font> &lt;br/&gt; <font color="#696969">* @return int|false     FALSE      ,   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getCodePoint( <font color="#cc6633">$char</font> , &amp; <font color="#cc6633">$index</font> = <font color="#008000">0</font> ) { <font color="#696969">//    </font> <font color="#cc6633">$octet1</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//      ASCII  (  0bbb bbbb),   .</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">7</font> == <font color="#008000">0x00</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$octet1</font> ; } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { <font color="#696969">//    </font> <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#696969">//   </font> <font color="#cc6633">$octet2</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//     (   10bb bbbb)</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet2</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#696969">//     6 </font> <font color="#cc6633">$octet2</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#696969">//         ,   </font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">5</font> == <font color="#008000">0x06</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x1F</font> ) &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet2</font> ; <font color="#696969">//       </font> <font color="#0000ff">if</font> ( <font color="#008000">0x80</font> &lt; <font color="#cc6633">$result</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet3</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">4</font> == <font color="#008000">0x0E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x0F</font> ) &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet3</font> ; <font color="#696969">//   ;  ,    BOM</font> <font color="#0000ff">if</font> ( <font color="#008000">0x800</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; !( <font color="#008000">0xD7FF</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF900</font> ) &amp;&amp; <font color="#cc6633">$result</font> != <font color="#008000">0xFEFF</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet4</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">3</font> == <font color="#008000">0x1E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x07</font> ) &lt;&lt; <font color="#008000">18</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet3</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet4</font> ; <font color="#696969">//   ;       ;</font> <font color="#696969">// ,         Unicode 10FFFF</font> <font color="#0000ff">if</font> ( <font color="#008000">0x10000</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF0000</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } } } <font color="#0000ff">return false</font> ; } } <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*  UTF-8    .</font> &lt;br/&gt; <font color="#696969">* [...]</font> &lt;br/&gt; <font color="#696969">* @author ur001 &lt;ur001ur001@gmail.com&gt;, {@link http://ur001.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param string $codePoint Unicode character ordinal.</font> &lt;br/&gt; <font color="#696969">* @return string|FALSE UTF-8   FALSE   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getChar( <font color="#cc6633">$codePoint</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x80</font> ) { <font color="#0000ff">return</font> chr( <font color="#cc6633">$codePoint</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x800</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xC0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x10000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xE0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x110000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xF0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">18</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">else</font> { <font color="#0000ff">return false</font> ; } } }</font></code> </li> <li> <code><font color="black"><a href="http://s-c.me/11935/s"></a> <a href="http://s-c.me/11935/h"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> Copy Source | Copy HTML <font color="#0000ff">class</font> String_Multibyte { <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*    UTF-8 ,       $index   $char.</font> &lt;br/&gt; <font color="#696969">*  ,    , BOM  0x10FFFE-0x10FFFF  FALSE.</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* [...]   ,    .</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* @author Andrew Dryga &lt;anddriga at gmail&gt;, {@link http://andryx.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param  string    $char     ().</font> &lt;br/&gt; <font color="#696969">* @param int        &amp;$index    ,        .       ,   .</font> &lt;br/&gt; <font color="#696969">* @return int|false     FALSE      ,   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getCodePoint( <font color="#cc6633">$char</font> , &amp; <font color="#cc6633">$index</font> = <font color="#008000">0</font> ) { <font color="#696969">//    </font> <font color="#cc6633">$octet1</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//      ASCII  (  0bbb bbbb),   .</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">7</font> == <font color="#008000">0x00</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$octet1</font> ; } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { <font color="#696969">//    </font> <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#696969">//   </font> <font color="#cc6633">$octet2</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//     (   10bb bbbb)</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet2</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#696969">//     6 </font> <font color="#cc6633">$octet2</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#696969">//         ,   </font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">5</font> == <font color="#008000">0x06</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x1F</font> ) &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet2</font> ; <font color="#696969">//       </font> <font color="#0000ff">if</font> ( <font color="#008000">0x80</font> &lt; <font color="#cc6633">$result</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet3</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">4</font> == <font color="#008000">0x0E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x0F</font> ) &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet3</font> ; <font color="#696969">//   ;  ,    BOM</font> <font color="#0000ff">if</font> ( <font color="#008000">0x800</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; !( <font color="#008000">0xD7FF</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF900</font> ) &amp;&amp; <font color="#cc6633">$result</font> != <font color="#008000">0xFEFF</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet4</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">3</font> == <font color="#008000">0x1E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x07</font> ) &lt;&lt; <font color="#008000">18</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet3</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet4</font> ; <font color="#696969">//   ;       ;</font> <font color="#696969">// ,         Unicode 10FFFF</font> <font color="#0000ff">if</font> ( <font color="#008000">0x10000</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF0000</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } } } <font color="#0000ff">return false</font> ; } } <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*  UTF-8    .</font> &lt;br/&gt; <font color="#696969">* [...]</font> &lt;br/&gt; <font color="#696969">* @author ur001 &lt;ur001ur001@gmail.com&gt;, {@link http://ur001.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param string $codePoint Unicode character ordinal.</font> &lt;br/&gt; <font color="#696969">* @return string|FALSE UTF-8   FALSE   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getChar( <font color="#cc6633">$codePoint</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x80</font> ) { <font color="#0000ff">return</font> chr( <font color="#cc6633">$codePoint</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x800</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xC0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x10000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xE0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x110000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xF0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">18</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">else</font> { <font color="#0000ff">return false</font> ; } } }</font></code> </li> <li> <code><font color="black"><a href="http://s-c.me/11935/s"></a> <a href="http://s-c.me/11935/h"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> Copy Source | Copy HTML <font color="#0000ff">class</font> String_Multibyte { <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*    UTF-8 ,       $index   $char.</font> &lt;br/&gt; <font color="#696969">*  ,    , BOM  0x10FFFE-0x10FFFF  FALSE.</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* [...]   ,    .</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* @author Andrew Dryga &lt;anddriga at gmail&gt;, {@link http://andryx.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param  string    $char     ().</font> &lt;br/&gt; <font color="#696969">* @param int        &amp;$index    ,        .       ,   .</font> &lt;br/&gt; <font color="#696969">* @return int|false     FALSE      ,   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getCodePoint( <font color="#cc6633">$char</font> , &amp; <font color="#cc6633">$index</font> = <font color="#008000">0</font> ) { <font color="#696969">//    </font> <font color="#cc6633">$octet1</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//      ASCII  (  0bbb bbbb),   .</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">7</font> == <font color="#008000">0x00</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$octet1</font> ; } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { <font color="#696969">//    </font> <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#696969">//   </font> <font color="#cc6633">$octet2</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//     (   10bb bbbb)</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet2</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#696969">//     6 </font> <font color="#cc6633">$octet2</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#696969">//         ,   </font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">5</font> == <font color="#008000">0x06</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x1F</font> ) &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet2</font> ; <font color="#696969">//       </font> <font color="#0000ff">if</font> ( <font color="#008000">0x80</font> &lt; <font color="#cc6633">$result</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet3</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">4</font> == <font color="#008000">0x0E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x0F</font> ) &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet3</font> ; <font color="#696969">//   ;  ,    BOM</font> <font color="#0000ff">if</font> ( <font color="#008000">0x800</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; !( <font color="#008000">0xD7FF</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF900</font> ) &amp;&amp; <font color="#cc6633">$result</font> != <font color="#008000">0xFEFF</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet4</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">3</font> == <font color="#008000">0x1E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x07</font> ) &lt;&lt; <font color="#008000">18</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet3</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet4</font> ; <font color="#696969">//   ;       ;</font> <font color="#696969">// ,         Unicode 10FFFF</font> <font color="#0000ff">if</font> ( <font color="#008000">0x10000</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF0000</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } } } <font color="#0000ff">return false</font> ; } } <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*  UTF-8    .</font> &lt;br/&gt; <font color="#696969">* [...]</font> &lt;br/&gt; <font color="#696969">* @author ur001 &lt;ur001ur001@gmail.com&gt;, {@link http://ur001.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param string $codePoint Unicode character ordinal.</font> &lt;br/&gt; <font color="#696969">* @return string|FALSE UTF-8   FALSE   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getChar( <font color="#cc6633">$codePoint</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x80</font> ) { <font color="#0000ff">return</font> chr( <font color="#cc6633">$codePoint</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x800</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xC0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x10000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xE0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x110000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xF0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">18</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">else</font> { <font color="#0000ff">return false</font> ; } } }</font></code> </li> <li> <code><font color="black"><a href="http://s-c.me/11935/s"></a> <a href="http://s-c.me/11935/h"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> Copy Source | Copy HTML <font color="#0000ff">class</font> String_Multibyte { <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*    UTF-8 ,       $index   $char.</font> &lt;br/&gt; <font color="#696969">*  ,    , BOM  0x10FFFE-0x10FFFF  FALSE.</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* [...]   ,    .</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* @author Andrew Dryga &lt;anddriga at gmail&gt;, {@link http://andryx.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param  string    $char     ().</font> &lt;br/&gt; <font color="#696969">* @param int        &amp;$index    ,        .       ,   .</font> &lt;br/&gt; <font color="#696969">* @return int|false     FALSE      ,   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getCodePoint( <font color="#cc6633">$char</font> , &amp; <font color="#cc6633">$index</font> = <font color="#008000">0</font> ) { <font color="#696969">//    </font> <font color="#cc6633">$octet1</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//      ASCII  (  0bbb bbbb),   .</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">7</font> == <font color="#008000">0x00</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$octet1</font> ; } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { <font color="#696969">//    </font> <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#696969">//   </font> <font color="#cc6633">$octet2</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//     (   10bb bbbb)</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet2</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#696969">//     6 </font> <font color="#cc6633">$octet2</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#696969">//         ,   </font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">5</font> == <font color="#008000">0x06</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x1F</font> ) &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet2</font> ; <font color="#696969">//       </font> <font color="#0000ff">if</font> ( <font color="#008000">0x80</font> &lt; <font color="#cc6633">$result</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet3</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">4</font> == <font color="#008000">0x0E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x0F</font> ) &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet3</font> ; <font color="#696969">//   ;  ,    BOM</font> <font color="#0000ff">if</font> ( <font color="#008000">0x800</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; !( <font color="#008000">0xD7FF</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF900</font> ) &amp;&amp; <font color="#cc6633">$result</font> != <font color="#008000">0xFEFF</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet4</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">3</font> == <font color="#008000">0x1E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x07</font> ) &lt;&lt; <font color="#008000">18</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet3</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet4</font> ; <font color="#696969">//   ;       ;</font> <font color="#696969">// ,         Unicode 10FFFF</font> <font color="#0000ff">if</font> ( <font color="#008000">0x10000</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF0000</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } } } <font color="#0000ff">return false</font> ; } } <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*  UTF-8    .</font> &lt;br/&gt; <font color="#696969">* [...]</font> &lt;br/&gt; <font color="#696969">* @author ur001 &lt;ur001ur001@gmail.com&gt;, {@link http://ur001.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param string $codePoint Unicode character ordinal.</font> &lt;br/&gt; <font color="#696969">* @return string|FALSE UTF-8   FALSE   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getChar( <font color="#cc6633">$codePoint</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x80</font> ) { <font color="#0000ff">return</font> chr( <font color="#cc6633">$codePoint</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x800</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xC0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x10000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xE0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x110000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xF0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">18</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">else</font> { <font color="#0000ff">return false</font> ; } } }</font></code> </li> <li> <code><font color="black"><a href="http://s-c.me/11935/s"></a> <a href="http://s-c.me/11935/h"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> Copy Source | Copy HTML <font color="#0000ff">class</font> String_Multibyte { <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*    UTF-8 ,       $index   $char.</font> &lt;br/&gt; <font color="#696969">*  ,    , BOM  0x10FFFE-0x10FFFF  FALSE.</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* [...]   ,    .</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* @author Andrew Dryga &lt;anddriga at gmail&gt;, {@link http://andryx.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param  string    $char     ().</font> &lt;br/&gt; <font color="#696969">* @param int        &amp;$index    ,        .       ,   .</font> &lt;br/&gt; <font color="#696969">* @return int|false     FALSE      ,   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getCodePoint( <font color="#cc6633">$char</font> , &amp; <font color="#cc6633">$index</font> = <font color="#008000">0</font> ) { <font color="#696969">//    </font> <font color="#cc6633">$octet1</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//      ASCII  (  0bbb bbbb),   .</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">7</font> == <font color="#008000">0x00</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$octet1</font> ; } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { <font color="#696969">//    </font> <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#696969">//   </font> <font color="#cc6633">$octet2</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//     (   10bb bbbb)</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet2</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#696969">//     6 </font> <font color="#cc6633">$octet2</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#696969">//         ,   </font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">5</font> == <font color="#008000">0x06</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x1F</font> ) &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet2</font> ; <font color="#696969">//       </font> <font color="#0000ff">if</font> ( <font color="#008000">0x80</font> &lt; <font color="#cc6633">$result</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet3</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">4</font> == <font color="#008000">0x0E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x0F</font> ) &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet3</font> ; <font color="#696969">//   ;  ,    BOM</font> <font color="#0000ff">if</font> ( <font color="#008000">0x800</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; !( <font color="#008000">0xD7FF</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF900</font> ) &amp;&amp; <font color="#cc6633">$result</font> != <font color="#008000">0xFEFF</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet4</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">3</font> == <font color="#008000">0x1E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x07</font> ) &lt;&lt; <font color="#008000">18</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet3</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet4</font> ; <font color="#696969">//   ;       ;</font> <font color="#696969">// ,         Unicode 10FFFF</font> <font color="#0000ff">if</font> ( <font color="#008000">0x10000</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF0000</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } } } <font color="#0000ff">return false</font> ; } } <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*  UTF-8    .</font> &lt;br/&gt; <font color="#696969">* [...]</font> &lt;br/&gt; <font color="#696969">* @author ur001 &lt;ur001ur001@gmail.com&gt;, {@link http://ur001.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param string $codePoint Unicode character ordinal.</font> &lt;br/&gt; <font color="#696969">* @return string|FALSE UTF-8   FALSE   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getChar( <font color="#cc6633">$codePoint</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x80</font> ) { <font color="#0000ff">return</font> chr( <font color="#cc6633">$codePoint</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x800</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xC0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x10000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xE0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x110000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xF0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">18</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">else</font> { <font color="#0000ff">return false</font> ; } } }</font></code> </li> <li> <code><font color="black"><a href="http://s-c.me/11935/s"></a> <a href="http://s-c.me/11935/h"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> Copy Source | Copy HTML <font color="#0000ff">class</font> String_Multibyte { <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*    UTF-8 ,       $index   $char.</font> &lt;br/&gt; <font color="#696969">*  ,    , BOM  0x10FFFE-0x10FFFF  FALSE.</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* [...]   ,    .</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* @author Andrew Dryga &lt;anddriga at gmail&gt;, {@link http://andryx.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param  string    $char     ().</font> &lt;br/&gt; <font color="#696969">* @param int        &amp;$index    ,        .       ,   .</font> &lt;br/&gt; <font color="#696969">* @return int|false     FALSE      ,   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getCodePoint( <font color="#cc6633">$char</font> , &amp; <font color="#cc6633">$index</font> = <font color="#008000">0</font> ) { <font color="#696969">//    </font> <font color="#cc6633">$octet1</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//      ASCII  (  0bbb bbbb),   .</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">7</font> == <font color="#008000">0x00</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$octet1</font> ; } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { <font color="#696969">//    </font> <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#696969">//   </font> <font color="#cc6633">$octet2</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//     (   10bb bbbb)</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet2</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#696969">//     6 </font> <font color="#cc6633">$octet2</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#696969">//         ,   </font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">5</font> == <font color="#008000">0x06</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x1F</font> ) &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet2</font> ; <font color="#696969">//       </font> <font color="#0000ff">if</font> ( <font color="#008000">0x80</font> &lt; <font color="#cc6633">$result</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet3</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">4</font> == <font color="#008000">0x0E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x0F</font> ) &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet3</font> ; <font color="#696969">//   ;  ,    BOM</font> <font color="#0000ff">if</font> ( <font color="#008000">0x800</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; !( <font color="#008000">0xD7FF</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF900</font> ) &amp;&amp; <font color="#cc6633">$result</font> != <font color="#008000">0xFEFF</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet4</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">3</font> == <font color="#008000">0x1E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x07</font> ) &lt;&lt; <font color="#008000">18</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet3</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet4</font> ; <font color="#696969">//   ;       ;</font> <font color="#696969">// ,         Unicode 10FFFF</font> <font color="#0000ff">if</font> ( <font color="#008000">0x10000</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF0000</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } } } <font color="#0000ff">return false</font> ; } } <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*  UTF-8    .</font> &lt;br/&gt; <font color="#696969">* [...]</font> &lt;br/&gt; <font color="#696969">* @author ur001 &lt;ur001ur001@gmail.com&gt;, {@link http://ur001.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param string $codePoint Unicode character ordinal.</font> &lt;br/&gt; <font color="#696969">* @return string|FALSE UTF-8   FALSE   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getChar( <font color="#cc6633">$codePoint</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x80</font> ) { <font color="#0000ff">return</font> chr( <font color="#cc6633">$codePoint</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x800</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xC0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x10000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xE0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x110000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xF0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">18</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">else</font> { <font color="#0000ff">return false</font> ; } } }</font></code> </li> <li></li><li> <code><font color="black"><a href="http://s-c.me/11935/s"></a> <a href="http://s-c.me/11935/h"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> Copy Source | Copy HTML <font color="#0000ff">class</font> String_Multibyte { <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*    UTF-8 ,       $index   $char.</font> &lt;br/&gt; <font color="#696969">*  ,    , BOM  0x10FFFE-0x10FFFF  FALSE.</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* [...]   ,    .</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* @author Andrew Dryga &lt;anddriga at gmail&gt;, {@link http://andryx.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param  string    $char     ().</font> &lt;br/&gt; <font color="#696969">* @param int        &amp;$index    ,        .       ,   .</font> &lt;br/&gt; <font color="#696969">* @return int|false     FALSE      ,   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getCodePoint( <font color="#cc6633">$char</font> , &amp; <font color="#cc6633">$index</font> = <font color="#008000">0</font> ) { <font color="#696969">//    </font> <font color="#cc6633">$octet1</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//      ASCII  (  0bbb bbbb),   .</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">7</font> == <font color="#008000">0x00</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$octet1</font> ; } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { <font color="#696969">//    </font> <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#696969">//   </font> <font color="#cc6633">$octet2</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//     (   10bb bbbb)</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet2</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#696969">//     6 </font> <font color="#cc6633">$octet2</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#696969">//         ,   </font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">5</font> == <font color="#008000">0x06</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x1F</font> ) &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet2</font> ; <font color="#696969">//       </font> <font color="#0000ff">if</font> ( <font color="#008000">0x80</font> &lt; <font color="#cc6633">$result</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet3</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">4</font> == <font color="#008000">0x0E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x0F</font> ) &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet3</font> ; <font color="#696969">//   ;  ,    BOM</font> <font color="#0000ff">if</font> ( <font color="#008000">0x800</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; !( <font color="#008000">0xD7FF</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF900</font> ) &amp;&amp; <font color="#cc6633">$result</font> != <font color="#008000">0xFEFF</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet4</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">3</font> == <font color="#008000">0x1E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x07</font> ) &lt;&lt; <font color="#008000">18</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet3</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet4</font> ; <font color="#696969">//   ;       ;</font> <font color="#696969">// ,         Unicode 10FFFF</font> <font color="#0000ff">if</font> ( <font color="#008000">0x10000</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF0000</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } } } <font color="#0000ff">return false</font> ; } } <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*  UTF-8    .</font> &lt;br/&gt; <font color="#696969">* [...]</font> &lt;br/&gt; <font color="#696969">* @author ur001 &lt;ur001ur001@gmail.com&gt;, {@link http://ur001.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param string $codePoint Unicode character ordinal.</font> &lt;br/&gt; <font color="#696969">* @return string|FALSE UTF-8   FALSE   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getChar( <font color="#cc6633">$codePoint</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x80</font> ) { <font color="#0000ff">return</font> chr( <font color="#cc6633">$codePoint</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x800</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xC0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x10000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xE0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x110000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xF0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">18</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">else</font> { <font color="#0000ff">return false</font> ; } } }</font></code> </li> <li> <code><font color="black"><a href="http://s-c.me/11935/s"></a> <a href="http://s-c.me/11935/h"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> Copy Source | Copy HTML <font color="#0000ff">class</font> String_Multibyte { <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*    UTF-8 ,       $index   $char.</font> &lt;br/&gt; <font color="#696969">*  ,    , BOM  0x10FFFE-0x10FFFF  FALSE.</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* [...]   ,    .</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* @author Andrew Dryga &lt;anddriga at gmail&gt;, {@link http://andryx.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param  string    $char     ().</font> &lt;br/&gt; <font color="#696969">* @param int        &amp;$index    ,        .       ,   .</font> &lt;br/&gt; <font color="#696969">* @return int|false     FALSE      ,   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getCodePoint( <font color="#cc6633">$char</font> , &amp; <font color="#cc6633">$index</font> = <font color="#008000">0</font> ) { <font color="#696969">//    </font> <font color="#cc6633">$octet1</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//      ASCII  (  0bbb bbbb),   .</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">7</font> == <font color="#008000">0x00</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$octet1</font> ; } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { <font color="#696969">//    </font> <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#696969">//   </font> <font color="#cc6633">$octet2</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//     (   10bb bbbb)</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet2</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#696969">//     6 </font> <font color="#cc6633">$octet2</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#696969">//         ,   </font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">5</font> == <font color="#008000">0x06</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x1F</font> ) &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet2</font> ; <font color="#696969">//       </font> <font color="#0000ff">if</font> ( <font color="#008000">0x80</font> &lt; <font color="#cc6633">$result</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet3</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">4</font> == <font color="#008000">0x0E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x0F</font> ) &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet3</font> ; <font color="#696969">//   ;  ,    BOM</font> <font color="#0000ff">if</font> ( <font color="#008000">0x800</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; !( <font color="#008000">0xD7FF</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF900</font> ) &amp;&amp; <font color="#cc6633">$result</font> != <font color="#008000">0xFEFF</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet4</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">3</font> == <font color="#008000">0x1E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x07</font> ) &lt;&lt; <font color="#008000">18</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet3</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet4</font> ; <font color="#696969">//   ;       ;</font> <font color="#696969">// ,         Unicode 10FFFF</font> <font color="#0000ff">if</font> ( <font color="#008000">0x10000</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF0000</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } } } <font color="#0000ff">return false</font> ; } } <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*  UTF-8    .</font> &lt;br/&gt; <font color="#696969">* [...]</font> &lt;br/&gt; <font color="#696969">* @author ur001 &lt;ur001ur001@gmail.com&gt;, {@link http://ur001.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param string $codePoint Unicode character ordinal.</font> &lt;br/&gt; <font color="#696969">* @return string|FALSE UTF-8   FALSE   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getChar( <font color="#cc6633">$codePoint</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x80</font> ) { <font color="#0000ff">return</font> chr( <font color="#cc6633">$codePoint</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x800</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xC0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x10000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xE0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x110000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xF0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">18</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">else</font> { <font color="#0000ff">return false</font> ; } } }</font></code> </li> <li> <code><font color="black"><a href="http://s-c.me/11935/s"></a> <a href="http://s-c.me/11935/h"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> Copy Source | Copy HTML <font color="#0000ff">class</font> String_Multibyte { <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*    UTF-8 ,       $index   $char.</font> &lt;br/&gt; <font color="#696969">*  ,    , BOM  0x10FFFE-0x10FFFF  FALSE.</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* [...]   ,    .</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* @author Andrew Dryga &lt;anddriga at gmail&gt;, {@link http://andryx.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param  string    $char     ().</font> &lt;br/&gt; <font color="#696969">* @param int        &amp;$index    ,        .       ,   .</font> &lt;br/&gt; <font color="#696969">* @return int|false     FALSE      ,   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getCodePoint( <font color="#cc6633">$char</font> , &amp; <font color="#cc6633">$index</font> = <font color="#008000">0</font> ) { <font color="#696969">//    </font> <font color="#cc6633">$octet1</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//      ASCII  (  0bbb bbbb),   .</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">7</font> == <font color="#008000">0x00</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$octet1</font> ; } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { <font color="#696969">//    </font> <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#696969">//   </font> <font color="#cc6633">$octet2</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//     (   10bb bbbb)</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet2</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#696969">//     6 </font> <font color="#cc6633">$octet2</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#696969">//         ,   </font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">5</font> == <font color="#008000">0x06</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x1F</font> ) &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet2</font> ; <font color="#696969">//       </font> <font color="#0000ff">if</font> ( <font color="#008000">0x80</font> &lt; <font color="#cc6633">$result</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet3</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">4</font> == <font color="#008000">0x0E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x0F</font> ) &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet3</font> ; <font color="#696969">//   ;  ,    BOM</font> <font color="#0000ff">if</font> ( <font color="#008000">0x800</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; !( <font color="#008000">0xD7FF</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF900</font> ) &amp;&amp; <font color="#cc6633">$result</font> != <font color="#008000">0xFEFF</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet4</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">3</font> == <font color="#008000">0x1E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x07</font> ) &lt;&lt; <font color="#008000">18</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet3</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet4</font> ; <font color="#696969">//   ;       ;</font> <font color="#696969">// ,         Unicode 10FFFF</font> <font color="#0000ff">if</font> ( <font color="#008000">0x10000</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF0000</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } } } <font color="#0000ff">return false</font> ; } } <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*  UTF-8    .</font> &lt;br/&gt; <font color="#696969">* [...]</font> &lt;br/&gt; <font color="#696969">* @author ur001 &lt;ur001ur001@gmail.com&gt;, {@link http://ur001.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param string $codePoint Unicode character ordinal.</font> &lt;br/&gt; <font color="#696969">* @return string|FALSE UTF-8   FALSE   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getChar( <font color="#cc6633">$codePoint</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x80</font> ) { <font color="#0000ff">return</font> chr( <font color="#cc6633">$codePoint</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x800</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xC0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x10000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xE0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x110000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xF0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">18</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">else</font> { <font color="#0000ff">return false</font> ; } } }</font></code> </li> <li> <code><font color="black"><a href="http://s-c.me/11935/s"></a> <a href="http://s-c.me/11935/h"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> Copy Source | Copy HTML <font color="#0000ff">class</font> String_Multibyte { <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*    UTF-8 ,       $index   $char.</font> &lt;br/&gt; <font color="#696969">*  ,    , BOM  0x10FFFE-0x10FFFF  FALSE.</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* [...]   ,    .</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* @author Andrew Dryga &lt;anddriga at gmail&gt;, {@link http://andryx.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param  string    $char     ().</font> &lt;br/&gt; <font color="#696969">* @param int        &amp;$index    ,        .       ,   .</font> &lt;br/&gt; <font color="#696969">* @return int|false     FALSE      ,   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getCodePoint( <font color="#cc6633">$char</font> , &amp; <font color="#cc6633">$index</font> = <font color="#008000">0</font> ) { <font color="#696969">//    </font> <font color="#cc6633">$octet1</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//      ASCII  (  0bbb bbbb),   .</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">7</font> == <font color="#008000">0x00</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$octet1</font> ; } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { <font color="#696969">//    </font> <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#696969">//   </font> <font color="#cc6633">$octet2</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//     (   10bb bbbb)</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet2</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#696969">//     6 </font> <font color="#cc6633">$octet2</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#696969">//         ,   </font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">5</font> == <font color="#008000">0x06</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x1F</font> ) &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet2</font> ; <font color="#696969">//       </font> <font color="#0000ff">if</font> ( <font color="#008000">0x80</font> &lt; <font color="#cc6633">$result</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet3</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">4</font> == <font color="#008000">0x0E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x0F</font> ) &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet3</font> ; <font color="#696969">//   ;  ,    BOM</font> <font color="#0000ff">if</font> ( <font color="#008000">0x800</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; !( <font color="#008000">0xD7FF</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF900</font> ) &amp;&amp; <font color="#cc6633">$result</font> != <font color="#008000">0xFEFF</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet4</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">3</font> == <font color="#008000">0x1E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x07</font> ) &lt;&lt; <font color="#008000">18</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet3</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet4</font> ; <font color="#696969">//   ;       ;</font> <font color="#696969">// ,         Unicode 10FFFF</font> <font color="#0000ff">if</font> ( <font color="#008000">0x10000</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF0000</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } } } <font color="#0000ff">return false</font> ; } } <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*  UTF-8    .</font> &lt;br/&gt; <font color="#696969">* [...]</font> &lt;br/&gt; <font color="#696969">* @author ur001 &lt;ur001ur001@gmail.com&gt;, {@link http://ur001.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param string $codePoint Unicode character ordinal.</font> &lt;br/&gt; <font color="#696969">* @return string|FALSE UTF-8   FALSE   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getChar( <font color="#cc6633">$codePoint</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x80</font> ) { <font color="#0000ff">return</font> chr( <font color="#cc6633">$codePoint</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x800</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xC0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x10000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xE0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x110000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xF0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">18</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">else</font> { <font color="#0000ff">return false</font> ; } } }</font></code> </li> <li> <code><font color="black"><a href="http://s-c.me/11935/s"></a> <a href="http://s-c.me/11935/h"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> Copy Source | Copy HTML <font color="#0000ff">class</font> String_Multibyte { <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*    UTF-8 ,       $index   $char.</font> &lt;br/&gt; <font color="#696969">*  ,    , BOM  0x10FFFE-0x10FFFF  FALSE.</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* [...]   ,    .</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* @author Andrew Dryga &lt;anddriga at gmail&gt;, {@link http://andryx.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param  string    $char     ().</font> &lt;br/&gt; <font color="#696969">* @param int        &amp;$index    ,        .       ,   .</font> &lt;br/&gt; <font color="#696969">* @return int|false     FALSE      ,   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getCodePoint( <font color="#cc6633">$char</font> , &amp; <font color="#cc6633">$index</font> = <font color="#008000">0</font> ) { <font color="#696969">//    </font> <font color="#cc6633">$octet1</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//      ASCII  (  0bbb bbbb),   .</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">7</font> == <font color="#008000">0x00</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$octet1</font> ; } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { <font color="#696969">//    </font> <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#696969">//   </font> <font color="#cc6633">$octet2</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//     (   10bb bbbb)</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet2</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#696969">//     6 </font> <font color="#cc6633">$octet2</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#696969">//         ,   </font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">5</font> == <font color="#008000">0x06</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x1F</font> ) &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet2</font> ; <font color="#696969">//       </font> <font color="#0000ff">if</font> ( <font color="#008000">0x80</font> &lt; <font color="#cc6633">$result</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet3</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">4</font> == <font color="#008000">0x0E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x0F</font> ) &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet3</font> ; <font color="#696969">//   ;  ,    BOM</font> <font color="#0000ff">if</font> ( <font color="#008000">0x800</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; !( <font color="#008000">0xD7FF</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF900</font> ) &amp;&amp; <font color="#cc6633">$result</font> != <font color="#008000">0xFEFF</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet4</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">3</font> == <font color="#008000">0x1E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x07</font> ) &lt;&lt; <font color="#008000">18</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet3</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet4</font> ; <font color="#696969">//   ;       ;</font> <font color="#696969">// ,         Unicode 10FFFF</font> <font color="#0000ff">if</font> ( <font color="#008000">0x10000</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF0000</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } } } <font color="#0000ff">return false</font> ; } } <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*  UTF-8    .</font> &lt;br/&gt; <font color="#696969">* [...]</font> &lt;br/&gt; <font color="#696969">* @author ur001 &lt;ur001ur001@gmail.com&gt;, {@link http://ur001.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param string $codePoint Unicode character ordinal.</font> &lt;br/&gt; <font color="#696969">* @return string|FALSE UTF-8   FALSE   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getChar( <font color="#cc6633">$codePoint</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x80</font> ) { <font color="#0000ff">return</font> chr( <font color="#cc6633">$codePoint</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x800</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xC0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x10000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xE0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x110000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xF0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">18</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">else</font> { <font color="#0000ff">return false</font> ; } } }</font></code> </li> <li> <code><font color="black"><a href="http://s-c.me/11935/s"></a> <a href="http://s-c.me/11935/h"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> Copy Source | Copy HTML <font color="#0000ff">class</font> String_Multibyte { <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*    UTF-8 ,       $index   $char.</font> &lt;br/&gt; <font color="#696969">*  ,    , BOM  0x10FFFE-0x10FFFF  FALSE.</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* [...]   ,    .</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* @author Andrew Dryga &lt;anddriga at gmail&gt;, {@link http://andryx.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param  string    $char     ().</font> &lt;br/&gt; <font color="#696969">* @param int        &amp;$index    ,        .       ,   .</font> &lt;br/&gt; <font color="#696969">* @return int|false     FALSE      ,   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getCodePoint( <font color="#cc6633">$char</font> , &amp; <font color="#cc6633">$index</font> = <font color="#008000">0</font> ) { <font color="#696969">//    </font> <font color="#cc6633">$octet1</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//      ASCII  (  0bbb bbbb),   .</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">7</font> == <font color="#008000">0x00</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$octet1</font> ; } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { <font color="#696969">//    </font> <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#696969">//   </font> <font color="#cc6633">$octet2</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//     (   10bb bbbb)</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet2</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#696969">//     6 </font> <font color="#cc6633">$octet2</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#696969">//         ,   </font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">5</font> == <font color="#008000">0x06</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x1F</font> ) &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet2</font> ; <font color="#696969">//       </font> <font color="#0000ff">if</font> ( <font color="#008000">0x80</font> &lt; <font color="#cc6633">$result</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet3</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">4</font> == <font color="#008000">0x0E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x0F</font> ) &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet3</font> ; <font color="#696969">//   ;  ,    BOM</font> <font color="#0000ff">if</font> ( <font color="#008000">0x800</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; !( <font color="#008000">0xD7FF</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF900</font> ) &amp;&amp; <font color="#cc6633">$result</font> != <font color="#008000">0xFEFF</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet4</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">3</font> == <font color="#008000">0x1E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x07</font> ) &lt;&lt; <font color="#008000">18</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet3</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet4</font> ; <font color="#696969">//   ;       ;</font> <font color="#696969">// ,         Unicode 10FFFF</font> <font color="#0000ff">if</font> ( <font color="#008000">0x10000</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF0000</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } } } <font color="#0000ff">return false</font> ; } } <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*  UTF-8    .</font> &lt;br/&gt; <font color="#696969">* [...]</font> &lt;br/&gt; <font color="#696969">* @author ur001 &lt;ur001ur001@gmail.com&gt;, {@link http://ur001.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param string $codePoint Unicode character ordinal.</font> &lt;br/&gt; <font color="#696969">* @return string|FALSE UTF-8   FALSE   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getChar( <font color="#cc6633">$codePoint</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x80</font> ) { <font color="#0000ff">return</font> chr( <font color="#cc6633">$codePoint</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x800</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xC0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x10000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xE0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x110000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xF0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">18</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">else</font> { <font color="#0000ff">return false</font> ; } } }</font></code> </li> <li></li><li> <code><font color="black"><a href="http://s-c.me/11935/s"></a> <a href="http://s-c.me/11935/h"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> Copy Source | Copy HTML <font color="#0000ff">class</font> String_Multibyte { <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*    UTF-8 ,       $index   $char.</font> &lt;br/&gt; <font color="#696969">*  ,    , BOM  0x10FFFE-0x10FFFF  FALSE.</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* [...]   ,    .</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* @author Andrew Dryga &lt;anddriga at gmail&gt;, {@link http://andryx.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param  string    $char     ().</font> &lt;br/&gt; <font color="#696969">* @param int        &amp;$index    ,        .       ,   .</font> &lt;br/&gt; <font color="#696969">* @return int|false     FALSE      ,   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getCodePoint( <font color="#cc6633">$char</font> , &amp; <font color="#cc6633">$index</font> = <font color="#008000">0</font> ) { <font color="#696969">//    </font> <font color="#cc6633">$octet1</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//      ASCII  (  0bbb bbbb),   .</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">7</font> == <font color="#008000">0x00</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$octet1</font> ; } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { <font color="#696969">//    </font> <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#696969">//   </font> <font color="#cc6633">$octet2</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//     (   10bb bbbb)</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet2</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#696969">//     6 </font> <font color="#cc6633">$octet2</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#696969">//         ,   </font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">5</font> == <font color="#008000">0x06</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x1F</font> ) &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet2</font> ; <font color="#696969">//       </font> <font color="#0000ff">if</font> ( <font color="#008000">0x80</font> &lt; <font color="#cc6633">$result</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet3</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">4</font> == <font color="#008000">0x0E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x0F</font> ) &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet3</font> ; <font color="#696969">//   ;  ,    BOM</font> <font color="#0000ff">if</font> ( <font color="#008000">0x800</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; !( <font color="#008000">0xD7FF</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF900</font> ) &amp;&amp; <font color="#cc6633">$result</font> != <font color="#008000">0xFEFF</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet4</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">3</font> == <font color="#008000">0x1E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x07</font> ) &lt;&lt; <font color="#008000">18</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet3</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet4</font> ; <font color="#696969">//   ;       ;</font> <font color="#696969">// ,         Unicode 10FFFF</font> <font color="#0000ff">if</font> ( <font color="#008000">0x10000</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF0000</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } } } <font color="#0000ff">return false</font> ; } } <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*  UTF-8    .</font> &lt;br/&gt; <font color="#696969">* [...]</font> &lt;br/&gt; <font color="#696969">* @author ur001 &lt;ur001ur001@gmail.com&gt;, {@link http://ur001.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param string $codePoint Unicode character ordinal.</font> &lt;br/&gt; <font color="#696969">* @return string|FALSE UTF-8   FALSE   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getChar( <font color="#cc6633">$codePoint</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x80</font> ) { <font color="#0000ff">return</font> chr( <font color="#cc6633">$codePoint</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x800</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xC0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x10000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xE0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x110000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xF0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">18</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">else</font> { <font color="#0000ff">return false</font> ; } } }</font></code> </li> <li> <code><font color="black"><a href="http://s-c.me/11935/s"></a> <a href="http://s-c.me/11935/h"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> Copy Source | Copy HTML <font color="#0000ff">class</font> String_Multibyte { <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*    UTF-8 ,       $index   $char.</font> &lt;br/&gt; <font color="#696969">*  ,    , BOM  0x10FFFE-0x10FFFF  FALSE.</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* [...]   ,    .</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* @author Andrew Dryga &lt;anddriga at gmail&gt;, {@link http://andryx.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param  string    $char     ().</font> &lt;br/&gt; <font color="#696969">* @param int        &amp;$index    ,        .       ,   .</font> &lt;br/&gt; <font color="#696969">* @return int|false     FALSE      ,   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getCodePoint( <font color="#cc6633">$char</font> , &amp; <font color="#cc6633">$index</font> = <font color="#008000">0</font> ) { <font color="#696969">//    </font> <font color="#cc6633">$octet1</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//      ASCII  (  0bbb bbbb),   .</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">7</font> == <font color="#008000">0x00</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$octet1</font> ; } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { <font color="#696969">//    </font> <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#696969">//   </font> <font color="#cc6633">$octet2</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//     (   10bb bbbb)</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet2</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#696969">//     6 </font> <font color="#cc6633">$octet2</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#696969">//         ,   </font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">5</font> == <font color="#008000">0x06</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x1F</font> ) &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet2</font> ; <font color="#696969">//       </font> <font color="#0000ff">if</font> ( <font color="#008000">0x80</font> &lt; <font color="#cc6633">$result</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet3</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">4</font> == <font color="#008000">0x0E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x0F</font> ) &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet3</font> ; <font color="#696969">//   ;  ,    BOM</font> <font color="#0000ff">if</font> ( <font color="#008000">0x800</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; !( <font color="#008000">0xD7FF</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF900</font> ) &amp;&amp; <font color="#cc6633">$result</font> != <font color="#008000">0xFEFF</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet4</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">3</font> == <font color="#008000">0x1E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x07</font> ) &lt;&lt; <font color="#008000">18</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet3</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet4</font> ; <font color="#696969">//   ;       ;</font> <font color="#696969">// ,         Unicode 10FFFF</font> <font color="#0000ff">if</font> ( <font color="#008000">0x10000</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF0000</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } } } <font color="#0000ff">return false</font> ; } } <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*  UTF-8    .</font> &lt;br/&gt; <font color="#696969">* [...]</font> &lt;br/&gt; <font color="#696969">* @author ur001 &lt;ur001ur001@gmail.com&gt;, {@link http://ur001.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param string $codePoint Unicode character ordinal.</font> &lt;br/&gt; <font color="#696969">* @return string|FALSE UTF-8   FALSE   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getChar( <font color="#cc6633">$codePoint</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x80</font> ) { <font color="#0000ff">return</font> chr( <font color="#cc6633">$codePoint</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x800</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xC0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x10000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xE0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x110000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xF0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">18</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">else</font> { <font color="#0000ff">return false</font> ; } } }</font></code> </li> <li> <code><font color="black"><font color="#696969"><a href="http://s-c.me/11935/s"></a> <a href="http://s-c.me/11935/h"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> Copy Source | Copy HTML <font color="#0000ff">class</font> String_Multibyte { <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*    UTF-8 ,       $index   $char.</font> &lt;br/&gt; <font color="#696969">*  ,    , BOM  0x10FFFE-0x10FFFF  FALSE.</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* [...]   ,    .</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* @author Andrew Dryga &lt;anddriga at gmail&gt;, {@link http://andryx.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param  string    $char     ().</font> &lt;br/&gt; <font color="#696969">* @param int        &amp;$index    ,        .       ,   .</font> &lt;br/&gt; <font color="#696969">* @return int|false     FALSE      ,   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getCodePoint( <font color="#cc6633">$char</font> , &amp; <font color="#cc6633">$index</font> = <font color="#008000">0</font> ) { <font color="#696969">//    </font> <font color="#cc6633">$octet1</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//      ASCII  (  0bbb bbbb),   .</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">7</font> == <font color="#008000">0x00</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$octet1</font> ; } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { <font color="#696969">//    </font> <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#696969">//   </font> <font color="#cc6633">$octet2</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//     (   10bb bbbb)</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet2</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#696969">//     6 </font> <font color="#cc6633">$octet2</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#696969">//         ,   </font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">5</font> == <font color="#008000">0x06</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x1F</font> ) &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet2</font> ; <font color="#696969">//       </font> <font color="#0000ff">if</font> ( <font color="#008000">0x80</font> &lt; <font color="#cc6633">$result</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet3</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">4</font> == <font color="#008000">0x0E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x0F</font> ) &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet3</font> ; //   ;  ,    BOM <font color="#0000ff">if</font> ( <font color="#008000">0x800</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; !( <font color="#008000">0xD7FF</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF900</font> ) &amp;&amp; <font color="#cc6633">$result</font> != <font color="#008000">0xFEFF</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet4</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">3</font> == <font color="#008000">0x1E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x07</font> ) &lt;&lt; <font color="#008000">18</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet3</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet4</font> ; <font color="#696969">//   ;       ;</font> <font color="#696969">// ,         Unicode 10FFFF</font> <font color="#0000ff">if</font> ( <font color="#008000">0x10000</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF0000</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } } } <font color="#0000ff">return false</font> ; } } <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*  UTF-8    .</font> &lt;br/&gt; <font color="#696969">* [...]</font> &lt;br/&gt; <font color="#696969">* @author ur001 &lt;ur001ur001@gmail.com&gt;, {@link http://ur001.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param string $codePoint Unicode character ordinal.</font> &lt;br/&gt; <font color="#696969">* @return string|FALSE UTF-8   FALSE   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getChar( <font color="#cc6633">$codePoint</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x80</font> ) { <font color="#0000ff">return</font> chr( <font color="#cc6633">$codePoint</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x800</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xC0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x10000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xE0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x110000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xF0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">18</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">else</font> { <font color="#0000ff">return false</font> ; } } }</font></font></code> </li> <li> <code><font color="black"><a href="http://s-c.me/11935/s"></a> <a href="http://s-c.me/11935/h"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> Copy Source | Copy HTML <font color="#0000ff">class</font> String_Multibyte { <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*    UTF-8 ,       $index   $char.</font> &lt;br/&gt; <font color="#696969">*  ,    , BOM  0x10FFFE-0x10FFFF  FALSE.</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* [...]   ,    .</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* @author Andrew Dryga &lt;anddriga at gmail&gt;, {@link http://andryx.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param  string    $char     ().</font> &lt;br/&gt; <font color="#696969">* @param int        &amp;$index    ,        .       ,   .</font> &lt;br/&gt; <font color="#696969">* @return int|false     FALSE      ,   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getCodePoint( <font color="#cc6633">$char</font> , &amp; <font color="#cc6633">$index</font> = <font color="#008000">0</font> ) { <font color="#696969">//    </font> <font color="#cc6633">$octet1</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//      ASCII  (  0bbb bbbb),   .</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">7</font> == <font color="#008000">0x00</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$octet1</font> ; } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { <font color="#696969">//    </font> <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#696969">//   </font> <font color="#cc6633">$octet2</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//     (   10bb bbbb)</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet2</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#696969">//     6 </font> <font color="#cc6633">$octet2</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#696969">//         ,   </font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">5</font> == <font color="#008000">0x06</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x1F</font> ) &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet2</font> ; <font color="#696969">//       </font> <font color="#0000ff">if</font> ( <font color="#008000">0x80</font> &lt; <font color="#cc6633">$result</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet3</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">4</font> == <font color="#008000">0x0E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x0F</font> ) &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet3</font> ; <font color="#696969">//   ;  ,    BOM</font> <font color="#0000ff">if</font> ( <font color="#008000">0x800</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; !( <font color="#008000">0xD7FF</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF900</font> ) &amp;&amp; <font color="#cc6633">$result</font> != <font color="#008000">0xFEFF</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet4</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">3</font> == <font color="#008000">0x1E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x07</font> ) &lt;&lt; <font color="#008000">18</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet3</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet4</font> ; <font color="#696969">//   ;       ;</font> <font color="#696969">// ,         Unicode 10FFFF</font> <font color="#0000ff">if</font> ( <font color="#008000">0x10000</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF0000</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } } } <font color="#0000ff">return false</font> ; } } <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*  UTF-8    .</font> &lt;br/&gt; <font color="#696969">* [...]</font> &lt;br/&gt; <font color="#696969">* @author ur001 &lt;ur001ur001@gmail.com&gt;, {@link http://ur001.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param string $codePoint Unicode character ordinal.</font> &lt;br/&gt; <font color="#696969">* @return string|FALSE UTF-8   FALSE   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getChar( <font color="#cc6633">$codePoint</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x80</font> ) { <font color="#0000ff">return</font> chr( <font color="#cc6633">$codePoint</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x800</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xC0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x10000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xE0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x110000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xF0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">18</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">else</font> { <font color="#0000ff">return false</font> ; } } }</font></code> </li> <li> <code><font color="black"><a href="http://s-c.me/11935/s"></a> <a href="http://s-c.me/11935/h"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> Copy Source | Copy HTML <font color="#0000ff">class</font> String_Multibyte { <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*    UTF-8 ,       $index   $char.</font> &lt;br/&gt; <font color="#696969">*  ,    , BOM  0x10FFFE-0x10FFFF  FALSE.</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* [...]   ,    .</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* @author Andrew Dryga &lt;anddriga at gmail&gt;, {@link http://andryx.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param  string    $char     ().</font> &lt;br/&gt; <font color="#696969">* @param int        &amp;$index    ,        .       ,   .</font> &lt;br/&gt; <font color="#696969">* @return int|false     FALSE      ,   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getCodePoint( <font color="#cc6633">$char</font> , &amp; <font color="#cc6633">$index</font> = <font color="#008000">0</font> ) { <font color="#696969">//    </font> <font color="#cc6633">$octet1</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//      ASCII  (  0bbb bbbb),   .</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">7</font> == <font color="#008000">0x00</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$octet1</font> ; } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { <font color="#696969">//    </font> <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#696969">//   </font> <font color="#cc6633">$octet2</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//     (   10bb bbbb)</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet2</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#696969">//     6 </font> <font color="#cc6633">$octet2</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#696969">//         ,   </font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">5</font> == <font color="#008000">0x06</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x1F</font> ) &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet2</font> ; <font color="#696969">//       </font> <font color="#0000ff">if</font> ( <font color="#008000">0x80</font> &lt; <font color="#cc6633">$result</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet3</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">4</font> == <font color="#008000">0x0E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x0F</font> ) &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet3</font> ; <font color="#696969">//   ;  ,    BOM</font> <font color="#0000ff">if</font> ( <font color="#008000">0x800</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; !( <font color="#008000">0xD7FF</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF900</font> ) &amp;&amp; <font color="#cc6633">$result</font> != <font color="#008000">0xFEFF</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet4</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">3</font> == <font color="#008000">0x1E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x07</font> ) &lt;&lt; <font color="#008000">18</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet3</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet4</font> ; <font color="#696969">//   ;       ;</font> <font color="#696969">// ,         Unicode 10FFFF</font> <font color="#0000ff">if</font> ( <font color="#008000">0x10000</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF0000</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } } } <font color="#0000ff">return false</font> ; } } <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*  UTF-8    .</font> &lt;br/&gt; <font color="#696969">* [...]</font> &lt;br/&gt; <font color="#696969">* @author ur001 &lt;ur001ur001@gmail.com&gt;, {@link http://ur001.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param string $codePoint Unicode character ordinal.</font> &lt;br/&gt; <font color="#696969">* @return string|FALSE UTF-8   FALSE   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getChar( <font color="#cc6633">$codePoint</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x80</font> ) { <font color="#0000ff">return</font> chr( <font color="#cc6633">$codePoint</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x800</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xC0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x10000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xE0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x110000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xF0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">18</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">else</font> { <font color="#0000ff">return false</font> ; } } }</font></code> </li> <li> <code><font color="black"><a href="http://s-c.me/11935/s"></a> <a href="http://s-c.me/11935/h"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> Copy Source | Copy HTML <font color="#0000ff">class</font> String_Multibyte { <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*    UTF-8 ,       $index   $char.</font> &lt;br/&gt; <font color="#696969">*  ,    , BOM  0x10FFFE-0x10FFFF  FALSE.</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* [...]   ,    .</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* @author Andrew Dryga &lt;anddriga at gmail&gt;, {@link http://andryx.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param  string    $char     ().</font> &lt;br/&gt; <font color="#696969">* @param int        &amp;$index    ,        .       ,   .</font> &lt;br/&gt; <font color="#696969">* @return int|false     FALSE      ,   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getCodePoint( <font color="#cc6633">$char</font> , &amp; <font color="#cc6633">$index</font> = <font color="#008000">0</font> ) { <font color="#696969">//    </font> <font color="#cc6633">$octet1</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//      ASCII  (  0bbb bbbb),   .</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">7</font> == <font color="#008000">0x00</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$octet1</font> ; } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { <font color="#696969">//    </font> <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#696969">//   </font> <font color="#cc6633">$octet2</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//     (   10bb bbbb)</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet2</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#696969">//     6 </font> <font color="#cc6633">$octet2</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#696969">//         ,   </font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">5</font> == <font color="#008000">0x06</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x1F</font> ) &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet2</font> ; <font color="#696969">//       </font> <font color="#0000ff">if</font> ( <font color="#008000">0x80</font> &lt; <font color="#cc6633">$result</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet3</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">4</font> == <font color="#008000">0x0E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x0F</font> ) &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet3</font> ; <font color="#696969">//   ;  ,    BOM</font> <font color="#0000ff">if</font> ( <font color="#008000">0x800</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; !( <font color="#008000">0xD7FF</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF900</font> ) &amp;&amp; <font color="#cc6633">$result</font> != <font color="#008000">0xFEFF</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet4</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">3</font> == <font color="#008000">0x1E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x07</font> ) &lt;&lt; <font color="#008000">18</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet3</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet4</font> ; <font color="#696969">//   ;       ;</font> <font color="#696969">// ,         Unicode 10FFFF</font> <font color="#0000ff">if</font> ( <font color="#008000">0x10000</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF0000</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } } } <font color="#0000ff">return false</font> ; } } <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*  UTF-8    .</font> &lt;br/&gt; <font color="#696969">* [...]</font> &lt;br/&gt; <font color="#696969">* @author ur001 &lt;ur001ur001@gmail.com&gt;, {@link http://ur001.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param string $codePoint Unicode character ordinal.</font> &lt;br/&gt; <font color="#696969">* @return string|FALSE UTF-8   FALSE   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getChar( <font color="#cc6633">$codePoint</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x80</font> ) { <font color="#0000ff">return</font> chr( <font color="#cc6633">$codePoint</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x800</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xC0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x10000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xE0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x110000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xF0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">18</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">else</font> { <font color="#0000ff">return false</font> ; } } }</font></code> </li> <li> <code><font color="black"><a href="http://s-c.me/11935/s"></a> <a href="http://s-c.me/11935/h"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> Copy Source | Copy HTML <font color="#0000ff">class</font> String_Multibyte { <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*    UTF-8 ,       $index   $char.</font> &lt;br/&gt; <font color="#696969">*  ,    , BOM  0x10FFFE-0x10FFFF  FALSE.</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* [...]   ,    .</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* @author Andrew Dryga &lt;anddriga at gmail&gt;, {@link http://andryx.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param  string    $char     ().</font> &lt;br/&gt; <font color="#696969">* @param int        &amp;$index    ,        .       ,   .</font> &lt;br/&gt; <font color="#696969">* @return int|false     FALSE      ,   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getCodePoint( <font color="#cc6633">$char</font> , &amp; <font color="#cc6633">$index</font> = <font color="#008000">0</font> ) { <font color="#696969">//    </font> <font color="#cc6633">$octet1</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//      ASCII  (  0bbb bbbb),   .</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">7</font> == <font color="#008000">0x00</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$octet1</font> ; } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { <font color="#696969">//    </font> <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#696969">//   </font> <font color="#cc6633">$octet2</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//     (   10bb bbbb)</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet2</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#696969">//     6 </font> <font color="#cc6633">$octet2</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#696969">//         ,   </font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">5</font> == <font color="#008000">0x06</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x1F</font> ) &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet2</font> ; <font color="#696969">//       </font> <font color="#0000ff">if</font> ( <font color="#008000">0x80</font> &lt; <font color="#cc6633">$result</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet3</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">4</font> == <font color="#008000">0x0E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x0F</font> ) &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet3</font> ; <font color="#696969">//   ;  ,    BOM</font> <font color="#0000ff">if</font> ( <font color="#008000">0x800</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; !( <font color="#008000">0xD7FF</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF900</font> ) &amp;&amp; <font color="#cc6633">$result</font> != <font color="#008000">0xFEFF</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet4</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">3</font> == <font color="#008000">0x1E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x07</font> ) &lt;&lt; <font color="#008000">18</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet3</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet4</font> ; <font color="#696969">//   ;       ;</font> <font color="#696969">// ,         Unicode 10FFFF</font> <font color="#0000ff">if</font> ( <font color="#008000">0x10000</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF0000</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } } } <font color="#0000ff">return false</font> ; } } <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*  UTF-8    .</font> &lt;br/&gt; <font color="#696969">* [...]</font> &lt;br/&gt; <font color="#696969">* @author ur001 &lt;ur001ur001@gmail.com&gt;, {@link http://ur001.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param string $codePoint Unicode character ordinal.</font> &lt;br/&gt; <font color="#696969">* @return string|FALSE UTF-8   FALSE   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getChar( <font color="#cc6633">$codePoint</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x80</font> ) { <font color="#0000ff">return</font> chr( <font color="#cc6633">$codePoint</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x800</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xC0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x10000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xE0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x110000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xF0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">18</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">else</font> { <font color="#0000ff">return false</font> ; } } }</font></code> </li> <li> <code><font color="black"><a href="http://s-c.me/11935/s"></a> <a href="http://s-c.me/11935/h"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> Copy Source | Copy HTML <font color="#0000ff">class</font> String_Multibyte { <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*    UTF-8 ,       $index   $char.</font> &lt;br/&gt; <font color="#696969">*  ,    , BOM  0x10FFFE-0x10FFFF  FALSE.</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* [...]   ,    .</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* @author Andrew Dryga &lt;anddriga at gmail&gt;, {@link http://andryx.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param  string    $char     ().</font> &lt;br/&gt; <font color="#696969">* @param int        &amp;$index    ,        .       ,   .</font> &lt;br/&gt; <font color="#696969">* @return int|false     FALSE      ,   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getCodePoint( <font color="#cc6633">$char</font> , &amp; <font color="#cc6633">$index</font> = <font color="#008000">0</font> ) { <font color="#696969">//    </font> <font color="#cc6633">$octet1</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//      ASCII  (  0bbb bbbb),   .</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">7</font> == <font color="#008000">0x00</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$octet1</font> ; } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { <font color="#696969">//    </font> <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#696969">//   </font> <font color="#cc6633">$octet2</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//     (   10bb bbbb)</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet2</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#696969">//     6 </font> <font color="#cc6633">$octet2</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#696969">//         ,   </font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">5</font> == <font color="#008000">0x06</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x1F</font> ) &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet2</font> ; <font color="#696969">//       </font> <font color="#0000ff">if</font> ( <font color="#008000">0x80</font> &lt; <font color="#cc6633">$result</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet3</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">4</font> == <font color="#008000">0x0E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x0F</font> ) &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet3</font> ; <font color="#696969">//   ;  ,    BOM</font> <font color="#0000ff">if</font> ( <font color="#008000">0x800</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; !( <font color="#008000">0xD7FF</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF900</font> ) &amp;&amp; <font color="#cc6633">$result</font> != <font color="#008000">0xFEFF</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet4</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">3</font> == <font color="#008000">0x1E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x07</font> ) &lt;&lt; <font color="#008000">18</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet3</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet4</font> ; <font color="#696969">//   ;       ;</font> <font color="#696969">// ,         Unicode 10FFFF</font> <font color="#0000ff">if</font> ( <font color="#008000">0x10000</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF0000</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } } } <font color="#0000ff">return false</font> ; } } <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*  UTF-8    .</font> &lt;br/&gt; <font color="#696969">* [...]</font> &lt;br/&gt; <font color="#696969">* @author ur001 &lt;ur001ur001@gmail.com&gt;, {@link http://ur001.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param string $codePoint Unicode character ordinal.</font> &lt;br/&gt; <font color="#696969">* @return string|FALSE UTF-8   FALSE   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getChar( <font color="#cc6633">$codePoint</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x80</font> ) { <font color="#0000ff">return</font> chr( <font color="#cc6633">$codePoint</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x800</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xC0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x10000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xE0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x110000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xF0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">18</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">else</font> { <font color="#0000ff">return false</font> ; } } }</font></code> </li> <li> <code><font color="black"><a href="http://s-c.me/11935/s"></a> <a href="http://s-c.me/11935/h"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> Copy Source | Copy HTML <font color="#0000ff">class</font> String_Multibyte { <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*    UTF-8 ,       $index   $char.</font> &lt;br/&gt; <font color="#696969">*  ,    , BOM  0x10FFFE-0x10FFFF  FALSE.</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* [...]   ,    .</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* @author Andrew Dryga &lt;anddriga at gmail&gt;, {@link http://andryx.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param  string    $char     ().</font> &lt;br/&gt; <font color="#696969">* @param int        &amp;$index    ,        .       ,   .</font> &lt;br/&gt; <font color="#696969">* @return int|false     FALSE      ,   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getCodePoint( <font color="#cc6633">$char</font> , &amp; <font color="#cc6633">$index</font> = <font color="#008000">0</font> ) { <font color="#696969">//    </font> <font color="#cc6633">$octet1</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//      ASCII  (  0bbb bbbb),   .</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">7</font> == <font color="#008000">0x00</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$octet1</font> ; } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { <font color="#696969">//    </font> <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#696969">//   </font> <font color="#cc6633">$octet2</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//     (   10bb bbbb)</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet2</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#696969">//     6 </font> <font color="#cc6633">$octet2</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#696969">//         ,   </font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">5</font> == <font color="#008000">0x06</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x1F</font> ) &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet2</font> ; <font color="#696969">//       </font> <font color="#0000ff">if</font> ( <font color="#008000">0x80</font> &lt; <font color="#cc6633">$result</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet3</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">4</font> == <font color="#008000">0x0E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x0F</font> ) &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet3</font> ; <font color="#696969">//   ;  ,    BOM</font> <font color="#0000ff">if</font> ( <font color="#008000">0x800</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; !( <font color="#008000">0xD7FF</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF900</font> ) &amp;&amp; <font color="#cc6633">$result</font> != <font color="#008000">0xFEFF</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet4</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">3</font> == <font color="#008000">0x1E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x07</font> ) &lt;&lt; <font color="#008000">18</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet3</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet4</font> ; <font color="#696969">//   ;       ;</font> <font color="#696969">// ,         Unicode 10FFFF</font> <font color="#0000ff">if</font> ( <font color="#008000">0x10000</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF0000</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } } } <font color="#0000ff">return false</font> ; } } <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*  UTF-8    .</font> &lt;br/&gt; <font color="#696969">* [...]</font> &lt;br/&gt; <font color="#696969">* @author ur001 &lt;ur001ur001@gmail.com&gt;, {@link http://ur001.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param string $codePoint Unicode character ordinal.</font> &lt;br/&gt; <font color="#696969">* @return string|FALSE UTF-8   FALSE   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getChar( <font color="#cc6633">$codePoint</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x80</font> ) { <font color="#0000ff">return</font> chr( <font color="#cc6633">$codePoint</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x800</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xC0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x10000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xE0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x110000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xF0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">18</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">else</font> { <font color="#0000ff">return false</font> ; } } }</font></code> </li> <li> <code><font color="black"><a href="http://s-c.me/11935/s"></a> <a href="http://s-c.me/11935/h"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> Copy Source | Copy HTML <font color="#0000ff">class</font> String_Multibyte { <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*    UTF-8 ,       $index   $char.</font> &lt;br/&gt; <font color="#696969">*  ,    , BOM  0x10FFFE-0x10FFFF  FALSE.</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* [...]   ,    .</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* @author Andrew Dryga &lt;anddriga at gmail&gt;, {@link http://andryx.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param  string    $char     ().</font> &lt;br/&gt; <font color="#696969">* @param int        &amp;$index    ,        .       ,   .</font> &lt;br/&gt; <font color="#696969">* @return int|false     FALSE      ,   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getCodePoint( <font color="#cc6633">$char</font> , &amp; <font color="#cc6633">$index</font> = <font color="#008000">0</font> ) { <font color="#696969">//    </font> <font color="#cc6633">$octet1</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//      ASCII  (  0bbb bbbb),   .</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">7</font> == <font color="#008000">0x00</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$octet1</font> ; } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { <font color="#696969">//    </font> <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#696969">//   </font> <font color="#cc6633">$octet2</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//     (   10bb bbbb)</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet2</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#696969">//     6 </font> <font color="#cc6633">$octet2</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#696969">//         ,   </font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">5</font> == <font color="#008000">0x06</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x1F</font> ) &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet2</font> ; <font color="#696969">//       </font> <font color="#0000ff">if</font> ( <font color="#008000">0x80</font> &lt; <font color="#cc6633">$result</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet3</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">4</font> == <font color="#008000">0x0E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x0F</font> ) &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet3</font> ; <font color="#696969">//   ;  ,    BOM</font> <font color="#0000ff">if</font> ( <font color="#008000">0x800</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; !( <font color="#008000">0xD7FF</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF900</font> ) &amp;&amp; <font color="#cc6633">$result</font> != <font color="#008000">0xFEFF</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet4</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">3</font> == <font color="#008000">0x1E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x07</font> ) &lt;&lt; <font color="#008000">18</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet3</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet4</font> ; <font color="#696969">//   ;       ;</font> <font color="#696969">// ,         Unicode 10FFFF</font> <font color="#0000ff">if</font> ( <font color="#008000">0x10000</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF0000</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } } } <font color="#0000ff">return false</font> ; } } <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*  UTF-8    .</font> &lt;br/&gt; <font color="#696969">* [...]</font> &lt;br/&gt; <font color="#696969">* @author ur001 &lt;ur001ur001@gmail.com&gt;, {@link http://ur001.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param string $codePoint Unicode character ordinal.</font> &lt;br/&gt; <font color="#696969">* @return string|FALSE UTF-8   FALSE   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getChar( <font color="#cc6633">$codePoint</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x80</font> ) { <font color="#0000ff">return</font> chr( <font color="#cc6633">$codePoint</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x800</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xC0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x10000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xE0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x110000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xF0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">18</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">else</font> { <font color="#0000ff">return false</font> ; } } }</font></code> </li> <li></li><li> <code><font color="black"><a href="http://s-c.me/11935/s"></a> <a href="http://s-c.me/11935/h"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> Copy Source | Copy HTML <font color="#0000ff">class</font> String_Multibyte { <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*    UTF-8 ,       $index   $char.</font> &lt;br/&gt; <font color="#696969">*  ,    , BOM  0x10FFFE-0x10FFFF  FALSE.</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* [...]   ,    .</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* @author Andrew Dryga &lt;anddriga at gmail&gt;, {@link http://andryx.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param  string    $char     ().</font> &lt;br/&gt; <font color="#696969">* @param int        &amp;$index    ,        .       ,   .</font> &lt;br/&gt; <font color="#696969">* @return int|false     FALSE      ,   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getCodePoint( <font color="#cc6633">$char</font> , &amp; <font color="#cc6633">$index</font> = <font color="#008000">0</font> ) { <font color="#696969">//    </font> <font color="#cc6633">$octet1</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//      ASCII  (  0bbb bbbb),   .</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">7</font> == <font color="#008000">0x00</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$octet1</font> ; } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { <font color="#696969">//    </font> <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#696969">//   </font> <font color="#cc6633">$octet2</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//     (   10bb bbbb)</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet2</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#696969">//     6 </font> <font color="#cc6633">$octet2</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#696969">//         ,   </font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">5</font> == <font color="#008000">0x06</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x1F</font> ) &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet2</font> ; <font color="#696969">//       </font> <font color="#0000ff">if</font> ( <font color="#008000">0x80</font> &lt; <font color="#cc6633">$result</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet3</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">4</font> == <font color="#008000">0x0E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x0F</font> ) &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet3</font> ; <font color="#696969">//   ;  ,    BOM</font> <font color="#0000ff">if</font> ( <font color="#008000">0x800</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; !( <font color="#008000">0xD7FF</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF900</font> ) &amp;&amp; <font color="#cc6633">$result</font> != <font color="#008000">0xFEFF</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet4</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">3</font> == <font color="#008000">0x1E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x07</font> ) &lt;&lt; <font color="#008000">18</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet3</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet4</font> ; <font color="#696969">//   ;       ;</font> <font color="#696969">// ,         Unicode 10FFFF</font> <font color="#0000ff">if</font> ( <font color="#008000">0x10000</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF0000</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } } } <font color="#0000ff">return false</font> ; } } <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*  UTF-8    .</font> &lt;br/&gt; <font color="#696969">* [...]</font> &lt;br/&gt; <font color="#696969">* @author ur001 &lt;ur001ur001@gmail.com&gt;, {@link http://ur001.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param string $codePoint Unicode character ordinal.</font> &lt;br/&gt; <font color="#696969">* @return string|FALSE UTF-8   FALSE   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getChar( <font color="#cc6633">$codePoint</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x80</font> ) { <font color="#0000ff">return</font> chr( <font color="#cc6633">$codePoint</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x800</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xC0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x10000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xE0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x110000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xF0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">18</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">else</font> { <font color="#0000ff">return false</font> ; } } }</font></code> </li> <li> <code><font color="black"><a href="http://s-c.me/11935/s"></a> <a href="http://s-c.me/11935/h"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> Copy Source | Copy HTML <font color="#0000ff">class</font> String_Multibyte { <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*    UTF-8 ,       $index   $char.</font> &lt;br/&gt; <font color="#696969">*  ,    , BOM  0x10FFFE-0x10FFFF  FALSE.</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* [...]   ,    .</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* @author Andrew Dryga &lt;anddriga at gmail&gt;, {@link http://andryx.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param  string    $char     ().</font> &lt;br/&gt; <font color="#696969">* @param int        &amp;$index    ,        .       ,   .</font> &lt;br/&gt; <font color="#696969">* @return int|false     FALSE      ,   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getCodePoint( <font color="#cc6633">$char</font> , &amp; <font color="#cc6633">$index</font> = <font color="#008000">0</font> ) { <font color="#696969">//    </font> <font color="#cc6633">$octet1</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//      ASCII  (  0bbb bbbb),   .</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">7</font> == <font color="#008000">0x00</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$octet1</font> ; } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { <font color="#696969">//    </font> <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#696969">//   </font> <font color="#cc6633">$octet2</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//     (   10bb bbbb)</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet2</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#696969">//     6 </font> <font color="#cc6633">$octet2</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#696969">//         ,   </font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">5</font> == <font color="#008000">0x06</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x1F</font> ) &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet2</font> ; <font color="#696969">//       </font> <font color="#0000ff">if</font> ( <font color="#008000">0x80</font> &lt; <font color="#cc6633">$result</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet3</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">4</font> == <font color="#008000">0x0E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x0F</font> ) &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet3</font> ; <font color="#696969">//   ;  ,    BOM</font> <font color="#0000ff">if</font> ( <font color="#008000">0x800</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; !( <font color="#008000">0xD7FF</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF900</font> ) &amp;&amp; <font color="#cc6633">$result</font> != <font color="#008000">0xFEFF</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet4</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">3</font> == <font color="#008000">0x1E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x07</font> ) &lt;&lt; <font color="#008000">18</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet3</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet4</font> ; <font color="#696969">//   ;       ;</font> <font color="#696969">// ,         Unicode 10FFFF</font> <font color="#0000ff">if</font> ( <font color="#008000">0x10000</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF0000</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } } } <font color="#0000ff">return false</font> ; } } <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*  UTF-8    .</font> &lt;br/&gt; <font color="#696969">* [...]</font> &lt;br/&gt; <font color="#696969">* @author ur001 &lt;ur001ur001@gmail.com&gt;, {@link http://ur001.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param string $codePoint Unicode character ordinal.</font> &lt;br/&gt; <font color="#696969">* @return string|FALSE UTF-8   FALSE   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getChar( <font color="#cc6633">$codePoint</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x80</font> ) { <font color="#0000ff">return</font> chr( <font color="#cc6633">$codePoint</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x800</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xC0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x10000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xE0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x110000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xF0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">18</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">else</font> { <font color="#0000ff">return false</font> ; } } }</font></code> </li> <li> <code><font color="black"><a href="http://s-c.me/11935/s"></a> <a href="http://s-c.me/11935/h"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> Copy Source | Copy HTML <font color="#0000ff">class</font> String_Multibyte { <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*    UTF-8 ,       $index   $char.</font> &lt;br/&gt; <font color="#696969">*  ,    , BOM  0x10FFFE-0x10FFFF  FALSE.</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* [...]   ,    .</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* @author Andrew Dryga &lt;anddriga at gmail&gt;, {@link http://andryx.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param  string    $char     ().</font> &lt;br/&gt; <font color="#696969">* @param int        &amp;$index    ,        .       ,   .</font> &lt;br/&gt; <font color="#696969">* @return int|false     FALSE      ,   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getCodePoint( <font color="#cc6633">$char</font> , &amp; <font color="#cc6633">$index</font> = <font color="#008000">0</font> ) { <font color="#696969">//    </font> <font color="#cc6633">$octet1</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//      ASCII  (  0bbb bbbb),   .</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">7</font> == <font color="#008000">0x00</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$octet1</font> ; } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { <font color="#696969">//    </font> <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#696969">//   </font> <font color="#cc6633">$octet2</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//     (   10bb bbbb)</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet2</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#696969">//     6 </font> <font color="#cc6633">$octet2</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#696969">//         ,   </font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">5</font> == <font color="#008000">0x06</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x1F</font> ) &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet2</font> ; <font color="#696969">//       </font> <font color="#0000ff">if</font> ( <font color="#008000">0x80</font> &lt; <font color="#cc6633">$result</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet3</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">4</font> == <font color="#008000">0x0E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x0F</font> ) &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet3</font> ; <font color="#696969">//   ;  ,    BOM</font> <font color="#0000ff">if</font> ( <font color="#008000">0x800</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; !( <font color="#008000">0xD7FF</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF900</font> ) &amp;&amp; <font color="#cc6633">$result</font> != <font color="#008000">0xFEFF</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet4</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">3</font> == <font color="#008000">0x1E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x07</font> ) &lt;&lt; <font color="#008000">18</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet3</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet4</font> ; <font color="#696969">//   ;       ;</font> <font color="#696969">// ,         Unicode 10FFFF</font> <font color="#0000ff">if</font> ( <font color="#008000">0x10000</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF0000</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } } } <font color="#0000ff">return false</font> ; } } <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*  UTF-8    .</font> &lt;br/&gt; <font color="#696969">* [...]</font> &lt;br/&gt; <font color="#696969">* @author ur001 &lt;ur001ur001@gmail.com&gt;, {@link http://ur001.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param string $codePoint Unicode character ordinal.</font> &lt;br/&gt; <font color="#696969">* @return string|FALSE UTF-8   FALSE   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getChar( <font color="#cc6633">$codePoint</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x80</font> ) { <font color="#0000ff">return</font> chr( <font color="#cc6633">$codePoint</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x800</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xC0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x10000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xE0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x110000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xF0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">18</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">else</font> { <font color="#0000ff">return false</font> ; } } }</font></code> </li> <li> <code><font color="black"><a href="http://s-c.me/11935/s"></a> <a href="http://s-c.me/11935/h"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> Copy Source | Copy HTML <font color="#0000ff">class</font> String_Multibyte { <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*    UTF-8 ,       $index   $char.</font> &lt;br/&gt; <font color="#696969">*  ,    , BOM  0x10FFFE-0x10FFFF  FALSE.</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* [...]   ,    .</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* @author Andrew Dryga &lt;anddriga at gmail&gt;, {@link http://andryx.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param  string    $char     ().</font> &lt;br/&gt; <font color="#696969">* @param int        &amp;$index    ,        .       ,   .</font> &lt;br/&gt; <font color="#696969">* @return int|false     FALSE      ,   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getCodePoint( <font color="#cc6633">$char</font> , &amp; <font color="#cc6633">$index</font> = <font color="#008000">0</font> ) { <font color="#696969">//    </font> <font color="#cc6633">$octet1</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//      ASCII  (  0bbb bbbb),   .</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">7</font> == <font color="#008000">0x00</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$octet1</font> ; } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { <font color="#696969">//    </font> <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#696969">//   </font> <font color="#cc6633">$octet2</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//     (   10bb bbbb)</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet2</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#696969">//     6 </font> <font color="#cc6633">$octet2</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#696969">//         ,   </font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">5</font> == <font color="#008000">0x06</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x1F</font> ) &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet2</font> ; <font color="#696969">//       </font> <font color="#0000ff">if</font> ( <font color="#008000">0x80</font> &lt; <font color="#cc6633">$result</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet3</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">4</font> == <font color="#008000">0x0E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x0F</font> ) &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet3</font> ; <font color="#696969">//   ;  ,    BOM</font> <font color="#0000ff">if</font> ( <font color="#008000">0x800</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; !( <font color="#008000">0xD7FF</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF900</font> ) &amp;&amp; <font color="#cc6633">$result</font> != <font color="#008000">0xFEFF</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet4</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">3</font> == <font color="#008000">0x1E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x07</font> ) &lt;&lt; <font color="#008000">18</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet3</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet4</font> ; <font color="#696969">//   ;       ;</font> <font color="#696969">// ,         Unicode 10FFFF</font> <font color="#0000ff">if</font> ( <font color="#008000">0x10000</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF0000</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } } } <font color="#0000ff">return false</font> ; } } <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*  UTF-8    .</font> &lt;br/&gt; <font color="#696969">* [...]</font> &lt;br/&gt; <font color="#696969">* @author ur001 &lt;ur001ur001@gmail.com&gt;, {@link http://ur001.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param string $codePoint Unicode character ordinal.</font> &lt;br/&gt; <font color="#696969">* @return string|FALSE UTF-8   FALSE   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getChar( <font color="#cc6633">$codePoint</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x80</font> ) { <font color="#0000ff">return</font> chr( <font color="#cc6633">$codePoint</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x800</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xC0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x10000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xE0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x110000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xF0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">18</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">else</font> { <font color="#0000ff">return false</font> ; } } }</font></code> </li> <li> <code><font color="black"><a href="http://s-c.me/11935/s"></a> <a href="http://s-c.me/11935/h"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> Copy Source | Copy HTML <font color="#0000ff">class</font> String_Multibyte { <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*    UTF-8 ,       $index   $char.</font> &lt;br/&gt; <font color="#696969">*  ,    , BOM  0x10FFFE-0x10FFFF  FALSE.</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* [...]   ,    .</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* @author Andrew Dryga &lt;anddriga at gmail&gt;, {@link http://andryx.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param  string    $char     ().</font> &lt;br/&gt; <font color="#696969">* @param int        &amp;$index    ,        .       ,   .</font> &lt;br/&gt; <font color="#696969">* @return int|false     FALSE      ,   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getCodePoint( <font color="#cc6633">$char</font> , &amp; <font color="#cc6633">$index</font> = <font color="#008000">0</font> ) { <font color="#696969">//    </font> <font color="#cc6633">$octet1</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//      ASCII  (  0bbb bbbb),   .</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">7</font> == <font color="#008000">0x00</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$octet1</font> ; } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { <font color="#696969">//    </font> <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#696969">//   </font> <font color="#cc6633">$octet2</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//     (   10bb bbbb)</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet2</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#696969">//     6 </font> <font color="#cc6633">$octet2</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#696969">//         ,   </font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">5</font> == <font color="#008000">0x06</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x1F</font> ) &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet2</font> ; <font color="#696969">//       </font> <font color="#0000ff">if</font> ( <font color="#008000">0x80</font> &lt; <font color="#cc6633">$result</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet3</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">4</font> == <font color="#008000">0x0E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x0F</font> ) &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet3</font> ; <font color="#696969">//   ;  ,    BOM</font> <font color="#0000ff">if</font> ( <font color="#008000">0x800</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; !( <font color="#008000">0xD7FF</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF900</font> ) &amp;&amp; <font color="#cc6633">$result</font> != <font color="#008000">0xFEFF</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet4</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">3</font> == <font color="#008000">0x1E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x07</font> ) &lt;&lt; <font color="#008000">18</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet3</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet4</font> ; <font color="#696969">//   ;       ;</font> <font color="#696969">// ,         Unicode 10FFFF</font> <font color="#0000ff">if</font> ( <font color="#008000">0x10000</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF0000</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } } } <font color="#0000ff">return false</font> ; } } <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*  UTF-8    .</font> &lt;br/&gt; <font color="#696969">* [...]</font> &lt;br/&gt; <font color="#696969">* @author ur001 &lt;ur001ur001@gmail.com&gt;, {@link http://ur001.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param string $codePoint Unicode character ordinal.</font> &lt;br/&gt; <font color="#696969">* @return string|FALSE UTF-8   FALSE   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getChar( <font color="#cc6633">$codePoint</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x80</font> ) { <font color="#0000ff">return</font> chr( <font color="#cc6633">$codePoint</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x800</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xC0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x10000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xE0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x110000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xF0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">18</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">else</font> { <font color="#0000ff">return false</font> ; } } }</font></code> </li> <li> <code><font color="black"><a href="http://s-c.me/11935/s"></a> <a href="http://s-c.me/11935/h"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> Copy Source | Copy HTML <font color="#0000ff">class</font> String_Multibyte { <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*    UTF-8 ,       $index   $char.</font> &lt;br/&gt; <font color="#696969">*  ,    , BOM  0x10FFFE-0x10FFFF  FALSE.</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* [...]   ,    .</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* @author Andrew Dryga &lt;anddriga at gmail&gt;, {@link http://andryx.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param  string    $char     ().</font> &lt;br/&gt; <font color="#696969">* @param int        &amp;$index    ,        .       ,   .</font> &lt;br/&gt; <font color="#696969">* @return int|false     FALSE      ,   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getCodePoint( <font color="#cc6633">$char</font> , &amp; <font color="#cc6633">$index</font> = <font color="#008000">0</font> ) { <font color="#696969">//    </font> <font color="#cc6633">$octet1</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//      ASCII  (  0bbb bbbb),   .</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">7</font> == <font color="#008000">0x00</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$octet1</font> ; } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { <font color="#696969">//    </font> <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#696969">//   </font> <font color="#cc6633">$octet2</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//     (   10bb bbbb)</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet2</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#696969">//     6 </font> <font color="#cc6633">$octet2</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#696969">//         ,   </font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">5</font> == <font color="#008000">0x06</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x1F</font> ) &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet2</font> ; <font color="#696969">//       </font> <font color="#0000ff">if</font> ( <font color="#008000">0x80</font> &lt; <font color="#cc6633">$result</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet3</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">4</font> == <font color="#008000">0x0E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x0F</font> ) &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet3</font> ; <font color="#696969">//   ;  ,    BOM</font> <font color="#0000ff">if</font> ( <font color="#008000">0x800</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; !( <font color="#008000">0xD7FF</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF900</font> ) &amp;&amp; <font color="#cc6633">$result</font> != <font color="#008000">0xFEFF</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet4</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">3</font> == <font color="#008000">0x1E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x07</font> ) &lt;&lt; <font color="#008000">18</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet3</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet4</font> ; <font color="#696969">//   ;       ;</font> <font color="#696969">// ,         Unicode 10FFFF</font> <font color="#0000ff">if</font> ( <font color="#008000">0x10000</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF0000</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } } } <font color="#0000ff">return false</font> ; } } <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*  UTF-8    .</font> &lt;br/&gt; <font color="#696969">* [...]</font> &lt;br/&gt; <font color="#696969">* @author ur001 &lt;ur001ur001@gmail.com&gt;, {@link http://ur001.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param string $codePoint Unicode character ordinal.</font> &lt;br/&gt; <font color="#696969">* @return string|FALSE UTF-8   FALSE   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getChar( <font color="#cc6633">$codePoint</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x80</font> ) { <font color="#0000ff">return</font> chr( <font color="#cc6633">$codePoint</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x800</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xC0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x10000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xE0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x110000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xF0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">18</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">else</font> { <font color="#0000ff">return false</font> ; } } }</font></code> </li> <li></li><li> <code><font color="black"><a href="http://s-c.me/11935/s"></a> <a href="http://s-c.me/11935/h"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> Copy Source | Copy HTML <font color="#0000ff">class</font> String_Multibyte { <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*    UTF-8 ,       $index   $char.</font> &lt;br/&gt; <font color="#696969">*  ,    , BOM  0x10FFFE-0x10FFFF  FALSE.</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* [...]   ,    .</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* @author Andrew Dryga &lt;anddriga at gmail&gt;, {@link http://andryx.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param  string    $char     ().</font> &lt;br/&gt; <font color="#696969">* @param int        &amp;$index    ,        .       ,   .</font> &lt;br/&gt; <font color="#696969">* @return int|false     FALSE      ,   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getCodePoint( <font color="#cc6633">$char</font> , &amp; <font color="#cc6633">$index</font> = <font color="#008000">0</font> ) { <font color="#696969">//    </font> <font color="#cc6633">$octet1</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//      ASCII  (  0bbb bbbb),   .</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">7</font> == <font color="#008000">0x00</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$octet1</font> ; } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { <font color="#696969">//    </font> <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#696969">//   </font> <font color="#cc6633">$octet2</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//     (   10bb bbbb)</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet2</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#696969">//     6 </font> <font color="#cc6633">$octet2</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#696969">//         ,   </font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">5</font> == <font color="#008000">0x06</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x1F</font> ) &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet2</font> ; <font color="#696969">//       </font> <font color="#0000ff">if</font> ( <font color="#008000">0x80</font> &lt; <font color="#cc6633">$result</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet3</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">4</font> == <font color="#008000">0x0E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x0F</font> ) &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet3</font> ; <font color="#696969">//   ;  ,    BOM</font> <font color="#0000ff">if</font> ( <font color="#008000">0x800</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; !( <font color="#008000">0xD7FF</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF900</font> ) &amp;&amp; <font color="#cc6633">$result</font> != <font color="#008000">0xFEFF</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet4</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">3</font> == <font color="#008000">0x1E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x07</font> ) &lt;&lt; <font color="#008000">18</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet3</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet4</font> ; <font color="#696969">//   ;       ;</font> <font color="#696969">// ,         Unicode 10FFFF</font> <font color="#0000ff">if</font> ( <font color="#008000">0x10000</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF0000</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } } } <font color="#0000ff">return false</font> ; } } <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*  UTF-8    .</font> &lt;br/&gt; <font color="#696969">* [...]</font> &lt;br/&gt; <font color="#696969">* @author ur001 &lt;ur001ur001@gmail.com&gt;, {@link http://ur001.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param string $codePoint Unicode character ordinal.</font> &lt;br/&gt; <font color="#696969">* @return string|FALSE UTF-8   FALSE   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getChar( <font color="#cc6633">$codePoint</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x80</font> ) { <font color="#0000ff">return</font> chr( <font color="#cc6633">$codePoint</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x800</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xC0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x10000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xE0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x110000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xF0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">18</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">else</font> { <font color="#0000ff">return false</font> ; } } }</font></code> </li> <li> <code><font color="black"><a href="http://s-c.me/11935/s"></a> <a href="http://s-c.me/11935/h"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> Copy Source | Copy HTML <font color="#0000ff">class</font> String_Multibyte { <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*    UTF-8 ,       $index   $char.</font> &lt;br/&gt; <font color="#696969">*  ,    , BOM  0x10FFFE-0x10FFFF  FALSE.</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* [...]   ,    .</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* @author Andrew Dryga &lt;anddriga at gmail&gt;, {@link http://andryx.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param  string    $char     ().</font> &lt;br/&gt; <font color="#696969">* @param int        &amp;$index    ,        .       ,   .</font> &lt;br/&gt; <font color="#696969">* @return int|false     FALSE      ,   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getCodePoint( <font color="#cc6633">$char</font> , &amp; <font color="#cc6633">$index</font> = <font color="#008000">0</font> ) { <font color="#696969">//    </font> <font color="#cc6633">$octet1</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//      ASCII  (  0bbb bbbb),   .</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">7</font> == <font color="#008000">0x00</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$octet1</font> ; } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { <font color="#696969">//    </font> <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#696969">//   </font> <font color="#cc6633">$octet2</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//     (   10bb bbbb)</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet2</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#696969">//     6 </font> <font color="#cc6633">$octet2</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#696969">//         ,   </font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">5</font> == <font color="#008000">0x06</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x1F</font> ) &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet2</font> ; <font color="#696969">//       </font> <font color="#0000ff">if</font> ( <font color="#008000">0x80</font> &lt; <font color="#cc6633">$result</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet3</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">4</font> == <font color="#008000">0x0E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x0F</font> ) &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet3</font> ; <font color="#696969">//   ;  ,    BOM</font> <font color="#0000ff">if</font> ( <font color="#008000">0x800</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; !( <font color="#008000">0xD7FF</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF900</font> ) &amp;&amp; <font color="#cc6633">$result</font> != <font color="#008000">0xFEFF</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet4</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">3</font> == <font color="#008000">0x1E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x07</font> ) &lt;&lt; <font color="#008000">18</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet3</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet4</font> ; <font color="#696969">//   ;       ;</font> <font color="#696969">// ,         Unicode 10FFFF</font> <font color="#0000ff">if</font> ( <font color="#008000">0x10000</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF0000</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } } } <font color="#0000ff">return false</font> ; } } <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*  UTF-8    .</font> &lt;br/&gt; <font color="#696969">* [...]</font> &lt;br/&gt; <font color="#696969">* @author ur001 &lt;ur001ur001@gmail.com&gt;, {@link http://ur001.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param string $codePoint Unicode character ordinal.</font> &lt;br/&gt; <font color="#696969">* @return string|FALSE UTF-8   FALSE   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getChar( <font color="#cc6633">$codePoint</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x80</font> ) { <font color="#0000ff">return</font> chr( <font color="#cc6633">$codePoint</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x800</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xC0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x10000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xE0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x110000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xF0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">18</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">else</font> { <font color="#0000ff">return false</font> ; } } }</font></code> </li> <li> <code><font color="black"><font color="#696969"><a href="http://s-c.me/11935/s"></a> <a href="http://s-c.me/11935/h"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> Copy Source | Copy HTML <font color="#0000ff">class</font> String_Multibyte { <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*    UTF-8 ,       $index   $char.</font> &lt;br/&gt; <font color="#696969">*  ,    , BOM  0x10FFFE-0x10FFFF  FALSE.</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* [...]   ,    .</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* @author Andrew Dryga &lt;anddriga at gmail&gt;, {@link http://andryx.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param  string    $char     ().</font> &lt;br/&gt; <font color="#696969">* @param int        &amp;$index    ,        .       ,   .</font> &lt;br/&gt; <font color="#696969">* @return int|false     FALSE      ,   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getCodePoint( <font color="#cc6633">$char</font> , &amp; <font color="#cc6633">$index</font> = <font color="#008000">0</font> ) { <font color="#696969">//    </font> <font color="#cc6633">$octet1</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//      ASCII  (  0bbb bbbb),   .</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">7</font> == <font color="#008000">0x00</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$octet1</font> ; } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { <font color="#696969">//    </font> <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#696969">//   </font> <font color="#cc6633">$octet2</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//     (   10bb bbbb)</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet2</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#696969">//     6 </font> <font color="#cc6633">$octet2</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#696969">//         ,   </font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">5</font> == <font color="#008000">0x06</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x1F</font> ) &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet2</font> ; <font color="#696969">//       </font> <font color="#0000ff">if</font> ( <font color="#008000">0x80</font> &lt; <font color="#cc6633">$result</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet3</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">4</font> == <font color="#008000">0x0E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x0F</font> ) &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet3</font> ; <font color="#696969">//   ;  ,    BOM</font> <font color="#0000ff">if</font> ( <font color="#008000">0x800</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; !( <font color="#008000">0xD7FF</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF900</font> ) &amp;&amp; <font color="#cc6633">$result</font> != <font color="#008000">0xFEFF</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet4</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">3</font> == <font color="#008000">0x1E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x07</font> ) &lt;&lt; <font color="#008000">18</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet3</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet4</font> ; //   ;       ; <font color="#696969">// ,         Unicode 10FFFF</font> <font color="#0000ff">if</font> ( <font color="#008000">0x10000</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF0000</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } } } <font color="#0000ff">return false</font> ; } } <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*  UTF-8    .</font> &lt;br/&gt; <font color="#696969">* [...]</font> &lt;br/&gt; <font color="#696969">* @author ur001 &lt;ur001ur001@gmail.com&gt;, {@link http://ur001.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param string $codePoint Unicode character ordinal.</font> &lt;br/&gt; <font color="#696969">* @return string|FALSE UTF-8   FALSE   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getChar( <font color="#cc6633">$codePoint</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x80</font> ) { <font color="#0000ff">return</font> chr( <font color="#cc6633">$codePoint</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x800</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xC0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x10000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xE0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x110000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xF0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">18</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">else</font> { <font color="#0000ff">return false</font> ; } } }</font></font></code> </li> <li> <code><font color="black"><font color="#696969"><a href="http://s-c.me/11935/s"></a> <a href="http://s-c.me/11935/h"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> Copy Source | Copy HTML <font color="#0000ff">class</font> String_Multibyte { <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*    UTF-8 ,       $index   $char.</font> &lt;br/&gt; <font color="#696969">*  ,    , BOM  0x10FFFE-0x10FFFF  FALSE.</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* [...]   ,    .</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* @author Andrew Dryga &lt;anddriga at gmail&gt;, {@link http://andryx.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param  string    $char     ().</font> &lt;br/&gt; <font color="#696969">* @param int        &amp;$index    ,        .       ,   .</font> &lt;br/&gt; <font color="#696969">* @return int|false     FALSE      ,   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getCodePoint( <font color="#cc6633">$char</font> , &amp; <font color="#cc6633">$index</font> = <font color="#008000">0</font> ) { <font color="#696969">//    </font> <font color="#cc6633">$octet1</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//      ASCII  (  0bbb bbbb),   .</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">7</font> == <font color="#008000">0x00</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$octet1</font> ; } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { <font color="#696969">//    </font> <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#696969">//   </font> <font color="#cc6633">$octet2</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//     (   10bb bbbb)</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet2</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#696969">//     6 </font> <font color="#cc6633">$octet2</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#696969">//         ,   </font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">5</font> == <font color="#008000">0x06</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x1F</font> ) &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet2</font> ; <font color="#696969">//       </font> <font color="#0000ff">if</font> ( <font color="#008000">0x80</font> &lt; <font color="#cc6633">$result</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet3</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">4</font> == <font color="#008000">0x0E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x0F</font> ) &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet3</font> ; <font color="#696969">//   ;  ,    BOM</font> <font color="#0000ff">if</font> ( <font color="#008000">0x800</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; !( <font color="#008000">0xD7FF</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF900</font> ) &amp;&amp; <font color="#cc6633">$result</font> != <font color="#008000">0xFEFF</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet4</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">3</font> == <font color="#008000">0x1E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x07</font> ) &lt;&lt; <font color="#008000">18</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet3</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet4</font> ; <font color="#696969">//   ;       ;</font> // ,         Unicode 10FFFF <font color="#0000ff">if</font> ( <font color="#008000">0x10000</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF0000</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } } } <font color="#0000ff">return false</font> ; } } <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*  UTF-8    .</font> &lt;br/&gt; <font color="#696969">* [...]</font> &lt;br/&gt; <font color="#696969">* @author ur001 &lt;ur001ur001@gmail.com&gt;, {@link http://ur001.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param string $codePoint Unicode character ordinal.</font> &lt;br/&gt; <font color="#696969">* @return string|FALSE UTF-8   FALSE   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getChar( <font color="#cc6633">$codePoint</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x80</font> ) { <font color="#0000ff">return</font> chr( <font color="#cc6633">$codePoint</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x800</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xC0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x10000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xE0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x110000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xF0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">18</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">else</font> { <font color="#0000ff">return false</font> ; } } }</font></font></code> </li> <li> <code><font color="black"><a href="http://s-c.me/11935/s"></a> <a href="http://s-c.me/11935/h"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> Copy Source | Copy HTML <font color="#0000ff">class</font> String_Multibyte { <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*    UTF-8 ,       $index   $char.</font> &lt;br/&gt; <font color="#696969">*  ,    , BOM  0x10FFFE-0x10FFFF  FALSE.</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* [...]   ,    .</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* @author Andrew Dryga &lt;anddriga at gmail&gt;, {@link http://andryx.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param  string    $char     ().</font> &lt;br/&gt; <font color="#696969">* @param int        &amp;$index    ,        .       ,   .</font> &lt;br/&gt; <font color="#696969">* @return int|false     FALSE      ,   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getCodePoint( <font color="#cc6633">$char</font> , &amp; <font color="#cc6633">$index</font> = <font color="#008000">0</font> ) { <font color="#696969">//    </font> <font color="#cc6633">$octet1</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//      ASCII  (  0bbb bbbb),   .</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">7</font> == <font color="#008000">0x00</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$octet1</font> ; } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { <font color="#696969">//    </font> <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#696969">//   </font> <font color="#cc6633">$octet2</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//     (   10bb bbbb)</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet2</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#696969">//     6 </font> <font color="#cc6633">$octet2</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#696969">//         ,   </font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">5</font> == <font color="#008000">0x06</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x1F</font> ) &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet2</font> ; <font color="#696969">//       </font> <font color="#0000ff">if</font> ( <font color="#008000">0x80</font> &lt; <font color="#cc6633">$result</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet3</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">4</font> == <font color="#008000">0x0E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x0F</font> ) &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet3</font> ; <font color="#696969">//   ;  ,    BOM</font> <font color="#0000ff">if</font> ( <font color="#008000">0x800</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; !( <font color="#008000">0xD7FF</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF900</font> ) &amp;&amp; <font color="#cc6633">$result</font> != <font color="#008000">0xFEFF</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet4</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">3</font> == <font color="#008000">0x1E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x07</font> ) &lt;&lt; <font color="#008000">18</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet3</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet4</font> ; <font color="#696969">//   ;       ;</font> <font color="#696969">// ,         Unicode 10FFFF</font> <font color="#0000ff">if</font> ( <font color="#008000">0x10000</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF0000</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } } } <font color="#0000ff">return false</font> ; } } <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*  UTF-8    .</font> &lt;br/&gt; <font color="#696969">* [...]</font> &lt;br/&gt; <font color="#696969">* @author ur001 &lt;ur001ur001@gmail.com&gt;, {@link http://ur001.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param string $codePoint Unicode character ordinal.</font> &lt;br/&gt; <font color="#696969">* @return string|FALSE UTF-8   FALSE   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getChar( <font color="#cc6633">$codePoint</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x80</font> ) { <font color="#0000ff">return</font> chr( <font color="#cc6633">$codePoint</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x800</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xC0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x10000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xE0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x110000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xF0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">18</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">else</font> { <font color="#0000ff">return false</font> ; } } }</font></code> </li> <li> <code><font color="black"><a href="http://s-c.me/11935/s"></a> <a href="http://s-c.me/11935/h"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> Copy Source | Copy HTML <font color="#0000ff">class</font> String_Multibyte { <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*    UTF-8 ,       $index   $char.</font> &lt;br/&gt; <font color="#696969">*  ,    , BOM  0x10FFFE-0x10FFFF  FALSE.</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* [...]   ,    .</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* @author Andrew Dryga &lt;anddriga at gmail&gt;, {@link http://andryx.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param  string    $char     ().</font> &lt;br/&gt; <font color="#696969">* @param int        &amp;$index    ,        .       ,   .</font> &lt;br/&gt; <font color="#696969">* @return int|false     FALSE      ,   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getCodePoint( <font color="#cc6633">$char</font> , &amp; <font color="#cc6633">$index</font> = <font color="#008000">0</font> ) { <font color="#696969">//    </font> <font color="#cc6633">$octet1</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//      ASCII  (  0bbb bbbb),   .</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">7</font> == <font color="#008000">0x00</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$octet1</font> ; } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { <font color="#696969">//    </font> <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#696969">//   </font> <font color="#cc6633">$octet2</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//     (   10bb bbbb)</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet2</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#696969">//     6 </font> <font color="#cc6633">$octet2</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#696969">//         ,   </font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">5</font> == <font color="#008000">0x06</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x1F</font> ) &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet2</font> ; <font color="#696969">//       </font> <font color="#0000ff">if</font> ( <font color="#008000">0x80</font> &lt; <font color="#cc6633">$result</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet3</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">4</font> == <font color="#008000">0x0E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x0F</font> ) &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet3</font> ; <font color="#696969">//   ;  ,    BOM</font> <font color="#0000ff">if</font> ( <font color="#008000">0x800</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; !( <font color="#008000">0xD7FF</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF900</font> ) &amp;&amp; <font color="#cc6633">$result</font> != <font color="#008000">0xFEFF</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet4</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">3</font> == <font color="#008000">0x1E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x07</font> ) &lt;&lt; <font color="#008000">18</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet3</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet4</font> ; <font color="#696969">//   ;       ;</font> <font color="#696969">// ,         Unicode 10FFFF</font> <font color="#0000ff">if</font> ( <font color="#008000">0x10000</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF0000</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } } } <font color="#0000ff">return false</font> ; } } <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*  UTF-8    .</font> &lt;br/&gt; <font color="#696969">* [...]</font> &lt;br/&gt; <font color="#696969">* @author ur001 &lt;ur001ur001@gmail.com&gt;, {@link http://ur001.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param string $codePoint Unicode character ordinal.</font> &lt;br/&gt; <font color="#696969">* @return string|FALSE UTF-8   FALSE   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getChar( <font color="#cc6633">$codePoint</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x80</font> ) { <font color="#0000ff">return</font> chr( <font color="#cc6633">$codePoint</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x800</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xC0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x10000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xE0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x110000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xF0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">18</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">else</font> { <font color="#0000ff">return false</font> ; } } }</font></code> </li> <li> <code><font color="black"><a href="http://s-c.me/11935/s"></a> <a href="http://s-c.me/11935/h"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> Copy Source | Copy HTML <font color="#0000ff">class</font> String_Multibyte { <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*    UTF-8 ,       $index   $char.</font> &lt;br/&gt; <font color="#696969">*  ,    , BOM  0x10FFFE-0x10FFFF  FALSE.</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* [...]   ,    .</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* @author Andrew Dryga &lt;anddriga at gmail&gt;, {@link http://andryx.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param  string    $char     ().</font> &lt;br/&gt; <font color="#696969">* @param int        &amp;$index    ,        .       ,   .</font> &lt;br/&gt; <font color="#696969">* @return int|false     FALSE      ,   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getCodePoint( <font color="#cc6633">$char</font> , &amp; <font color="#cc6633">$index</font> = <font color="#008000">0</font> ) { <font color="#696969">//    </font> <font color="#cc6633">$octet1</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//      ASCII  (  0bbb bbbb),   .</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">7</font> == <font color="#008000">0x00</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$octet1</font> ; } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { <font color="#696969">//    </font> <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#696969">//   </font> <font color="#cc6633">$octet2</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//     (   10bb bbbb)</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet2</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#696969">//     6 </font> <font color="#cc6633">$octet2</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#696969">//         ,   </font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">5</font> == <font color="#008000">0x06</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x1F</font> ) &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet2</font> ; <font color="#696969">//       </font> <font color="#0000ff">if</font> ( <font color="#008000">0x80</font> &lt; <font color="#cc6633">$result</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet3</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">4</font> == <font color="#008000">0x0E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x0F</font> ) &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet3</font> ; <font color="#696969">//   ;  ,    BOM</font> <font color="#0000ff">if</font> ( <font color="#008000">0x800</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; !( <font color="#008000">0xD7FF</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF900</font> ) &amp;&amp; <font color="#cc6633">$result</font> != <font color="#008000">0xFEFF</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet4</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">3</font> == <font color="#008000">0x1E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x07</font> ) &lt;&lt; <font color="#008000">18</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet3</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet4</font> ; <font color="#696969">//   ;       ;</font> <font color="#696969">// ,         Unicode 10FFFF</font> <font color="#0000ff">if</font> ( <font color="#008000">0x10000</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF0000</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } } } <font color="#0000ff">return false</font> ; } } <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*  UTF-8    .</font> &lt;br/&gt; <font color="#696969">* [...]</font> &lt;br/&gt; <font color="#696969">* @author ur001 &lt;ur001ur001@gmail.com&gt;, {@link http://ur001.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param string $codePoint Unicode character ordinal.</font> &lt;br/&gt; <font color="#696969">* @return string|FALSE UTF-8   FALSE   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getChar( <font color="#cc6633">$codePoint</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x80</font> ) { <font color="#0000ff">return</font> chr( <font color="#cc6633">$codePoint</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x800</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xC0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x10000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xE0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x110000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xF0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">18</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">else</font> { <font color="#0000ff">return false</font> ; } } }</font></code> </li> <li> <code><font color="black"><a href="http://s-c.me/11935/s"></a> <a href="http://s-c.me/11935/h"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> Copy Source | Copy HTML <font color="#0000ff">class</font> String_Multibyte { <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*    UTF-8 ,       $index   $char.</font> &lt;br/&gt; <font color="#696969">*  ,    , BOM  0x10FFFE-0x10FFFF  FALSE.</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* [...]   ,    .</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* @author Andrew Dryga &lt;anddriga at gmail&gt;, {@link http://andryx.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param  string    $char     ().</font> &lt;br/&gt; <font color="#696969">* @param int        &amp;$index    ,        .       ,   .</font> &lt;br/&gt; <font color="#696969">* @return int|false     FALSE      ,   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getCodePoint( <font color="#cc6633">$char</font> , &amp; <font color="#cc6633">$index</font> = <font color="#008000">0</font> ) { <font color="#696969">//    </font> <font color="#cc6633">$octet1</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//      ASCII  (  0bbb bbbb),   .</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">7</font> == <font color="#008000">0x00</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$octet1</font> ; } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { <font color="#696969">//    </font> <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#696969">//   </font> <font color="#cc6633">$octet2</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//     (   10bb bbbb)</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet2</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#696969">//     6 </font> <font color="#cc6633">$octet2</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#696969">//         ,   </font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">5</font> == <font color="#008000">0x06</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x1F</font> ) &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet2</font> ; <font color="#696969">//       </font> <font color="#0000ff">if</font> ( <font color="#008000">0x80</font> &lt; <font color="#cc6633">$result</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet3</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">4</font> == <font color="#008000">0x0E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x0F</font> ) &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet3</font> ; <font color="#696969">//   ;  ,    BOM</font> <font color="#0000ff">if</font> ( <font color="#008000">0x800</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; !( <font color="#008000">0xD7FF</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF900</font> ) &amp;&amp; <font color="#cc6633">$result</font> != <font color="#008000">0xFEFF</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet4</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">3</font> == <font color="#008000">0x1E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x07</font> ) &lt;&lt; <font color="#008000">18</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet3</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet4</font> ; <font color="#696969">//   ;       ;</font> <font color="#696969">// ,         Unicode 10FFFF</font> <font color="#0000ff">if</font> ( <font color="#008000">0x10000</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF0000</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } } } <font color="#0000ff">return false</font> ; } } <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*  UTF-8    .</font> &lt;br/&gt; <font color="#696969">* [...]</font> &lt;br/&gt; <font color="#696969">* @author ur001 &lt;ur001ur001@gmail.com&gt;, {@link http://ur001.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param string $codePoint Unicode character ordinal.</font> &lt;br/&gt; <font color="#696969">* @return string|FALSE UTF-8   FALSE   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getChar( <font color="#cc6633">$codePoint</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x80</font> ) { <font color="#0000ff">return</font> chr( <font color="#cc6633">$codePoint</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x800</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xC0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x10000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xE0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x110000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xF0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">18</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">else</font> { <font color="#0000ff">return false</font> ; } } }</font></code> </li> <li> <code><font color="black"><a href="http://s-c.me/11935/s"></a> <a href="http://s-c.me/11935/h"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> Copy Source | Copy HTML <font color="#0000ff">class</font> String_Multibyte { <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*    UTF-8 ,       $index   $char.</font> &lt;br/&gt; <font color="#696969">*  ,    , BOM  0x10FFFE-0x10FFFF  FALSE.</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* [...]   ,    .</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* @author Andrew Dryga &lt;anddriga at gmail&gt;, {@link http://andryx.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param  string    $char     ().</font> &lt;br/&gt; <font color="#696969">* @param int        &amp;$index    ,        .       ,   .</font> &lt;br/&gt; <font color="#696969">* @return int|false     FALSE      ,   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getCodePoint( <font color="#cc6633">$char</font> , &amp; <font color="#cc6633">$index</font> = <font color="#008000">0</font> ) { <font color="#696969">//    </font> <font color="#cc6633">$octet1</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//      ASCII  (  0bbb bbbb),   .</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">7</font> == <font color="#008000">0x00</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$octet1</font> ; } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { <font color="#696969">//    </font> <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#696969">//   </font> <font color="#cc6633">$octet2</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//     (   10bb bbbb)</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet2</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#696969">//     6 </font> <font color="#cc6633">$octet2</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#696969">//         ,   </font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">5</font> == <font color="#008000">0x06</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x1F</font> ) &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet2</font> ; <font color="#696969">//       </font> <font color="#0000ff">if</font> ( <font color="#008000">0x80</font> &lt; <font color="#cc6633">$result</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet3</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">4</font> == <font color="#008000">0x0E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x0F</font> ) &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet3</font> ; <font color="#696969">//   ;  ,    BOM</font> <font color="#0000ff">if</font> ( <font color="#008000">0x800</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; !( <font color="#008000">0xD7FF</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF900</font> ) &amp;&amp; <font color="#cc6633">$result</font> != <font color="#008000">0xFEFF</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet4</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">3</font> == <font color="#008000">0x1E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x07</font> ) &lt;&lt; <font color="#008000">18</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet3</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet4</font> ; <font color="#696969">//   ;       ;</font> <font color="#696969">// ,         Unicode 10FFFF</font> <font color="#0000ff">if</font> ( <font color="#008000">0x10000</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF0000</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } } } <font color="#0000ff">return false</font> ; } } <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*  UTF-8    .</font> &lt;br/&gt; <font color="#696969">* [...]</font> &lt;br/&gt; <font color="#696969">* @author ur001 &lt;ur001ur001@gmail.com&gt;, {@link http://ur001.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param string $codePoint Unicode character ordinal.</font> &lt;br/&gt; <font color="#696969">* @return string|FALSE UTF-8   FALSE   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getChar( <font color="#cc6633">$codePoint</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x80</font> ) { <font color="#0000ff">return</font> chr( <font color="#cc6633">$codePoint</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x800</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xC0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x10000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xE0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x110000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xF0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">18</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">else</font> { <font color="#0000ff">return false</font> ; } } }</font></code> </li> <li> <code><font color="black"><a href="http://s-c.me/11935/s"></a> <a href="http://s-c.me/11935/h"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> Copy Source | Copy HTML <font color="#0000ff">class</font> String_Multibyte { <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*    UTF-8 ,       $index   $char.</font> &lt;br/&gt; <font color="#696969">*  ,    , BOM  0x10FFFE-0x10FFFF  FALSE.</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* [...]   ,    .</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* @author Andrew Dryga &lt;anddriga at gmail&gt;, {@link http://andryx.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param  string    $char     ().</font> &lt;br/&gt; <font color="#696969">* @param int        &amp;$index    ,        .       ,   .</font> &lt;br/&gt; <font color="#696969">* @return int|false     FALSE      ,   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getCodePoint( <font color="#cc6633">$char</font> , &amp; <font color="#cc6633">$index</font> = <font color="#008000">0</font> ) { <font color="#696969">//    </font> <font color="#cc6633">$octet1</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//      ASCII  (  0bbb bbbb),   .</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">7</font> == <font color="#008000">0x00</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$octet1</font> ; } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { <font color="#696969">//    </font> <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#696969">//   </font> <font color="#cc6633">$octet2</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//     (   10bb bbbb)</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet2</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#696969">//     6 </font> <font color="#cc6633">$octet2</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#696969">//         ,   </font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">5</font> == <font color="#008000">0x06</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x1F</font> ) &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet2</font> ; <font color="#696969">//       </font> <font color="#0000ff">if</font> ( <font color="#008000">0x80</font> &lt; <font color="#cc6633">$result</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet3</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">4</font> == <font color="#008000">0x0E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x0F</font> ) &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet3</font> ; <font color="#696969">//   ;  ,    BOM</font> <font color="#0000ff">if</font> ( <font color="#008000">0x800</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; !( <font color="#008000">0xD7FF</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF900</font> ) &amp;&amp; <font color="#cc6633">$result</font> != <font color="#008000">0xFEFF</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet4</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">3</font> == <font color="#008000">0x1E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x07</font> ) &lt;&lt; <font color="#008000">18</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet3</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet4</font> ; <font color="#696969">//   ;       ;</font> <font color="#696969">// ,         Unicode 10FFFF</font> <font color="#0000ff">if</font> ( <font color="#008000">0x10000</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF0000</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } } } <font color="#0000ff">return false</font> ; } } <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*  UTF-8    .</font> &lt;br/&gt; <font color="#696969">* [...]</font> &lt;br/&gt; <font color="#696969">* @author ur001 &lt;ur001ur001@gmail.com&gt;, {@link http://ur001.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param string $codePoint Unicode character ordinal.</font> &lt;br/&gt; <font color="#696969">* @return string|FALSE UTF-8   FALSE   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getChar( <font color="#cc6633">$codePoint</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x80</font> ) { <font color="#0000ff">return</font> chr( <font color="#cc6633">$codePoint</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x800</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xC0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x10000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xE0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x110000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xF0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">18</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">else</font> { <font color="#0000ff">return false</font> ; } } }</font></code> </li> <li> <code><font color="black"><a href="http://s-c.me/11935/s"></a> <a href="http://s-c.me/11935/h"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> Copy Source | Copy HTML <font color="#0000ff">class</font> String_Multibyte { <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*    UTF-8 ,       $index   $char.</font> &lt;br/&gt; <font color="#696969">*  ,    , BOM  0x10FFFE-0x10FFFF  FALSE.</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* [...]   ,    .</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* @author Andrew Dryga &lt;anddriga at gmail&gt;, {@link http://andryx.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param  string    $char     ().</font> &lt;br/&gt; <font color="#696969">* @param int        &amp;$index    ,        .       ,   .</font> &lt;br/&gt; <font color="#696969">* @return int|false     FALSE      ,   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getCodePoint( <font color="#cc6633">$char</font> , &amp; <font color="#cc6633">$index</font> = <font color="#008000">0</font> ) { <font color="#696969">//    </font> <font color="#cc6633">$octet1</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//      ASCII  (  0bbb bbbb),   .</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">7</font> == <font color="#008000">0x00</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$octet1</font> ; } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { <font color="#696969">//    </font> <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#696969">//   </font> <font color="#cc6633">$octet2</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//     (   10bb bbbb)</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet2</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#696969">//     6 </font> <font color="#cc6633">$octet2</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#696969">//         ,   </font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">5</font> == <font color="#008000">0x06</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x1F</font> ) &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet2</font> ; <font color="#696969">//       </font> <font color="#0000ff">if</font> ( <font color="#008000">0x80</font> &lt; <font color="#cc6633">$result</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet3</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">4</font> == <font color="#008000">0x0E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x0F</font> ) &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet3</font> ; <font color="#696969">//   ;  ,    BOM</font> <font color="#0000ff">if</font> ( <font color="#008000">0x800</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; !( <font color="#008000">0xD7FF</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF900</font> ) &amp;&amp; <font color="#cc6633">$result</font> != <font color="#008000">0xFEFF</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet4</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">3</font> == <font color="#008000">0x1E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x07</font> ) &lt;&lt; <font color="#008000">18</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet3</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet4</font> ; <font color="#696969">//   ;       ;</font> <font color="#696969">// ,         Unicode 10FFFF</font> <font color="#0000ff">if</font> ( <font color="#008000">0x10000</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF0000</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } } } <font color="#0000ff">return false</font> ; } } <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*  UTF-8    .</font> &lt;br/&gt; <font color="#696969">* [...]</font> &lt;br/&gt; <font color="#696969">* @author ur001 &lt;ur001ur001@gmail.com&gt;, {@link http://ur001.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param string $codePoint Unicode character ordinal.</font> &lt;br/&gt; <font color="#696969">* @return string|FALSE UTF-8   FALSE   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getChar( <font color="#cc6633">$codePoint</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x80</font> ) { <font color="#0000ff">return</font> chr( <font color="#cc6633">$codePoint</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x800</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xC0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x10000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xE0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x110000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xF0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">18</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">else</font> { <font color="#0000ff">return false</font> ; } } }</font></code> </li> <li> <code><font color="black"><a href="http://s-c.me/11935/s"></a> <a href="http://s-c.me/11935/h"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> Copy Source | Copy HTML <font color="#0000ff">class</font> String_Multibyte { <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*    UTF-8 ,       $index   $char.</font> &lt;br/&gt; <font color="#696969">*  ,    , BOM  0x10FFFE-0x10FFFF  FALSE.</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* [...]   ,    .</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* @author Andrew Dryga &lt;anddriga at gmail&gt;, {@link http://andryx.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param  string    $char     ().</font> &lt;br/&gt; <font color="#696969">* @param int        &amp;$index    ,        .       ,   .</font> &lt;br/&gt; <font color="#696969">* @return int|false     FALSE      ,   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getCodePoint( <font color="#cc6633">$char</font> , &amp; <font color="#cc6633">$index</font> = <font color="#008000">0</font> ) { <font color="#696969">//    </font> <font color="#cc6633">$octet1</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//      ASCII  (  0bbb bbbb),   .</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">7</font> == <font color="#008000">0x00</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$octet1</font> ; } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { <font color="#696969">//    </font> <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#696969">//   </font> <font color="#cc6633">$octet2</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//     (   10bb bbbb)</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet2</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#696969">//     6 </font> <font color="#cc6633">$octet2</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#696969">//         ,   </font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">5</font> == <font color="#008000">0x06</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x1F</font> ) &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet2</font> ; <font color="#696969">//       </font> <font color="#0000ff">if</font> ( <font color="#008000">0x80</font> &lt; <font color="#cc6633">$result</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet3</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">4</font> == <font color="#008000">0x0E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x0F</font> ) &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet3</font> ; <font color="#696969">//   ;  ,    BOM</font> <font color="#0000ff">if</font> ( <font color="#008000">0x800</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; !( <font color="#008000">0xD7FF</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF900</font> ) &amp;&amp; <font color="#cc6633">$result</font> != <font color="#008000">0xFEFF</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet4</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">3</font> == <font color="#008000">0x1E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x07</font> ) &lt;&lt; <font color="#008000">18</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet3</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet4</font> ; <font color="#696969">//   ;       ;</font> <font color="#696969">// ,         Unicode 10FFFF</font> <font color="#0000ff">if</font> ( <font color="#008000">0x10000</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF0000</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } } } <font color="#0000ff">return false</font> ; } } <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*  UTF-8    .</font> &lt;br/&gt; <font color="#696969">* [...]</font> &lt;br/&gt; <font color="#696969">* @author ur001 &lt;ur001ur001@gmail.com&gt;, {@link http://ur001.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param string $codePoint Unicode character ordinal.</font> &lt;br/&gt; <font color="#696969">* @return string|FALSE UTF-8   FALSE   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getChar( <font color="#cc6633">$codePoint</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x80</font> ) { <font color="#0000ff">return</font> chr( <font color="#cc6633">$codePoint</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x800</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xC0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x10000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xE0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x110000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xF0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">18</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">else</font> { <font color="#0000ff">return false</font> ; } } }</font></code> </li> <li> <code><font color="black"><a href="http://s-c.me/11935/s"></a> <a href="http://s-c.me/11935/h"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> Copy Source | Copy HTML <font color="#0000ff">class</font> String_Multibyte { <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*    UTF-8 ,       $index   $char.</font> &lt;br/&gt; <font color="#696969">*  ,    , BOM  0x10FFFE-0x10FFFF  FALSE.</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* [...]   ,    .</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* @author Andrew Dryga &lt;anddriga at gmail&gt;, {@link http://andryx.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param  string    $char     ().</font> &lt;br/&gt; <font color="#696969">* @param int        &amp;$index    ,        .       ,   .</font> &lt;br/&gt; <font color="#696969">* @return int|false     FALSE      ,   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getCodePoint( <font color="#cc6633">$char</font> , &amp; <font color="#cc6633">$index</font> = <font color="#008000">0</font> ) { <font color="#696969">//    </font> <font color="#cc6633">$octet1</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//      ASCII  (  0bbb bbbb),   .</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">7</font> == <font color="#008000">0x00</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$octet1</font> ; } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { <font color="#696969">//    </font> <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#696969">//   </font> <font color="#cc6633">$octet2</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//     (   10bb bbbb)</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet2</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#696969">//     6 </font> <font color="#cc6633">$octet2</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#696969">//         ,   </font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">5</font> == <font color="#008000">0x06</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x1F</font> ) &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet2</font> ; <font color="#696969">//       </font> <font color="#0000ff">if</font> ( <font color="#008000">0x80</font> &lt; <font color="#cc6633">$result</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet3</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">4</font> == <font color="#008000">0x0E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x0F</font> ) &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet3</font> ; <font color="#696969">//   ;  ,    BOM</font> <font color="#0000ff">if</font> ( <font color="#008000">0x800</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; !( <font color="#008000">0xD7FF</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF900</font> ) &amp;&amp; <font color="#cc6633">$result</font> != <font color="#008000">0xFEFF</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet4</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">3</font> == <font color="#008000">0x1E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x07</font> ) &lt;&lt; <font color="#008000">18</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet3</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet4</font> ; <font color="#696969">//   ;       ;</font> <font color="#696969">// ,         Unicode 10FFFF</font> <font color="#0000ff">if</font> ( <font color="#008000">0x10000</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF0000</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } } } <font color="#0000ff">return false</font> ; } } <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*  UTF-8    .</font> &lt;br/&gt; <font color="#696969">* [...]</font> &lt;br/&gt; <font color="#696969">* @author ur001 &lt;ur001ur001@gmail.com&gt;, {@link http://ur001.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param string $codePoint Unicode character ordinal.</font> &lt;br/&gt; <font color="#696969">* @return string|FALSE UTF-8   FALSE   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getChar( <font color="#cc6633">$codePoint</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x80</font> ) { <font color="#0000ff">return</font> chr( <font color="#cc6633">$codePoint</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x800</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xC0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x10000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xE0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x110000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xF0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">18</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">else</font> { <font color="#0000ff">return false</font> ; } } }</font></code> </li> <li></li><li></li><li> <code><font color="black"><a href="http://s-c.me/11935/s"></a> <a href="http://s-c.me/11935/h"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> Copy Source | Copy HTML <font color="#0000ff">class</font> String_Multibyte { <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*    UTF-8 ,       $index   $char.</font> &lt;br/&gt; <font color="#696969">*  ,    , BOM  0x10FFFE-0x10FFFF  FALSE.</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* [...]   ,    .</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* @author Andrew Dryga &lt;anddriga at gmail&gt;, {@link http://andryx.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param  string    $char     ().</font> &lt;br/&gt; <font color="#696969">* @param int        &amp;$index    ,        .       ,   .</font> &lt;br/&gt; <font color="#696969">* @return int|false     FALSE      ,   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getCodePoint( <font color="#cc6633">$char</font> , &amp; <font color="#cc6633">$index</font> = <font color="#008000">0</font> ) { <font color="#696969">//    </font> <font color="#cc6633">$octet1</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//      ASCII  (  0bbb bbbb),   .</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">7</font> == <font color="#008000">0x00</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$octet1</font> ; } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { <font color="#696969">//    </font> <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#696969">//   </font> <font color="#cc6633">$octet2</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//     (   10bb bbbb)</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet2</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#696969">//     6 </font> <font color="#cc6633">$octet2</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#696969">//         ,   </font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">5</font> == <font color="#008000">0x06</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x1F</font> ) &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet2</font> ; <font color="#696969">//       </font> <font color="#0000ff">if</font> ( <font color="#008000">0x80</font> &lt; <font color="#cc6633">$result</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet3</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">4</font> == <font color="#008000">0x0E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x0F</font> ) &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet3</font> ; <font color="#696969">//   ;  ,    BOM</font> <font color="#0000ff">if</font> ( <font color="#008000">0x800</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; !( <font color="#008000">0xD7FF</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF900</font> ) &amp;&amp; <font color="#cc6633">$result</font> != <font color="#008000">0xFEFF</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet4</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">3</font> == <font color="#008000">0x1E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x07</font> ) &lt;&lt; <font color="#008000">18</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet3</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet4</font> ; <font color="#696969">//   ;       ;</font> <font color="#696969">// ,         Unicode 10FFFF</font> <font color="#0000ff">if</font> ( <font color="#008000">0x10000</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF0000</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } } } <font color="#0000ff">return false</font> ; } } <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*  UTF-8    .</font> &lt;br/&gt; <font color="#696969">* [...]</font> &lt;br/&gt; <font color="#696969">* @author ur001 &lt;ur001ur001@gmail.com&gt;, {@link http://ur001.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param string $codePoint Unicode character ordinal.</font> &lt;br/&gt; <font color="#696969">* @return string|FALSE UTF-8   FALSE   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getChar( <font color="#cc6633">$codePoint</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x80</font> ) { <font color="#0000ff">return</font> chr( <font color="#cc6633">$codePoint</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x800</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xC0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x10000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xE0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x110000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xF0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">18</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">else</font> { <font color="#0000ff">return false</font> ; } } }</font></code> </li> <li> <code><font color="black"><a href="http://s-c.me/11935/s"></a> <a href="http://s-c.me/11935/h"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> Copy Source | Copy HTML <font color="#0000ff">class</font> String_Multibyte { <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*    UTF-8 ,       $index   $char.</font> &lt;br/&gt; <font color="#696969">*  ,    , BOM  0x10FFFE-0x10FFFF  FALSE.</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* [...]   ,    .</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* @author Andrew Dryga &lt;anddriga at gmail&gt;, {@link http://andryx.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param  string    $char     ().</font> &lt;br/&gt; <font color="#696969">* @param int        &amp;$index    ,        .       ,   .</font> &lt;br/&gt; <font color="#696969">* @return int|false     FALSE      ,   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getCodePoint( <font color="#cc6633">$char</font> , &amp; <font color="#cc6633">$index</font> = <font color="#008000">0</font> ) { <font color="#696969">//    </font> <font color="#cc6633">$octet1</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//      ASCII  (  0bbb bbbb),   .</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">7</font> == <font color="#008000">0x00</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$octet1</font> ; } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { <font color="#696969">//    </font> <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#696969">//   </font> <font color="#cc6633">$octet2</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//     (   10bb bbbb)</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet2</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#696969">//     6 </font> <font color="#cc6633">$octet2</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#696969">//         ,   </font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">5</font> == <font color="#008000">0x06</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x1F</font> ) &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet2</font> ; <font color="#696969">//       </font> <font color="#0000ff">if</font> ( <font color="#008000">0x80</font> &lt; <font color="#cc6633">$result</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet3</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">4</font> == <font color="#008000">0x0E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x0F</font> ) &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet3</font> ; <font color="#696969">//   ;  ,    BOM</font> <font color="#0000ff">if</font> ( <font color="#008000">0x800</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; !( <font color="#008000">0xD7FF</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF900</font> ) &amp;&amp; <font color="#cc6633">$result</font> != <font color="#008000">0xFEFF</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet4</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">3</font> == <font color="#008000">0x1E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x07</font> ) &lt;&lt; <font color="#008000">18</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet3</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet4</font> ; <font color="#696969">//   ;       ;</font> <font color="#696969">// ,         Unicode 10FFFF</font> <font color="#0000ff">if</font> ( <font color="#008000">0x10000</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF0000</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } } } <font color="#0000ff">return false</font> ; } } <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*  UTF-8    .</font> &lt;br/&gt; <font color="#696969">* [...]</font> &lt;br/&gt; <font color="#696969">* @author ur001 &lt;ur001ur001@gmail.com&gt;, {@link http://ur001.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param string $codePoint Unicode character ordinal.</font> &lt;br/&gt; <font color="#696969">* @return string|FALSE UTF-8   FALSE   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getChar( <font color="#cc6633">$codePoint</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x80</font> ) { <font color="#0000ff">return</font> chr( <font color="#cc6633">$codePoint</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x800</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xC0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x10000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xE0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x110000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xF0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">18</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">else</font> { <font color="#0000ff">return false</font> ; } } }</font></code> </li> <li> <code><font color="black"><a href="http://s-c.me/11935/s"></a> <a href="http://s-c.me/11935/h"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> Copy Source | Copy HTML <font color="#0000ff">class</font> String_Multibyte { <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*    UTF-8 ,       $index   $char.</font> &lt;br/&gt; <font color="#696969">*  ,    , BOM  0x10FFFE-0x10FFFF  FALSE.</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* [...]   ,    .</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* @author Andrew Dryga &lt;anddriga at gmail&gt;, {@link http://andryx.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param  string    $char     ().</font> &lt;br/&gt; <font color="#696969">* @param int        &amp;$index    ,        .       ,   .</font> &lt;br/&gt; <font color="#696969">* @return int|false     FALSE      ,   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getCodePoint( <font color="#cc6633">$char</font> , &amp; <font color="#cc6633">$index</font> = <font color="#008000">0</font> ) { <font color="#696969">//    </font> <font color="#cc6633">$octet1</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//      ASCII  (  0bbb bbbb),   .</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">7</font> == <font color="#008000">0x00</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$octet1</font> ; } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { <font color="#696969">//    </font> <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#696969">//   </font> <font color="#cc6633">$octet2</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//     (   10bb bbbb)</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet2</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#696969">//     6 </font> <font color="#cc6633">$octet2</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#696969">//         ,   </font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">5</font> == <font color="#008000">0x06</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x1F</font> ) &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet2</font> ; <font color="#696969">//       </font> <font color="#0000ff">if</font> ( <font color="#008000">0x80</font> &lt; <font color="#cc6633">$result</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet3</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">4</font> == <font color="#008000">0x0E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x0F</font> ) &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet3</font> ; <font color="#696969">//   ;  ,    BOM</font> <font color="#0000ff">if</font> ( <font color="#008000">0x800</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; !( <font color="#008000">0xD7FF</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF900</font> ) &amp;&amp; <font color="#cc6633">$result</font> != <font color="#008000">0xFEFF</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet4</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">3</font> == <font color="#008000">0x1E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x07</font> ) &lt;&lt; <font color="#008000">18</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet3</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet4</font> ; <font color="#696969">//   ;       ;</font> <font color="#696969">// ,         Unicode 10FFFF</font> <font color="#0000ff">if</font> ( <font color="#008000">0x10000</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF0000</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } } } <font color="#0000ff">return false</font> ; } } <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*  UTF-8    .</font> &lt;br/&gt; <font color="#696969">* [...]</font> &lt;br/&gt; <font color="#696969">* @author ur001 &lt;ur001ur001@gmail.com&gt;, {@link http://ur001.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param string $codePoint Unicode character ordinal.</font> &lt;br/&gt; <font color="#696969">* @return string|FALSE UTF-8   FALSE   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getChar( <font color="#cc6633">$codePoint</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x80</font> ) { <font color="#0000ff">return</font> chr( <font color="#cc6633">$codePoint</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x800</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xC0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x10000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xE0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x110000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xF0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">18</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">else</font> { <font color="#0000ff">return false</font> ; } } }</font></code> </li> <li> <code><font color="black"><a href="http://s-c.me/11935/s"></a> <a href="http://s-c.me/11935/h"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> Copy Source | Copy HTML <font color="#0000ff">class</font> String_Multibyte { <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*    UTF-8 ,       $index   $char.</font> &lt;br/&gt; <font color="#696969">*  ,    , BOM  0x10FFFE-0x10FFFF  FALSE.</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* [...]   ,    .</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* @author Andrew Dryga &lt;anddriga at gmail&gt;, {@link http://andryx.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param  string    $char     ().</font> &lt;br/&gt; <font color="#696969">* @param int        &amp;$index    ,        .       ,   .</font> &lt;br/&gt; <font color="#696969">* @return int|false     FALSE      ,   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getCodePoint( <font color="#cc6633">$char</font> , &amp; <font color="#cc6633">$index</font> = <font color="#008000">0</font> ) { <font color="#696969">//    </font> <font color="#cc6633">$octet1</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//      ASCII  (  0bbb bbbb),   .</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">7</font> == <font color="#008000">0x00</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$octet1</font> ; } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { <font color="#696969">//    </font> <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#696969">//   </font> <font color="#cc6633">$octet2</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//     (   10bb bbbb)</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet2</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#696969">//     6 </font> <font color="#cc6633">$octet2</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#696969">//         ,   </font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">5</font> == <font color="#008000">0x06</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x1F</font> ) &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet2</font> ; <font color="#696969">//       </font> <font color="#0000ff">if</font> ( <font color="#008000">0x80</font> &lt; <font color="#cc6633">$result</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet3</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">4</font> == <font color="#008000">0x0E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x0F</font> ) &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet3</font> ; <font color="#696969">//   ;  ,    BOM</font> <font color="#0000ff">if</font> ( <font color="#008000">0x800</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; !( <font color="#008000">0xD7FF</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF900</font> ) &amp;&amp; <font color="#cc6633">$result</font> != <font color="#008000">0xFEFF</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet4</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">3</font> == <font color="#008000">0x1E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x07</font> ) &lt;&lt; <font color="#008000">18</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet3</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet4</font> ; <font color="#696969">//   ;       ;</font> <font color="#696969">// ,         Unicode 10FFFF</font> <font color="#0000ff">if</font> ( <font color="#008000">0x10000</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF0000</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } } } <font color="#0000ff">return false</font> ; } } <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*  UTF-8    .</font> &lt;br/&gt; <font color="#696969">* [...]</font> &lt;br/&gt; <font color="#696969">* @author ur001 &lt;ur001ur001@gmail.com&gt;, {@link http://ur001.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param string $codePoint Unicode character ordinal.</font> &lt;br/&gt; <font color="#696969">* @return string|FALSE UTF-8   FALSE   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getChar( <font color="#cc6633">$codePoint</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x80</font> ) { <font color="#0000ff">return</font> chr( <font color="#cc6633">$codePoint</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x800</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xC0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x10000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xE0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x110000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xF0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">18</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">else</font> { <font color="#0000ff">return false</font> ; } } }</font></code> </li> <li> <code><font color="black"><a href="http://s-c.me/11935/s"></a> <a href="http://s-c.me/11935/h"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> Copy Source | Copy HTML <font color="#0000ff">class</font> String_Multibyte { <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*    UTF-8 ,       $index   $char.</font> &lt;br/&gt; <font color="#696969">*  ,    , BOM  0x10FFFE-0x10FFFF  FALSE.</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* [...]   ,    .</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* @author Andrew Dryga &lt;anddriga at gmail&gt;, {@link http://andryx.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param  string    $char     ().</font> &lt;br/&gt; <font color="#696969">* @param int        &amp;$index    ,        .       ,   .</font> &lt;br/&gt; <font color="#696969">* @return int|false     FALSE      ,   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getCodePoint( <font color="#cc6633">$char</font> , &amp; <font color="#cc6633">$index</font> = <font color="#008000">0</font> ) { <font color="#696969">//    </font> <font color="#cc6633">$octet1</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//      ASCII  (  0bbb bbbb),   .</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">7</font> == <font color="#008000">0x00</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$octet1</font> ; } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { <font color="#696969">//    </font> <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#696969">//   </font> <font color="#cc6633">$octet2</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//     (   10bb bbbb)</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet2</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#696969">//     6 </font> <font color="#cc6633">$octet2</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#696969">//         ,   </font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">5</font> == <font color="#008000">0x06</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x1F</font> ) &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet2</font> ; <font color="#696969">//       </font> <font color="#0000ff">if</font> ( <font color="#008000">0x80</font> &lt; <font color="#cc6633">$result</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet3</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">4</font> == <font color="#008000">0x0E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x0F</font> ) &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet3</font> ; <font color="#696969">//   ;  ,    BOM</font> <font color="#0000ff">if</font> ( <font color="#008000">0x800</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; !( <font color="#008000">0xD7FF</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF900</font> ) &amp;&amp; <font color="#cc6633">$result</font> != <font color="#008000">0xFEFF</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet4</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">3</font> == <font color="#008000">0x1E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x07</font> ) &lt;&lt; <font color="#008000">18</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet3</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet4</font> ; <font color="#696969">//   ;       ;</font> <font color="#696969">// ,         Unicode 10FFFF</font> <font color="#0000ff">if</font> ( <font color="#008000">0x10000</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF0000</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } } } <font color="#0000ff">return false</font> ; } } <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*  UTF-8    .</font> &lt;br/&gt; <font color="#696969">* [...]</font> &lt;br/&gt; <font color="#696969">* @author ur001 &lt;ur001ur001@gmail.com&gt;, {@link http://ur001.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param string $codePoint Unicode character ordinal.</font> &lt;br/&gt; <font color="#696969">* @return string|FALSE UTF-8   FALSE   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getChar( <font color="#cc6633">$codePoint</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x80</font> ) { <font color="#0000ff">return</font> chr( <font color="#cc6633">$codePoint</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x800</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xC0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x10000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xE0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x110000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xF0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">18</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">else</font> { <font color="#0000ff">return false</font> ; } } }</font></code> </li> <li> <code><font color="black"><a href="http://s-c.me/11935/s"></a> <a href="http://s-c.me/11935/h"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> Copy Source | Copy HTML <font color="#0000ff">class</font> String_Multibyte { <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*    UTF-8 ,       $index   $char.</font> &lt;br/&gt; <font color="#696969">*  ,    , BOM  0x10FFFE-0x10FFFF  FALSE.</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* [...]   ,    .</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* @author Andrew Dryga &lt;anddriga at gmail&gt;, {@link http://andryx.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param  string    $char     ().</font> &lt;br/&gt; <font color="#696969">* @param int        &amp;$index    ,        .       ,   .</font> &lt;br/&gt; <font color="#696969">* @return int|false     FALSE      ,   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getCodePoint( <font color="#cc6633">$char</font> , &amp; <font color="#cc6633">$index</font> = <font color="#008000">0</font> ) { <font color="#696969">//    </font> <font color="#cc6633">$octet1</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//      ASCII  (  0bbb bbbb),   .</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">7</font> == <font color="#008000">0x00</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$octet1</font> ; } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { <font color="#696969">//    </font> <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#696969">//   </font> <font color="#cc6633">$octet2</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//     (   10bb bbbb)</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet2</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#696969">//     6 </font> <font color="#cc6633">$octet2</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#696969">//         ,   </font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">5</font> == <font color="#008000">0x06</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x1F</font> ) &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet2</font> ; <font color="#696969">//       </font> <font color="#0000ff">if</font> ( <font color="#008000">0x80</font> &lt; <font color="#cc6633">$result</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet3</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">4</font> == <font color="#008000">0x0E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x0F</font> ) &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet3</font> ; <font color="#696969">//   ;  ,    BOM</font> <font color="#0000ff">if</font> ( <font color="#008000">0x800</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; !( <font color="#008000">0xD7FF</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF900</font> ) &amp;&amp; <font color="#cc6633">$result</font> != <font color="#008000">0xFEFF</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet4</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">3</font> == <font color="#008000">0x1E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x07</font> ) &lt;&lt; <font color="#008000">18</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet3</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet4</font> ; <font color="#696969">//   ;       ;</font> <font color="#696969">// ,         Unicode 10FFFF</font> <font color="#0000ff">if</font> ( <font color="#008000">0x10000</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF0000</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } } } <font color="#0000ff">return false</font> ; } } <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*  UTF-8    .</font> &lt;br/&gt; <font color="#696969">* [...]</font> &lt;br/&gt; <font color="#696969">* @author ur001 &lt;ur001ur001@gmail.com&gt;, {@link http://ur001.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param string $codePoint Unicode character ordinal.</font> &lt;br/&gt; <font color="#696969">* @return string|FALSE UTF-8   FALSE   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getChar( <font color="#cc6633">$codePoint</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x80</font> ) { <font color="#0000ff">return</font> chr( <font color="#cc6633">$codePoint</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x800</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xC0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x10000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xE0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x110000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xF0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">18</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">else</font> { <font color="#0000ff">return false</font> ; } } }</font></code> </li> <li> <code><font color="black"><a href="http://s-c.me/11935/s"></a> <a href="http://s-c.me/11935/h"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> Copy Source | Copy HTML <font color="#0000ff">class</font> String_Multibyte { <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*    UTF-8 ,       $index   $char.</font> &lt;br/&gt; <font color="#696969">*  ,    , BOM  0x10FFFE-0x10FFFF  FALSE.</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* [...]   ,    .</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* @author Andrew Dryga &lt;anddriga at gmail&gt;, {@link http://andryx.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param  string    $char     ().</font> &lt;br/&gt; <font color="#696969">* @param int        &amp;$index    ,        .       ,   .</font> &lt;br/&gt; <font color="#696969">* @return int|false     FALSE      ,   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getCodePoint( <font color="#cc6633">$char</font> , &amp; <font color="#cc6633">$index</font> = <font color="#008000">0</font> ) { <font color="#696969">//    </font> <font color="#cc6633">$octet1</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//      ASCII  (  0bbb bbbb),   .</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">7</font> == <font color="#008000">0x00</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$octet1</font> ; } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { <font color="#696969">//    </font> <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#696969">//   </font> <font color="#cc6633">$octet2</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//     (   10bb bbbb)</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet2</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#696969">//     6 </font> <font color="#cc6633">$octet2</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#696969">//         ,   </font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">5</font> == <font color="#008000">0x06</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x1F</font> ) &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet2</font> ; <font color="#696969">//       </font> <font color="#0000ff">if</font> ( <font color="#008000">0x80</font> &lt; <font color="#cc6633">$result</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet3</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">4</font> == <font color="#008000">0x0E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x0F</font> ) &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet3</font> ; <font color="#696969">//   ;  ,    BOM</font> <font color="#0000ff">if</font> ( <font color="#008000">0x800</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; !( <font color="#008000">0xD7FF</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF900</font> ) &amp;&amp; <font color="#cc6633">$result</font> != <font color="#008000">0xFEFF</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet4</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">3</font> == <font color="#008000">0x1E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x07</font> ) &lt;&lt; <font color="#008000">18</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet3</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet4</font> ; <font color="#696969">//   ;       ;</font> <font color="#696969">// ,         Unicode 10FFFF</font> <font color="#0000ff">if</font> ( <font color="#008000">0x10000</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF0000</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } } } <font color="#0000ff">return false</font> ; } } <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*  UTF-8    .</font> &lt;br/&gt; <font color="#696969">* [...]</font> &lt;br/&gt; <font color="#696969">* @author ur001 &lt;ur001ur001@gmail.com&gt;, {@link http://ur001.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param string $codePoint Unicode character ordinal.</font> &lt;br/&gt; <font color="#696969">* @return string|FALSE UTF-8   FALSE   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getChar( <font color="#cc6633">$codePoint</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x80</font> ) { <font color="#0000ff">return</font> chr( <font color="#cc6633">$codePoint</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x800</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xC0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x10000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xE0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x110000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xF0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">18</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">else</font> { <font color="#0000ff">return false</font> ; } } }</font></code> </li> <li> <code><font color="black"><a href="http://s-c.me/11935/s"></a> <a href="http://s-c.me/11935/h"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> Copy Source | Copy HTML <font color="#0000ff">class</font> String_Multibyte { <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*    UTF-8 ,       $index   $char.</font> &lt;br/&gt; <font color="#696969">*  ,    , BOM  0x10FFFE-0x10FFFF  FALSE.</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* [...]   ,    .</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* @author Andrew Dryga &lt;anddriga at gmail&gt;, {@link http://andryx.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param  string    $char     ().</font> &lt;br/&gt; <font color="#696969">* @param int        &amp;$index    ,        .       ,   .</font> &lt;br/&gt; <font color="#696969">* @return int|false     FALSE      ,   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getCodePoint( <font color="#cc6633">$char</font> , &amp; <font color="#cc6633">$index</font> = <font color="#008000">0</font> ) { <font color="#696969">//    </font> <font color="#cc6633">$octet1</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//      ASCII  (  0bbb bbbb),   .</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">7</font> == <font color="#008000">0x00</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$octet1</font> ; } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { <font color="#696969">//    </font> <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#696969">//   </font> <font color="#cc6633">$octet2</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//     (   10bb bbbb)</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet2</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#696969">//     6 </font> <font color="#cc6633">$octet2</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#696969">//         ,   </font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">5</font> == <font color="#008000">0x06</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x1F</font> ) &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet2</font> ; <font color="#696969">//       </font> <font color="#0000ff">if</font> ( <font color="#008000">0x80</font> &lt; <font color="#cc6633">$result</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet3</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">4</font> == <font color="#008000">0x0E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x0F</font> ) &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet3</font> ; <font color="#696969">//   ;  ,    BOM</font> <font color="#0000ff">if</font> ( <font color="#008000">0x800</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; !( <font color="#008000">0xD7FF</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF900</font> ) &amp;&amp; <font color="#cc6633">$result</font> != <font color="#008000">0xFEFF</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet4</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">3</font> == <font color="#008000">0x1E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x07</font> ) &lt;&lt; <font color="#008000">18</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet3</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet4</font> ; <font color="#696969">//   ;       ;</font> <font color="#696969">// ,         Unicode 10FFFF</font> <font color="#0000ff">if</font> ( <font color="#008000">0x10000</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF0000</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } } } <font color="#0000ff">return false</font> ; } } <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*  UTF-8    .</font> &lt;br/&gt; <font color="#696969">* [...]</font> &lt;br/&gt; <font color="#696969">* @author ur001 &lt;ur001ur001@gmail.com&gt;, {@link http://ur001.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param string $codePoint Unicode character ordinal.</font> &lt;br/&gt; <font color="#696969">* @return string|FALSE UTF-8   FALSE   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getChar( <font color="#cc6633">$codePoint</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x80</font> ) { <font color="#0000ff">return</font> chr( <font color="#cc6633">$codePoint</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x800</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xC0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x10000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xE0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x110000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xF0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">18</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">else</font> { <font color="#0000ff">return false</font> ; } } }</font></code> </li> <li> <code><font color="black"><a href="http://s-c.me/11935/s"></a> <a href="http://s-c.me/11935/h"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> Copy Source | Copy HTML <font color="#0000ff">class</font> String_Multibyte { <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*    UTF-8 ,       $index   $char.</font> &lt;br/&gt; <font color="#696969">*  ,    , BOM  0x10FFFE-0x10FFFF  FALSE.</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* [...]   ,    .</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* @author Andrew Dryga &lt;anddriga at gmail&gt;, {@link http://andryx.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param  string    $char     ().</font> &lt;br/&gt; <font color="#696969">* @param int        &amp;$index    ,        .       ,   .</font> &lt;br/&gt; <font color="#696969">* @return int|false     FALSE      ,   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getCodePoint( <font color="#cc6633">$char</font> , &amp; <font color="#cc6633">$index</font> = <font color="#008000">0</font> ) { <font color="#696969">//    </font> <font color="#cc6633">$octet1</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//      ASCII  (  0bbb bbbb),   .</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">7</font> == <font color="#008000">0x00</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$octet1</font> ; } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { <font color="#696969">//    </font> <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#696969">//   </font> <font color="#cc6633">$octet2</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//     (   10bb bbbb)</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet2</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#696969">//     6 </font> <font color="#cc6633">$octet2</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#696969">//         ,   </font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">5</font> == <font color="#008000">0x06</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x1F</font> ) &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet2</font> ; <font color="#696969">//       </font> <font color="#0000ff">if</font> ( <font color="#008000">0x80</font> &lt; <font color="#cc6633">$result</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet3</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">4</font> == <font color="#008000">0x0E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x0F</font> ) &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet3</font> ; <font color="#696969">//   ;  ,    BOM</font> <font color="#0000ff">if</font> ( <font color="#008000">0x800</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; !( <font color="#008000">0xD7FF</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF900</font> ) &amp;&amp; <font color="#cc6633">$result</font> != <font color="#008000">0xFEFF</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet4</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">3</font> == <font color="#008000">0x1E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x07</font> ) &lt;&lt; <font color="#008000">18</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet3</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet4</font> ; <font color="#696969">//   ;       ;</font> <font color="#696969">// ,         Unicode 10FFFF</font> <font color="#0000ff">if</font> ( <font color="#008000">0x10000</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF0000</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } } } <font color="#0000ff">return false</font> ; } } <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*  UTF-8    .</font> &lt;br/&gt; <font color="#696969">* [...]</font> &lt;br/&gt; <font color="#696969">* @author ur001 &lt;ur001ur001@gmail.com&gt;, {@link http://ur001.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param string $codePoint Unicode character ordinal.</font> &lt;br/&gt; <font color="#696969">* @return string|FALSE UTF-8   FALSE   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getChar( <font color="#cc6633">$codePoint</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x80</font> ) { <font color="#0000ff">return</font> chr( <font color="#cc6633">$codePoint</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x800</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xC0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x10000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xE0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x110000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xF0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">18</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">else</font> { <font color="#0000ff">return false</font> ; } } }</font></code> </li> <li> <code><font color="black"><a href="http://s-c.me/11935/s"></a> <a href="http://s-c.me/11935/h"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> Copy Source | Copy HTML <font color="#0000ff">class</font> String_Multibyte { <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*    UTF-8 ,       $index   $char.</font> &lt;br/&gt; <font color="#696969">*  ,    , BOM  0x10FFFE-0x10FFFF  FALSE.</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* [...]   ,    .</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* @author Andrew Dryga &lt;anddriga at gmail&gt;, {@link http://andryx.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param  string    $char     ().</font> &lt;br/&gt; <font color="#696969">* @param int        &amp;$index    ,        .       ,   .</font> &lt;br/&gt; <font color="#696969">* @return int|false     FALSE      ,   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getCodePoint( <font color="#cc6633">$char</font> , &amp; <font color="#cc6633">$index</font> = <font color="#008000">0</font> ) { <font color="#696969">//    </font> <font color="#cc6633">$octet1</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//      ASCII  (  0bbb bbbb),   .</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">7</font> == <font color="#008000">0x00</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$octet1</font> ; } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { <font color="#696969">//    </font> <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#696969">//   </font> <font color="#cc6633">$octet2</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//     (   10bb bbbb)</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet2</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#696969">//     6 </font> <font color="#cc6633">$octet2</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#696969">//         ,   </font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">5</font> == <font color="#008000">0x06</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x1F</font> ) &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet2</font> ; <font color="#696969">//       </font> <font color="#0000ff">if</font> ( <font color="#008000">0x80</font> &lt; <font color="#cc6633">$result</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet3</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">4</font> == <font color="#008000">0x0E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x0F</font> ) &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet3</font> ; <font color="#696969">//   ;  ,    BOM</font> <font color="#0000ff">if</font> ( <font color="#008000">0x800</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; !( <font color="#008000">0xD7FF</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF900</font> ) &amp;&amp; <font color="#cc6633">$result</font> != <font color="#008000">0xFEFF</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet4</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">3</font> == <font color="#008000">0x1E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x07</font> ) &lt;&lt; <font color="#008000">18</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet3</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet4</font> ; <font color="#696969">//   ;       ;</font> <font color="#696969">// ,         Unicode 10FFFF</font> <font color="#0000ff">if</font> ( <font color="#008000">0x10000</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF0000</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } } } <font color="#0000ff">return false</font> ; } } <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*  UTF-8    .</font> &lt;br/&gt; <font color="#696969">* [...]</font> &lt;br/&gt; <font color="#696969">* @author ur001 &lt;ur001ur001@gmail.com&gt;, {@link http://ur001.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param string $codePoint Unicode character ordinal.</font> &lt;br/&gt; <font color="#696969">* @return string|FALSE UTF-8   FALSE   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getChar( <font color="#cc6633">$codePoint</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x80</font> ) { <font color="#0000ff">return</font> chr( <font color="#cc6633">$codePoint</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x800</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xC0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x10000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xE0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x110000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xF0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">18</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">else</font> { <font color="#0000ff">return false</font> ; } } }</font></code> </li> <li> <code><font color="black"><a href="http://s-c.me/11935/s"></a> <a href="http://s-c.me/11935/h"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> Copy Source | Copy HTML <font color="#0000ff">class</font> String_Multibyte { <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*    UTF-8 ,       $index   $char.</font> &lt;br/&gt; <font color="#696969">*  ,    , BOM  0x10FFFE-0x10FFFF  FALSE.</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* [...]   ,    .</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* @author Andrew Dryga &lt;anddriga at gmail&gt;, {@link http://andryx.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param  string    $char     ().</font> &lt;br/&gt; <font color="#696969">* @param int        &amp;$index    ,        .       ,   .</font> &lt;br/&gt; <font color="#696969">* @return int|false     FALSE      ,   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getCodePoint( <font color="#cc6633">$char</font> , &amp; <font color="#cc6633">$index</font> = <font color="#008000">0</font> ) { <font color="#696969">//    </font> <font color="#cc6633">$octet1</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//      ASCII  (  0bbb bbbb),   .</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">7</font> == <font color="#008000">0x00</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$octet1</font> ; } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { <font color="#696969">//    </font> <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#696969">//   </font> <font color="#cc6633">$octet2</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//     (   10bb bbbb)</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet2</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#696969">//     6 </font> <font color="#cc6633">$octet2</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#696969">//         ,   </font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">5</font> == <font color="#008000">0x06</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x1F</font> ) &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet2</font> ; <font color="#696969">//       </font> <font color="#0000ff">if</font> ( <font color="#008000">0x80</font> &lt; <font color="#cc6633">$result</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet3</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">4</font> == <font color="#008000">0x0E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x0F</font> ) &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet3</font> ; <font color="#696969">//   ;  ,    BOM</font> <font color="#0000ff">if</font> ( <font color="#008000">0x800</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; !( <font color="#008000">0xD7FF</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF900</font> ) &amp;&amp; <font color="#cc6633">$result</font> != <font color="#008000">0xFEFF</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet4</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">3</font> == <font color="#008000">0x1E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x07</font> ) &lt;&lt; <font color="#008000">18</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet3</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet4</font> ; <font color="#696969">//   ;       ;</font> <font color="#696969">// ,         Unicode 10FFFF</font> <font color="#0000ff">if</font> ( <font color="#008000">0x10000</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF0000</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } } } <font color="#0000ff">return false</font> ; } } <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*  UTF-8    .</font> &lt;br/&gt; <font color="#696969">* [...]</font> &lt;br/&gt; <font color="#696969">* @author ur001 &lt;ur001ur001@gmail.com&gt;, {@link http://ur001.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param string $codePoint Unicode character ordinal.</font> &lt;br/&gt; <font color="#696969">* @return string|FALSE UTF-8   FALSE   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getChar( <font color="#cc6633">$codePoint</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x80</font> ) { <font color="#0000ff">return</font> chr( <font color="#cc6633">$codePoint</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x800</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xC0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x10000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xE0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x110000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xF0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">18</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">else</font> { <font color="#0000ff">return false</font> ; } } }</font></code> </li> <li> <code><font color="black"><a href="http://s-c.me/11935/s"></a> <a href="http://s-c.me/11935/h"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> Copy Source | Copy HTML <font color="#0000ff">class</font> String_Multibyte { <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*    UTF-8 ,       $index   $char.</font> &lt;br/&gt; <font color="#696969">*  ,    , BOM  0x10FFFE-0x10FFFF  FALSE.</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* [...]   ,    .</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* @author Andrew Dryga &lt;anddriga at gmail&gt;, {@link http://andryx.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param  string    $char     ().</font> &lt;br/&gt; <font color="#696969">* @param int        &amp;$index    ,        .       ,   .</font> &lt;br/&gt; <font color="#696969">* @return int|false     FALSE      ,   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getCodePoint( <font color="#cc6633">$char</font> , &amp; <font color="#cc6633">$index</font> = <font color="#008000">0</font> ) { <font color="#696969">//    </font> <font color="#cc6633">$octet1</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//      ASCII  (  0bbb bbbb),   .</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">7</font> == <font color="#008000">0x00</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$octet1</font> ; } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { <font color="#696969">//    </font> <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#696969">//   </font> <font color="#cc6633">$octet2</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//     (   10bb bbbb)</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet2</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#696969">//     6 </font> <font color="#cc6633">$octet2</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#696969">//         ,   </font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">5</font> == <font color="#008000">0x06</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x1F</font> ) &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet2</font> ; <font color="#696969">//       </font> <font color="#0000ff">if</font> ( <font color="#008000">0x80</font> &lt; <font color="#cc6633">$result</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet3</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">4</font> == <font color="#008000">0x0E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x0F</font> ) &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet3</font> ; <font color="#696969">//   ;  ,    BOM</font> <font color="#0000ff">if</font> ( <font color="#008000">0x800</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; !( <font color="#008000">0xD7FF</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF900</font> ) &amp;&amp; <font color="#cc6633">$result</font> != <font color="#008000">0xFEFF</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet4</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">3</font> == <font color="#008000">0x1E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x07</font> ) &lt;&lt; <font color="#008000">18</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet3</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet4</font> ; <font color="#696969">//   ;       ;</font> <font color="#696969">// ,         Unicode 10FFFF</font> <font color="#0000ff">if</font> ( <font color="#008000">0x10000</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF0000</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } } } <font color="#0000ff">return false</font> ; } } <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*  UTF-8    .</font> &lt;br/&gt; <font color="#696969">* [...]</font> &lt;br/&gt; <font color="#696969">* @author ur001 &lt;ur001ur001@gmail.com&gt;, {@link http://ur001.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param string $codePoint Unicode character ordinal.</font> &lt;br/&gt; <font color="#696969">* @return string|FALSE UTF-8   FALSE   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getChar( <font color="#cc6633">$codePoint</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x80</font> ) { <font color="#0000ff">return</font> chr( <font color="#cc6633">$codePoint</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x800</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xC0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x10000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xE0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x110000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xF0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">18</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">else</font> { <font color="#0000ff">return false</font> ; } } }</font></code> </li> <li> <code><font color="black"><a href="http://s-c.me/11935/s"></a> <a href="http://s-c.me/11935/h"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> Copy Source | Copy HTML <font color="#0000ff">class</font> String_Multibyte { <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*    UTF-8 ,       $index   $char.</font> &lt;br/&gt; <font color="#696969">*  ,    , BOM  0x10FFFE-0x10FFFF  FALSE.</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* [...]   ,    .</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* @author Andrew Dryga &lt;anddriga at gmail&gt;, {@link http://andryx.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param  string    $char     ().</font> &lt;br/&gt; <font color="#696969">* @param int        &amp;$index    ,        .       ,   .</font> &lt;br/&gt; <font color="#696969">* @return int|false     FALSE      ,   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getCodePoint( <font color="#cc6633">$char</font> , &amp; <font color="#cc6633">$index</font> = <font color="#008000">0</font> ) { <font color="#696969">//    </font> <font color="#cc6633">$octet1</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//      ASCII  (  0bbb bbbb),   .</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">7</font> == <font color="#008000">0x00</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$octet1</font> ; } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { <font color="#696969">//    </font> <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#696969">//   </font> <font color="#cc6633">$octet2</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//     (   10bb bbbb)</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet2</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#696969">//     6 </font> <font color="#cc6633">$octet2</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#696969">//         ,   </font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">5</font> == <font color="#008000">0x06</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x1F</font> ) &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet2</font> ; <font color="#696969">//       </font> <font color="#0000ff">if</font> ( <font color="#008000">0x80</font> &lt; <font color="#cc6633">$result</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet3</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">4</font> == <font color="#008000">0x0E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x0F</font> ) &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet3</font> ; <font color="#696969">//   ;  ,    BOM</font> <font color="#0000ff">if</font> ( <font color="#008000">0x800</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; !( <font color="#008000">0xD7FF</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF900</font> ) &amp;&amp; <font color="#cc6633">$result</font> != <font color="#008000">0xFEFF</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet4</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">3</font> == <font color="#008000">0x1E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x07</font> ) &lt;&lt; <font color="#008000">18</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet3</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet4</font> ; <font color="#696969">//   ;       ;</font> <font color="#696969">// ,         Unicode 10FFFF</font> <font color="#0000ff">if</font> ( <font color="#008000">0x10000</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF0000</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } } } <font color="#0000ff">return false</font> ; } } <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*  UTF-8    .</font> &lt;br/&gt; <font color="#696969">* [...]</font> &lt;br/&gt; <font color="#696969">* @author ur001 &lt;ur001ur001@gmail.com&gt;, {@link http://ur001.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param string $codePoint Unicode character ordinal.</font> &lt;br/&gt; <font color="#696969">* @return string|FALSE UTF-8   FALSE   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getChar( <font color="#cc6633">$codePoint</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x80</font> ) { <font color="#0000ff">return</font> chr( <font color="#cc6633">$codePoint</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x800</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xC0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x10000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xE0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x110000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xF0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">18</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">else</font> { <font color="#0000ff">return false</font> ; } } }</font></code> </li> <li> <code><font color="black"><a href="http://s-c.me/11935/s"></a> <a href="http://s-c.me/11935/h"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> Copy Source | Copy HTML <font color="#0000ff">class</font> String_Multibyte { <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*    UTF-8 ,       $index   $char.</font> &lt;br/&gt; <font color="#696969">*  ,    , BOM  0x10FFFE-0x10FFFF  FALSE.</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* [...]   ,    .</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* @author Andrew Dryga &lt;anddriga at gmail&gt;, {@link http://andryx.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param  string    $char     ().</font> &lt;br/&gt; <font color="#696969">* @param int        &amp;$index    ,        .       ,   .</font> &lt;br/&gt; <font color="#696969">* @return int|false     FALSE      ,   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getCodePoint( <font color="#cc6633">$char</font> , &amp; <font color="#cc6633">$index</font> = <font color="#008000">0</font> ) { <font color="#696969">//    </font> <font color="#cc6633">$octet1</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//      ASCII  (  0bbb bbbb),   .</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">7</font> == <font color="#008000">0x00</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$octet1</font> ; } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { <font color="#696969">//    </font> <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#696969">//   </font> <font color="#cc6633">$octet2</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//     (   10bb bbbb)</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet2</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#696969">//     6 </font> <font color="#cc6633">$octet2</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#696969">//         ,   </font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">5</font> == <font color="#008000">0x06</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x1F</font> ) &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet2</font> ; <font color="#696969">//       </font> <font color="#0000ff">if</font> ( <font color="#008000">0x80</font> &lt; <font color="#cc6633">$result</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet3</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">4</font> == <font color="#008000">0x0E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x0F</font> ) &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet3</font> ; <font color="#696969">//   ;  ,    BOM</font> <font color="#0000ff">if</font> ( <font color="#008000">0x800</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; !( <font color="#008000">0xD7FF</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF900</font> ) &amp;&amp; <font color="#cc6633">$result</font> != <font color="#008000">0xFEFF</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet4</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">3</font> == <font color="#008000">0x1E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x07</font> ) &lt;&lt; <font color="#008000">18</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet3</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet4</font> ; <font color="#696969">//   ;       ;</font> <font color="#696969">// ,         Unicode 10FFFF</font> <font color="#0000ff">if</font> ( <font color="#008000">0x10000</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF0000</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } } } <font color="#0000ff">return false</font> ; } } <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*  UTF-8    .</font> &lt;br/&gt; <font color="#696969">* [...]</font> &lt;br/&gt; <font color="#696969">* @author ur001 &lt;ur001ur001@gmail.com&gt;, {@link http://ur001.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param string $codePoint Unicode character ordinal.</font> &lt;br/&gt; <font color="#696969">* @return string|FALSE UTF-8   FALSE   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getChar( <font color="#cc6633">$codePoint</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x80</font> ) { <font color="#0000ff">return</font> chr( <font color="#cc6633">$codePoint</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x800</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xC0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x10000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xE0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x110000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xF0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">18</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">else</font> { <font color="#0000ff">return false</font> ; } } }</font></code> </li> <li> <code><font color="black"><a href="http://s-c.me/11935/s"></a> <a href="http://s-c.me/11935/h"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> Copy Source | Copy HTML <font color="#0000ff">class</font> String_Multibyte { <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*    UTF-8 ,       $index   $char.</font> &lt;br/&gt; <font color="#696969">*  ,    , BOM  0x10FFFE-0x10FFFF  FALSE.</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* [...]   ,    .</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* @author Andrew Dryga &lt;anddriga at gmail&gt;, {@link http://andryx.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param  string    $char     ().</font> &lt;br/&gt; <font color="#696969">* @param int        &amp;$index    ,        .       ,   .</font> &lt;br/&gt; <font color="#696969">* @return int|false     FALSE      ,   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getCodePoint( <font color="#cc6633">$char</font> , &amp; <font color="#cc6633">$index</font> = <font color="#008000">0</font> ) { <font color="#696969">//    </font> <font color="#cc6633">$octet1</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//      ASCII  (  0bbb bbbb),   .</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">7</font> == <font color="#008000">0x00</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$octet1</font> ; } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { <font color="#696969">//    </font> <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#696969">//   </font> <font color="#cc6633">$octet2</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//     (   10bb bbbb)</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet2</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#696969">//     6 </font> <font color="#cc6633">$octet2</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#696969">//         ,   </font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">5</font> == <font color="#008000">0x06</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x1F</font> ) &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet2</font> ; <font color="#696969">//       </font> <font color="#0000ff">if</font> ( <font color="#008000">0x80</font> &lt; <font color="#cc6633">$result</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet3</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">4</font> == <font color="#008000">0x0E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x0F</font> ) &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet3</font> ; <font color="#696969">//   ;  ,    BOM</font> <font color="#0000ff">if</font> ( <font color="#008000">0x800</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; !( <font color="#008000">0xD7FF</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF900</font> ) &amp;&amp; <font color="#cc6633">$result</font> != <font color="#008000">0xFEFF</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet4</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">3</font> == <font color="#008000">0x1E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x07</font> ) &lt;&lt; <font color="#008000">18</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet3</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet4</font> ; <font color="#696969">//   ;       ;</font> <font color="#696969">// ,         Unicode 10FFFF</font> <font color="#0000ff">if</font> ( <font color="#008000">0x10000</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF0000</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } } } <font color="#0000ff">return false</font> ; } } <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*  UTF-8    .</font> &lt;br/&gt; <font color="#696969">* [...]</font> &lt;br/&gt; <font color="#696969">* @author ur001 &lt;ur001ur001@gmail.com&gt;, {@link http://ur001.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param string $codePoint Unicode character ordinal.</font> &lt;br/&gt; <font color="#696969">* @return string|FALSE UTF-8   FALSE   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getChar( <font color="#cc6633">$codePoint</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x80</font> ) { <font color="#0000ff">return</font> chr( <font color="#cc6633">$codePoint</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x800</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xC0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x10000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xE0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x110000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xF0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">18</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">else</font> { <font color="#0000ff">return false</font> ; } } }</font></code> </li> <li> <code><font color="black"><a href="http://s-c.me/11935/s"></a> <a href="http://s-c.me/11935/h"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> Copy Source | Copy HTML <font color="#0000ff">class</font> String_Multibyte { <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*    UTF-8 ,       $index   $char.</font> &lt;br/&gt; <font color="#696969">*  ,    , BOM  0x10FFFE-0x10FFFF  FALSE.</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* [...]   ,    .</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* @author Andrew Dryga &lt;anddriga at gmail&gt;, {@link http://andryx.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param  string    $char     ().</font> &lt;br/&gt; <font color="#696969">* @param int        &amp;$index    ,        .       ,   .</font> &lt;br/&gt; <font color="#696969">* @return int|false     FALSE      ,   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getCodePoint( <font color="#cc6633">$char</font> , &amp; <font color="#cc6633">$index</font> = <font color="#008000">0</font> ) { <font color="#696969">//    </font> <font color="#cc6633">$octet1</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//      ASCII  (  0bbb bbbb),   .</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">7</font> == <font color="#008000">0x00</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$octet1</font> ; } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { <font color="#696969">//    </font> <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#696969">//   </font> <font color="#cc6633">$octet2</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//     (   10bb bbbb)</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet2</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#696969">//     6 </font> <font color="#cc6633">$octet2</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#696969">//         ,   </font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">5</font> == <font color="#008000">0x06</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x1F</font> ) &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet2</font> ; <font color="#696969">//       </font> <font color="#0000ff">if</font> ( <font color="#008000">0x80</font> &lt; <font color="#cc6633">$result</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet3</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">4</font> == <font color="#008000">0x0E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x0F</font> ) &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet3</font> ; <font color="#696969">//   ;  ,    BOM</font> <font color="#0000ff">if</font> ( <font color="#008000">0x800</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; !( <font color="#008000">0xD7FF</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF900</font> ) &amp;&amp; <font color="#cc6633">$result</font> != <font color="#008000">0xFEFF</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet4</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">3</font> == <font color="#008000">0x1E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x07</font> ) &lt;&lt; <font color="#008000">18</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet3</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet4</font> ; <font color="#696969">//   ;       ;</font> <font color="#696969">// ,         Unicode 10FFFF</font> <font color="#0000ff">if</font> ( <font color="#008000">0x10000</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF0000</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } } } <font color="#0000ff">return false</font> ; } } <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*  UTF-8    .</font> &lt;br/&gt; <font color="#696969">* [...]</font> &lt;br/&gt; <font color="#696969">* @author ur001 &lt;ur001ur001@gmail.com&gt;, {@link http://ur001.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param string $codePoint Unicode character ordinal.</font> &lt;br/&gt; <font color="#696969">* @return string|FALSE UTF-8   FALSE   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getChar( <font color="#cc6633">$codePoint</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x80</font> ) { <font color="#0000ff">return</font> chr( <font color="#cc6633">$codePoint</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x800</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xC0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x10000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xE0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x110000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xF0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">18</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">else</font> { <font color="#0000ff">return false</font> ; } } }</font></code> </li> <li> <code><font color="black"><a href="http://s-c.me/11935/s"></a> <a href="http://s-c.me/11935/h"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> Copy Source | Copy HTML <font color="#0000ff">class</font> String_Multibyte { <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*    UTF-8 ,       $index   $char.</font> &lt;br/&gt; <font color="#696969">*  ,    , BOM  0x10FFFE-0x10FFFF  FALSE.</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* [...]   ,    .</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* @author Andrew Dryga &lt;anddriga at gmail&gt;, {@link http://andryx.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param  string    $char     ().</font> &lt;br/&gt; <font color="#696969">* @param int        &amp;$index    ,        .       ,   .</font> &lt;br/&gt; <font color="#696969">* @return int|false     FALSE      ,   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getCodePoint( <font color="#cc6633">$char</font> , &amp; <font color="#cc6633">$index</font> = <font color="#008000">0</font> ) { <font color="#696969">//    </font> <font color="#cc6633">$octet1</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//      ASCII  (  0bbb bbbb),   .</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">7</font> == <font color="#008000">0x00</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$octet1</font> ; } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { <font color="#696969">//    </font> <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#696969">//   </font> <font color="#cc6633">$octet2</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//     (   10bb bbbb)</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet2</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#696969">//     6 </font> <font color="#cc6633">$octet2</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#696969">//         ,   </font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">5</font> == <font color="#008000">0x06</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x1F</font> ) &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet2</font> ; <font color="#696969">//       </font> <font color="#0000ff">if</font> ( <font color="#008000">0x80</font> &lt; <font color="#cc6633">$result</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet3</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">4</font> == <font color="#008000">0x0E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x0F</font> ) &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet3</font> ; <font color="#696969">//   ;  ,    BOM</font> <font color="#0000ff">if</font> ( <font color="#008000">0x800</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; !( <font color="#008000">0xD7FF</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF900</font> ) &amp;&amp; <font color="#cc6633">$result</font> != <font color="#008000">0xFEFF</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet4</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">3</font> == <font color="#008000">0x1E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x07</font> ) &lt;&lt; <font color="#008000">18</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet3</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet4</font> ; <font color="#696969">//   ;       ;</font> <font color="#696969">// ,         Unicode 10FFFF</font> <font color="#0000ff">if</font> ( <font color="#008000">0x10000</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF0000</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } } } <font color="#0000ff">return false</font> ; } } <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*  UTF-8    .</font> &lt;br/&gt; <font color="#696969">* [...]</font> &lt;br/&gt; <font color="#696969">* @author ur001 &lt;ur001ur001@gmail.com&gt;, {@link http://ur001.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param string $codePoint Unicode character ordinal.</font> &lt;br/&gt; <font color="#696969">* @return string|FALSE UTF-8   FALSE   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getChar( <font color="#cc6633">$codePoint</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x80</font> ) { <font color="#0000ff">return</font> chr( <font color="#cc6633">$codePoint</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x800</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xC0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x10000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xE0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x110000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xF0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">18</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">else</font> { <font color="#0000ff">return false</font> ; } } }</font></code> </li> <li> <code><font color="black"><a href="http://s-c.me/11935/s"></a> <a href="http://s-c.me/11935/h"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> Copy Source | Copy HTML <font color="#0000ff">class</font> String_Multibyte { <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*    UTF-8 ,       $index   $char.</font> &lt;br/&gt; <font color="#696969">*  ,    , BOM  0x10FFFE-0x10FFFF  FALSE.</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* [...]   ,    .</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* @author Andrew Dryga &lt;anddriga at gmail&gt;, {@link http://andryx.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param  string    $char     ().</font> &lt;br/&gt; <font color="#696969">* @param int        &amp;$index    ,        .       ,   .</font> &lt;br/&gt; <font color="#696969">* @return int|false     FALSE      ,   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getCodePoint( <font color="#cc6633">$char</font> , &amp; <font color="#cc6633">$index</font> = <font color="#008000">0</font> ) { <font color="#696969">//    </font> <font color="#cc6633">$octet1</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//      ASCII  (  0bbb bbbb),   .</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">7</font> == <font color="#008000">0x00</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$octet1</font> ; } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { <font color="#696969">//    </font> <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#696969">//   </font> <font color="#cc6633">$octet2</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//     (   10bb bbbb)</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet2</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#696969">//     6 </font> <font color="#cc6633">$octet2</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#696969">//         ,   </font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">5</font> == <font color="#008000">0x06</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x1F</font> ) &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet2</font> ; <font color="#696969">//       </font> <font color="#0000ff">if</font> ( <font color="#008000">0x80</font> &lt; <font color="#cc6633">$result</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet3</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">4</font> == <font color="#008000">0x0E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x0F</font> ) &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet3</font> ; <font color="#696969">//   ;  ,    BOM</font> <font color="#0000ff">if</font> ( <font color="#008000">0x800</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; !( <font color="#008000">0xD7FF</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF900</font> ) &amp;&amp; <font color="#cc6633">$result</font> != <font color="#008000">0xFEFF</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet4</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">3</font> == <font color="#008000">0x1E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x07</font> ) &lt;&lt; <font color="#008000">18</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet3</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet4</font> ; <font color="#696969">//   ;       ;</font> <font color="#696969">// ,         Unicode 10FFFF</font> <font color="#0000ff">if</font> ( <font color="#008000">0x10000</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF0000</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } } } <font color="#0000ff">return false</font> ; } } <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*  UTF-8    .</font> &lt;br/&gt; <font color="#696969">* [...]</font> &lt;br/&gt; <font color="#696969">* @author ur001 &lt;ur001ur001@gmail.com&gt;, {@link http://ur001.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param string $codePoint Unicode character ordinal.</font> &lt;br/&gt; <font color="#696969">* @return string|FALSE UTF-8   FALSE   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getChar( <font color="#cc6633">$codePoint</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x80</font> ) { <font color="#0000ff">return</font> chr( <font color="#cc6633">$codePoint</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x800</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xC0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x10000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xE0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x110000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xF0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">18</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">else</font> { <font color="#0000ff">return false</font> ; } } }</font></code> </li> <li> <code><font color="black"><a href="http://s-c.me/11935/s"></a> <a href="http://s-c.me/11935/h"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.ord.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> Copy Source | Copy HTML <font color="#0000ff">class</font> String_Multibyte { <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*    UTF-8 ,       $index   $char.</font> &lt;br/&gt; <font color="#696969">*  ,    , BOM  0x10FFFE-0x10FFFF  FALSE.</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* [...]   ,    .</font> &lt;br/&gt; <font color="#696969">*</font> &lt;br/&gt; <font color="#696969">* @author Andrew Dryga &lt;anddriga at gmail&gt;, {@link http://andryx.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param  string    $char     ().</font> &lt;br/&gt; <font color="#696969">* @param int        &amp;$index    ,        .       ,   .</font> &lt;br/&gt; <font color="#696969">* @return int|false     FALSE      ,   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getCodePoint( <font color="#cc6633">$char</font> , &amp; <font color="#cc6633">$index</font> = <font color="#008000">0</font> ) { <font color="#696969">//    </font> <font color="#cc6633">$octet1</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//      ASCII  (  0bbb bbbb),   .</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">7</font> == <font color="#008000">0x00</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$octet1</font> ; } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { <font color="#696969">//    </font> <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#696969">//   </font> <font color="#cc6633">$octet2</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#696969">//     (   10bb bbbb)</font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet2</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#696969">//     6 </font> <font color="#cc6633">$octet2</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#696969">//         ,   </font> <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">5</font> == <font color="#008000">0x06</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x1F</font> ) &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet2</font> ; <font color="#696969">//       </font> <font color="#0000ff">if</font> ( <font color="#008000">0x80</font> &lt; <font color="#cc6633">$result</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet3</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet3</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">4</font> == <font color="#008000">0x0E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x0F</font> ) &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet3</font> ; <font color="#696969">//   ;  ,    BOM</font> <font color="#0000ff">if</font> ( <font color="#008000">0x800</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; !( <font color="#008000">0xD7FF</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF900</font> ) &amp;&amp; <font color="#cc6633">$result</font> != <font color="#008000">0xFEFF</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } <font color="#0000ff">else</font> { <font color="#0000ff">if</font> (! <font color="#0000ff">isset</font> ( <font color="#cc6633">$char</font> [++ <font color="#cc6633">$index</font> ])) { <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> = ord( <font color="#cc6633">$char</font> [ <font color="#cc6633">$index</font> ]); <font color="#0000ff">if</font> ( <font color="#cc6633">$octet4</font> &gt;&gt; <font color="#008000">6</font> != <font color="#008000">0x02</font> ) { -- <font color="#cc6633">$index</font> ; <font color="#0000ff">return false</font> ; } <font color="#cc6633">$octet4</font> &amp;= <font color="#008000">0x3F</font> ; <font color="#0000ff">if</font> ( <font color="#cc6633">$octet1</font> &gt;&gt; <font color="#008000">3</font> == <font color="#008000">0x1E</font> ) { <font color="#cc6633">$result</font> = ( <font color="#cc6633">$octet1</font> &amp; <font color="#008000">0x07</font> ) &lt;&lt; <font color="#008000">18</font> | <font color="#cc6633">$octet2</font> &lt;&lt; <font color="#008000">12</font> | <font color="#cc6633">$octet3</font> &lt;&lt; <font color="#008000">6</font> | <font color="#cc6633">$octet4</font> ; <font color="#696969">//   ;       ;</font> <font color="#696969">// ,         Unicode 10FFFF</font> <font color="#0000ff">if</font> ( <font color="#008000">0x10000</font> &lt; <font color="#cc6633">$result</font> &amp;&amp; <font color="#cc6633">$result</font> &lt; <font color="#008000">0xF0000</font> ) { <font color="#0000ff">return</font> <font color="#cc6633">$result</font> ; } } } } <font color="#0000ff">return false</font> ; } } <font color="#696969">/**</font> &lt;br/&gt; <font color="#696969">*  UTF-8    .</font> &lt;br/&gt; <font color="#696969">* [...]</font> &lt;br/&gt; <font color="#696969">* @author ur001 &lt;ur001ur001@gmail.com&gt;, {@link http://ur001.habrahabr.ru}.</font> &lt;br/&gt; <font color="#696969">* @param string $codePoint Unicode character ordinal.</font> &lt;br/&gt; <font color="#696969">* @return string|FALSE UTF-8   FALSE   .</font> &lt;br/&gt; <font color="#696969">*/</font> <font color="#0000ff">public function</font> getChar( <font color="#cc6633">$codePoint</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x80</font> ) { <font color="#0000ff">return</font> chr( <font color="#cc6633">$codePoint</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x800</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xC0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x10000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xE0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">elseif</font> ( <font color="#cc6633">$codePoint</font> &lt; <font color="#008000">0x110000</font> ) { <font color="#0000ff">return</font> chr( <font color="#008000">0xF0</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">18</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">12</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &gt;&gt; <font color="#008000">6</font> &amp; <font color="#008000">0x3F</font> ) . chr( <font color="#008000">0x80</font> | <font color="#cc6633">$codePoint</font> &amp; <font color="#008000">0x3F</font> ); } <font color="#0000ff">else</font> { <font color="#0000ff">return false</font> ; } } }</font></code> </li> </ol></blockquote><br>  The getChar () method was taken from the Jevix library, I have already seen this code anyway, I remembered it well, and even when implementing it from memory it would be dishonest not to mention the author. <br><br>  You can test the resulting class with the code: <br><blockquote> <code><a href="http://s-c.me/11936/s"></a> <a href="http://s-c.me/11936/h"></a> <a href="http://www.php.net/manual/en/function.explode.php"></a> <a href="http://www.php.net/manual/en/function.chr.php"></a> <a href="http://www.php.net/manual/en/function.bindec.php"></a> <a href="http://www.php.net/manual/en/function.strlen.php"></a> <a href="http://www.php.net/manual/en/function.count.php"></a> <a href="http://www.php.net/manual/en/function.preg-match.php"></a> <font color="black">Copy Source | Copy HTML</font></code> <ol> <li>  <font color="#696969">// Create an instance of the object</font> </li><li>  <font color="#cc6633">$ obj</font> = <font color="#0000ff">new</font> String_Multibyte (); </li><li>  <font color="#696969">// Create a string in the most convenient way to test</font> </li><li>  <font color="#cc6633">$ tmp</font> = <font color="#008000">"</font> ; </li><li>  <font color="#0000ff">foreach</font> (explode ( <font color="#008000">"</font> , <font color="#008000">" 11010000 10011111 11010001 10000000 11010000 10111000 11010000 10110010 11010000 10110101 11010001 10000010 00100000 01001000 01101001 "</font> ) <font color="#0000ff">as</font> <font color="#cc6633">$ octet</font> ) { </li><li>  <font color="#cc6633">$ tmp</font> . = chr (bindec ( <font color="#cc6633">$ octet</font> )); </li><li>  } </li><li>  <font color="#696969">// Build the character code map</font> </li><li>  <font color="#cc6633">$ map</font> = <font color="#0000ff">array</font> (); </li><li>  <font color="#cc6633">$ len</font> = strlen ( <font color="#cc6633">$ tmp</font> ); </li><li>  <font color="#0000ff">for</font> ( <font color="#cc6633">$ i</font> = <font color="#008000">0</font> ; <font color="#cc6633">$ i</font> &lt; <font color="#cc6633">$ len</font> ; <font color="#cc6633">$ i</font> ++) { </li><li>  <font color="#0000ff">if</font> ( <font color="#0000ff">true</font> == ( <font color="#cc6633">$ result</font> = <font color="#cc6633">$ obj</font> -&gt; getCodePoint ( <font color="#cc6633">$ tmp</font> , <font color="#cc6633">$ i</font> ))) { </li><li>  <font color="#cc6633">$ map</font> [] = <font color="#cc6633">$ result</font> ; </li><li>  } </li><li>  } </li><li>  <font color="#696969">// Clear the string and restore it from the map</font> </li><li>  <font color="#cc6633">$ tmp</font> = <font color="#008000">"</font> ; </li><li>  <font color="#cc6633">$ count</font> = count ( <font color="#cc6633">$ map</font> ); </li><li>  <font color="#0000ff">for</font> ( <font color="#cc6633">$ i</font> = <font color="#008000">0</font> ; <font color="#cc6633">$ i</font> &lt; <font color="#cc6633">$ count</font> ; <font color="#cc6633">$ i</font> ++) { </li><li>  <font color="#cc6633">$ tmp</font> . = <font color="#cc6633">$ obj</font> -&gt; getChar ( <font color="#cc6633">$ map</font> [ <font color="#cc6633">$ i</font> ]); </li><li>  } </li><li>  <font color="#696969">// Display the restored string</font> </li><li>  <font color="#0000ff">echo</font> <font color="#cc6633">$ tmp</font> , <font color="#008000">'&lt;br /&gt;'</font> .EOL; </li><li>  <font color="#696969">// Check it for validity (this is the easiest way)</font> </li><li>  <font color="#0000ff">echo</font> preg_match ( <font color="#008000">'#. {1} #u'</font> , <font color="#cc6633">$ tmp</font> )?  <font color="#008000">'Valid Unicode'</font> : <font color="#008000">'Unknown'</font> , <font color="#008000">'&lt;br /&gt;'</font> .EOL; </li><li></li></ol></blockquote>  I did not try to write the most beautiful or correct code for the tests, but with the help of it you can easily change the values ‚Äã‚Äãof characters and immediately see the result.  All invalid sequences will be ignored, the output string is always valid, but that‚Äôs not all. <br><br>  To be sure that the text does not contain anything superfluous, it is necessary to remove unnecessary (unprintable, markup, unspecified, surrogate, etc.) symbols from it and carry out normalization, in the next section. <br><br><h5>  PS: </h5>  Next will be about normalization, security, definition of encodings and working with UTF-8 in PHP. <br><br><h5>  References: </h5><ul><li>  <a href="http://www.unicode.org/">unicode.org</a> ; </li><li>  <a href="http://ru.wikipedia.org/wiki/UTF-8">UTF-8 on the wiki</a> ( <a href="http://en.wikipedia.org/wiki/UTF-8">en</a> ); </li><li>  <a href="http://www.columbia.edu/kermit/utf8.html">Test page for scripts working with UTF-8</a> ; </li><li>  <a href="http://wiki.tcl.tk/1211">UTF-8 bit by bit</a> . </li></ul></div><p>Source: <a href="https://habr.com/ru/post/113715/">https://habr.com/ru/post/113715/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../113708/index.html">FlexRAID View - combining multiple disks into a single array</a></li>
<li><a href="../113709/index.html">Mailing Usability</a></li>
<li><a href="../113710/index.html">Optimization of free space: discard PNG</a></li>
<li><a href="../113711/index.html">Apacetosh</a></li>
<li><a href="../113712/index.html">Barcamp 2G: meeting place Krasnodar (February 26, 2011)</a></li>
<li><a href="../113716/index.html">Free Gaming Club - Answers</a></li>
<li><a href="../113718/index.html">Design applications that are easy to test.</a></li>
<li><a href="../113719/index.html">CacheAccelerator for MODx Evo. A decrease in the number of database requests by caching dynamic snippets</a></li>
<li><a href="../113720/index.html">Dynamic programming. Match model</a></li>
<li><a href="../113722/index.html">YouTube and LG collaborate on mobile 3D video</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Cross-language software development</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Task 
 That would be, developing a program in one language, immediately get the source code in other programming languages ‚Äã‚Äã... I am writing in C # ....">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Cross-language software development</h1><div class="post__text post__text-html js-mediator-article"><h2>  Task </h2><br>  That would be, developing a program in one language, immediately get the source code in other programming languages ‚Äã‚Äã... I am writing in C # .NET, but lately more and more need to integrate with Java.  One of the solutions is to design web services for interaction, but not this, not that.  It seems there are C # converters in Java, but the experiment showed that for a real project they (those that managed to try) do not work, although they work on the ‚Äúhello world‚Äù perfectly.  Rewriting the entire project from scratch to Java is unrealistic - it has been actively developed for more than 6 years (Pullenti is a processing of natural language), and in C # it is needed.  I had to mobilize last year to write this converter, and this year, and the converter C # to Python. <br><a name="habracut"></a><br><h2>  Experience creating a C # converter in Java </h2><br>  So, at the input of the projects (solution) of Visual Studio, you need to get classes in Java.  Of course, not all types of projects can be supported, but the type ‚ÄúClass Library‚Äù and ‚ÄúConsole Application‚Äù is completely.  Projects should not use any graphical libraries such as System.Drawing, no Windows features or DllImport, and for libraries used, there must be analogues in Java.  Fortunately, for the features I used, such analogs were found (work with XML, GZip archives, etc.).  Some minor details had to be abandoned, slightly tweaking the algorithms.  At the level of C # and Java are close, but Java is slightly poorer - that's what is missing in it: <br><br><ul><li>  property {get;  set;  } - you have to work with functions; </li><li>  There are no struct structures, so at first I modeled them simply by Java classes, but then I rewrote the algorithm, abandoning them completely; </li><li>  delegate - no, but modeled interface with a single function; </li><li>  event - modeled by an ArrayList array of class members that implement the interface of the corresponding delegate; </li><li>  The out and ref arguments of methods are modeled by classes with one field Value; </li><li>  internal - this modifier does not make sense at all in Java, since the concept of an assembly is missing, therefore it is simply replaced by public; </li><li>  new Class () {assignments} - you have to create a static function into which to make these assignments; </li><li>  enum - if in C # bitwise operations with its elements are possible, then in Java this is prohibited, and the converter has to convert enum to Java classes; </li></ul><br>  But it was not the most difficult thing - the problem with a huge number of system functions, for which it was necessary to look for analogues.  For some, there were no analogues, and I had to write them in Java, creating my own library, which is added when generating to the resulting Java sources.  For example, in C #, for streaming I / O is the base class Stream, and in Java there are two separate classes, the InputStream and OutputStream, and therefore some ‚Äúwrapper‚Äù over them is needed. <br><br>  If it was necessary to exclude some fragment from the C # code or arrange it a little differently for Java, then the preprocessor directives #if JAVA ... # else ... #endif were used. <br>  So, gradually adding new functions to the source code and correcting the source code in C #, we managed to come to the conclusion that more than 1,500 units of tests generated by Java began to work properly, like their C # prototypes. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h2>  Comparison of the speed of .NET and Java </h2><br>  Now the fun part.  There is a time consuming algorithm (basically working with strings), and absolutely identical implementations of it in C # and Java.  As an .NET apologist, I have always doubted the effectiveness of Java.  But it turned out to be wrong - C # is only 15-20% faster than Java (launched from Eclipse under Windows), and not several times as expected.  What is the situation with Python?  Read on. <br><br><h2>  Experience creating a C # converter in Python </h2><br>  In Python it turned out to be converted even easier than in Java.  The basis was ready, it remains only to correct the generator to a new language and find (write) analogs of the functions used. <br><br>  What is missing or uncomfortable in Python: <br><br><ul><li>  for (init, cond, incr) - is absent in its full form, there are some special cases with the range, but mostly you have to model through while; </li><li>  switch - absent, modeled if-then-else; </li><li>  interface is absent, but it is just a class with empty methods; </li></ul><br>  A very inconvenient system for importing other classes, leading in some cases to cyclical dependence and the impossibility of importing at all.  I had to keep track of these dependencies and make some imports at the method level, not the entire file with the class.  Despite these and other difficulties, we managed to achieve the correct execution of those 1500 unit tests. <br><br><h2>  Comparing the speed of .NET and Python </h2><br>  Many complain about the slow speed of Python, but how low is it?  And is it low?  It's time to compare on the same algorithm as for Java (more precisely, on the same unit tests).  Ready?  So, Python is 30 times slower than .NET (launched in Eclipse under PyDev). <br><br>  The reason, I think, is as follows.  In Python, there are no simple types like ValueType (as I understand it), and even ordinary numbers are fully-fledged objects (actually like boxing in .NET).  And the string element is not a symbol, but also a string of one character!  That is, string [i] is not a char, but, as it were, a string.Substring (i, 1) in .NET. <br><br><h2>  Cross-language technology </h2><br>  On the basis of personal experience, I will say that it is possible to develop in one language and platform and automatically transfer to other languages ‚Äã‚Äãand platforms.  I develop my base project on the .NET Framework 4.0, and at any moment I have functionally equivalent: <br><br><ul><li>  Java sources (converter); </li><li>  Python sources (converter); </li><li>  projects on .NET Core (separate csproj-files, but the sources are the same); </li><li>  projects on the .NET Framework 2.0 (converter, and this is needed for one customer); </li></ul><br>  I will share one very useful feature of Visual Studio, which for some reason is not widely used even by professional C # developers, to my deep surprise.  And which is missing from development tools, say, for Java.  Namely, the ability to change the code and move the current position directly during execution, and the state of all variables is preserved and you can continue execution with the changes made.  This dramatically simplifies debugging, especially when it takes some time to reproduce the desired situation.  For example, I turn on the mode in which Visual Studio pauses the program at the Exception site (or rather, I never turn off this mode), start a long processing, and after a few minutes or hours this situation occurs, most often NullReference.  I correct the code, and instead of restarting the program, I move the execution point to the desired operator back and run the execution further.  In general, I often implement complex algorithms in the right places right during the execution.  I remember when I did the system of exchange trading, it made life much easier in the conditions of the time-consuming procedure of initialization and access to the necessary algorithmic branch.  In Visual Studio, this feature is achieved through tight integration of the IDE and the compiler - they can afford it.  But back to technology. <br><br>  The limitations are obvious - only libraries and console applications.  Finite applications with a custom GUI or Web application are almost unreal.  And when developing libraries, one has to adhere to the limitations imposed by the requirement of universality.  You have to give up something, rewrite something, but the result is worth the effort! </div><p>Source: <a href="https://habr.com/ru/post/354942/">https://habr.com/ru/post/354942/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../354930/index.html">BigInt - long arithmetic in javascript</a></li>
<li><a href="../354934/index.html">Plausible reconstruction of Instagram-like filters</a></li>
<li><a href="../354936/index.html">(Akin's laws) laws of space engineering</a></li>
<li><a href="../354938/index.html">Loud sound of the fire extinguishing system knocked out the drives in the Nasdaq data center</a></li>
<li><a href="../354940/index.html">Extreme Performance Virtual Server (VPS / VDS)</a></li>
<li><a href="../354944/index.html">Deep learning using R and mxnet. Part 1. Basics</a></li>
<li><a href="../354948/index.html">Postgres auto_explain: query plan autolog</a></li>
<li><a href="../354950/index.html">Two accelerometers, dish sponge and four nuts</a></li>
<li><a href="../354954/index.html">JavaFx, a simple COM port terminal</a></li>
<li><a href="../354956/index.html">VPN for a beer?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
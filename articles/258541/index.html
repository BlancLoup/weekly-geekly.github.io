<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Developer Diaries: collect professional underwater robot</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="On May 15, at the Robostation , a selection stage was held for the World Robotics Olympiad for schoolchildren. In addition, there are a number of simi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Developer Diaries: collect professional underwater robot</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/9fc/05f/9c6/9fc05f9c6ad64c818b0edee6eb8f925b.jpg"><br><br>  On May 15, at the <a href="http://xn--80abwtcbllj6b9f.xn--p1ai/">Robostation</a> , a selection stage was held for the World Robotics Olympiad for schoolchildren.  In addition, there are a number of similar competitions in the world for various robots.  About one of them will be discussed. <br><br>  <a href="http://www.marinetech.org/">MATE ROV is</a> probably one of the most difficult global robotics competitions - it is sponsored by NASA and is dedicated to underwater robots, which are incredibly difficult to create.  For example, now the movie ‚Äú <a href="http://www.kinopoisk.ru/film/804714/">Robot Life</a> ‚Äù is being released in cinemas - it is dedicated to the history of the winners of this 2004 championship. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Preparing for such a championship and creating your own robot takes months and is sometimes more interesting than the championship itself, but often remains behind the scenes.  We decided to lift the veil over this area of ‚Äã‚Äãrobotics and now we will regularly keep diaries of developers of one team, determined to take the gold in the next championship. <br><br>  Their robot will be presented at the robotic station, and the design team will hold a master class on underwater robots at the <a href="http://balrobotov.ru/roboschool.shtml">Rooshkol</a> .  In the meantime, you can spy on the process of his birth in the laboratory. <br><br><img src="https://habrastorage.org/files/cf7/8df/fba/cf78dffba0524315ad8ab2afc696cd33.jpg"><br><a name="habracut"></a><br>  Our team bears the proud name of Bauman Gidronav.  Last year we had a great trip to the MATE ROV Championship (later we will post a report).  This year we had a hitch and the organizers decided not to meet us, having postponed our participation to June 2016.  Thus, having signed a death sentence for ourselves, because if we took second place in a couple of months, then in a year we finish the military-level robot.  Here is our handsome: <br><br><img src="https://habrastorage.org/files/15a/509/a89/15a509a89ed546e3b4b98246032173a4.jpg"><br>  <i>Pay attention to unusual screws.</i> <br><br>  That's for him, we decided to start the weekly developer diaries on Habr√© - so that under the public eye there would be no temptation to abandon everything and do it lightly.  Plus, we plan to bring our robot to a robot station and give a lecture about it to everyone.  We hope our experience and advice will help DIY fans across the country.  Today we will talk about screws and electronics. <br><br>  So let's start with the theory.  Everyone has seen the submarine's screws being hidden.  What do they hide? <br><br><img src="https://habrastorage.org/files/eb2/8e4/2e0/eb28e42e065a400da9ed87361c9f4db9.png"><br>  <i>Screw submarine Ash is still secret.</i> <br><br>  In general, all submarine screws are secret, because one or two photos can reconstruct the sound track of a submarine and easily find it in the ocean of noises.  All photos of the submarine propellers on the Internet is someone's gross violation of the regime of secrecy.  Maybe they can not be published on the Internet, but we risk. <br><br>  Screw - the main node in marine engineering.  His study and design is such a time-consuming task that we have a separate ‚ÄúResearch Institute of Rowing Screws‚Äù - the <a href="http://krylov-center.ru/rus/">Krylov</a> Research Institute.  But at the same time, all our knowledge of screws is purely empirical.  There is no mathematical theory describing the ideal screw - there are only aerodynamic formulas and a good old experiment. <br><br>  In fact, here the naval engineer acts as an artilleryman with ballistic tables ‚Äî simply by selecting the appropriate model of the ready-made propeller.  The main thing in the screws is efficiency and noise level.  Civilian is important traction, the military - silence, and all - maneuverability.  That is why modern submarines have such thin curved screws - this is a mathematically calculated form for reducing the effects of the so-called.  <a href="https://ru.wikipedia.org/wiki/%25D0%259A%25D0%25B0%25D0%25B2%25D0%25B8%25D1%2582%25D0%25B0%25D1%2586%25D0%25B8%25D1%258F">cavitation</a> . <br><br><img src="https://habrastorage.org/files/ae5/16c/662/ae516c662d8a499194ef937307db0ebb.png"><br>  <i>Screw submarine "St. Petersburg" project 677 "LADA"</i> <br><br>  But you can go the other way - if you add a cover to the screw, then a kind of turbine will come out and you can choose to increase the thrust or greatly reduce the noise level. <br><br><img src="https://habrastorage.org/files/3f9/b08/6a7/3f9b086a78ce4548a934d8bf65279782.png"><br>  <i>Los Angeles-class submarine with screw rim.</i> <br><br>  But if you really need a turbo screw, pay attention to the brainchild of Soviet engineering genius. <br><br><img src="https://habrastorage.org/files/912/13b/f57/91213bf5776d48118c9c81b1a2aa8094.png"><br>  <i>Submarine "Alrosa" with an experimental jet propulsion.</i>  <i>Because of the record silence of the move to NATO, the submarine received the name "Black Hole".</i> <br><br><img src="https://habrastorage.org/files/1bc/ad7/cc3/1bcad7cc36f6406a8607bd2a0a456054.png"><br>  <i>Inside the water cannon is essentially the same turbine.</i> <br><br>  The same is true for hydronautics as a whole - at sound speeds we have the same formulas with conventional aeronautics.  Both sciences originate in the old " <a href="https://ru.wikipedia.org/wiki/%25D0%2591%25D0%25B0%25D0%25BB%25D0%25BB%25D0%25B8%25D1%2581%25D1%2582%25D0%25B8%25D0%25BA%25D0%25B0">ballistics</a> " - the name of the science from which physics originated, chemistry and it turns out that hydronautics too.  And this science loves to throw away all unnecessary, so the third type of screw was born. <br><br><img src="https://habrastorage.org/files/f87/8c7/73c/f878c773c057452eb87bd143cdd6e16b.png"><br><br>  In 2010, the Germans presented <a href="http://en.wikipedia.org/wiki/Rim-driven_thruster">Rim-driven thruster</a> - a completely new generation of valve / brushless motors devoid of all the disadvantages of the axial devices we are used to.  Their idea is not new to theorists, but the practical implementation has always rested on the absence of sufficiently powerful electronics. <br><br>  The advantage of such devices is obvious: <br><ol><li>  The motor and screw represent a single device, which saves space and simplifies construction.  It has nothing to break. </li><li>  Equal thrust in both directions. </li><li>  Super maneuverability. </li><li>  Complete silence. </li><li>  And most importantly - it is impossible to jam.  Algae in screws - the main problem of underwater robots is now in the past. </li></ol><br><img src="https://habrastorage.org/files/49b/979/fa7/49b979fa7bd443d2a11d1621637e6d02.JPG"><br><br>  But the disadvantages are not so obvious: <br><ol><li>  Complex construction.  Really difficult to collect it in the garage. </li><li>  Requires highly reliable high-voltage transistors. </li><li>  So far, only for small depths, for real submarines you cannot reach reliable transistors. </li><li>  Rim resistance to water flow reduces power by one and a half. </li></ol><br>  It's not hard to see that such screws are ideal for underwater robots, especially if you have access to decent electronics.  But we decided not to risk with a complex structure and simply screwed the cable from the usual external motor to the screws.  I had to go for it just after the last championship.  Too tight layout of the robot lowered maneuverability - jet engine overlapped and stuck into the body.  From this suffered both speed and accuracy and controllability. <br><br><img src="https://habrastorage.org/files/15a/509/a89/15a509a89ed546e3b4b98246032173a4.jpg"><br>  <i>The motors are structurally separated with screws, which made it possible to radically simplify the design.</i> <br><br>  The new device itself has two front cameras, four horizontal rotor motors, four vertical ones.  In the photo, the layout as it was <a href="http://sk.ru/foundation/itc/robotics/skrobotics2015/">shown in Skolkovo</a> , but since then much has changed.  After that exhibition, we have already begun a normal assembly apparatus.  The first thing of course was testing the tightness of individual parts of the apparatus.  So, for example, passed the test of tightness durable electronics housing. <br><br><img src="https://habrastorage.org/files/3a7/0bd/4d5/3a70bd4d56304f76a1d1d229331464fc.jpg"><br>  <i>Formally, this is the body of our robot.</i> <br><br>  This time we decided to do everything right and switched to technologies that we like.  The first thing set normal digital stereoscopic cameras.  The last time the cameras were analog and transmitted a signal for one differential pair in an incomprehensible Chinese format through two Chinese non-NIM converters PAL to differential form.  In short, crutches that I really wanted to give up. <br><br>  And once the camera, it means a computer to them and a normal Gigabit channel to it.  And if we do the electronics as it should, then the rest will not cut corners, but immediately do as it should.  Hence the spacious design and screws with external engagement of the blades.  By the way, in Russian there are no names for these screws yet and it seems we are the first to use them on civil projects.  We call them hablos because google calls such screws hables propeller, but the nickname ‚Äúleaky‚Äù screw was already firmly established in the laboratory behind it. <br><br>  Electronics became less and the body of the robot was able to do less.  New engines - smaller and more powerful.  By the way, the engines were not without cheats. <br><br><img src="https://habrastorage.org/files/2e8/f4b/d72/2e8f4bd725194a70adc6f86f4a8513bb.jpg"><br>  <i>Our one and a half kilowatt.</i> <br><br>  Power for all engines - I had to take the military IP for all the rest do not stand up and burn.  But it‚Äôs impossible to burn Iribis, this is IMHO the most reliable blocks in the world, well, of those that can be bought legally.  If you decide to collect the robot - take only them. <br><br><img src="https://habrastorage.org/files/589/ba7/7fe/589ba77fefeb4d968e6c4f9b92ad4f03.JPG"><br>  <i>And this is what the electronics assembly looks like, well, almost assembly.</i> <br><br>  The main innovation is the emergence of a central computer.  The full-fledged axis and percents pull everything, and the last generation atom was pleasantly surprised - it works faster than my laptop.  Able to compile, dare directly to yourself and at the same time capture five cameras, process them and transfer to the shore.  And all this time, and fully control the robot. <br><br>  It is at times easier to write programs, especially in the field of artificial intelligence.  Multi-core again help.  The computer takes on such programs as getting to the point of work, returning to the ship, following the ship or following the target.  These programs are also very important, because  in real life, a robot at sea sinks to the working depth of two hours - it would be a shame to pay pilots for this time. <br><br>  But the main feature of the appearance of the computer is the ability to reflash the main controller in hot mode.  This is very important, since the main programs of the robot control system live in it, that is, all those that require a very hard real time.  The software is engaged in communicating with the coast and working with cameras, mainly through the measurement module using the optical rangefinder method - since this is the only way to measure something under water.  Lasers are not effective, and you won‚Äôt get a tape measure at the bottom.  Everything is measured through stereoscopic vision. <br><br><img src="https://habrastorage.org/files/e4e/124/a67/e4e124a678c041b2a92b3776b3430de0.jpg"><br><br>  Logically, the unit is divided into two parts: the video processing unit and the unit control unit.  The video processing unit is a single-board computer based on the four-core Intel Atom, which captures video from cameras and transmits it via Ethernet to the shore.  The control unit of the device is a stm32 microcontroller in the FreeRTOS operating system, which already controls the entire device and is responsible for stabilization systems. <br><br><img src="https://habrastorage.org/files/08e/c3d/7c2/08ec3d7c2c504ec19b0ba4baec30b406.png"><br>  <i>STM32 is the heart of our robot.</i> <br><br>  It receives data from the coast from a single-board computer via USART.  The connection to the coast is gigabit Ethernet, but in reality the maximum is only about 750 Mbit / s, but this is enough.  In addition to the front cameras, the device has 3 more inspection: left, right and rear.  Also, the electronics unit can control up to six different devices through PWM.  This is the light, the control of the tilt of the front cameras, two grippers and two accessories.  It should be noted that all onboard electronics are galvanically fully untied from the coastal part. <br><br>  However, it was not so easy.  For example, our single-board computer made in Taiwan did not always successfully initialize the Ethernet physics controller, from which it had to be replaced with a paired USB 3.0 hub with a Gigabit Ethernet converter.  Of course, it was saved that USB 3.0 has a very good data transfer rate, which allows you to capture video simultaneously from two high-quality cameras and transfer it to the shore.  I do not want to say anything bad about the Taiwanese manufacturers, but they themselves were surprised by this fault when they found out about it. <br><br><img src="https://habrastorage.org/files/e41/053/de7/e41053de7f174648b68a89b8dd6e55b4.jpg"><br>  <i>And here is the build process.</i>  <i>In the photo there are four driver modules, which are connected via RS485 between themselves and with the main controller.</i> <br><br>  Also, the remote control device has been redone.  An additional touch monitor with a larger diagonal and a computer are more powerful for processing video coming from the device. <br><br><img src="https://habrastorage.org/files/d57/bf7/e16/d57bf7e16d5446f98617861aaba5a09d.jpg"><br><br>  After a rather interesting and lengthy build process, accompanied by a lot of bugs, we finally swam. <br><br><img src="https://habrastorage.org/files/093/610/95f/09361095f8a2435e8e2d2aea7817a899.jpg"><br><br>  At this stage, we still have a fairly long list of works.  For example, it is necessary to finish the planned rotor motors, debug the stabilization system, connect both front cameras, as now only one is used. <br><br>  That's all for now, stay tuned.  Manipulators and control system - in the next post. <br><br>  PS <br>  If you are fond of or just interested in DIY engineering, be sure to come to the <a href="http://balrobotov.ru/roboschool.shtml">Roosh School</a> , this is now the only place in Moscow where so many enthusiasts assemble their robots and share their experience under the supervision of robotics engineers. </div><p>Source: <a href="https://habr.com/ru/post/258541/">https://habr.com/ru/post/258541/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../258531/index.html">RU-CENTER brazenly lies when organizing the registration of "VIP" domains in the "zone" RU.NET</a></li>
<li><a href="../258533/index.html">Cocoa Developers Club - Club iOS and OS X developers</a></li>
<li><a href="../258535/index.html">How to get on the Spamhaus lists without spamming</a></li>
<li><a href="../258537/index.html">A little bit about Erlang syntax</a></li>
<li><a href="../258539/index.html">Subscribers do not watch almost 30% of the video due to the poor quality of the mobile Internet</a></li>
<li><a href="../258543/index.html">Scala data analysis. We consider the correlation of the 21st century</a></li>
<li><a href="../258545/index.html">JPEG 2000, JPEG-XR and WebP in a country of missed opportunities</a></li>
<li><a href="../258549/index.html">How I became the maintainer of one of the Perl modules on CPAN</a></li>
<li><a href="../258553/index.html">Hewlett-Packard Webinars</a></li>
<li><a href="../258555/index.html">How I left the university to develop my own game. Part 1</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
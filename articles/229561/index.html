<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Modern back office of IT company</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In one of the discussions recently, I listed the main systems that make the work of an IT company civilized. The list was very extensive, and I decide...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Modern back office of IT company</h1><div class="post__text post__text-html js-mediator-article"> In one of the discussions recently, I listed the main systems that make the work of an IT company civilized.  The list was very extensive, and I decided to issue it as a separate article. <br><br>  A similar design can be seen in many companies, moreover, I observed companies in which a part of these systems had been missing for a long time, and because of unsolvable permanent problems, these systems began to appear spontaneously. <br><br>  All of the following applies to companies / departments in which qualified staff works, that is, they do not need the ‚Äúoffice for beginners‚Äù courses.  Just as you do not need group policies on workstations and a special admin for shifting shortcuts on the desktop and installing your favorite program.  In other words, this is the back office of IT people, which is significantly different from the back office of the other departments. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      A brief content spoiler: VCS, source code repository, code review, build server, CI, task tracker, wiki, corporate blog, functional testing, package repository, configuration management system, backups, mail / jabber. <br><br>  Picture with a fragment of the discussed infrastructure: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ac6/352/994/ac6352994dd16d7d17c56ec5b685cdc6.png"><br><a name="habracut"></a><br>  So let's start with a simple one. <br><br>  Workplaces: a computer with buttons (about 90-100 pieces) for each workplace.  It is also desirable external / second / third monitor.  Typically used laptops, very widely - MacBook.  Users have admins or sudo on their machines, they themselves define a set of convenient software, including editor, debugger, email client, browser, terminalku, etc. <br><br>  The Internet.  Usually in the office are WiFi and BYOD (in other words, freely brought in their own laptops, tablets and phones abusing office WiFi).  Often wired network may not be at all.  Security in such a network is conditional, because all communications are encrypted.  We need a lot of Internet.  And not only for <a href="http://youtu.be/vMY_SypobMQ">seals on YouTube</a> during working hours, but also for a sudden urgent "right now download a DVD with raw materials to compare the version of the package."  From real life, by the way.  Taking into account any stackoverflow and other IT resources, the Internet should be unlimited, uncontrollable, and the faster, the better. <br><br>  We drove simple.  Further serious. <br><br>  <b>The version control system</b> (VCS) should be common, ‚Äúit‚Äôs not for everyone‚Äôs own‚Äù here.  The de facto standard is <b>git</b> , conventionally popular mercurial (hg), exotic bazar (bzr), from the last century svn / cvs / vcs.  Plus, the world has its own world, there is something else there. <br><br>  The version control system works locally, so there should be a <b>central source code repository</b> , into which everyone pushes (who should push).  Gitlab is very, very popular.  There are proprietary solutions, there is a github for those who are lazy to raise themselves.  It also solves the second important thing: pull requests.  So that one person could see what the other did before it gets into the main branch (common repository).  I note that pull requests make sense, even if code review is not carried out as such.  The principle is simple - one has written, the other is merge. <br><br>  If the code is complex, then you need a system for <b>code review</b> .  Code review implies that programmers (or system administrators ‚Äî devops, all that) look at each other‚Äôs code, and there is some formal procedure for accepting code ‚Äî for example, ‚Äúat least two people must see and approve, one of whom must be a senyer / lead‚Äù.  Examples: gerrit, Crucible.  If the complexity is balanced on the edge, then you can try to comply with the agreement voluntarily, discussing in the comments in gitlab.  But as everything is voluntary, what the robots do not watch, it will sometimes misfire. <br><br>  Management of a team of people in the minimum form is carried out by the <b>task scheduler</b> (task tracker) - redmine, jira, mantis.  Most often it performs the role of a <b>bug tracker</b> as well.  The main goal is to formalize the formulation of the problem, to remove ambiguities and to find the guilty, when someone did something wrong (you said so? No, you didn‚Äôt understand it so much! - after that, the text of the task looks and it becomes clear who missed).  In the case of a task tracker, the oral right should be diligently eliminated, especially by the superior / timlid.  Need to change something?  Set the task.  The volume of bureaucracy is minimal, the amount of chaos is reduced by a multiple. <br><br>  Practically obligatory, you can consider having your own <b>wiki</b> ‚Äî mediawiki, moin-moin, confluence, dokuwiki ‚Äî anything where you can write articles that are visible to other team members, and where you can edit behind others.  An ideal place for folding texts "how to do this," regulations, discussion results, planned architectural solutions, explanations why it will be done this way and not otherwise.  A well-structured wiki is good, but even an indiscriminate pile of texts is more useful than an oral tradition that fades out along with the resigned employee who "knew all this." <br><br>  If the wiki supports blogging, well, if not, you must either agree on the format of <b>blogging</b> in the wiki, or raise something for its internal corporate management.  What to write in this blog?  Spent 4 hours catching a strange bug in the config?  Describe it in a blog - the next time you‚Äôll look for yourself, for read quickly, and do it yourself slowly.  Began to deal with a long-long problem, which is entirely in my head not to keep?  Instead of a text editor on a computer as a notebook - write to the wiki.  Sometimes it may be that someone from colleagues right in the process of debugging will read the already written and say a shorter solution.  And at some point, the company's blog will become perhaps the most valuable resource in difficult situations (No. 2 after the Internet). <br><br>  Writing code that works on the workstation where it was written is a rare luxury.  Most often (and the farther, the more) the code is the middleware - a layer between other large pieces of server code, and requires an extensive environment for productive work.  ‚ÄúThis debugging application needs mysql with a copy of the working database, memcached, redis, and snmp to the switch.‚Äù  Such an environment at the workstation to raise - something more fun.  And it happens that there are several projects, and each has its own environment. <br><br>  Thus, we get the first difficult thing: <b>stands for programmers</b> .  In real life, this could be a microcontroller connected via usb, or a hadoop server farm.  It is important that the programmer has his stand, which is at least similar to the working configuration, where the programmer can check the results of his work right away, as he wrote.  Save is not worth it, and each programmer must have its own stand.  If it is too expensive - it is necessary to raise mockups, if mockups cannot be raised, then the company has problems - programmers write ‚Äúon production‚Äù, and if there are several programmers, then at the same time.  If programmers are not allowed to produce, then they write blindly - goodbye productivity. <br><br>  Next, there is the question of how the code appears in production.  Most often these are packages (deb / rpm), executable files (exe), or just a boring calculation (html).  Note that it makes sense to even wrap a ‚Äúboring static display‚Äù into a package.  There are teams that spread directly from the gita (a specific brunch, tag, or even a master, with the assumption that the development goes in other brunches). <br><br>  Build packages can be very confusing and difficult, especially if the code is not written from scratch, but depends on existing configurations and a lot of other packages.  It makes sense to set up <b>a package building system</b> .  To do this, use CI (continuous integration) in the minimum configuration, often with manual control (go to the interface and click on the "run task" assembly package).  The standard for opensource is jenkins.  Of the most famous proprietary - team city.  The minimal configuration simply takes the specified brunch / tag / repository and builds the package.  Which can then be downloaded from the CI interface. <br><br>  But everyone is used to aptitude install - and for this you need to raise your <b>mirror</b> , or <b>package repository</b> .  The same CI can upload packages to the repository.  Click the mouse - and the source code can be put on all servers where the repository is connected.  Note that the availability of repositories allows you to quickly ‚Äúroll out‚Äù the application on a large number of servers in an automatic or semi-automatic mode, and even have a separation into experimental / testing / production / oldstable.  This also makes it possible to very quickly repair the damage, since the package managers have all the necessary tools to validate the integrity of the installed files and can download the package again and restore the modified files (note for webmasters who have all the evil backdoors in WordPress spoil your favorite php files ).  If the package requires packages that are not in the distribution, they should also be packaged.  Production, the rise of which depends on the uptime of pypi, is a sad sight.  Note that some dependencies can only be relevant when building, in this case it makes sense to set up the replication of the used package directory to your servers. <br><br>  CI, at the same time, can run tests.  Unit tests are most often run at the package build stage (after compilation).  But for functional (acceptance) tests it is necessary to raise (another, and even many different) <b>test environment</b> .  After successful compilation, installation of the package on the stand and testing for performance starts.  If a company has resources, then a test is made for each strange bug that will catch it.  In the minimum form, you need to check the basic happy paths, that is, "the customer can come, see the goods, put in the basket, pay and buy."  You can check any sad path (the client has no money / the kernel version does not correspond to the module), but it is much more resources.  But even the happy path tests greatly improve stability. <br><br>  If there are a lot of configurations and tests, then it makes sense to increase the <b>integration of code-review system with tests</b> .  The most famous is zuul, which binds gerrit to jenkins.  In this case, the proposal for code review is sent only after the programmer‚Äôs commit (sysadmin) has passed the tests - people save time, not to mention the fact that the lion's number of simple bugs is caught during the ‚Äústruggle with gerrit‚Äù stage.  An ideal example of how it works on hundreds of independent developers is <a href="http://ci.openstack.org/">the openstack project infrastructure</a> . <br><br>  If the tests are configured, the code review is worked out, there is always a previous version, then it makes sense to think about <b>continuous integration</b> , its original sense, that is, automatically rolling out the changes to production immediately, as the tests and code review passed. <br><br><h1>  Final chords </h1><br>  This usually requires mail, jabber (with which it would be good to link the tracker and CI), possibly, mailings.  It often makes sense to raise your vpn-server so that people can work from anywhere without difficulty with closed ports, etc. <br><br>  Why ‚Äúyour own‚Äù when there is a google post?  Well, because when letters from nagios begin to mysteriously under-reach, because Google does not like bulk messages for group address, the fight against Google may take longer than its mail server. <br><br>  And, of course, its own meta-infrastructure is attached to all of this: <br><ol><li>  This all needs to be configured.  According to the mind - <b>configuration management system</b> .  chef, puppet, ansible, saltstack. </li><li>  All this needs to be monitored.  <b>Monitoring</b> - nagios, shinken, zabbix, icinga </li><li>  All this should be backed up.  Yes, the repositories also need to be backed up, because collecting 20-30 repositories with ‚Äúwho has the latest version‚Äù is still a pleasure.  And the comments in merge requests are generally unrecoverable. </li><li>  All this requires domain names, and it is better that the domain or subdomain be fully managed by the department, so that with each new A-record you don‚Äôt have to go and moan ‚Äúwell, add me another booth in DNS‚Äù.  Your DNS opens up another important opportunity to generate records automatically (for example, for addresses of ipmi-interfaces of servers) </li></ol><br><br>  Here is a modest household with a good IT-company.  Note that these are only working tools, there are no ‚Äúuser directories‚Äù (and, in general, the authorization issue was not understood), access control systems, time and attendance accounting, business planning and other things that are not needed by developers / system administrators, but to stakeholders. <br><br><h1>  And how much does it cost? </h1><br>  I count in man-hours, multiply by s / n.  The numbers are very approximate (that is, taken from the ceiling): <br><ul><li>  Employee workplace - 8 hours per person (usually counted on the ‚Äúfirst working day‚Äù) </li><li>  gitlab - 4-8 hours </li><li>  gerrit - 16-24 hours </li><li>  jenkins (base) - 2-4 hours </li><li>  jenkins (build packages) - 1-32 hours per repository (depends on the repository and the number of already raised ones - the first ones are hard to lift, then it's easier) </li><li>  own repository - 2-4 hours </li><li>  wiki - 1-16 hours </li><li>  blog system - 2-4 hours </li><li>  Task tracker - 1-8 hours </li><li>  stands for programmers - ??? </li><li>  test benches - ??? </li><li>  test run setup (if available) - 1-2 hours </li><li>  zuul - 2-16 hours </li><li>  jabber server - 1-4 hours </li><li>  mail server - 0.5-12 hours (depending on size and role) </li><li>  Mailings - 1-3 hours </li><li>  configuration management system - x2 from each item (except package assembly) </li><li>  backup - ~ 1 hour for each service </li><li>  dns to this all +1 hour </li></ul><br>  Note, this is a pure refined time (of which there are not so many).  In addition, many things require the involvement of all employees, that is, they can not be allocated to a separate special person, that is, the implementation time will be spread over the usual work. <br><br>  Provided that approximately 30% of the working time is allocated for its own infrastructure (this is a lot), implementation from zero will take from three months to a year.  With constant enthusiasm, if there are pauses, the time increases (disproportionately to the idle time, because everything changes around and after the pause you have to redo a lot).  Once again, taking the salary from the same ceiling, taking into account the vacation / hospital expenses, we get about 1-2 million rubles, without the cost of iron, electricity and licenses, only for work (the figure takes into account the cost of "white" taxes and fees). <br><br>  About the price of maintenance.  Very dependent on investments in configuration management system, backups and thorough implementation.  In a good system, it should be no more than a few hours per month, plus separate costs for adding new projects, configurations, modifying existing ones, etc. <br><br>  How many servers do you need?  The answer strongly depends on the test configurations, if we assume that the test configuration is a small LAMP server (1 GB of memory for everything), then with dense packaging of virtual loops, it is possible to do 2-5 servers (~ 200-300 TR on each) for everything, plus a separate backup server.  Oh, yes, add to the list of works on setting up, still maintaining this stack of virtual locks and virtualizers. <br><br>  All this, of course, pales in comparison with the cost of one workplace for an operator of a tower crane (6 million rubles) or a high-precision robotized drilling machine (I did not even find prices in the public domain for example). <br><br><h1>  Do you really need it? </h1><br>  Is it possible to save and not do? <br><br>  Can. <br><br>  Moreover, nothing fatal will happen.  However, some workflows will be longer, some will be tedious (sending zip'ov with changes to each other), a number of employees will be forced to be present in the office in order to do something (for example, to coordinate changes in the code), illness alone of employees can make life difficult for others (and who was here, who knew how to roll out the changes correctly?).  Partially, the quality of the code will suffer or the speed of the programmers will decrease.  Some very cool things will simply not be available, but even without them it will be good.  Some employees will be engaged in low-productivity work, and because of this, not only do not do what they are paid for, but also demotivate, because the monotonous, boring, fraught with mistakes, repeating from time to time the process at work is just an excellent reason for implementing the above.  Or resume updates, yes. <br><br>  Like all capital investments in labor efficiency, all of these systems are optional.  In the end, the rockets into space successfully launched with some kind of attempt and without git with code review and tests. <br><br><h1>  Conclusion </h1><br>  Companies more often follow the path of introducing such systems gradually, and it would be a big mistake to start a startup with a three-month upgrade of the entire infrastructure without writing a single useful line of code. <br><br>  Often stop at some stage.  They are usually caused by the reluctance of the staff, because he (the staff) does not have the pain that the system should eliminate.  If there really is no pain, great, you can save on very advanced complex things.  If ‚Äúthere is no pain‚Äù because a person has never tried ‚Äúdifferently‚Äù, then it may be that the stop is caused only by a lack of qualifications. <br><br>  Note that if ignorance of a gita can be considered an analogue of illiteracy or slurred speech, that is, a programmer who does not know how to use guitar, either very ‚Äúspecial‚Äù (1C, SAP), or not a very programmer, then the ‚Äúignorance‚Äù of gerrit is quite understandable and will require training.  The higher the level of integration of processes, the greater the chances that a critical mass of employees simply will not want to learn so much.  Unlike bookkeepers, system administrators and programmers are trained fairly quickly, but if ‚Äúfast‚Äù does not work, then the resistance may be much greater than the outraged moans from the change of version 1C.  There is nothing worse than key technical personnel, outraged by the mandatory introduction of an unsuccessful technical solution. <br><br>           -  ,    ,     ,     /. <br><br> ,     -,     ,   ,            . <br><br> PS  ,    ‚Äî    ‚Äî     ,     . </div><p>Source: <a href="https://habr.com/ru/post/229561/">https://habr.com/ru/post/229561/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../229549/index.html">Face recognition</a></li>
<li><a href="../229551/index.html">Microsoft issues an urgent update to block fake SSL certificates</a></li>
<li><a href="../229555/index.html">Graphic models in machine learning. Yandex Workshop</a></li>
<li><a href="../229557/index.html">[Translation] Office confidentiality: where is the line that should not be crossed</a></li>
<li><a href="../229559/index.html">Overview of the 7 most popular cross-platform mobile frameworks</a></li>
<li><a href="../229563/index.html">Materials MoscowJS 12</a></li>
<li><a href="../229571/index.html">World of Tanks Blitz: Toy Toy</a></li>
<li><a href="../229573/index.html">Oxford is developing technology to create ultra-high-resolution flexible displays</a></li>
<li><a href="../229581/index.html">Visas for startups: how to open your own business abroad (part 1)</a></li>
<li><a href="../229583/index.html">Power Pivot: DAX Window Functions</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
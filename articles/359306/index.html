<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>The world of magic PostgreSQL: an interview with Nikolai Samokhvalov</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Today we will talk with Nikolai, the ‚Äúfighter‚Äù for the promotion of new technologies in the database world, a member of our program committee and an a...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>The world of magic PostgreSQL: an interview with Nikolai Samokhvalov</h1><div class="post__text post__text-html js-mediator-article"> Today we will talk with Nikolai, the ‚Äúfighter‚Äù for the promotion of new technologies in the database world, a member of our program committee and an active participant in various conferences.  The main topics are self-managed DBMS, DBA AI, clouds, NoSQL, built-in database control mechanisms, reports on RHS ++ and HighLoad ++ Siberia, as well as lots of practical tips and examples that can be useful in real work for both the developer and DBA. <br><br><img src="https://habrastorage.org/webt/p_/pr/un/p_prun7hhfqpruc5tsdbztakxq4.jpeg"><br><a name="habracut"></a><br>  <i><b>- Tell me something about yourself.</b></i>  <i><b>What did you finish, where did you start and what are you doing now?</b></i> <br><br>  Fiztekh, FUPM graduation 2004, Department of ISP RAS.  Back in 2005, with a small development team from the Moscow Institute of Physics and Technology and Moscow State University, historically created the first social network, MyKrug, and then several other social networking projects. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      In 2006-2007, I participated in the creation of an XML data type for Postgres, at the same time I began to conduct postgrese mitaps (there wasn‚Äôt even such a word) in Moscow.  Now it has become a Russian-speaking group <a href="http://rupostgres.org/">#RuPostgres</a> , presented at the Meetup.com and YouTube sites.  At Meetup.com, by the way, we are the second largest among all postgresovy communities in the world, more than 1,600 participants - we are ahead of the SF Bay Area group, but we are inferior to New York. <br><br>  Now I am based in the Valley, I am regularly in Moscow.  Helping companies get the most out of Postgres, and increasingly - in the clouds of Amazon and Google. <br><br>  <i><b>- What is your current focus in the context of working with data?</b></i> <br><br>  One of the hottest topics in the world of databases today is <b>self</b> - <b>managed DBMS</b> .  Oracle last year actively ‚Äúdrowns‚Äù for the fact that their DBMS in the clouds is <a href="https://www.oracle.com/ru/database/autonomous-database/feature.html">autonomous</a> and does not need a ‚Äúdriver‚Äù (DBA), and meetings with the inventor of self-driving databases and the creator of <a href="https://github.com/cmu-db/peloton">Peloton</a> DBMS Professor Carnegie Mellon University <a href="http://www.cs.cmu.edu/~pavlo/">Andy Pavlo</a> <a href="https://www.meetup.com/Bay-Area-NewSQL-Database-Meetup/events/249676562/">collect</a> 200 + person.  By the way, he recently accepted our invitation and <a href="http://www.highload.ru/2018/abstracts/3557.html">will arrive</a> at Highload ++ 2018. <br><br>  Meanwhile, Postgres, being, of course, the best open source database and possessing tremendously <a href="https://www.hntrends.com/2018/apr-golang-jumps-into-top-10.html%3Fcompare1%3Dpostgresql%26compare2%3Doracle%26compare3%3Dmysql%26compare4%3Dmongodb">growing</a> <a href="https://db-engines.com/en/blog_post/76">popularity</a> , now requires a huge amount of knowledge and manual actions during operation. <br><br>  I am sure that in the coming years the situation will change for the better.  There will be more understandable and automated tools that help both DBA and developers.  Will develop a means of tuning database tuning and query optimization. <br><br>  <i><b>- That is, the DBA should now have extensive knowledge in various areas?</b></i>  <i><b>The real work goes beyond the knowledge of the database?</b></i> <br><br>  DBA activity is far from trivial.  Inside and around the database there is always a huge amount of service data: internal statistics, logs, monitoring indicators.  To find the bottlenecks of performance, you must be able to quickly understand the pile of numbers, and this requires a large amount of knowledge and experience.  When evaluating the performance of a competent DBA, I often hear the phrases ‚Äúblack magic‚Äù, ‚Äúexcellent intuition‚Äù.  Although in reality such a DBA is armed primarily with a large store of knowledge and many years of experience. <br><br>  And at the same time, DBA‚Äôs work now is purely manual action!  For example: found the most "brake" request in <a href="https://www.postgresql.org/docs/current/static/pgstatstatements.html">pg_stat_statements</a> .  But in order to optimize it, you need a specific request with specific parameters - after all, the execution plan, the request speed, and EXPLAIN will not work out without them (the situation will improve a little in Postgres 12 if the <a href="">patch from PostgresPro is adopted</a> ).  And what is DBA doing now?  One of two things: either it climbs into the logs to dig out specific examples of requests, or ‚Äúsucks out of a finger‚Äù some values, optimizing as a result a spherical horse in a vacuum.  The last option will work well only if you have years of experience.  If there is an "intuition". <br><br>  And then, when a specific solution is selected that solves the problem, say, we need to add some kind of index, an even more funny thing happens.  If the DBA is experienced and with access to the ‚Äúproducts‚Äù, then it may be directly ‚Äúon sale‚Äù and will be debugged, and even the index will be created manually.  Passing git, yes.  If ‚Äúwell, it‚Äôs really necessary‚Äù for the project to conduct DDL via git, then the index will be named like i_tmp_killme, and developers will be asked to add a migration system and otrelizit index with an already more meaningful name. <br><br>  If a DBA has an authority that goes beyond the limit, submissive developers will not be asked questions.  But in companies with a good culture, git flow, code review, devops and curious developers need to explain in advance of any real actions with ‚Äúcombat‚Äù databases why this particular index is chosen, how exactly it speeds up the query.  In the Valley, by the way, the developers quite often come across meticulous ones, they all have to chew, substantiate.  And here clouds help out a lot.  It is very convenient - in a couple of clicks to create a replica of the combat database in AWS RDS, run `explain (analyze, buffers) on it in different ways, find the best solution and present it to the developers with specific estimates of performance improvement and detailed diagnostics.  RDS has perfectly automated the database creation processes, but RDS does not relieve the masses of manual actions to optimize queries and tuning the database in any way - no one will (for now!) Run out the explanations for you and will not provide an explanation for the developers. <br><br>  As a result, the work of Postgres DBA now looks like the management of a beautiful high-speed car with a manual gearbox.  Do you like to ride "on the handle"?  I - yes, but not every day. <br><br>  <i><b>- In fact, you briefly described the beginning of the action algorithm for finding problem queries.</b></i>  <i><b>This knowledge can serve as the basis for creating new useful "add-ons"?</b></i> <br><br>  Right.  That is why my area of ‚Äã‚Äãinterest now is <b>DBA AI</b> .  Artificial intelligence, which helps Postgres to ‚Äúcook‚Äù quickly and efficiently, without purely manual actions, on a large and growing scale (usually in the clouds).  There is no such thing in nature yet, but work in this direction is already underway (one of the interesting, although still purely research developments is the already mentioned <a href="https://github.com/cmu-db/peloton">Peloton</a> ). <br><br>  <i><b>- At RIT ++ 2017, speaking with a <a href="https://www.youtube.com/watch%3Fv%3DnW1oYRA-hp0">Database First!</a></b></i>  <i><b><a href="https://www.youtube.com/watch%3Fv%3DnW1oYRA-hp0">About common mistakes of using RDBMS</a> , you said that the DBMS is the heart of the IT system, not using the capabilities of the database is nonsense.</b></i>  <i><b>What examples can you give in support of your words?</b></i>  <i><b>First of all, the facts are interesting, when exactly the use of standard DB control mechanisms helped to avoid errors or vice versa, when not using standard features led to disastrous results?</b></i>  <i><b>For example, the absence of FK and, possibly, other, at first glance, ordinary mechanisms.</b></i> <br><br>  In the same report, I argued that ‚Äúdisastrous results‚Äù are observed in most projects, in which the support for integrity and ‚Äúpurity‚Äù of data is removed from the database and implemented on the application side - in PHP, Ruby, Python, or something else.  As such a project accumulates data, ‚Äúdirty data‚Äù is collected - such as ‚Äúorphan lines‚Äù (they did not use foreign keys, deleted users, and forgot to delete the data assigned to them), duplicates (not implemented or incorrectly implemented a check for uniqueness on the side of the application), invalid or incorrect values.  Another question - how do you feel about such problems.  If this is a small blog, then maybe there is no big trouble.  But if this is a billing system ... As soon as you "take away" the data check beyond the limits of the DBMS, you admit the possibility that someone (person or program) will appear who will pass this check.  Not to mention that your implementation of checks may be far from ideal. <br><br>  So it is useful to know and apply the capabilities available in the database to support data integrity constraints.  There are only a few of them: support for unique values ‚Äã‚Äã(implemented in practice using a unique index), foreign keys, user constraints (what is achieved using the CHECK keyword), prohibiting NULL values, and Postgres still has special <a href="https://www.postgresql.org/docs/current/static/ddl-constraints.html">exclusion constraints</a> , with which it is convenient to provide , for example, non-intersecting intervals. <br><br>  The use of suitable data types is also an important tool for ensuring data purity.  A simple example.  An obvious and very common mistake: using the text (varchar) data type to store email addresses in a column and hanging the usual unique index on a column.  For emails, we, of course, need case-insensitive checks, so the citext data type is better (it is not ‚Äúin the box‚Äù, but there is a citext extension available in most Postgres installations) or hanging a functional index like `create index ... using btree (lower (email)) `.  By the way, in the latter case, do not forget to rebuild the statistics (`vacuum analyze ...`) so that postgres realizes what distribution in the table the values ‚Äã‚Äãof the expression `lower (email)` have. <br><br>  In addition to the competent use of data types and the support of various types of integrity constraints, the DBMS allows you to implement complex data validation logic ‚Äî for example, when you need to modify certain data in one table, you can perform several checks using several tables at once.  This is a task for triggers.  From the perspective of my experience, which includes very different projects and different people, I undertake to assert: dislike for triggers is directly proportional to the developer's ignorance-DB.  Such is the simple formula. <br><br>  No one in their right mind would say that PL / pgSQL or, say, PL / Python is superfast.  On the usual arithmetic calculations PL / pgSQL (as, by the way, simple SQL) are noticeably <a href="http://okbob.blogspot.ru/2018/05/dudes-test-speed.html">inferior to</a> C and even PHP.  So slow that only a madman will use them for such purposes on a significant scale (or whoever <a href="http://madlib.apache.org/">adopts</a> , say, the <a href="http://madlib.apache.org/">MADlib</a> library, which, by the way, I respect very much and sometimes enjoy using).  But to work with a very large amount of data, when you need to find the right needles in haystacks, there is nothing better than the ‚Äúnext to the data‚Äù position, when all indices available in the database and the lack of network complexity play on your side, and using one of the two most most popular programming languages ‚Äã‚Äãin the world - SQL.  Do not use these opportunities when it is definitely profitable, and there is nonsense!  A competently written trigger and quickly executes, and is quite easy to debug (for profiling and debugging, the pg_stat_statements and <a href="https://www.postgresql.org/docs/current/static/auto-explain.html">auto_explain</a> extensions help with the options `pg_stat_statements.track = all` and` auto_explain.log_triggers = on 'included) and, most importantly, it is a boundary that is not overcome dirty data. <br><br>  <i><b>- In continuation of the previous question, tell me why the built-in capabilities of PostgreSQL for controlling and manipulating data are more optimal and advantageous than self-written constructions?</b></i> <br><br>  One obvious reason: built-in capabilities have been developed and have been developed for many years by intelligent people, Postgres creators like <a href="https://en.wikipedia.org/wiki/Tom_Lane_(computer_scientist)">Tom Lane</a> . <br><br>  We have already discussed another - architectural - reason, it remains only to illustrate.  How many entrances to your house?  One?  Two?  When you leave, how many doors do you close / control?  Not exactly ten?  In a modern project, there can be a web site, a back-office, and various APIs for mobile applications, and also external users.  If you implement integrity support by means of an application, then in your house there will be many doors through which visitors enter and exit (in the case of a database, data).  And if you are even more ‚Äúlucky‚Äù and the project is being developed not by two or three programmers, but by a large team or even by a group of teams, then, hello, they have arrived.  Your doors are made and supported by different people / teams, who often also speak different languages ‚Äã‚Äã... It is clear what this is about, right?  Or you will have to limit and restrain the development of the project (‚Äúyou can‚Äôt connect this already ready GUI to work with data - then the manager will be able to write anything in the database, it‚Äôs better we will create the admin panel! ..‚Äù) or somehow synchronize the development of some and the same data control mechanisms in different subsystems, often in different languages. <br><br>  In fact, I‚Äôm telling trivial things here, but my personal observations show how many stereotypes such as unambiguous "stored - evil" or "FK - big brakes" are still alive and lead to mass cycling, and how expensive it is for them to pay for projects. <br><br>  <i><b>- A lot of discussions and questions go around PostgreSQL releases.</b></i>  <i><b>Perhaps you are often asked about the correct options for the transition from versions 9.3 - 9.6 to 10.</b></i> <i><b><br></b></i>  <i><b>Is the use of the <a href="https://www.postgresql.org/docs/10/static/pgupgrade.html">pg_upgrade</a> tool <a href="https://www.postgresql.org/docs/10/static/pgupgrade.html">always</a> justified?</b></i>  <i><b>Have you encountered in practice situations where you need to fear this tool?</b></i> <br><br>  There was a very <a href="">painful bug</a> in version 9.3; many (including me) had ‚Äúsleepless‚Äù nights thanks to this bug.  Fortunately, this is in the past.  Of course, there is no 100% insurance against bugs, but today pg_upgrade is practically an industrial standard, its use is reasonable in most situations when several minutes of downtime are permissible.  There are lucky those who are already in the clouds and with a managed database such as AWS RDS - they don‚Äôt think about it at all, they simply plan to maintain the window and upgrade.  If you have to think about it, you should definitely experiment as much as possible, having spent at least a few test runs on a cloned database (in full volume and in identical infrastructure - of course, if data volumes and resources allow).  Here, by the way, again it is tempting to use clouds, but at a lower level - just EC2-machines in Amazon, for example.  This is very cheap if you do not forget about such an opportunity as <a href="https://aws.amazon.com/ru/ec2/spot/">spot instances</a> . <br><br>  A fresh and detailed case, like 1500 DBs with a total volume of 55 TB in 6 DCs were upgraded in just 15 minutes: <a href="https://bricklen.github.io/2018-03-27-Postgres-10-upgrade/">https://bricklen.github.io/2018-03-27-Postgres-10-upgrade/</a> .  Notice how many tests they did before performing operations "in battle".  The main formula of this article is universal: ‚ÄúTest, find problems, fix;  lather, rinse, repeat. "  Here I really want to start talking about automating experiments again, but I‚Äôm probably tired already. <br><br>  If such a short idle time is unacceptable, then it is necessary to consider more labor-intensive solutions in the implementation of the solution - first of all, on the basis of pglogical (a <a href="https://blog.2ndquadrant.com/near-zero-downtime-automated-upgrades-postgresql-clusters-cloud/">fresh post on this topic</a> ). <br><br><img src="https://habrastorage.org/getpro/habr/post_images/a1e/ae3/9a6/a1eae39a6760dd5d31819a5fd8ec728b.jpg"><br><br>  <i><b>- In May <a href="http://ritfest.ru/moscow/2018">RIT ++</a> you are announced with the report " <a href="http://ritfest.ru/moscow/2018/abstracts/3540">Continuous Database Administration</a> ".</b></i>  <i><b>In the description of the performance, the first part is devoted to the postgres_dba tool.</b></i>  <i><b>Tell me please about him.</b></i> <i><b><br><br></b></i>  <i>postgres_dba</i> is such a ‚Äúsemi-automatic‚Äù ‚ÄúSwiss knife‚Äù for working with Postgres.  Any experienced DBA has a collection of useful scripts accumulated over the years, answering different questions - from ‚Äúwhich tables in this database occupy the most space‚Äù to evaluating a bloat, finding unused or redundant indexes, working with pg_stat_statements.  I shoveled more than one collection of such scripts and made an interactive menu for them - and now the native postgresovoy console, psql, you can "communicate" with Postgres, getting answers to your questions very quickly.  It is very easy to add to this set and any of your reports or interactive scripts (for example, you can add something to add / remove database users with generating passwords so that it is as safe as possible). <br><br>  This tool, of course, does not make DBA's work fully automated.  But already visibly accelerates.  For myself, I noted that the resulting tool brings together the DBA and databases with which she / he works: reports are now accessible at the distance of clicks of the entire pair of keys, time is greatly saved, full-featured DB ‚Äúcommunication‚Äù happens very quickly, and therefore more often.  The project is open, I invite you to try and participate in the development: <a href="https://github.com/NikolayS/postgres_dba">https://github.com/NikolayS/postgres_dba</a> . <br><br>  <i><b>- The second part of the report consists of several blocks devoted to automation, cloud solutions and issues related to AI.</b></i>  <i><b>What do you think, which of these areas will be actively used in the near future?</b></i> <br><br>  There are several directions at once.  First, Amazon, Google, and Microsoft already provide so-called managed databases ‚Äî this is when you solve database deployment issues, replication settings, switch-over / fail-over, automatic backups, and basic monitoring.  But such decisions, though based on Open Source products, are now not made in the spirit of <a href="https://ru.wikipedia.org/wiki/%25D0%25A1%25D0%25B2%25D0%25BE%25D0%25B1%25D0%25BE%25D0%25B4%25D0%25BD%25D0%25BE%25D0%25B5_%25D0%25B8_%25D0%25BE%25D1%2582%25D0%25BA%25D1%2580%25D1%258B%25D1%2582%25D0%25BE%25D0%25B5_%25D0%25BF%25D1%2580%25D0%25BE%25D0%25B3%25D1%2580%25D0%25B0%25D0%25BC%25D0%25BC%25D0%25BD%25D0%25BE%25D0%25B5_%25D0%25BE%25D0%25B1%25D0%25B5%25D1%2581%25D0%25BF%25D0%25B5%25D1%2587%25D0%25B5%25D0%25BD%25D0%25B8%25D0%25B5">FLOSS</a> .  AWS RDS does not even allow you to download backups, not to mention the possibility of replication somewhere else, except to another RDS instance.  Google Cloud SQL for Postgres, although it <a href="https://cloud.google.com/sql/docs/postgres/release-notes">announced</a> GA in April, is still extremely poor in terms of Postgres configuration.  It does not even give logging requests, only errors. <br><br>  But in general, these are all successful stories of building proprietary solutions based on open source, especially when it comes to RDS and RDS Aurora.  At the same time, I believe that in the near future there will be open counterparts, ready to work anywhere (in the Amazon or Google cloud, in a private cloud or on-premise), with no less advanced, with different options for building HA solutions, back-up policies, with full access to the OS, FS with superuser-access.  According to my observations, this niche is definitely there and it is not yet occupied.  By the way, the building blocks for this have already been created and run in numerous companies: here is <a href="https://patroni.readthedocs.io/en/latest/">Patroni</a> with <a href="https://github.com/sorintlab/stolon">Stolon</a> to raise the master and replicas with auto-file support, and not so long ago k8s-operators <a href="https://github.com/zalando-incubator/postgres-operator">from Zalando</a> and <a href="https://github.com/CrunchyData/postgres-operator">Crunchy</a> started to develop, and solutions for <a href="https://github.com/wal-e/wal-e">WAL-E</a> backups , <a href="https://github.com/wal-g/wal-g">WAL-G</a> , <a href="https://github.com/pgbackrest/pgbackrest">pgBackRest</a> . <br><br>  By the way, to engineers from Russia - in general to everyone, not only DBA - I strongly recommend to move your consciousness towards the clouds as soon as possible, if they have not already done so.  Then came a strange story.  It is well known that in most cases the delay in the adaptation of new technologies compared with the Valley in Russia is two to three years.  But in the case of clouds, this lag is clearly more.  In the US, clouds today are practically already a <a href="https://en.wikipedia.org/wiki/Commodity">commodity</a> (sorry, I don‚Äôt know the Russian equivalent word).  But in our past years, the ‚Äúcloud‚Äù presentations at RIT / Highload ++ conferences and others have been counted.  , ,   .     - .     AWS-, RTT  ,   ,    ~50 .   Mail.ru     ‚Äî  ,     ,      .         . <br><br>   ‚Äî   ,     <b></b>  ,     ,    .    35-40    , , ,         (  Git,    ‚Äî CSV, SVN  ).   ftp,   HTML   .  ,   ,      .    ,   <a href="https://github.com/git/git/commit/e83c5163316f89bfbde7d9ab23ca2e25604af290"> </a> ,    GitHub, BitTorrent, GitLab.      ‚Äî -    ,      CI.    :  devops-,      ,  , . <br><br>  ,   DBA , ,     (       ),      .  DBA - .    .     ,    .    <a href="http://postgresql.support/">PostgreSQL.support</a>       Database Replay,        .  ,    . ,       ‚Äî ,     `shared_buffers`, `seq_page_cost`   `default_statistics_target` ‚Äî      -DBA Nancy,        (    ¬´   ¬ª,  ‚Äî  ,    ),           ,   ,      ,   ,       ,   ,          .   ,      ‚Äî      . <br><br>    : ,    ,     ,     .  :   SELECT-             (`create index ‚Ä¶ where ‚Ä¶`),  ,      UPDATE-.   ,       <a href="http://www.interdb.jp/pg/pgsql07.html">HOT Updates</a> (   <a href="https://medium.com/%40postgresql/how-partial-indexes-affect-update-performance-in-postgres-d05e0052abc">  </a> ).          ,  trade-offs.           ‚Äî     - ,      . <br><br>  ,   ‚Äî   DBA AI.     ,  ML,   Postgres  MySQL,  <a href="https://ottertune.cs.cmu.edu/">OtterTune</a> .      Andy Pavlo.         ‚Äî    <a href="https://www.microsoft.com/en-us/research/project/autoadmin/">AutoAdmin</a>  Microsoft  ,    <a href="https://docs.microsoft.com/ru-ru/sql/relational-databases/performance/database-engine-tuning-advisor%3Fview%3Dsql-server-2017"></a>   SQL Server.       () Oracle,   Peloton,    , ‚Äì   . <br><br>    .     .  ,  .    .  ‚Äî     ,      -,  , .  ‚Äî  ,  .  -.        <a href="http://ritconf.ru/2013/abstracts/1326.html">  -2013</a> ,                   AWS,    .    2015   <a href="https://venturebeat.com/2015/04/29/amazon-pays-20m-50m-for-clusterk-the-startup-that-can-run-apps-on-aws-at-10-of-the-regular-price/"> Amazon</a>    ,    EC2-       ,     Fortune-500, , <a href="https://www.youtube.com/watch%3Fv%3DbtGphZQZqkY">Disney</a> .    ,     ,     -DBA Nancy   . <br><br>    ,         ( )      , , ,  , <a href="http://www.cs.cmu.edu/~pavlo/blog/2018/04/what-is-a-self-driving-database-management-system.html">       enterprise-</a> (        Oracle,   Microsoft,   IBM),    ‚Äî ,     Open Source, ‚Äî    .    ,       ++,     ,          . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/8ae/72d/f91/8ae72df91161a07331455aed31507cef.png"></div><br> <i><b>‚Äî    ,        .   ,   NoSQL   ?         MySQL  PostgreSQL?      ?</b></i> <br><br>  .    <a href="https://en.wikipedia.org/wiki/NewSQL">NewSQL</a> ,   NoSQL.       .      .  ‚Äî   NoSQL-,     SQL.    SQL  ‚Äî -. , ,     ( , ,    SQL/JSON,       <a href="https://obartunov.livejournal.com/199291.html"></a> ),     -. <br><br>   ‚Äî    ,    <a href="https://ru.wikipedia.org/wiki/%25D0%259F%25D0%25B5%25D1%2580%25D0%25B2%25D0%25B0%25D1%258F_%25D0%25BD%25D0%25BE%25D1%2580%25D0%25BC%25D0%25B0%25D0%25BB%25D1%258C%25D0%25BD%25D0%25B0%25D1%258F_%25D1%2584%25D0%25BE%25D1%2580%25D0%25BC%25D0%25B0">  </a> ,    JSON,          ‚Äî  , ,  JSON- .      , hstore, XML,      JSON,       .     ‚Äî  NewSQL-. <br><br>  ,     ¬´NoSQL¬ª:  ,     SQL.     Google Spanner,  CocroachDB  ClickHouse.   ,     .    ‚Äî  ,  XML   NoSQL ‚Äî    ,   ,      ,  . <br><br>      NewSQL  .    ,        : ,     Citus- CloudFlare         ( ,   Postgres) <a href="https://blog.cloudflare.com/how-cloudflare-analyzes-1m-dns-queries-per-second/">  ClickHouse</a> .   ‚Äî                   ,     Citus.          pluggable engines,  ¬´ ¬ª ‚Äî  , column store,   row store   (c ¬´undo¬ª,    ¬´ ¬ª,         VACUUM ‚Äì .   EnterpriseDB <a href="https://github.com/EnterpriseDB/zheap">zheap</a> ) ‚Äî  ,            ( ¬´¬ª  , , <a href="https://www.citusdata.com/">Citus</a> ,        <a href="http://rhaas.blogspot.ru/2018/05/built-in-sharding-for-postgresql.html"></a> ),         .    ,      -    . <br><br>   MySQL ,  - ‚Ä¶    . ,  ,   -  .   <a href="https://pgday.ru/ru/2017/papers"></a>   MySQL  Percona  <a href="https://www.percona.com/live/18/schedule/day-2-grid"></a> ,   <a href="http://akorotkov.github.io/blog/2016/05/09/scalability-towards-millions-tps/"></a> (. <a href="http://www.highload.ru/2016/abstracts/2337.html"> </a>    Percona  Highload++ 2016)   .       - ‚Äî  ,   MySQL-,  <a href="https://github.com/akopytov/sysbench">sysbench</a> , <a href="https://habr.com/post/269463/"></a> <a href="https://pgday.ru/ru/2016/speakers/81">¬´¬ª</a> <a href="https://devconf.ru/ru/archive/devconf2017/offer/314"> MySQL</a>  <a href="https://2018.secon.ru/reports/silnye-storony-mysql-ili-zachem-on-vsyo-taki-nuzhen-kogda-est-postgresql"> </a> ,  -       <a href="https://www.facebook.com/groups/postgresql/">-</a> .  ,   ,        ,      ,   . <br><br> <i><b>‚Äî     .    - #RuPostgres  ?</b></i> <br><br>      ‚Äî   SF Bay Area,    .  The goal is achieved.  -  ,       ,       .     . <br><br>   ,   ,     <a href="http://www.highload.ru/authors/1475"> </a>      ,       .  ,        . -,      . -,   -     ‚Äî ,    YouTube  , ,    ,     -  .           .   YouTube       ,    . <br><br> <i><b>‚Äî          HighLoad++ Siberia,    ,                 ?     ,      ++?</b></i> <br><br>  . <a href="http://www.highload.ru/siberia/2018">Highload++ Siberia</a> ‚Äî , ¬´¬ª Highload,       Highload++ Junior.      ,         .    , ,  .     ,   . <br><br>     .     ClickHouse  VK,       , Mail.ru, , Badoo ‚Äî   , ,  . <br><br>  ,       enterprise-.         Oracle,     .   ,          ‚Äî        (        Oracle         )    ,    . <br><br>   ,    Postgres.   Andreas Scherbaum (Greenplum)  Alvaro Hernandez (OnGres),      . <br><br> ,  ! </div><p>Source: <a href="https://habr.com/ru/post/359306/">https://habr.com/ru/post/359306/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../359296/index.html">WebMoney got sanctioned in Ukraine</a></li>
<li><a href="../359298/index.html">‚ÄúCorrect‚Äù call to softphones from AMOCRM (call2click)</a></li>
<li><a href="../359300/index.html">OutOfMemoryError: catch if you can</a></li>
<li><a href="../359302/index.html">Allure-Framework. Work with code</a></li>
<li><a href="../359304/index.html">Detection and counting of visitors in real time on the single-board computer "Up-board"</a></li>
<li><a href="../359308/index.html">Simple and powerful short-term smart contracts</a></li>
<li><a href="../359312/index.html">Google Cloud: New Platform and Machine Learning Capabilities</a></li>
<li><a href="../359314/index.html">GDPR - drop in the outgoing train</a></li>
<li><a href="../359316/index.html">HTTP (S) traffic balancing</a></li>
<li><a href="../359318/index.html">Google Cloud Storage with PHP: saving files with public access</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
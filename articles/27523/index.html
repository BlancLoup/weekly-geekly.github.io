<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>air.Typograf</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="We have already learned how to make simple applications with Adobe AIR , make beautiful windows too , and now we will set ourselves a real task and tr...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>air.Typograf</h1><div class="post__text post__text-html js-mediator-article">  We <a href="http://habrahabr.ru/blog/adobe_air/33796.html">have already learned how to</a> make simple applications with <a href="http://www.adobe.com/products/air/">Adobe AIR</a> , make beautiful windows <a href="http://habrahabr.ru/blog/adobe_air/44557.html">too</a> , and now we will set ourselves a real task and try to implement it. <br>  Today we will write a very simple wrapper for a <a href="http://www.typograf.ru/webservice/about/">typographical web service</a> . <br><br><img src="http://www.silentroach.ru/images/blog/typograf.jpg"><br><br><a name="habracut"></a><br>  As always, I will not particularly rant on this topic, but simply give the code with a large number of comments. <br>  From the code we learn how to send requests through <a href="http://livedocs.adobe.com/labs/air/1/jslr/flash/net/URLRequest.html">air.URLRequest</a> , work with the clipboard and open links in an external browser. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      We will assume that this article is a continuation of the previous. <a href="http://habrahabr.ru/blog/adobe_air/44557.html">We do beautifully in AdobeAIR with ExtJS</a> , everything remains the same, only the content of <strong>application.js</strong> changes: <br><br><blockquote><pre>  var app = {
	
	 _mainWindow: null,
	 _textarea: null,
	 _statusbar: null,

	 / *
	  * initialization
	  * /
	 init: function () {
		 window.nativeWindow.maximize ();
		
		 app.doCreateMainWindow ();
		 app.setupListeners ();
		
		 window.nativeWindow.visible = true;
	 },
	
	 / *
	  * event handlers
	  * /
	 setupListeners: function () {
		 // native window events
		 window.nativeWindow.addEventListener ('displayStateChanging', app.doDisplayStateChanging); 
		
		 // main window events
		 this._mainWindow.on ('minimize', app.doMinimize);
		 this._mainWindow.on ('close', app.doClose);
		
		 // events in textarea
		 this._textarea.on ('specialkey', app.doSpecialKey);
	 },
	
	 / *
	  * creating the main window
	  * /
	 doCreateMainWindow: function () {
		 this._statusbar = new Ext.StatusBar ({
			 // default text
        	 text: 'http://www.typograf.ru',
        	 items: [ 
				 // separator
				 '-',
				 {// "open in browser" button on statusbar
					 text: 'open in browser',
					 handler: function () {
						 // function will work by clicking on the button
						 // its meaning is to open the link in the default browser
						 var request = new air.URLRequest ('http://www.typograf.ru');
						 air.navigateToURL (request);
					 }
				 }
			 ]
		 });
		
		 this._textarea = new Ext.form.TextArea ({
			 // default text
			 emptyText: 'Enter the text you want to stamp and press Ctrl + Enter',
			 region: 'center'
		 });
				
		 this._mainWindow = new Ext.Window ({
			 width: 800,
			 height: 600,
			 minWidth: 300,
			 minHeight: 200,
			 layout: 'border',
			 x: 100,
			 y: 100,		  
			 minimizable: true
			 maximizable: true
			 title: "Typographer",
			 iconCls: 'icon',
			
			 // toolbar
			 tbar: [
				 {
					 text: "paste from buffer",
					 handler: function () {
						 // does the clipboard really have text?
						 if (air.Clipboard.generalClipboard.hasFormat (air.ClipboardFormats.TEXT_FORMAT)) {
							 // paste the text
							 app._textarea.setValue (
								 // from buffer =)
								 air.Clipboard.generalClipboard.getData (air.ClipboardFormats.TEXT_FORMAT)
							 );
						 }
					 }
				 },
				 {
					 text: "copy to clipboard",
					 handler: function () {
						 // get the entered text
						 var text = app._textarea.getValue ();
						
						 // if empty, do nothing
						 if (text == '')
							 return;
						
						 // clear the clipboard
						 air.Clipboard.generalClipboard.clear ();
						 // and copy the data there in text (TEXT_FORMAT) format
						 air.Clipboard.generalClipboard.setData (air.ClipboardFormats.TEXT_FORMAT, text);
					 }
				 },
				 {
					 text: "clear",
					 handler: function () {
						 // clear input field
						 app._textarea.reset ();
					 }
				 }
			 ],
			 // statusbar
			 bbar: this._statusbar,
			
			 // text field
			 items: this._textarea
		 });
		
		 this._mainWindow.show ();
	 },
	
	 / *
	  * event handling on window state change
	  * @param {Event} event displayStateChanging
	  * /
	 doDisplayStateChanging: function (e) {
		 if (e.afterDisplayState == 'normal') {
			 e.preventDefault ();
			 window.nativeWindow.visible = false;
			 window.nativeWindow.maximize ();
			 window.nativeWindow.visible = true;
		 }
		 else
		 if (e.afterDisplayState == 'minimized') {
			 e.preventDefault ();
			 window.nativeWindow.visible = false;
			 window.nativeWindow.minimize ();
			 window.nativeWindow.visible = true;
		 }
	 },
	
	 / *
	  * handling service key press event in _textarea
	  * @param {Ext.form.TextField} element
	  * @param {Event} keypress event
	  * /
	 doSpecialKey: function (field, e) {
		 var keyCode = e.getKey ();
		
		 if (keyCode == 13) {
			 // no need to move the carriage in this case
			 e.preventDefault ();
			
			 // process the text if it is
			 if (app._textarea.getValue ()! = '')
				 app.doProcess ();
		 }
	 },

	 / *
	  * handling the event of closing the main window
	  * @param {Ext.window} window
	  * /
	 doClose: function (win) {
		 air.NativeApplication.nativeApplication.exit ();
	 },
	
	 / *
	  * event handling for minimizing the main window
	  * @param {Ext.window} window
	  * /
	 doMinimize: function (win) {
		 window.nativeWindow.visible = false;
		 window.nativeWindow.minimize ();
		 window.nativeWindow.visible = true;
	 },
	
	 // typography text processing
	 doProcess: function () {
		 this._textarea.disable ();
		 this._statusbar.setStatus ('Processing ...');
		
		 // loader
		 var loader = new air.URLLoader ();
		 // we will perceive the received information in text form
		 loader.dataFormat = air.URLLoaderDataFormat.TEXT;
		 // specify the handler to receive data
		 loader.addEventListener (air.Event.COMPLETE, app.doGetProcessed); 
		
		 // request
		 var request = new air.URLRequest ('http://www.typograf.ru/webservice/');
		 // specify the data transfer method to the service - post
		 request.method = air.URLRequestMethod.POST;
		 // and specify, in fact, what we pass to the service

		 request.data = 'chr = utf-8 &amp; text =' + this._textarea.getValue ();
		
		 // go ;)
		 loader.load (request);
	 },
	
	 / *
	  * receiving data from the server
	  * @param {Event} event air.Event.COMPLETE
	  * /
	 doGetProcessed: function (e) {
		 // get loader
		 var loader = e.target;
		
		 app._textarea.setValue (loader.data);
		
		 app._textarea.enable ();
		 app._statusbar.setStatus ('http://www.typograf.ru');
	 }

 } </pre></blockquote><br><br>  I am writing in a hurry, maybe I forgot something.  Do not hesitate and ask if that. <br><br>  For those who do not want to mess around, but see the hunt, you can <a href="">download the installation package</a> (about 400 kb) <br><br>  Thank you all for your attention. <br><br>  <strong>PS</strong> updated the article and the air package.  Thanks to the author for fixing utf-8 mode. <br><br>  <a href="http://silentroach.ru/blog/2008/06/air_typograf">Crosspost</a> from a personal blog. </div><p>Source: <a href="https://habr.com/ru/post/27523/">https://habr.com/ru/post/27523/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../275219/index.html">How to make a contribution to the Open Source project: simple tips</a></li>
<li><a href="../275223/index.html">BindableConverter for WPF</a></li>
<li><a href="../275225/index.html">Application Configuration with github</a></li>
<li><a href="../275227/index.html">How to ReactJS</a></li>
<li><a href="../275229/index.html">Translation: full stack developer is a myth</a></li>
<li><a href="../275231/index.html">Your design sucks</a></li>
<li><a href="../275233/index.html">Nutanix OEM Partners: Dell and Lenovo</a></li>
<li><a href="../275235/index.html">Add multiplayer to the game using Node.JS and Frida. Part 1</a></li>
<li><a href="../275239/index.html">System plug-ins and modules in Unreal Engine 4</a></li>
<li><a href="../275245/index.html">The best gift book for well-read fans of JavaScript</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
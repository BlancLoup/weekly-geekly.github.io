<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Animations in iOS for beginners. Models, classes from Core Animation, blocks</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I think all developers would like to decorate their applications to one degree or another with various effects. The Android department of Live Typing ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Animations in iOS for beginners. Models, classes from Core Animation, blocks</h1><div class="post__text post__text-html js-mediator-article">  I think all developers would like to decorate their applications to one degree or another with various effects.  The Android department of Live Typing has already released two articles on this topic: about the <a href="http://livetyping.com/ru/blog/animator-android">type of Animator classes</a> and <a href="http://livetyping.com/ru/blog/cannyviewanimator">its own CannyViewAnimation library</a> , which replaces the imperfect ViewAnimator.  I represent the iOS development department of our company and I also want to speak on a topic that is more important than it seems. <br><br>  This article is an introduction to the world of animations for iOS applications.  It is recommended to those who never worked with animations, or do not understand some points in standard iOS animations. <br><a name="habracut"></a><br>  Both iOS developers and designers agree that animation is one of the key elements of user interfaces.  She needs to: <br><br><ul><li>  draw the user's attention to a specific object; </li><li>  show him how and what needs to be done in this or that case; </li><li>  show the transition logic or hierarchy of screens, which helps to navigate the application; </li><li>  convince the user that the committed action is really committed; </li><li>  to diversify the application, because without animations it will look very dry and will not be interesting to use it. </li></ul><br>  In other words, animation is a way to give dynamics to a specific element within an interface, or to an interface as a whole. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h3>  Basic concepts </h3><br>  In our conversation about animations, we cannot do without a few fundamental things.  We define them: <br><br>  Core Animation is a framework for working with basic animation classes: CABasicAnimation, CAKeyFrameAnimation, CATransition, CAAnimationGroup.  Using Core Animation is fully automated: no need to create loops and timers to make the animation. <br><br>  CALayer - a set of classes that control the animation of the root layer of an object.  Classes access the layer and apply one of the properties to it.  Among these properties are the size and position of the layer, the background color of the layer, the shadow, rounded corners, and the like. <br><br>  When you create an animation, specify the path to the CALayer properties, use the animationWithKeyPath method or the keyPath property.  The latter are assigned by the string view @ "name_key".  Here are some examples: <br><br>  CALayer * layer = [CALayer layer] .opacity <br>  CALayer * layer = [CALayer layer] .position <br>  CALayer * layer = [CALayer layer] .shadowRadius <br><br>  With the use of animationWithKeyPath we will get to know better in the section "Examples of explicit animations".  And all the properties can be found <a href="https://developer.apple.com/reference/quartzcore/calayer">here</a> . <br><br><h3>  Animation models </h3><br>  There are two animation models: implicit and explicit. <br><br><h4>  Implicit animation </h4><br>  The implicit animation model Core Animation assumes that all changes in the layer properties being animated should be gradual and asynchronous.  Animation will occur without effects, moving from one value to another. <br><br>  Suppose that the current position of the layer in (theLayer.position.x, theLayer.position.y) <br><br>  Objective-c: <br><br><pre><code class="objectivec hljs">theLayer.position=<span class="hljs-built_in"><span class="hljs-built_in">CGPointMake</span></span>(<span class="hljs-number"><span class="hljs-number">100.0</span></span>,<span class="hljs-number"><span class="hljs-number">100.0</span></span>);</code> </pre> <br>  Swift: <br><br><pre> <code class="hljs objectivec">theLayer.position = <span class="hljs-built_in"><span class="hljs-built_in">CGPoint</span></span>(x: <span class="hljs-number"><span class="hljs-number">100.0</span></span>, y: <span class="hljs-number"><span class="hljs-number">100.0</span></span>)</code> </pre> <br><div style="text-align:center;"><img src="https://habrastorage.org/files/f6f/af2/d69/f6faf2d6925446fa98a8cf8160d05eb9.gif"></div><br><h4>  Explicit animation </h4><br>  An explicit animation model requires creating an animation object and setting initial and final values ‚Äã‚Äãand will flow smoothly from one value to another.  The animation will not start until it is added to the layer. <br><br>  <i>A set of animation classes inherited from Core Animation:</i> <br><br>  ‚Ä¢ <b>CABasicAnimation.</b>  Provides a simple interpolation between values ‚Äã‚Äãfor a layer.  For example, with this class we can move a layer from one point to another, change the value of transparency from one to another, etc.  Using the class, you can make animations to draw the user's attention to a specific object on the screen or show the training information in the form of animation. <br><br>  Objective-c: <br><br><pre> <code class="objectivec hljs"><span class="hljs-built_in"><span class="hljs-built_in">CABasicAnimation</span></span> *theAnimation; theAnimation=[<span class="hljs-built_in"><span class="hljs-built_in">CABasicAnimation</span></span> animationWithKeyPath:<span class="hljs-string"><span class="hljs-string">@"position"</span></span>]; theAnimation.duration = <span class="hljs-number"><span class="hljs-number">3.0</span></span>; theAnimation.repeatCount = <span class="hljs-number"><span class="hljs-number">2</span></span>; theAnimation.autoreverses = <span class="hljs-literal"><span class="hljs-literal">NO</span></span> (<span class="hljs-literal"><span class="hljs-literal">YES</span></span>); theAnimation.fromValue= [<span class="hljs-built_in"><span class="hljs-built_in">NSValue</span></span> valueWithCGPoint:<span class="hljs-built_in"><span class="hljs-built_in">CGPointMake</span></span>(screenWidth/<span class="hljs-number"><span class="hljs-number">2</span></span>, _animationButton.frame.origin.y)]; theAnimation.toValue= [<span class="hljs-built_in"><span class="hljs-built_in">NSValue</span></span> valueWithCGPoint:<span class="hljs-built_in"><span class="hljs-built_in">CGPointMake</span></span>(<span class="hljs-number"><span class="hljs-number">100</span></span>, <span class="hljs-number"><span class="hljs-number">100</span></span>)]; [theLayer addAnimation:theAnimation forKey:<span class="hljs-string"><span class="hljs-string">@"animatePosition"</span></span>];</code> </pre> <br>  Swift: <br><br><pre> <code class="hljs objectivec">let theAnimation = <span class="hljs-built_in"><span class="hljs-built_in">CABasicAnimation</span></span>(keyPath: <span class="hljs-string"><span class="hljs-string">"position"</span></span>); theAnimation.fromValue = [<span class="hljs-built_in"><span class="hljs-built_in">NSValue</span></span>(<span class="hljs-built_in"><span class="hljs-built_in">CGPoint</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">CGPointMake</span></span>(screenWidth/<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.animationButton.frame.origin.y))] theAnimation.toValue = [<span class="hljs-built_in"><span class="hljs-built_in">NSValue</span></span>(cgPoint: <span class="hljs-built_in"><span class="hljs-built_in">CGPoint</span></span>(x: <span class="hljs-number"><span class="hljs-number">100.0</span></span>, y: <span class="hljs-number"><span class="hljs-number">100.0</span></span>))] theAnimation.duration = <span class="hljs-number"><span class="hljs-number">3.0</span></span>; theAnimation.autoreverses = <span class="hljs-literal"><span class="hljs-literal">false</span></span> <span class="hljs-comment"><span class="hljs-comment">//true -      ,   theAnimation.repeatCount = 2 theLayer.addAnimation(theAnimation, forKey: "animatePosition");</span></span></code> </pre><br>  In the upper animation, the parameter autoreverses = YES, in the lower - NO.  That is, the position either does not return to its original value, or returns smoothly. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/fd8/d59/1a6/fd8d591a6dd140c18e069ae2ae5a2579.gif"></div><div style="text-align:center;"><img src="https://habrastorage.org/files/e7d/4c1/8a3/e7d4c18a3a924cd7957d56e2f559de88.gif"></div><br>  ‚Ä¢ <b>CAKeyframeAnimation.</b>  Provides a change in the values ‚Äã‚Äãof the layer property by the values ‚Äã‚Äãthat are specified in the array.  For initialization, the animationWithKeyPath method is used with an indication of the property that needs to be changed. We also specify an array of values ‚Äã‚Äãthat will be presented at each stage of the animation.  We can set several values ‚Äã‚Äãto which the layer will move - it turns out to be much more interesting than simply changing the position from one point to another, as it was in the examples above. <br><br>  Objective-c: <br><br><pre> <code class="objectivec hljs"><span class="hljs-built_in"><span class="hljs-built_in">NSArray</span></span> * pathArray = @[ [<span class="hljs-built_in"><span class="hljs-built_in">NSValue</span></span> valueWithCGPoint:<span class="hljs-built_in"><span class="hljs-built_in">CGPointMake</span></span>(<span class="hljs-number"><span class="hljs-number">10.</span></span>, <span class="hljs-number"><span class="hljs-number">10.</span></span>)], [<span class="hljs-built_in"><span class="hljs-built_in">NSValue</span></span> valueWithCGPoint:<span class="hljs-built_in"><span class="hljs-built_in">CGPointMake</span></span>(<span class="hljs-number"><span class="hljs-number">100.</span></span>, <span class="hljs-number"><span class="hljs-number">10.</span></span>)], [<span class="hljs-built_in"><span class="hljs-built_in">NSValue</span></span> valueWithCGPoint:<span class="hljs-built_in"><span class="hljs-built_in">CGPointMake</span></span>(<span class="hljs-number"><span class="hljs-number">10.</span></span>, <span class="hljs-number"><span class="hljs-number">100.</span></span>)], [<span class="hljs-built_in"><span class="hljs-built_in">NSValue</span></span> valueWithCGPoint:<span class="hljs-built_in"><span class="hljs-built_in">CGPointMake</span></span>(<span class="hljs-number"><span class="hljs-number">10.</span></span>, <span class="hljs-number"><span class="hljs-number">10.</span></span>)], ]; <span class="hljs-built_in"><span class="hljs-built_in">CAKeyframeAnimation</span></span> *pathAnimation = [<span class="hljs-built_in"><span class="hljs-built_in">CAKeyframeAnimation</span></span> animationWithKeyPath:<span class="hljs-string"><span class="hljs-string">@"position"</span></span>]; pathAnimation.values = pathArray; pathAnimation.duration = <span class="hljs-number"><span class="hljs-number">5.0</span></span>; [<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.label.layer addAnimation:pathAnimation forKey:<span class="hljs-string"><span class="hljs-string">@"position"</span></span>];</code> </pre> <br>  Swift: <br><br><pre> <code class="hljs objectivec">let animation = <span class="hljs-built_in"><span class="hljs-built_in">CAKeyframeAnimation</span></span>() let pathArray = [[<span class="hljs-built_in"><span class="hljs-built_in">NSValue</span></span>(cgPoint: <span class="hljs-built_in"><span class="hljs-built_in">CGPoint</span></span>(x: <span class="hljs-number"><span class="hljs-number">10.0</span></span>, y: <span class="hljs-number"><span class="hljs-number">10.0</span></span>))], [<span class="hljs-built_in"><span class="hljs-built_in">NSValue</span></span>(cgPoint: <span class="hljs-built_in"><span class="hljs-built_in">CGPoint</span></span>(x: <span class="hljs-number"><span class="hljs-number">100.0</span></span>, y: <span class="hljs-number"><span class="hljs-number">100.0</span></span>))], [<span class="hljs-built_in"><span class="hljs-built_in">NSValue</span></span>(cgPoint: <span class="hljs-built_in"><span class="hljs-built_in">CGPoint</span></span>(x: <span class="hljs-number"><span class="hljs-number">10.0</span></span>, y: <span class="hljs-number"><span class="hljs-number">100.0</span></span>))], [<span class="hljs-built_in"><span class="hljs-built_in">NSValue</span></span>(cgPoint: <span class="hljs-built_in"><span class="hljs-built_in">CGPoint</span></span>(x: <span class="hljs-number"><span class="hljs-number">10.0</span></span>, y: <span class="hljs-number"><span class="hljs-number">10.0</span></span>))], ] animation.keyPath = <span class="hljs-string"><span class="hljs-string">"position"</span></span> animation.values = pathArray animation.duration = <span class="hljs-number"><span class="hljs-number">5.0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.label.layer.add(animation, forKey: <span class="hljs-string"><span class="hljs-string">"position"</span></span>)</code> </pre> <br><div style="text-align:center;"><img src="https://habrastorage.org/files/557/a34/e71/557a34e71d0d46bc8dbd4d6a1e1566de.gif"></div><br>  ‚Ä¢ <b>CATransition</b> .  Provides a transition effect that affects the content of the entire layer.  It disappears, pushes or reveals the contents of the layer during animation.  CATransition can be used to navigate between a UIView or to change transitions between a UIViewController: smooth appearance, appearing from different sides, appearing on top of current content, pushing out current content. <br><br>  In order to implement a custom transition between screens, you need in the pushViewController: animated method: specify NO (false) for the parameter animated. <br><br>  Objective-c: <br><br><pre> <code class="objectivec hljs"><span class="hljs-built_in"><span class="hljs-built_in">CATransition</span></span> *transition = [<span class="hljs-built_in"><span class="hljs-built_in">CATransition</span></span> animation]; transition.duration = <span class="hljs-number"><span class="hljs-number">2.35</span></span> transition.timingFunction = [<span class="hljs-built_in"><span class="hljs-built_in">CAMediaTimingFunction</span></span> functionWithName:kCAMediaTimingFunctionEaseInEaseOut]; transition.type = kCATransitionFade; [<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.navigationController.view.layer addAnimation:transition forKey:kCATransition]; [[<span class="hljs-keyword"><span class="hljs-keyword">self</span></span> navigationController] pushViewController:[NewViewController new] animated:<span class="hljs-literal"><span class="hljs-literal">NO</span></span>];</code> </pre> <br>  Swift: <br><br><pre> <code class="hljs objectivec">let transition = <span class="hljs-built_in"><span class="hljs-built_in">CATransition</span></span>() transition.duration = <span class="hljs-number"><span class="hljs-number">2.35</span></span> transition.timingFunction = <span class="hljs-built_in"><span class="hljs-built_in">CAMediaTimingFunction</span></span>(name: kCAMediaTimingFunctionEaseInEaseOut) transition.type = kCATransitionFade <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.navigationController?.view.layer.add(transition, forKey: <span class="hljs-literal"><span class="hljs-literal">nil</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.navigationController?.pushViewController(ViewController(), animated: <span class="hljs-literal"><span class="hljs-literal">false</span></span>)</code> </pre> <br><div style="text-align:center;"><img src="https://habrastorage.org/files/56e/00e/a54/56e00ea54d2342d0a0a79ea83ab24108.gif"></div><br>  <b>Types for transition.type:</b> <br><br><ul><li>  kCATransitionFade.  The content of the layer disappears as soon as it becomes visible or invisible; </li><li>  kCATransitionMoveIn.  The content of the layer slides over the current content.  Simple transition.subtype subtypes are used with this type; </li><li>  kCATransitionPush.  The content of the layer pushes the existing content.  Simple transition.subtype subtypes are used with this type; </li><li>  kCATransitionReveal.  The content of the layer is revealed gradually in the direction indicated by the subtype for the transition.  Simple transition.subtype subtypes are used with this type. </li></ul><br>  <b>Subtypes for transition.subtype:</b> <br><br><ul><li>  kCATransitionFromRight.  The presentation starts on the right; </li><li>  kCATransitionFromLeft.  The presentation starts on the left; </li><li>  kCATransitionFromTop.  The presentation starts from the top; </li><li>  kCATransitionFromBottom.  The presentation starts from the bottom; </li></ul><br>  The entire list of types and subtypes of CATransition can be viewed in the Apple official documentation for developers. <br><br>  <b>Types:</b> <br>  ‚Üí <a href="https://developer.apple.com/reference/quartzcore/catransition/1667446-common_transition_types">Swift</a> <br>  ‚Üí <a href="https://developer.apple.com/reference/quartzcore/catransition/1667446-common_transition_types%3Flanguage%3Dobjc">Objective-c</a> <br><br>  <b>Subtypes:</b> <br>  ‚Üí <a href="https://developer.apple.com/reference/quartzcore/catransition/1667486-common_transition_subtypes">Swift</a> <br>  ‚Üí <a href="https://developer.apple.com/reference/quartzcore/catransition/1667486-common_transition_subtypes%3Flanguage%3Dobjc">Objective-c</a> <br><br>  ‚Ä¢ <b>CAAnimationGroup</b> .  Allows you to create an array of animated objects that are grouped together and will work simultaneously. <br><br>  Objective-c: <br><br><pre> <code class="objectivec hljs"><span class="hljs-built_in"><span class="hljs-built_in">CABasicAnimation</span></span> *positionAnimation = [<span class="hljs-built_in"><span class="hljs-built_in">CABasicAnimation</span></span> animationWithKeyPath:<span class="hljs-string"><span class="hljs-string">@"position"</span></span>]; [posAnimation setFromValue:[<span class="hljs-built_in"><span class="hljs-built_in">NSValue</span></span> valueWithCGPoint:<span class="hljs-built_in"><span class="hljs-built_in">CGPointMake</span></span>(_animationButton.frame.origin.x, _animationButton.frame.origin.y)]]; [posAnimation setToValue:[<span class="hljs-built_in"><span class="hljs-built_in">NSValue</span></span> valueWithCGPoint:<span class="hljs-built_in"><span class="hljs-built_in">CGPointMake</span></span>(<span class="hljs-number"><span class="hljs-number">100</span></span>, <span class="hljs-number"><span class="hljs-number">100</span></span>)]]; posAnimation.autoreverses = <span class="hljs-literal"><span class="hljs-literal">YES</span></span>; <span class="hljs-comment"><span class="hljs-comment">// ,       ,     . [posAnimation setDuration:10.0]; [posAnimation setBeginTime:0.0]; CABasicAnimation *heightAnimation = [CABasicAnimation animationWithKeyPath:@"bounds.size"]; heightAnimation.autoreverses = YES; [heightAnimation setFromValue: [NSValue valueWithCGSize:CGSizeMake(_animationButton.frame.size.width,_animationButton.frame.size.height)]]; [heightAnimation setToValue:[NSValue valueWithCGSize:CGSizeMake(_animationButton.frame.size.width, 200)]]; [heightAnimation setDuration:10.0]; [heightAnimation setBeginTime:5.0]; CAAnimationGroup *group = [CAAnimationGroup animation]; [group setDuration:10.0]; [group setAnimations:[NSArray arrayWithObjects:posAnimation, heightAnimation, nil]]; [_animationButton.layer addAnimation:group forKey:nil];</span></span></code> </pre> <br>  Swift: <br><br><pre> <code class="hljs objectivec">var animations = [<span class="hljs-built_in"><span class="hljs-built_in">CABasicAnimation</span></span>]() var posAnimation = <span class="hljs-built_in"><span class="hljs-built_in">CABasicAnimation</span></span>(keyPath: <span class="hljs-string"><span class="hljs-string">"position"</span></span>) posAnimation.duration = <span class="hljs-number"><span class="hljs-number">1.0</span></span> posAnimation.autoreverses = <span class="hljs-literal"><span class="hljs-literal">true</span></span> posAnimation.fromValue = [<span class="hljs-built_in"><span class="hljs-built_in">NSValue</span></span>(cgPoint: <span class="hljs-built_in"><span class="hljs-built_in">CGPoint</span></span>(x: <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.animationButton.frame.origin.x, y: <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.animationButton.frame.origin.y))] posAnimation.toValue = [<span class="hljs-built_in"><span class="hljs-built_in">NSValue</span></span>(cgPoint: <span class="hljs-built_in"><span class="hljs-built_in">CGPoint</span></span>(x: <span class="hljs-number"><span class="hljs-number">100.0</span></span>, y: <span class="hljs-number"><span class="hljs-number">100.0</span></span>))] animations.append(posAnimation) var heightAnimation = <span class="hljs-built_in"><span class="hljs-built_in">CABasicAnimation</span></span>(keyPath: <span class="hljs-string"><span class="hljs-string">"bounds.size"</span></span>) heightAnimation.autoreverses = <span class="hljs-literal"><span class="hljs-literal">true</span></span> heightAnimation.duration = <span class="hljs-number"><span class="hljs-number">10.0</span></span> heightAnimation.fromValue = [<span class="hljs-built_in"><span class="hljs-built_in">NSValue</span></span>(cgSize: <span class="hljs-built_in"><span class="hljs-built_in">CGSize</span></span>(width: <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.animationButton.frame.size.width, height: <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.animationButton.frame.size.height))] heightAnimation.toValue = [<span class="hljs-built_in"><span class="hljs-built_in">NSValue</span></span>(cgSize: <span class="hljs-built_in"><span class="hljs-built_in">CGSize</span></span>(width: <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.animationButton.frame.size.width, height: <span class="hljs-number"><span class="hljs-number">200.0</span></span>))] heightAnimation.beginTime = <span class="hljs-number"><span class="hljs-number">5.0</span></span> animations.append(heightAnimation) let group = <span class="hljs-built_in"><span class="hljs-built_in">CAAnimationGroup</span></span>() group.duration = <span class="hljs-number"><span class="hljs-number">10.0</span></span> group.animations = animations <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.animationButton.layer.addAnimation(group, forKey: <span class="hljs-literal"><span class="hljs-literal">nil</span></span>)</code> </pre> <br>  Here the BeginTime parameter specifies the interval after the start of the animation. <br><br>  The animation of the change in position begins immediately after the start, and the animation of the change in the height of the button starts from the fifth second. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/841/0bd/258/8410bd258c374b6292029e7cef61e288.gif"></div><br><h3>  Removing animations </h3><br>  We can remove both the specific animation from the layer and all the animations. <br><br><h4>  Delete a specific animation. </h4><br>  When creating the animation, we specified the key @ "animateOpacity", by which we can access it.  To remove this animation, do the following: <br><br>  Objective-c: removeAnimationForKey: @ "animateOpacity" <br><br>  Swift: removeAnimationForKey ("animateOpacity") <br><br><h4>  Remove all animations. </h4><br>  To remove all animations from a layer, you need to send a message to removeAllAnimations: <br><br>  Objective-c: [theLayer removeAllAnimations]; <br><br>  Swift: theLayer.removeAllAnimations () <br><br><h3>  Animation blocks </h3><br>  There are pre-prepared blocks in which you can play the desired animation (change in transparency, position, size).  There are two such blocks: animations and completion.  We define their purpose: <br><br><ul><li>  The animations block is a block in which the code will be executed animation </li><li>  The completion block is the block in which the code is executed after the animations block is executed. </li></ul><br>  Animation blocks should be used when changing one value of a layer (object) to another with the subsequent saving of a new value.  In the blocks, we can change both the layer properties and the properties of the object itself. <br><br>  <b>Example 1. The</b> alpha buttons change from the current state to the final state, which is indicated in the block, in 3 seconds. <br><br>  Objective-c: <br><br><pre> <code class="objectivec hljs">[<span class="hljs-built_in"><span class="hljs-built_in">UIView</span></span> animateWithDuration:<span class="hljs-number"><span class="hljs-number">3.0</span></span> animations:^{ _theButton.alpha = <span class="hljs-number"><span class="hljs-number">0.0</span></span>; }];</code> </pre> <br><br>  Swift: <br><br><pre> <code class="hljs objectivec"><span class="hljs-built_in"><span class="hljs-built_in">UIView</span></span>.animateWithDuration(<span class="hljs-number"><span class="hljs-number">3.0</span></span>, animations: { <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.theButton.alpha = <span class="hljs-number"><span class="hljs-number">0.0</span></span> })</code> </pre> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/a18/a03/5c2/a18a035c23504b50868449b2bdd0f313.gif"></div><br>  <b>Example 2.</b> Change the position and height of the button <br><br>  Objective-c: <br><br><pre> <code class="objectivec hljs"> <span class="hljs-built_in"><span class="hljs-built_in">CGRect</span></span> frame = _animationButton.frame; frame.origin.y = <span class="hljs-number"><span class="hljs-number">100</span></span>; frame.size.height = <span class="hljs-number"><span class="hljs-number">200</span></span>; [<span class="hljs-built_in"><span class="hljs-built_in">UIView</span></span> animateWithDuration:<span class="hljs-number"><span class="hljs-number">1.5</span></span> delay:<span class="hljs-number"><span class="hljs-number">0.0</span></span> options: <span class="hljs-built_in"><span class="hljs-built_in">UIViewAnimationOptionCurveEaseOut</span></span> animations:^{ _animationButton.frame = frame; } completion:^(<span class="hljs-built_in"><span class="hljs-built_in">BOOL</span></span> finished){ <span class="hljs-built_in"><span class="hljs-built_in">NSLog</span></span>(<span class="hljs-string"><span class="hljs-string">@"Done!"</span></span>); }];</code> </pre> <br><br>  Swift: <br><br><pre> <code class="hljs swift"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> frame = <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.animationButton.frame frame.origin.y = <span class="hljs-number"><span class="hljs-number">100</span></span> frame.size.height = <span class="hljs-number"><span class="hljs-number">200</span></span> <span class="hljs-type"><span class="hljs-type">UIView</span></span>.animate(withDuration: <span class="hljs-number"><span class="hljs-number">1.5</span></span>, delay: <span class="hljs-number"><span class="hljs-number">0.0</span></span>, options: .curveEaseOut, animations: { <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.animationButton.frame = frame }) { (<span class="hljs-literal"><span class="hljs-literal">true</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">"Done"</span></span>) }</code> </pre> <br><div style="text-align:center;"><img src="https://habrastorage.org/files/9f5/4ff/1f8/9f54ff1f853c4616894fc13ab68c5e39.gif"></div><br>  Here the first parameter is the speed with which the animation will play; <br>  the second parameter is the delay; <br>  the third parameter is options, that is, in what form the animation will play. <br><br>  Animation playing options: <br><br>  <b>UIViewAnimationCurveLinear</b> - animation runs at a constant speed for a specified time; <br>  <b>UIViewAnimationCurveEaseOut</b> - the animation starts quickly and slows down towards the end; <br>  <b>UIViewAnimationCurveEaseIn</b> - the animation starts slowly and accelerates towards the end; <br>  <b>UIViewAnimationCurveEaseInOut</b> - the animation starts slowly, accelerates and slows down again. <br><br>  There are animation blocks in which animated transitions take place between a UIView or the addition of elements to a UIView, as in the example below.  They use the transitionWithView block, which is necessary for an animated transition or a UIView view or objects inherited from UIView. <br><br>  Objective-c: <br><br><pre> <code class="objectivec hljs">[<span class="hljs-built_in"><span class="hljs-built_in">UIView</span></span> transitionWithView:<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.view duration:<span class="hljs-number"><span class="hljs-number">1.5</span></span> options:<span class="hljs-built_in"><span class="hljs-built_in">UIViewAnimationOptionTransitionFlipFromBottom</span></span> animations:^ { [<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.view addSubview:<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.imageView]; } completion:^(<span class="hljs-built_in"><span class="hljs-built_in">BOOL</span></span> finished){ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (finished) { <span class="hljs-comment"><span class="hljs-comment">// Successful } NSLog(@"Animations completed."); // do something‚Ä¶ }];</span></span></code> </pre> <br><br>  Swift: <br><br><pre> <code class="hljs objectivec"><span class="hljs-built_in"><span class="hljs-built_in">UIView</span></span>.transition(with: <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.view, duration: <span class="hljs-number"><span class="hljs-number">1.5</span></span>, options: .transitionFlipFromBottom, animations: { <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.view.addSubview(<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.imageView) }, completion: <span class="hljs-literal"><span class="hljs-literal">nil</span></span>)</code> </pre> <br>  This is what happens in this case: In this example, we add a picture on the UIView with animation: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/c04/232/21a/c0423221a11c46ba87f77c0c6b96868e.gif"></div><br>  The UIImageView object displays a single image or sequence of images in an animated interface.  We can animate UIImageView without using blocks and animations like CABasicAnimation.  UIImageView has animationImages, animationDuration, animationRepeatCount properties, which means that we can, by transferring to animationImages an array with pictures that we need to play, start the UIImageView animation. <br><br>  Objective-c: <br><br><pre> <code class="objectivec hljs">_chicken = [[<span class="hljs-built_in"><span class="hljs-built_in">UIImageView</span></span> alloc] initWithImage:[<span class="hljs-built_in"><span class="hljs-built_in">UIImage</span></span> imageNamed:<span class="hljs-string"><span class="hljs-string">@"chicken_normal_fly_1.png"</span></span>]]; [_chicken setCenter:<span class="hljs-built_in"><span class="hljs-built_in">CGPointMake</span></span>(<span class="hljs-number"><span class="hljs-number">150.</span></span>f, <span class="hljs-number"><span class="hljs-number">400.</span></span>f)]; <span class="hljs-built_in"><span class="hljs-built_in">NSMutableArray</span></span> *flyAnimFrames = [<span class="hljs-built_in"><span class="hljs-built_in">NSMutableArray</span></span> array]; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">1</span></span>; i &lt;= <span class="hljs-number"><span class="hljs-number">8</span></span>; ++i) { [flyAnimFrames addObject:[<span class="hljs-built_in"><span class="hljs-built_in">UIImage</span></span> imageNamed:[<span class="hljs-built_in"><span class="hljs-built_in">NSString</span></span> stringWithFormat:<span class="hljs-string"><span class="hljs-string">@"chicken_normal_fly_%d.png"</span></span>, i]]]; } _chicken.animationImages = flyAnimFrames; _chicken.animationDuration = <span class="hljs-number"><span class="hljs-number">0.25</span></span>f; [_chicken startAnimating];</code> </pre><br>  Swift: <br><br><pre> <code class="hljs swift"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> imgListArray :<span class="hljs-type"><span class="hljs-type">NSMutableArray</span></span> = [] <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> countValue <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>...<span class="hljs-number"><span class="hljs-number">8</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> strImageName : <span class="hljs-type"><span class="hljs-type">String</span></span> = <span class="hljs-string"><span class="hljs-string">"chicken_normal_fly_\(countValue).png"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> image = <span class="hljs-type"><span class="hljs-type">UIImage</span></span>(named:strImageName) imgListArray.add(image <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> <span class="hljs-type"><span class="hljs-type">Any</span></span>) } <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.imageView.animationImages = imgListArray; <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.imageView.animationDuration = <span class="hljs-number"><span class="hljs-number">0.25</span></span> <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.imageView.startAnimating()</code> </pre> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/670/77e/2f0/67077e2f0318441391f61abe71112f22.gif"></div><br><h3>  Conclusion </h3><br>  In this article, I gave a minimal level of knowledge about iOS-animation, with which your application will become more colorful and more reliably capture the attention of an iPhone or iPad user.  Now our team is working on a project with more complex animations in which timing function and delay play a significant role.  We will translate the experience gained into the article, so stay in touch and thank you for your attention.  I hope the material was useful. <br><br>  If you have any questions, wishes or comments - welcome to the comments. </div><p>Source: <a href="https://habr.com/ru/post/319592/">https://habr.com/ru/post/319592/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../319582/index.html">Online game infrastructure</a></li>
<li><a href="../319584/index.html">7 email marketing trends for 2017</a></li>
<li><a href="../319586/index.html">VulnHub: USV 2016. CTF in Romania, what are they?</a></li>
<li><a href="../319588/index.html">Power supply without interruption</a></li>
<li><a href="../319590/index.html">HPE Synergy, real life experience</a></li>
<li><a href="../319594/index.html">How IT professionals work. Evgeny Bevz, Smart-Soft company</a></li>
<li><a href="../319598/index.html">GDG DevFest Nizhny Novgorod 2016: how it was</a></li>
<li><a href="../319600/index.html">Formulas on Habr√©</a></li>
<li><a href="../319602/index.html">Unicode is very exciting.</a></li>
<li><a href="../319604/index.html">Data Serialization: Performance Test and Application Description</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
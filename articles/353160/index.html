<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Proof-of-Proof-of-Work on the fingers. On the way to a sensible blockchain</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Blockchain protocols should provide consensus among the nodes of the decentralized system. Perhaps the most well-known algorithm of consensus can be c...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Proof-of-Proof-of-Work on the fingers. On the way to a sensible blockchain</h1><div class="post__text post__text-html js-mediator-article">  Blockchain protocols should provide consensus among the nodes of the decentralized system.  Perhaps the most well-known algorithm of consensus can be considered "retarded, but reliable, because the inhibited" algorithm is Proof-of-Work: each node, having a set of new transactions, enumerates a certain number of nonce, which is the field of the block.  A block is considered valid if all transactions inside it are valid and the hash function of the block header has some generally accepted feature (for example, the number of zeros at the beginning, as in Bitcoin): <br><br><pre><code class="xml hljs">Hash( Block{transaction,nonce,‚Ä¶} ) = 000001001...</code> </pre> <br>  As you know, blockchain is a chain of blocks.  It is a chain because inside each block there is an recorded id (usually a hash from the header) of the previous block.  For the following reasoning, the blockchain in a simplified form can be represented as follows: <br><br><img src="https://habrastorage.org/webt/rc/rx/lp/rcrxlpp-qsr-xyytgmzq1gf543u.png" alt="image"><br><a name="habracut"></a><br>  In the process of synchronizing the node with other nodes, it needs to carry out the validation of all the blocks that the neighbors sent to it - check the hashes and transactions of all the new blocks, and in the case of the first connection, to the very first block (genesis -block).  It is not difficult to assume that this is a rather lengthy and costly process ... 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      There is an option to request the last few blocks from neighboring nodes and, trusting, to accept them as valid ones.  But this option does not fit the spirit of security in an ‚Äúenvironment where no one trusts anyone.‚Äù <br><br><h3>  PoPoW-nodes. </h3><br>  The hash function of the block header is its id.  As mentioned earlier, in the Bitcoin network, as in many other networks, a feature that determines the validity of a block is the number of zeros at the beginning of the id record.  This number of zeros, known and common to all miners, is called the mining difficulty T (mining target).  A valid hash with T zeros at the beginning may have more zeros at the beginning than T. More specifically, half of the blocks will have only T zeros at the beginning;  half of the blocks will have T + 1 zero at the beginning;  a quarter of blocks T + 2 zeros, etc.  For example, this might look like a set of valid blocks for T = 5: <br><br><pre> <code class="xml hljs">000000101‚Ä¶ (6 ) 000001110‚Ä¶ (5 ) 000001111‚Ä¶ (5 ) 000000010‚Ä¶ (7 ) 000000101‚Ä¶ (6 ) 000001110‚Ä¶ (5 ) 000001111‚Ä¶ (5 )</code> </pre><br>  The number of zeros that exceeds T in the id of a block is called the level ¬µ, and the blocks with the level ¬µ are called ¬µ - superblocks.  If a block is a ¬µ-superblock, then it is also <br>  (¬µ -1) -superblock  Thus, while not changing anything, but only in terms of the entered parameter ¬µ, we can represent a chain of blocks in the following ¬µ-level form: <br><br><img src="https://habrastorage.org/webt/2q/uu/fa/2quufa-728nyyk7zk88axxs_ew0.png" alt="image"><br><br>  The blocks are numbered for ease of description, the numbering does not carry a semantic load. <br><br>  Now we will think about how we can use it.  If we write in the header of each block not only the id of the previous block, but also the id of all the last blocks at each level, then we allow each block to refer to more ‚Äúancient‚Äù blocks than the previous one.  The set of all the last blocks at each level will be called interlink (multiple link).  For example, Interlink for block 8 looks like this: <br><br><img src="https://habrastorage.org/webt/mp/fa/-m/mpfa-myyoi-gcp-sc1y7d_jguuk.png" alt="image"><br><br>  What does this give us?  Suppose we have connected a new node and now we want to synchronize it safely.  As we have already said, in order to fully validate the new block, the node needs to ‚Äústep through‚Äù to genesis - the block throughout the blockchain.  However, if we have links to some ‚Äúsupport‚Äù blocks in a validated block, we can ‚Äúwalk‚Äù to the genesis block, by requesting from other nodes not the whole blockchain, but only some proof (proof), which will contain a short route to first block.  The route itself will be a valid hook of the blockchain itself, since the blocks of the hook are consistently linked to each other. <br><br><img src="https://habrastorage.org/webt/c3/j0/41/c3j041etmjoo3-x9wun3qoo-f04.png" alt="image"><br><br>  Proof is a set of headers of several previous blocks.  Strictly speaking, the proof contains not only the ‚Äúshort route‚Äù, but also a few more headers from other blocks.  This is done to verify the proof of the specified security parameters m, k, etc. (a detailed description is given in the original article, the link is at the end). <br><br>  A node that does not store the entire blockchain, but only asks for proof from a full node that stores the entire history is called a PoPoW node.  Theoretically, such a node can be deployed on a low-power computer, a smartphone. <br><br>  Algorithm operation of the PoPoW protocol is as follows: <br><br>  1. PoPoW-node requests proof for a block from a full node. <br>  2. Full - a node (proover) forms a proof and sends it. <br>  3. PoPoW-node (verifier) ‚Äã‚Äãverifies the evidence, compares with the evidence of other nodes and makes a conclusion about the validity of the block. <br><br>  It is also worth noting that the complexity of creating PoPoW proofs is not inferior to the complexity of creating a complete chain of valid headers (the hash function of the header contains Interlink, so it would be necessary to ‚Äúfake‚Äù blocks of dishonest nodes taking into account the ¬µ-level hierarchy).  Therefore, using evidence to validate a PoPoW unit does not entail a loss of security. <br><br><h3>  NiPoWPoW - algorithm </h3><br>  Algorithm NiPoPoW - Non-Interactive Proof-of-Proof-of-Work - includes advanced generation and verification of evidence, it is resistant to some attacks that are exposed to PoPoW.  The link to the original article from the authors is also at the end. <br><br><h3>  What is all this for? </h3><br>  With the help of these algorithms, two actual problems are solved: effective transaction verification and effective evidence for sidechains (Sidechains). <br><br>  In the first case, this algorithm allows you to connect to the network "light" nodes that can quickly synchronize with the network. <br><br>  In the second case, the algorithm allows you to store and refer to events that occurred in other blockchain networks, which is useful for clients and wallets working with several blockchains.  PoPoW-proof is short enough so that you can put it in a transaction.  For example, you can write smart contracts in blockchain A, which are based on some events in blockchain B. <br><br>  This review was compiled freshly after participating in the <a href="https://binarydistrict.com/ru/courses/blockchain-hackathon/">Unblock Hackathon</a> hackathon, where one of the tasks was to implement this protocol.  The task's authors were hackathon partners from the <a href="https://ergoplatform.org/">Ergo platform</a> , inside which this algorithm is used. <br><br>  The text is based on the original articles. <br>  PoPoW: <a href="http://fc16.ifca.ai/bitcoin/papers/KLS16.pdf">Proofs of Proofs of Work with Sublinear Complexity.</a>  <a href="http://fc16.ifca.ai/bitcoin/papers/KLS16.pdf">Aggelos Kiayias, Nikolaos Lamprou, and Aikaterini-Panagiota Stouka</a> <br>  NiPoPoW: <a href="https://eprint.iacr.org/2017/963.pdf">Non-Interactive Proofs of Proof-of-Work.</a>  <a href="https://eprint.iacr.org/2017/963.pdf">Aggelos Kiayias, Andrew Miller and Dionysis Zindros</a> </div><p>Source: <a href="https://habr.com/ru/post/353160/">https://habr.com/ru/post/353160/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../353146/index.html">The story about the blockchain and a little bit about bitcoins</a></li>
<li><a href="../353148/index.html">Telephony integration with MoiSklad service</a></li>
<li><a href="../353150/index.html">Animation in Angular Applications</a></li>
<li><a href="../353152/index.html">Rustam Mehmandarov and Alexander Tarasov - semantic wonders and automation of experiments on jug.msk.ru</a></li>
<li><a href="../353156/index.html">FusionPBX, or cool again, FreeSWITCH</a></li>
<li><a href="../353162/index.html">Phone + CRM: The Benefits of Collaboration</a></li>
<li><a href="../353164/index.html">Where does a quality strategy begin and why is it needed in product management?</a></li>
<li><a href="../353166/index.html">And we will have a real cosmonaut! On Imagine Cup 2018</a></li>
<li><a href="../353168/index.html">Store data in the cloud</a></li>
<li><a href="../353170/index.html">The book "Clean Architecture. The art of software development</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
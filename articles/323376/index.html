<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Launch WebRTC media server in Amazon EC2 cloud for live video streaming from browsers and mobile applications</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="AWS Marketplace 
 First of all, I would like to say a few words about Amazon AWS Marketplace . Unlike Google Play and the App Store , where mobile app...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Launch WebRTC media server in Amazon EC2 cloud for live video streaming from browsers and mobile applications</h1><div class="post__text post__text-html js-mediator-article"><div style="text-align:center;"><img src="https://habrastorage.org/files/238/8a1/012/2388a101205f4fabb197320bb536926a.png"></div><br><h2>  AWS Marketplace </h2><br>  First of all, I would like to say a few words about <a href="https://aws.amazon.com/marketplace">Amazon AWS Marketplace</a> .  Unlike <b>Google Play</b> and the <b>App Store</b> , where mobile apps are laid out, on AWS, developers post server applications.  Here you can find a lot of interesting things, ranging from the free <b>LAMP</b> stack to server-side Enterprise-based solutions like <b>SAP</b> . <br><br>  The beauty of working with the market lies in the speed and ease of deployment.  The required application server is usually already configured, optimally configured and will be launched during the launch of the <b>EC2 instance itself</b> (Amazon EC2 virtual server).  Instance launch comes from the web interface and does not require any additional admin knowledge and skills. <a name="habracut"></a><br><br>  Skills for administering Linux, however, may be needed later during operation.  But you must admit, it is definitely nice to take and start working, skipping all the stages of installation and configuration and saving an hour or so of other time for troubleshooting and walking with a tambourine on a rake.  As a result, we get a live server with the required functionality, pre-configured and already working. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <div style="text-align:center;"><img src="https://habrastorage.org/files/402/cd1/9fc/402cd19fcb824c51b07996118f4dfacc.jpg"></div><br>  Later, nothing prevents you from accessing this server via SSH, checking all current settings, the file system, etc.  As a result, we have full access to the server and saved valuable time. <br><br>  To work with AWS Marketplace, you will of course need an account on Amazon Web Services.  Fortunately, many developers and IT-specialists already have such an account.  If not, you can always get it on the <a href="https://aws.amazon.com/">AWS</a> website. <br><br><h2>  WebRTC media server </h2><br>  As you know, <b>WebRTC</b> is a technology for capturing, playing and transmitting audio and video data in browsers and mobile devices.  Using WebRTC, you can do applications such as online broadcasts, video chats, video calls, conferences, Internet radio and many other projects where <b>RTC itself</b> is required - real-time real-time and low-latency communication. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/e19/9fe/beb/e199febeb5f34fa5910da6834d72c09d.png"></div><br>  WebRTC media servers extend the capabilities of the WebRTC technology, which without such a server runs <b>Peer-to-Peer</b> and has a number of technical limitations. <br><br>  The media server can be used for tasks such as: <br><br><ul><li>  Record WebRTC video stream on the server </li><li>  Video retransmission </li><li>  Video Transcoding </li><li>  Converting stream format, for example from WebRTC to RTMP or HLS </li><li>  Cutting video stream into pictures (snapshots) </li><li>  Reproduction of WebRTC video stream from IP cameras </li><li>  etc. </li></ul><br>  In this article, we will show how to run a WebRTC server on Amazon AWS in just two clicks and how to test several examples related to processing video obtained via WebRTC. <br><br><h2>  Web call server </h2><br>  We will test <a href="https://flashphoner.com/">Web Call Server</a> .  This is a WebRTC media server with support for WebRTC technology, RTMP, RTSP and other protocols and technologies for working with real-time video. <br><br>  Immediately after launching, we will try to test several features inherent in the media server, such as recording, relaying, converting to RTMP and playing from an IP camera. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/5ca/631/b4f/5ca631b4f570495285a7b693200e67db.png"></div><br><h2>  AWS Marketplace Listing </h2><br>  It was mentioned above that the launch will require a username in the AWS service.  Listing (listing) is the page of the server application in the market. <br><br>  Listing Web Call Server is available at <a href="https://aws.amazon.com/marketplace/pp/B01D1L5EAK">this link</a> and is as follows.  Pay attention to the yellow <b>Continue</b> button - this is our click number 1. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/477/0e4/a14/4770e4a1441a4b81a410988164b46a05.jpg"></div><br>  The next page is a complete description of the service and allows you to select the appropriate instance size for the CPU and memory, adjust the list of open ports. <br><br>  You can also change nothing and just press the <b>Launch with 1 click</b> button, leaving all the default settings. <br><br>  Amazon - instances are famous for the fact that they can be created and destroyed at that very moment.  Therefore, if something was configured incorrectly or the wrong instance size was chosen, simply <b>terminate it</b> and create it again.  Fortunately, this is a routine operation that requires a couple of minutes in time. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/8e5/e1e/259/8e5e1e2596cb4c83be8d04868145708d.jpg"></div><br><h2>  Is done </h2><br>  After the second click you will see a message about a successful launch.  After that, you will have to wait for the instance to rise and pass all the necessary procedures associated with the first launch. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/16c/fc6/7c3/16cfc67c316b47c1ab65c40fbcd284b4.jpg"></div><br>  If you go to the EC2 Management Console and see what we‚Äôve been using there in the <b>Instances</b> section, you can find this label: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/8b8/a35/027/8b8a35027a6f4f50abf2ebde13ffc66d.png"></div><br>  This is our starting EC2 instance, which has been assigned the following addresses: <br><pre><code class="javascript hljs">DNS: ec2<span class="hljs-number"><span class="hljs-number">-34</span></span><span class="hljs-number"><span class="hljs-number">-207</span></span><span class="hljs-number"><span class="hljs-number">-147</span></span><span class="hljs-number"><span class="hljs-number">-235.</span></span>compute<span class="hljs-number"><span class="hljs-number">-1.</span></span>amazonaws.com IP: <span class="hljs-number"><span class="hljs-number">34.207</span></span><span class="hljs-number"><span class="hljs-number">.147</span></span><span class="hljs-number"><span class="hljs-number">.235</span></span></code> </pre> <br>  Open the address of the initial server setup in the <b>Google Chrome</b> browser: <br><br>  <a href="https://ec2-34-207-147-235.compute-1.amazonaws.com:8888/">https://ec2-34-207-147-235.compute-1.amazonaws.com:8888</a> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/b25/253/85a/b2525385a4dc4fb7a24345ab5c451e8c.jpg"></div><br>  Chrome gives an unfriendly greeting and complains about problems with SSL certificates.  Indeed, only you can install certificates and your own domain should be used to install them. <br><br>  Therefore, simply click on the <b>ADVANCED / PROCEED</b> links and thus tell Chrome-browser to use the certificates that the server offers. <br><br>  The next step is to enter the free license number for Web Call Server, which can be obtained <a href="https://flashphoner.com/get_trial">here</a> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/d76/00f/dda/d7600fddae7b477da50fe1f077b6a50c.jpg"></div><br>  Next, you need to set an administrator password to log in to the <b>Dashboard</b> server and log in with the specified login and password. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/8cd/f9f/d6d/8cdf9fd6d4564e20abcaa81e2f56d634.jpg"></div><br><h2>  Testing WebRTC Records </h2><br>  The server setup has been completed and you can start testing directly.  To do this, log in to the <b>Dashboard</b> and open a test case. <br><br>  For example, a WebRTC broadcast with a video stream recording looks like this: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/149/7cd/16e/1497cd16e33e42898a1c0028596ebe3e.jpg"></div><br>  On the left, we capture video from a webcam.  The video is simultaneously relayed and recorded on the server.  After stopping the broadcast with the <b>Stop</b> button, the stream stops going to the server and recording stops.  On the right there is a link to download the file in <b>mp4</b> format. <br><br><h2>  Testing WebRTC - Relay </h2><br>  Another useful application of the WebRTC media server is the one-to-many WebRTC streaming relay.  For this, it is convenient to use the <b>Two Way Streaming</b> example. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/189/c03/925/189c03925d3e469faabf6171c3146607.png"></div><br>  In the screenshot above, a video stream with the name <b>eabc is sent</b> to the Amazon EC2 server using WebRTC technology.  Thus, the name of the video stream is set and the stream can be played by this name in the same interface on the right by clicking the <b>Play</b> button, or in another example, the <b>Player</b> , for example: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/892/f65/ab4/892f65ab4da04aeabf13cc3885ed25ff.jpg"></div><br>  Since this is a retransmission, you can open many player windows, each of which will play the same WebRTC video stream. <br><br><h2>  WebRTC broadcast from RTSP cameras </h2><br>  The server can pick up the stream from the IP camera and distribute it via WebRTC.  To do this, the IP camera must be accessible via RTSP and hold the H.264 and AAC codecs. <br><br>  For testing, you can use the same <b>Player</b> , with the only difference that you need to set the RTSP URL as the name of the video stream. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/0f9/af0/291/0f9af0291ccd44e788c5354ddf4f5e78.jpg"></div><br>  This example uses the RTSP stream from the source at: <i>rtsp: //str81.creacast.com/grandlilletv/high</i> <br><br><h2>  WebRTC Relay RTMP </h2><br>  As the final fourth example, consider the broadcast of the WebRTC stream with replication over RTMP.  It is no secret that, despite the widespread development of WebRTC technology, many services continue to run on Flash and the task of this conversion is to make WebRTC stream available on Flash platforms and servers that do not support WebRTC. <br><br>  The example is called <b>WebRTC as RTMP re-publishing</b> and shows how on one page you can send a stream to the server via WebRTC (left), redirect it to the same server as RTMP and play in Flash Player using the RTMP protocol (right). <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/100/199/c25/100199c25a0b4dbea1fde274ffda6caf.jpg"></div><br>  Thus, we have shown such features of WebRTC media server as <br><br><ul><li>  WebRTC Record </li><li>  Webcam Relay </li><li>  Relaying with RTSP IP Cameras </li><li>  Broadcasting with RTMP conversion </li></ul><br><h2>  Web development </h2><br>  All the examples we run in Dashborad are plain open source <b>JavaScript + HTML</b> . <br><br>  For example, the sample code for the Player is available <a href="https://github.com/flashphoner/flashphoner_client/tree/wcs_api-2.0/examples/demo/streaming/player">here</a> . <br><br>  The work of all the examples listed is reduced to three simple <b>JavaScript functions</b> . <br><br>  <b>1. Establish a connection.</b> <br><br>  This code establishes a connection to the server using the Websocket protocol.  Having received the status <b>ESTABLISHED</b> , you can call <b>createStream ()</b> on the session object to send a video stream or playback. <br><br><pre> <code class="javascript hljs">Flashphoner.createSession({<span class="hljs-attr"><span class="hljs-attr">urlServer</span></span>: <span class="hljs-string"><span class="hljs-string">"wss://ec2-34-207-147-235.compute-1.amazonaws.com:8443"</span></span>}).on(Flashphoner.constants.SESSION_STATUS.ESTABLISHED, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">session</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//session connected, start streaming }).on(Flashphoner.constants.SESSION_STATUS.DISCONNECTED, function () { //display status }).on(Flashphoner.constants.SESSION_STATUS.FAILED, function () { //display status });</span></span></code> </pre> <br>  <b>2. Sending a video stream</b> <br><br>  To send a video stream to the server, the <b>stream.publish ()</b> method is used.  Apparently from the code, at first event handlers are hung on the created Stream, and at the very end <b>publish () is</b> called. <br><br><pre> <code class="javascript hljs">session.createStream({ <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">"eabcd"</span></span>, <span class="hljs-attr"><span class="hljs-attr">display</span></span>: localVideo, <span class="hljs-attr"><span class="hljs-attr">cacheLocalResources</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-attr"><span class="hljs-attr">receiveVideo</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-attr"><span class="hljs-attr">receiveAudio</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span> }).on(Flashphoner.constants.STREAM_STATUS.PUBLISHING, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">publishStream</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//display status }).on(Flashphoner.constants.STREAM_STATUS.UNPUBLISHED, function () { //display status }).on(Flashphoner.constants.STREAM_STATUS.FAILED, function () { //display status }).publish();</span></span></code> </pre><br>  <b>3. Playing a video stream</b> <br><br>  To play a stream, call <b>play ()</b> .  The stream plays in a div element with id = remoteVideo. <br><br><pre> <code class="javascript hljs">session.createStream({ <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">"stream222"</span></span>, <span class="hljs-attr"><span class="hljs-attr">display</span></span>: remoteVideo, <span class="hljs-attr"><span class="hljs-attr">cacheLocalResources</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-attr"><span class="hljs-attr">receiveVideo</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-attr"><span class="hljs-attr">receiveAudio</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span> }).on(Flashphoner.constants.STREAM_STATUS.PLAYING, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">playStream</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//display status }).on(Flashphoner.constants.STREAM_STATUS.STOPPED, function () { //display status }).on(Flashphoner.constants.STREAM_STATUS.FAILED, function () { //display status }).play();</span></span></code> </pre> <br>  Thus, for the development and adaptation of examples, you need a confident knowledge of JavaScript and HTML, which allow you to embed these functions in the existing page code and scripts. <br><br>  More detailed web development documentation for scripts for playing and sending video streams can be obtained from the <a href="https://flashphoner.com/wcs-web-sdk">Web SDK</a> page <a href="https://flashphoner.com/wcs-web-sdk">for Web Call Server</a> . <br><br><h2>  Administration </h2><br>  The instance obtained on the AWS Marketplace is a regular Amazon EC2 instance, to which the standard administration methods via SSH are applicable. <br><br>  In order to enter the server console via SSH, we use for example <a href="http://www.putty.org/">Putty</a> <br><br>  1. Enter the IP address or domain of the EC2 server in the <b>Session menu</b> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/de3/426/342/de3426342d614025b9a7eb87de84542b.jpg"></div><br>  2. Put the standard user name <b>ec2-user</b> in the menu <b>Connection / Data</b> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/33d/db8/fd2/33ddb8fd21e147daaaabac0fc79fc112.jpg"></div><br>  3. Specify the path to the file with a private key. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/564/400/5a3/5644005a3a8a41198fc22ef1c22f8e16.jpg"></div><br>  Key management is carried out within the Amazon AWS account in Security settings.  Most likely, since you already have an account, you have already created at least one Security group and downloaded the keys.  If not, consult the <a href="http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ec2-key-pairs.html">Amazon AWS documentation</a> to create / download your <b>Private Key</b> . <br><br>  Next we get to the console of the Linux server and can administer it. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/48e/d1e/ba5/48ed1eba560f46dab6ff6a7d897efe13.jpg"></div><br>  For example, you can go to the folder with the examples that we showed above and see the files that are there.  In particular, the example of Two Way Streaming will be located along the following path: <br><br><pre> <code class="bash hljs">/usr/<span class="hljs-built_in"><span class="hljs-built_in">local</span></span>/FlashphonerWebCallServer/client2/examples/demo/streaming/two_way_streaming</code> </pre> <br>  And the sample file tree will look like this: <br><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> /usr/<span class="hljs-built_in"><span class="hljs-built_in">local</span></span>/FlashphonerWebCallServer tree -L 1 client2</code> </pre> <br><div style="text-align:center;"><img src="https://habrastorage.org/files/d5f/a80/e59/d5fa80e59cc740899a28bf23ed8e10d2.png"></div><br>  These examples can be packaged and copied to your web server, such as Apache or Nginx. <br><br>  For example: <br><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> /usr/<span class="hljs-built_in"><span class="hljs-built_in">local</span></span>/FlashphonerWebCallServer tar -czf client2.tar.gz client2</code> </pre> <br><div style="text-align:center;"><img src="https://habrastorage.org/files/33f/1d2/97c/33f1d297c8cb4d9198c79a8046f57641.png"></div><br>  It would not be superfluous to pay attention to the fact that we test everything using HTTPS, since  Chrome WebRTC refuses to work from non-secure (HTTP) pages.  Therefore, when transferring examples to Apache or Nginx, make sure that these pages are accessible via HTTPS. <br><br><h2>  Links </h2><br><ul><li>  <a href="https://aws.amazon.com/">AWS Web Services</a> - Amazon AWS Servers </li><li>  <a href="https://aws.amazon.com/marketplace">AWS Marketplace</a> - Amazon AWS Market </li><li>  <a href="https://flashphoner.com/">Web Call Server</a> - WebRTC Media Server Web Call Server Site </li><li>  <a href="https://aws.amazon.com/marketplace/pp/B01D1L5EAK">Web Call Server Listing on Amazon Marketplace</a> - AWS <a href="https://aws.amazon.com/marketplace/pp/B01D1L5EAK">Web Call Server Listing</a> </li><li>  <a href="https://github.com/flashphoner/flashphoner_client/tree/wcs_api-2.0/examples/demo/streaming/player">Player</a> - sample JavaScript / HTML code Player for WebRTC playback </li><li>  <a href="https://flashphoner.com/wcs-web-sdk">Web SDK</a> - JavaScript API for WebRTC Web Application Development </li><li>  <a href="http://www.putty.org/">Putty</a> is an SSH client for Windows. </li><li>  <a href="http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ec2-key-pairs.html">AWS Security and key management</a> - key management in AWS Marketplace </li></ul></div><p>Source: <a href="https://habr.com/ru/post/323376/">https://habr.com/ru/post/323376/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../323362/index.html">Is bitcoin addicted to China and why is it important?</a></li>
<li><a href="../323364/index.html">Using Simple Electronic Signature in Documents</a></li>
<li><a href="../323368/index.html">Algorithm for creating multipage web forms in MyTaskHelper</a></li>
<li><a href="../323372/index.html">Push notifications in browsers and work with object tracks</a></li>
<li><a href="../323374/index.html">Pix2Pix: How Cat Generator Works</a></li>
<li><a href="../323378/index.html">Bitcoin in Russia: who uses?</a></li>
<li><a href="../323380/index.html">Address Sanitizer, or What if valgrind doesn't work</a></li>
<li><a href="../323382/index.html">Smart Cities, or Smart Cities = Happy Citizens</a></li>
<li><a href="../323384/index.html">Qiwi IPN on Node.js</a></li>
<li><a href="../323386/index.html">Administrator's summary: blaze and poverty of blade systems</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
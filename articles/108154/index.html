<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>MODx Revolution. Results Part 1</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Three and a half months have passed since the release of MODx Revolution. I think no one will argue that version 2.0 was very raw and was not ready fo...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>MODx Revolution. Results Part 1</h1><div class="post__text post__text-html js-mediator-article">  Three and a half months have passed since the release of MODx Revolution.  I think no one will argue that version 2.0 was very raw and was not ready for use on real projects.  I saw a lot of criticism and skepticism on the Russian-language sites about MODx.  Something is well deserved, but something is due to the lack of detailed documentation.  Currently <a href="http://modxcms.com/download/">version 2.0.4-pl2 is available</a> , according to which, in my opinion, it is already possible to summarize: Did the developers choose the right direction and development tools and should we abandon MODx Evolution (1.x) and switch to Revo?  In this article I will try to tell you in detail about the main features of the new system, which I only discover for myself. <br><br><a name="habracut"></a><br><br><h2>  What is MODx Revolution </h2>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      As the <a href="http://rtfm.modx.com//display/MODx096/What%2Bis%2BMODx">developers say</a> , first of all MODx Revolution is CMF, i.e.  a tool for creating web applications, and the CMS that comes bundled is just an appendix.  Revo is written in PHP and uses: <br><ul><li>  MySQL database </li><li>  technology to convert objects into relational database models <a href="http://www.xpdo.org/">xPDO</a> , </li><li>  JavaScript framework <a href="http://www.sencha.com/">Sencha</a> (ExtJS), </li><li>  <a href="http://www.smarty.net/">Smarty</a> template engine. </li></ul><br><br><h2>  Control system </h2><br><br><img src="https://habrastorage.org/storage/b9d73387/bdd591ee/b6be191c/3ea077ad.png"><br><br>  Despite the foregoing, the developers have paid much attention to CMS.  It is felt that the convenience of the control system is thought out very carefully. <br><ul><li>  Drop-down menu with a brief description of each item (who does not like, descriptions can be disabled); </li><li>  tabs on the left panel with quick access to all main elements and files; </li><li>  almost everything (and maybe absolutely everything) can be <a href="http://rtfm.modx.com/display/revolution20/Customizing%2Bthe%2BManager">customized</a> for a specific project without the need to get into the source code; </li><li>  built-in search for resources (documents); </li><li>  convenient <a href="http://rtfm.modx.com/display/revolution20/Installing%2Ba%2BPackage">installation of packages</a> (add-ons) directly from the CMS. </li></ul><br><br>  If you right-click on a section in the resource tree (documents) on the left and select ‚ÄúQuickly create‚Äù -&gt; ‚ÄúDocument‚Äù, a window will open to create a document without reloading the page, which is very convenient.  There is also a quick edit (‚ÄúQuickly update resource‚Äù).  In the same way, you can quickly create or edit ‚Äúadditional fields‚Äù, etc.  Documents can be sorted and shifted by section by dragging and dropping in the tree. <br><br>  However, not everything is so rosy.  Because of the heap of ‚Äújavascript beauties‚Äù, the admin works much slower than in Evolution, sometimes it hangs on some actions.  Although I think with time this will get better (I did not notice the critical glitches). <br><br><h2>  Development under MODx Revolution </h2><br><br>  <b>Separation of user rights.</b>  In Evo, the rights were fixed and only in the admin panel (for ‚Äúmanagers‚Äù).  Revo has the opportunity to create its own rights and assign them to individual groups of users.  This is done very simply: <br>  Go to ‚ÄúSecurity‚Äù -&gt; ‚ÄúUser Groups‚Äù -&gt; ‚ÄúAccess Policies‚Äù.  Select the name of the access policy (for example, ‚ÄúAdministrator‚Äù) and add a ‚Äúnew permission‚Äù in editing, for example, ‚Äútest_action‚Äù. <img src="https://habrastorage.org/storage/65e67a9c/a89bdb3d/2568bb79/bee87d4c.png"><br>  Save and click "Exit".  To update the rights, you need to re-enter the system (update session).  Now it is possible to check whether the current user has the ‚Äútest_action‚Äù action right anywhere in the component code (snippet, plug-in): <br><br><pre><code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!$modx-&gt;hasPermission(<span class="hljs-string"><span class="hljs-string">'test_action'</span></span>)){ <span class="hljs-comment"><span class="hljs-comment">//     ,   " " return $modx-&gt;error-&gt;failure($modx-&gt;lexicon('access_denied')); }</span></span></code> </pre> <br><br>  This is very short, it is possible to <a href="http://rtfm.modx.com/display/revolution20/Security">adjust permissions</a> more subtly.  In Revo, there is no separation between ‚Äúmanagers‚Äù and ‚Äúweb users‚Äù as in Evo.  Access control in the administrative part is defined by the <a href="http://rtfm.modx.com/display/revolution20/Contexts">context</a> ‚Äúmgr‚Äù, and in the external part of the site - by the context ‚Äúweb‚Äù. <br><br>  <b>Creating <a href="http://rtfm.modx.com/display/revolution20/Snippets">snippets</a> and <a href="http://rtfm.modx.com/display/revolution20/Plugins">plugins</a></b> without any special changes.  Most of the function names and arguments from the Evo are saved.  To create ‚Äúpackages‚Äù (packages) there is a very convenient and easy-to-use PackMan module: <br><img src="https://habrastorage.org/storage/55508b2e/5a042ac8/d9eaa289/2b9a0c46.png"><br>  Select snippets, plug-ins, chunks, press the ‚ÄúExport Transport Package‚Äù button and get the package archive ready for installation.  Now it will be possible to put it in the core / packages / folder and install it through ‚ÄúPackage Management‚Äù. <br><br>  <b>Creating pages in the "manager".</b>  Now there is no concept "Module".  There is a common name "Component".  In the management system, you can create a component administration <a href="http://rtfm.modx.com/display/revolution20/Custom%2BManager%2BPages">user interface</a> .  I will describe briefly the main steps: <br>  1. Create a namespace for our component (‚ÄúSystem‚Äù -&gt; ‚ÄúNamespaces‚Äù). <br><img src="https://habrastorage.org/storage/f9d0af02/505bc07d/e41c7818/9d3ee39f.png"><br>  At the specified path, the ‚Äúmanager‚Äù will search for the ‚Äúcontroller‚Äù of the component.  If you are familiar with the <a href="http://ru.wikipedia.org/wiki/MVC">MVC pattern</a> , then the concept of ‚Äúcontroller‚Äù is well known to you. <br>  2. Go to ‚ÄúSystem‚Äù -&gt; ‚ÄúActions‚Äù.  Clicking on our namespace "myextra", select "Create an action here."  In the line "Controller" we write the name of the PHP file of the controller, which lies in the folder specified above.  For example, "index" (index.php). <br>  3. Now create an item in the main menu.  We right-click on the ‚ÄúComponents‚Äù item in the ‚ÄúTop Menu‚Äù block and select ‚ÄúCreate a menu item here.‚Äù <br><img src="https://habrastorage.org/storage/497aea1e/faa68820/af0159cb/e344ade8.png"><br>  4. In more complex applications, it is worthwhile to put all controllers in a separate folder ‚Äúcontrollers‚Äù.  Here is the content of my index.php controller: <br><br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> $corePath = MODX_CORE_PATH.<span class="hljs-string"><span class="hljs-string">'components/myextra/'</span></span>; $assetsUrl = MODX_BASE_URL.<span class="hljs-string"><span class="hljs-string">'assets/components/myextra/'</span></span>; $controllersPath = $corePath.<span class="hljs-string"><span class="hljs-string">'controllers/'</span></span>; $connectorUrl = $assetsUrl.<span class="hljs-string"><span class="hljs-string">'connector.php'</span></span>; $cssUrl = $assetsUrl.<span class="hljs-string"><span class="hljs-string">'css/'</span></span>; $jsUrl = $assetsUrl.<span class="hljs-string"><span class="hljs-string">'js/'</span></span>; $output .= <span class="hljs-string"><span class="hljs-string">'&lt;div&gt;&lt;h2&gt; &lt;/h2&gt;&lt;/div&gt;'</span></span>; $output .= <span class="hljs-string"><span class="hljs-string">'&lt;div id="myextra-main-div"&gt;&lt;/div&gt;'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> $output;</code> </pre><br><br>  In reality, this is not recommended.  You need to create a model, etc.  (about this in the next part).  You can use the <a href="http://rtfm.modx.com/display/revolution20/Custom%2BManager%2BPages">Smarty</a> template engine: <br><br><pre> <code class="php hljs">$title = <span class="hljs-string"><span class="hljs-string">' '</span></span>; <span class="hljs-comment"><span class="hljs-comment">//    $modx-&gt;smarty-&gt;assign('title', $title); //  return $modx-&gt;smarty-&gt;fetch($corePath.'templates/main.tpl');</span></span></code> </pre><br><br>  PHP can be used as a template engine (templates should be placed in a separate file).  And you can fully use ExtJS.  Here is an example of outputting a table of values ‚Äã‚Äã(Ext.grid.GridPanel): <br><br>  <b>core / components / myextra / index.php:</b> <br><br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> $corePath = MODX_CORE_PATH.<span class="hljs-string"><span class="hljs-string">'components/myextra/'</span></span>; $assetsUrl = MODX_BASE_URL.<span class="hljs-string"><span class="hljs-string">'assets/components/myextra/'</span></span>; $controllersPath = $corePath.<span class="hljs-string"><span class="hljs-string">'controllers/'</span></span>; $connectorUrl = $assetsUrl.<span class="hljs-string"><span class="hljs-string">'connector.php'</span></span>; $cssUrl = $assetsUrl.<span class="hljs-string"><span class="hljs-string">'css/'</span></span>; $jsUrl = $assetsUrl.<span class="hljs-string"><span class="hljs-string">'js/'</span></span>; <span class="hljs-comment"><span class="hljs-comment">//   HEAD $modx-&gt;regClientStartupHTMLBlock('&lt;script type="text/javascript"&gt; var myextra = {}; myextra.connector_url = "'.$connectorUrl.'"; &lt;/script&gt;'); $modx-&gt;regClientStartupScript($jsUrl.'datagrid.js'); //  grid` $output .= '&lt;h2&gt; &lt;/h2&gt;'; $output .= '&lt;div id="myextra-main-div"&gt;&lt;/div&gt;'; return $output;</span></span></code> </pre><br><br>  <b>assets / components / myextra / js / datagrid.js:</b> <br><br><pre> <code class="javascript hljs">Ext.onReady(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-comment"><span class="hljs-comment">//   var store = new Ext.data.JsonStore({ url: myextra.connector_url, //   root: 'object.data', //JSON     totalProperty: 'object.total', //    idProperty: 'orderid', remoteSort: false, prettyUrls: false, fields: [ {name: 0}, {name: 1, type: 'int'}, {name: 2, type: 'float'}, {name: 3, type: 'int'} ] }); store.setDefaultSort(3, 'desc'); //   var grid = new Ext.grid.GridPanel({ store: store, columns: [ {header: " 1", width: 100, sortable: true, dataIndex: 0}, {header: " 2", width: 100, sortable: true, dataIndex: 1}, {header: " 3", width: 100, sortable: true, dataIndex: 2}, {header: " 4", width: 100, sortable: true, dataIndex: 3} ], renderTo:'myextra-main-div', //DIV     width:400, autoHeight: true, loadMask: true, bbar: new Ext.PagingToolbar({ pageSize: 5, //   store: store, //  displayInfo: true, displayMsg: ' {0} - {1}  {2}', emptyMsg: "  " }) }); //  store.load({params:{ action: 'mgr/datalist', // ("") start:0, limit:5 } }); });</span></span></code> </pre><br><br>  <b>assets / components / myextra / connector.php:</b> <br><br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-comment"><span class="hljs-comment">/** * Myextra Connector * * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@package</span></span></span><span class="hljs-comment"> myextra */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">require_once</span></span> dirname(dirname(dirname(dirname(<span class="hljs-keyword"><span class="hljs-keyword">__FILE__</span></span>)))).<span class="hljs-string"><span class="hljs-string">'/config.core.php'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">require_once</span></span> MODX_CORE_PATH.<span class="hljs-string"><span class="hljs-string">'config/'</span></span>.MODX_CONFIG_KEY.<span class="hljs-string"><span class="hljs-string">'.inc.php'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">require_once</span></span> MODX_CONNECTORS_PATH.<span class="hljs-string"><span class="hljs-string">'index.php'</span></span>; <span class="hljs-comment"><span class="hljs-comment">/* handle request */</span></span> $modx-&gt;request-&gt;handleRequest(<span class="hljs-keyword"><span class="hljs-keyword">array</span></span>( <span class="hljs-string"><span class="hljs-string">'processors_path'</span></span> =&gt; $modx-&gt;getOption( <span class="hljs-string"><span class="hljs-string">'core_path'</span></span> ) . <span class="hljs-string"><span class="hljs-string">'components/myextra/processors/'</span></span>, <span class="hljs-string"><span class="hljs-string">'location'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">''</span></span> ));</code> </pre><br><br>  <b>core / components / myextra / processors / mgr / datalist.php:</b> <br><br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> $start = $scriptProperties[<span class="hljs-string"><span class="hljs-string">'start'</span></span>]; <span class="hljs-comment"><span class="hljs-comment">//   $limit = $scriptProperties['limit']; //   $total = 50; $page = $start+1; //  ""  mysql- $limit_on_page = $total-($total-($page*$limit)); $outputArray = array(); for($i=$start*$limit;$i&lt;$limit_on_page;$i++){ $outputArray[] = array(' '.($i+1),2,3,4); } $outputArray = array( 'total'=&gt;$total, 'limit_on_page'=&gt;$limit_on_page, 'data'=&gt;$outputArray ); return $modx-&gt;error-&gt;success('',$outputArray);</span></span></code> </pre><br><br>  As a result, we get the following label: <br><img src="https://habrastorage.org/storage/ef3eb1ff/23657eab/0d0b9cef/3d1c1153.png"><br><br>  ExtJS is not at all difficult to learn, as I previously thought.  The main desire.  It really saves a lot of time. <br><br>  <a href="http://rtfm.modx.com/display/revolution20/Home">Documentation MODx Revolution</a> is still <s>very</s> poor.  Much of the information has to be found in the source.  I hope soon this situation will change, perhaps with your help. <br><br>  <b>The end of the first part.</b> <br><br>  From this part, I think everyone understands that MODx Revolution is not much more difficult than Evolution in terms of development, and there are more opportunities for the developer. </div><p>Source: <a href="https://habr.com/ru/post/108154/">https://habr.com/ru/post/108154/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../108140/index.html">Yii 1.1.5</a></li>
<li><a href="../108142/index.html">How to make up beautifully or worse than css-frameworks</a></li>
<li><a href="../108146/index.html">Web store is even closer</a></li>
<li><a href="../108151/index.html">What is the difference between different types of Facebook pages?</a></li>
<li><a href="../108152/index.html">phpinfo.php: incredible, but true</a></li>
<li><a href="../108156/index.html">Graphic subsystem ‚Äúdead on the core‚Äù</a></li>
<li><a href="../108157/index.html">Digest 6 interesting concepts and ideas of the past week</a></li>
<li><a href="../108161/index.html">About Yota and "Zhzhzh"</a></li>
<li><a href="../108163/index.html">Mentors: how does it work?</a></li>
<li><a href="../108164/index.html">Looking for projects on the 4th Startup Crash Test</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
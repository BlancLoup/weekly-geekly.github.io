<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Perl :: Critic + Subversion = implementation of common coding practices in the team</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The Perl language is well known to the degree of freedom (aka TIMTOWTDI ), which it gives the programmer in choosing the way to solve a particular tas...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Perl :: Critic + Subversion = implementation of common coding practices in the team</h1><div class="post__text post__text-html js-mediator-article">  The Perl language is well known to the degree of freedom (aka <a href="http://en.wikipedia.org/wiki/There%27s_more_than_one_way_to_do_it">TIMTOWTDI</a> ), which it gives the programmer in choosing the way to solve a particular task.  This medal, unfortunately, has a downside, which can manifest itself in the team development of large projects.  If there is no uniform coding practices in the team and each of the developers adheres to the principle of TIMTOWTDI, then you will not envy the newcomer to such a team. <br><br>  In 2005, an active member of the Perl community, Damian Conway, published the <a href="http://oreilly.com/catalog/9780596001735">Perl Best Practices</a> book, in which he collected and structured 256 recommendations for writing understandable, reliable, and supported Perl code.  A brief cheat sheet with a squeeze from the book can be downloaded <a href="http://refcards.com/docs/vromansj/perl-best-practices/refguide.pdf">from here</a> . <br><br>  A year later, Jeffrey Thalhammer and a group of comrades released <a href="http://search.cpan.org/perldoc%3FPerl::Critic">Perl :: Critic</a> , a flexible and extensible framework that allows you to automate the checking of Perl code for its compliance with most of the recommendations from Conway‚Äôs book, as well as many other useful practices. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Perl :: Critic is served under different sauces: firstly, the utility of the same name - perlcritic is supplied with the module, secondly, the verification of the code can be made into tests using <a href="http://search.cpan.org/perldoc%3FTest::Perl::Critic">Test :: Perl :: Critic</a> or <a href="http://search.cpan.org/perldoc%3FTest::Perl::Critic::Progressive">Test :: Perl :: Critic :: Progressive</a> ; thirdly, the critic is easily integrated into <a href="http://lug.fh-swf.de/vim/vim-perl/screenshots-en.html">VIM</a> and <a href="">Emacs</a> . <br><br>  In this recipe, I‚Äôll talk about how to check Perl code on the fly when committing to a Subversion repository.  Bon App√©tit! <br><br><a name="habracut"></a><br><br><h4>  The trigger mechanism in Subversion </h4><br>  Subversion, like many other version control systems, allows you to execute arbitrary user commands at specified phases of commit processing.  In particular, Subversion has a <code>pre-commit</code> trigger (hook) that runs just before the commit gets into the repository.  In fact, this is just a shell script of the same name that Subversion expects to find in the <code>hooks/</code> repository directory.  As one of its arguments, this script gets the ID of the current transaction.  Using this identifier, the script can fully analyze the current commit: which files or directories have been added, deleted, changed, get new content of files, diff changes, etc.  For this purpose, you can use the <code>svnlook</code> utility or the <a href="http://search.cpan.org/perldoc%3FSVN::Look">SVN :: Look</a> module. <br><br>  If the <code>pre-commit</code> hook returns 0, then the commit will be safely saved, and if not, the entire transaction will be rejected (i.e., all files, directories, property changes).  In this case, the output of the script to <code>STDERR</code> will be redirected to the svn-client.  Thus, by calling <code>Perl::Critic</code> inside a <code>pre-commit</code> hook, you can block the code with violations of the way to the repository. <br><br><h4>  From theory to practice </h4><br>  1. Download and install the <code>perlcritic-checker.pl</code> script <br><br><pre> wget http://perlcritic-checker.googlecode.com/files/perlcritic-checker-1.2.6.tar.gz
 tar -xzf perlcritic-checker-1.2.6.tar.gz
 cd perlcritic-checker-1.2.6
 perl ./Makefile.PL
 make
 make test
 sudo make install
</pre><br>  By default, the script and documentation will be installed in <code>/usr/local</code> . <br><br>  2. Create a test SVN repository <br><br><pre> export SVN_REPO = / tmp / svn_repo
 svnadmin create $ SVN_REPO
</pre><br>  3. Install the configuration files <br><br>  First, install the <code>perlcritic-checker</code> 'config: <br><br><pre> cat&gt; $ SVN_REPO / hooks / perlcritic-checker.conf &lt;&lt; 'EOF'
 #
 # perlcritic-checker's config example
 #
 {
     # Progressive mode: {0 | 1}.  In progressive mode perlcritic-checker
     # doesn't complain about existing violations but
     # introducing new ones.  Nice feature for applying Perl :: Critic
     # to the existing projects gradually.
     progressive_mode =&gt; 1,<font></font>
<font></font>
     # Emergency commits: {0 | 1}.  There are situations when you * need *
     # to commit changes bypassing all checks (eg emergency bug fixes).
     # This feat allows you to bypass Perl :: Critic using "magic" prefix in
     # comment message, eg: svn ci -m "NO CRITIC: I am in hurry" FooBar.pm
     allow_emergency_commits =&gt; 1,<font></font>
<font></font>
     # Magic prefix described above can be customized:
     emergency_comment_prefix =&gt; 'NO CRITIC',<font></font>
<font></font>
     # Limit maximal number of reported violations.  This parameter works
     # differently in strict and progressive modes.  In strict mode it
     # most severe violations
     # will be shown.  In progressive mode such behavior has no sense,
     # that's why the user will be asked to run perlcritic locally.
     #
     # In fact, this parameter is a workaround for a subtle bug in generic
     # svn-client thats when svn hook (ie perlcritic-checker.pl)
     # outputs too much data: svn-client just reports "Connection closed
     # unexpectedly ". In order to reproduce this bug several additional
     # conditions should be met:
     # - repository access scheme: 'svn: //' (svnserve daemon)
     # - client and server on different machines
     # - svn-client and -server are running on linux
     #
     # If you face the same problem, try to use the option below.
     #max_violations =&gt; 50,<font></font>
<font></font>
     # SVN repository path - to - Perl :: Critic's profile mapping.
     #
     # This feature allows you to apply different Perl :: Critic's
     # policies for different paths in the repository.  For example,
     # you can be very strict with brand-new projects, make an
     # indulgence for some existing project and completely disable
     # checking of auto-generated or third-party code.
     #
     # Each modified (added, updated, copied, moved) file name in the
     # repository is matched against a sequence of patterns below.
     # Keep in mind, * last * matching rule - wins.
     #
     # Profile paths can be either absolute or relative.  In the later
     # case they will be mapped under $ REPOS / hooks / perlcritic.d directory.
     profiles =&gt; [<font></font>
<font></font>
         # Apply very strict profile by default
         {pattern =&gt; qr {[.] (pm | pl | t) $},
             profile =&gt; 'perlcritic-brutal.conf',
         },
     ],
 }
 EOF
</pre><br>  In this configuration, it is stated that the <code>Perl::Critic</code> 'a settings for all <code>*.pm</code> , <code>*.pl</code> and <code>*.t</code> files must be taken from the <code>perlcritic-brutal.conf</code> .  We also enable the progressive mode (read below) and allow emergency commits, i.e.  commits are not checked ( <code>NO CRITIC</code> ). <br><br>  The next step is to install the <code>Perl::Critic</code> 'a profile ( <code>perlcritic-brutal.conf</code> ), which we referred to in the previous file: <br><br><pre> mkdir $ SVN_REPO / hooks / perlcritic.d
 cat&gt; $ SVN_REPO / hooks / perlcritic.d / perlcritic-brutal.conf &lt;&lt; 'EOF'
 #
 # Perl :: Critic profile example
 #<font></font>
<font></font>
 # Make perlcritic very exacting
 severity = brutal<font></font>
<font></font>
 # You can choose any level from 1 to 11, but 8 is recommended
 verbose = 8<font></font>
<font></font>
 # Colorize depending on their severity level
 color = 1<font></font>
<font></font>
 # Halt if this file contains errors
 profile-strictness = fatal<font></font>
<font></font>
 # Enable only two groups of policies: Core and Perl Best Practices
 theme = core ||  pbp<font></font>
<font></font>
 # Explicitly set full path to Perl :: Tidy's config
 [CodeLayout :: RequireTidyCode]
 perltidyrc = / etc / perltidyrc
 EOF
</pre><br>  This profile includes the strictest mode of the critic's work ( <code>severity = brutal</code> ), in which he will find fault even with trifles (however, we know that there are no trifles in aviation).  The <code>theme</code> directive indicates that of the entire set of available Policy, and there are about a hundred and fifty, you need to check only those listed in Core or Perl Best Practices groups.  We also explicitly indicate the path to the settings of the <code>perltidy</code> program, a utility for automatically formatting Perl-code.  Formatting violation is one of the reasons why a commit may not pass. <br><br>  I note that this profile contains only basic settings, but this is a good starting point.  For more information about the features of <code>Perl::Critic</code> you can read the documentation: <code>perldoc Perl::Critic</code> . <br><br>  Next, create a config for <code>perltidy</code> (with root privileges): <br><br><pre> sudo su -
 cat&gt; / etc / perltidyrc &lt;&lt; 'EOF'
 --perl-best-practices
 EOF
 exit
</pre><br>  This file is extremely simple: it instructs <code>perltidy</code> format the code according to recommendations from the already mentioned Perl Best Practices book.  If you're used to a different style, then the <i>perltidy</i> manual <i>page (1p)</i> will help you choose the formatting options you need. <br><br>  The name and path of the file was not chosen randomly.  By default, <code>perltidy</code> first checks the user config <code>$HOME/.perltidyrc</code> , and then the global one <code>/etc/perltidyrc</code> .  Thus, by placing the config in <code>/etc</code> we will make it simultaneously accessible both to <code>perlcritic-checker</code> 'a (usually working under the <code>svn</code> user) and to the <code>perltidy</code> program <code>perltidy</code> , whatever the user <code>perltidy</code> it. <br><br>  Finally, it remains for us to instruct Subversion to call the <code>perlcritic-checker.pl</code> script to verify commits.  As you might guess, for this you need to edit the <code>pre-commit</code> hook: <br><br><pre> cat&gt; $ SVN_REPO / hooks / pre-commit &lt;&lt; 'EOF'
 #! / bin / sh<font></font>
<font></font>
 #
 # SVN pre-commit hook script example
 #<font></font>
<font></font>
 REPOS = "$ 1"
 TXN = "$ 2"
 PREFIX = "/ usr / local"<font></font>
<font></font>
 # Make sure that Perl code comply to coding standards
 $ PREFIX / bin / perlcritic-checker.pl \
     --repository "$ REPOS" \
     --config "$ REPOS / hooks / perlcritic-checker.conf" \
     --transaction "$ TXN" ||  exit 1<font></font>
<font></font>
 # All checks have passed, so allow the commit
 exit 0
 EOF
 chmod 755 $ SVN_REPO / hooks / pre-commit
</pre><br>  This completes the setup phase.  Everything is ready for the first experiment. <br><br><h4>  Good, bad, progressive </h4><br>  So, create a folder for the test project in the repository and check out the working copy: <br><br><pre> export WORK_COPY = "/ tmp / test_project"
 svn mkdir file: // $ SVN_REPO / test_project -m ""
 svn checkout file: // $ SVN_REPO / test_project $ WORK_COPY
</pre><br>  For the experiment, we need a ‚Äúgood‚Äù file (file without violations): <br><br><pre> cat&gt; $ WORK_COPY / good_file.pl &lt;&lt; 'EOF'
 #! / usr / bin / perl<font></font>
<font></font>
 # ================================================= ==============================
 # REVISION: $ Id $
 # DESCRIPTION: File without violations
 # ================================================= ==============================<font></font>
<font></font>
 use strict;
 use warnings;<font></font>
<font></font>
 our $ VERSION = '1.0';<font></font>
<font></font>
 sub main {
     return;
 }<font></font>
<font></font>
 main ();
 EOF
 chmod $ 755 WORK_COPY / good_file.pl
</pre><br>  and ‚Äúbad‚Äù file (file with violations): <br><br><pre> cat&gt; $ WORK_COPY / bad_file.pl &lt;&lt; 'EOF'
 #! / usr / bin / perl<font></font>
<font></font>
 # ================================================= ==============================
 # REVISION: $ Id $
 # DESCRIPTION: File with violations
 # ================================================= ==============================<font></font>
<font></font>
 use strict;<font></font>
<font></font>
 #use warnings;<font></font>
<font></font>
 our $ VERSION = "1".  "."  .  "0";<font></font>
<font></font>
 sub main () {
     return undef;
 }<font></font>
<font></font>
 main ();
 EOF
 chmod 755 $ WORK_COPY / bad_file.pl
</pre><br>  A good file commit should pass without any problems: <br><br><pre> cd $ WORK_COPY
 svn add good_file.pl
 svn commit -m "This should be OK" good_file.pl
</pre><br>  But a bad file commit should cause critic criticism: <br><br><pre> cd $ WORK_COPY
 svn add bad_file.pl
 svn commit -m "This commit should fail" bad_file.pl
</pre><br><br><pre> Adding bad_file.pl
 Transmitting file data .svn: Commit failed (details follow):
 svn: Commit blocked by pre-commit hook (exit code 1) with output:
 test_project / bad_file.pl: [Subroutines :: ProhibitExplicitReturnUndef] "return" statement with explicit "undef" at line 15, column 5. (Severity: 5)
 test_project / bad_file.pl: [Subroutines :: ProhibitSubroutinePrototypes] Subroutine prototypes used at line 14, column 1. (Severity: 5)
 test_project / bad_file.pl: [TestingAndDebugging :: RequireUseWarnings] Code before warnings are enabled at line 12, column 1. (Severity: 4)
 test_project / bad_file.pl: [ValuesAndExpressions :: ProhibitNoisyQuotes] Quotes used at noisy string at line 12, column 22. (Severity: 2)
 test_project / bad_file.pl: [ValuesAndExpressions :: ProhibitInterpolationOfLiterals] Useless interpolation literal string at line 12, column 16. (Severity: 1)
 test_project / bad_file.pl: [ValuesAndExpressions :: ProhibitInterpolationOfLiterals] Useless interpolation literal string at line 12, column 22. (Severity: 1)
 test_project / bad_file.pl: [ValuesAndExpressions :: ProhibitInterpolationOfLiterals] Useless interpolation literal string at line 12, column 28. (Severity: 1)
 ---
 You can bypass all checks by saying "NO CRITIC" in,
 eg: svn ci -m "NO CRITIC: emergency hotfix" FooBar.pm
</pre><br><img src="https://habrastorage.org/getpro/habr/post_images/09c/5e7/84a/09c5e784a8b6e92258bc3afbeaabbe7f.png" alt="image"><br><br>  It can be seen that the violations are sorted by decreasing degree of severity (Severity), as well as painted in different colors.  If the violation relates to a specific file line, and such a majority, then the line number and the position number on this line are indicated.  If the name and brief description of the Policy does not understand its essence, then you can get extended help like this: <code>perlcritic --doc TestingAndDebugging::RequireUseWarnings | less</code> <code>perlcritic --doc TestingAndDebugging::RequireUseWarnings | less</code> <br><br>  I note that depending on the version of the <code>Perl::Critic</code> module and the list of established Policy, the output may differ slightly (to reduce the likelihood of this discrepancy, we specifically narrowed the list of active Policy using the <code>theme</code> directive in the <code>perlcritic-brutal.conf</code> ). <br><br>  But back to our bad file.  Having received a refusal from Subversion to accept our commit, you can go two ways.  The first way (correct) is to eliminate the violations and try again.  The second way (forced) is to mark the commit as emergency and thereby bypass all checks.  Here's what it looks like: <br><br><pre> cd $ WORK_COPY
 svn commit -m "NO CRITIC: I am in hurry and I dont care" bad_file.pl
</pre><br>  In this form, the commit will not be criticized and will fall into the repository bypassing the department of censorship. <br><br>  I note that emergency commits are an extreme measure and in practice they are used very rarely.  In addition to directly eliminating the violation, there are other ways to get tested.  One of them is a special comment for <code>Perl::Critic</code> <br><br><pre> ## no critic (Subroutines :: ProhibitExplicitReturnUndef)
</pre><br>  placed at the end of the line where the violation was detected (attention - ##).  In brackets, separated by commas, you can list several Policy at once.  If this comment is placed on a separate line, then its effect will be distributed until the end of the current block.  As a result, a comment placed outside the blocks will be valid until the end of the file.  In order to turn on the criticism ahead of time (i.e. before the completion of the block), it suffices to say on a separate line <br><br><pre> ## use critic
</pre><br>  I want to once again draw attention to the two characters '#' and to the fact that the Policy is turned off by name, and all are turned on at once. <br><br>  Well, and finally, if you realize that you are turning off the same Policy in the code over and over again, consider whether it is better to disable it once in the <code>Perl::Critic</code> profile.  Then, some policies can be configured.  Often in the Policy configuration, you can override the threshold values ‚Äã‚Äãof its operation, set an exception list, change the operation mode, etc. <br><br>  So we got to the most interesting - the <code>perlcritic-checker</code> 's progressive mode of operation.  Without this capability, it would be impossible to implement this system in the framework of large existing Perl projects.  As practice has shown, the number of violations in previously uncritical code (even at a non- <code>severity</code> level) is simply off scale.  Modifying the lion's share of the code, and working code, only for the sake of <code>Perl::Critic</code> 'is impractical, and the abuse of emergency commits ( <code>NO CRITIC</code> ) will reduce the value of this system to zero. <br><br>  So, how does <code>perlcritic-checker</code> 's progressive mode <code>perlcritic-checker</code> ?  In the progressive mode, <code>perlcritic-checker</code> for each modified file compares the list of violations to the TO and the list of violations NOW.  Both lists of violations are grouped by the name Policy and are supplied with a counter of occurrence.  So, if at least one violation was added to the file in the current commit before, then the entire commit will be rejected, and a message will be sent to the user, indicating what type of violations were added and in what quantity.  Thus, the <code>perlcritic-checker</code> closes its eyes to existing violations, but prohibits the introduction of new ones. <br><br>  I note that this scheme does not apply to newly added files.  At the first commit, the file is criticized in the usual strict mode, which in general is logical: there was obviously no violation in the previously non-existent file. <br><br>  Let us demonstrate by example.  As we remember, in spite of the fact that the ‚Äúbad‚Äù file contained violations, we insisted on its commit using <code>NO CRITIC</code> .  Fill in this file with new violations and fix some of the existing ones (will the <code>perlcritic-checker</code> forgive the lack of <code>use strict</code> in exchange for the included <code>use warnings</code> ?): <br><br><pre> cat&gt; $ WORK_COPY / bad_file.pl &lt;&lt; 'EOF'
 #! / usr / bin / perl<font></font>
<font></font>
 # ================================================= ==============================
 # REVISION: $ Id $
 # DESCRIPTION: File with violations (version 2)
 # ================================================= ==============================<font></font>
<font></font>
 #use strict;
 use warnings;<font></font>
<font></font>
 our $ VERSION = "1".  "."  .  "0";<font></font>
<font></font>
 sub foo () {
     1 + 1;
 }<font></font>
<font></font>
 sub main () {
     return undef;
 }<font></font>
<font></font>
 main ();
 EOF
 cd $ WORK_COPY
 svn commit -m "Add more file to file" bad_file.pl
</pre><br><br><pre> Sending bad_file.pl
 Transmitting file data .svn: Commit failed (details follow):
 svn: Commit blocked by pre-commit hook (exit code 1) with output:
 test_project / bad_file.pl: [Subroutines :: ProhibitExplicitReturnUndef] "return" statement with explicit "undef" at line 18, column 5. (Severity: 5)
 test_project / bad_file.pl: [Subroutines :: ProhibitSubroutinePrototypes] Subroutine prototypes used at line 13, column 1. (Severity: 5)
 test_project / bad_file.pl: [Subroutines :: ProhibitSubroutinePrototypes] Subroutine prototypes used at line 17, column 1. (Severity: 5)
 test_project / bad_file.pl: [TestingAndDebugging :: RequireUseStrict] Code before strictures are enabled at line 11, column 1. (Severity: 5)
 test_project / bad_file.pl: [Subroutines :: RequireFinalReturn] Subroutine does not end with "return" at line 13, column 1. (Severity: 4)
 test_project / bad_file.pl: [ValuesAndExpressions :: ProhibitNoisyQuotes] Quotes used at a noisy string at line 11, column 22. (Severity: 2)
 test_project / bad_file.pl: [ValuesAndExpressions :: ProhibitInterpolationOfLiterals] Useless interpolation literal string at line 11, column 16. (Severity: 1)
 test_project / bad_file.pl: [ValuesAndExpressions :: ProhibitInterpolationOfLiterals] Useless interpolation literal string at line 11, column 22. (Severity: 1)
 test_project / bad_file.pl: [ValuesAndExpressions :: ProhibitInterpolationOfLiterals] Useless interpolation literal string at line 11, column 28. (Severity: 1)
 test_project / bad_file.pl: [Subroutines :: ProhibitSubroutinePrototypes] You should fix at least 1 violation (s) of this type (was: 1, now: 2) (Severity: 5)
 test_project / bad_file.pl: [TestingAndDebugging :: RequireUseStrict] you should fix at least 1 violation (s) of this type (was: 0, now: 1) (Severity: 5)
 test_project / bad_file.pl: [Subroutines :: RequireFinalReturn] You must fix at least 1 violation (s) of this type (was: 0, now: 1) (Severity: 4)
 ---
 You can bypass all checks by saying "NO CRITIC" in,
 eg: svn ci -m "NO CRITIC: emergency hotfix" FooBar.pm
</pre><br><img src="https://habrastorage.org/getpro/habr/post_images/ea4/e33/d84/ea4e33d84763ab2079b17f804dbe7ff1.png" alt="image"><br><br>  As expected, the commit failed.  Pay attention to the new section of the report, highlighted by a contrasting background.  In this section, the <code>perlcritic-checker</code> showed a kind of diff violations.  In particular, it says that we added the second violation of the type <code>[Subroutines::ProhibitSubroutinePrototypes]</code> and made two new violations that were previously not found in the file at all: <code>[TestingAndDebugging::RequireUseStrict]</code> and <code>[Subroutines::RequireFinalReturn]</code> .  As follows from the report, the violation <code>[TestingAndDebugging::RequireUseWarnings]</code> , which we have corrected, does not give any additional concessions, which was to be expected. <br><br>  Here the reader may have a question: why do we need the first part of the report which simply lists all the violations, even those already existing at the time of the commit?  Let me remind you that the comparison of the lists of violations before and now is done by the name Policy and the counter of occurrence.  In other words, the <code>perlcritic-checker</code> does not distinguish the violation of the type <code>[Subroutines::ProhibitSubroutinePrototypes]</code> on line 13 and line 17. In order for this item to disappear from the ‚Äúprogressive‚Äù part of the report, the user can eliminate any of them.  Thus, the upper part of the report serves as a kind of reference book in which, by the name of the Policy, you can find the line numbers in which this Policy was violated. <br><br>  In conclusion, the <code>NO CRITIC</code> works in the progressive mode too, but abuse of this feature is highly discouraged. <br><br><h4>  Tips for further tuning </h4><br><ol><li>  Customize your editor's integration with the critic: <a href="http://lug.fh-swf.de/vim/vim-perl/screenshots-en.html">VIM</a> , <a href="">Emacs</a> . </li><li>  Customize the integration of your editor with <code>perltidy</code> : <a href="http://lug.fh-swf.de/vim/vim-perl/screenshots-en.html">VIM</a> , <a href="">Emacs</a> . </li><li>  Keep <s>your money in the savings bank</s> <code>Perl::Critic</code> 'profiles under version control and update the working copy on the server at each commit.  So all members of your team will work locally with a single profile, and any changes in it <code>perlcritic-checker</code> will pick up automatically. </li><li>  Start with the strictest profile ( <code>severity = brutal</code> , all Policy included) and add exceptions and corrections to it as necessary. </li><li>  Modify the templates for the <code>*.pm</code> , <code>*.pl</code> and <code>*.t</code> files in your editor so that they are initially correct from the point of view of the critic. </li><li>  Take the time to read the Perl Best Practices book. </li></ol><br><br><h4>  Conclusion </h4><br>  When introducing <code>Perl::Critic</code> 'into your production process, it is important to understand that this is just a convenient tool for restoring order, and not a dogma, all the rules (Policy) of which you must blindly follow.  Approaching from this position, your team will eventually come to the configuration that perfectly fits your requirements, your project and your habits. <br><br><h4>  Links </h4><br><ul><li>  <a href="http://search.cpan.org/perldoc%3FPerl::Critic">Perl :: Critic</a> </li><li>  <a href="http://search.cpan.org/perldoc%3FTest::Perl::Critic">Test :: Perl :: Critic</a> </li><li>  <a href="http://search.cpan.org/perldoc%3FTest::Perl::Critic::Progressive">Test :: Perl :: Critic :: Progressive</a> </li><li>  <a href="http://lug.fh-swf.de/vim/vim-perl/screenshots-en.html">Perl-support.vim plugin for VIM</a> (integration with perlcritic, perltidy and many other plushs) </li><li>  <a href="">Emacs integration with perlcritic</a> </li><li>  <a href="">Emacs integration with perltidy</a> </li><li>  <a href="http://code.google.com/p/perlcritic-checker/">perlcritic-checker on google code</a> </li><li>  <a href="http://search.cpan.org/dist/perlcritic-checker/">perlcritic-checker on CPAN</a> </li><li>  <a href="http://alexander-simakov.blogspot.com/2009/12/testperlcriticprogressive.html">Gradually apply coding standards with Test :: Perl :: Critic :: Progressive</a> </li><li>  <a href="">Test files and configs from this article</a> </li></ul></div><p>Source: <a href="https://habr.com/ru/post/115395/">https://habr.com/ru/post/115395/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../115388/index.html">Reverse engineering: tvali.ge service</a></li>
<li><a href="../115389/index.html">Single entry point to the web application</a></li>
<li><a href="../115392/index.html">Attention, designers! Evernote starts a 100,000 T-shirt contest. The main prize is 100,000 rubles.</a></li>
<li><a href="../115393/index.html">Beyond HTML5: Database API and IndexedDB Path</a></li>
<li><a href="../115394/index.html">Application of fuzzy search algorithms in PHP</a></li>
<li><a href="../115396/index.html">Facebook Stock Exchange</a></li>
<li><a href="../115397/index.html">Qt: working with Vkontakte API and Phonon</a></li>
<li><a href="../115398/index.html">Do it yourself: register Ltd.</a></li>
<li><a href="../115399/index.html">The craftsman created a working laser gun</a></li>
<li><a href="../115400/index.html">The latest news from the World is Me network.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
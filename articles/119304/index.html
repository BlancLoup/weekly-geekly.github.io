<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Application of an event-driven model in a web application</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The interaction of application parts with each other is an important part of the architecture of any program. 
 And there are many patterns for their ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Application of an event-driven model in a web application</h1><div class="post__text post__text-html js-mediator-article">  The interaction of application parts with each other is an important part of the architecture of any program. <br>  And there are many patterns for their implementation.  I would like to use the example of a web application to show the application of one of them, namely the Event-driven model. <br>  It is well known to any frontend developer ‚Äî every time you work with DOM events, you use this model.  Let's try to build on it is not a small web application - a file manager. <br><br><a name="habracut"></a><br><br>  Why file manager?  Because, in my opinion, this model is great for applications that need to be able to work with different sets of modules (and not only their own).  Well, also because I'm currently working on a new version of our file manager, where I use it.  So all the examples are quite real, although they are simplified beyond recognition. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      So let's get started! <br><br><h5>  What does our application consist of? </h5><ol><li>  Core.  Stores data about files and interacts with the server part. </li><li>  View.  Draws a list of files and responds to user actions </li><li>  Commands.  Perform certain actions with files </li></ol>  Now we describe how our components interact with each other. <br><br>  And in order for our enlightenment to acquire the true power of Tao, we first describe the unfortunate way of interaction between the modules - ‚Äúdirect contact‚Äù with each other. <br><br>  The kernel receives a list of files from the server side and gives it a look.  The view shows the user what is contained in the current directory and is waiting for his actions. <br>  The user clicks on the file.  View appeals to the core for an explanation of what is happening.  The kernel reassures the view, saying that nothing happened - just the file is selected, and it is now up to date. <br>  The user double-clicks the folder.  A panicked look at the core for help.  The kernel coolly informs the mind that it has addressed the wrong address, and sends it to the <i>"open"</i> command ... <br><br>  - Difficult? <br><br>  But so far tolerated.  And now add another view - directory tree.  Now the kernel has to remember that the list of the received files should be transferred to this view. <br>  And add a view - <i>¬´favorites¬ª</i> . <br>  The core is in shock - <i>‚Äúis this what you need?‚Äù</i> . <br><br>  I will not continue - and it is so clear that we have no opportunity for extensions.  To implement each new command, we will have to constantly build upon the kernel. <br><br><h4>  Ideology of events </h4><br>  And now we will meditate on the task, until as a result of enlightenment (I promised that it will come) we will not speak: <br><br>  - Any change - there is an event! <br><br>  And in order not to forget tomorrow what we meant, we will write down some details. <br><ol><li>  The application has an object, in our case, the kernel, which accepts a subscription to events. </li><li>  Everyone (including the kernel) subscribes to important events for them. </li><li>  When an event occurs, the kernel notifies all subscribers about it. </li><li>  Any object can generate an event. </li><li>  The list of events is not limited. </li></ol><br><br>  Let us return to our example and see how much easier it all became. <br>  The kernel receives a list of files from the server side and generates an "open" event.  All types paint what they should. <br>  The user clicks on the file.  The view generates a select event.  The kernel remembers which file is selected. <br>  The user double-clicks the folder.  The view generates the dblclick event.  Without a second's delay, the ‚Äúopen‚Äù command rushes into battle and forces the kernel to make a request to the server. <br><br>  - It became easier? <br><br>  Sure.  But in addition, our application has acquired two important properties. <br><ol><li>  Weak connectivity  Modules no longer need to know anything about each other. </li><li>  The second property is not so obvious, and for those who did not notice it, I will explain at the end. </li></ol><br><br>  And now let's move on to what we love the most - to write code! <br><br>  The implementation will look the same as in jQuery, with one exception - <br>  The data associated with a particular event call will be transmitted in the field of the event object itself. <br><br><pre><code class="javascript hljs"><span class="hljs-meta"><span class="hljs-meta">"use strict"</span></span>; <span class="hljs-comment"><span class="hljs-comment">//   window.elFinder = function(node, options) { var self = this, //   listeners = {}; /** *   id      * * @type Array */ this.selected = []; /** *     * * @type Object */ this.ui = {}; /** *     * * @type Object */ this.commands = {}; /** *   . * * @param String  ,          * @param Object   * @return elFinder */ this.bind = function(event, callback) { var i; if (typeof(callback) == 'function') { event = ('' + event).toLowerCase().split(/\s+/); for (i = 0; i &lt; event.length; i++) { if (listeners[event[i]] === void(0)) { listeners[event[i]] = []; } listeners[event[i]].push(callback); } } return this; }; /** *  . * * @param String   * @param Object   * @return elFinder */ this.unbind = function(event, callback) { var l = listeners[('' + event).toLowerCase()] || [], i = l.indexOf(callback); i &gt; -1 &amp;&amp; l.splice(i, 1); return this; }; /** *     . * * @param String   * @param Object     * @return elFinder */ this.trigger = function(event, data) { var event = event.toLowerCase(), handlers = listeners[event] || [], i; if (handlers.length) { event = $.Event(event); for (i = 0; i &lt; handlers.length; i++) { //           //    event.data = $.extend(true, {}, data); try { if (handlers[i](event, this) === false || event.isDefaultPrevented()) { break; } } catch (ex) { window.console &amp;&amp; window.console.log &amp;&amp; window.console.log(ex); } } } return this; } /** *     . * * @param Object    * @return jQuery.Deferred */ this.ajax = function(data) { var self = this, dfrd = $.Deferred() .fail(function(error) { self.error({error : error}); }) .done(function(data) { //      self.trigger(data.cmd, data); }); $.ajax({ // ...   data : data }).error(function() { dfrd.reject('Unable to connect to backend'); }).success(function(data) { if (!this.validData(data)) { dfrd.reject('Invalid data from backend'); } else if (data.error) { dfrd.reject(data.error); } dfrd.resolve(data); }) return dfrd; } //  -  - // .............. //   ""   // -  / . $.each(['open', 'select', 'error'], function(i, name) { self[name] = function() { var arg = arguments[0]; return arguments.length == 1 &amp;&amp; typeof(arg) == 'function' ? self.bind(name, arg) : self.trigger(name, $.isPlainObject(arg) ? arg : {}); } }); //       this.open(function(e) { //     }) .select(function(e) { //     this.selected = e.data.selected; }) .error(function(e) { //     alert(e.data.error); }); } elFinder.prototype = { //  views : { //   cwd : function(fm, node) { var self = this, view = $('&lt;div/&gt;') .appendTo(node) .delegate('div[id]', 'click', function() { view.find('div[id]').removeClass('selected'); $(this).addClass('selected'); //      "select" fm.select({selected : [this.id]}); }) .delegate('div[id]', 'dblclick', function() { fm.trigger('dblclick', {target : this.id}); }) ; //    "open" fm.open(function(e) { var files = e.data.files; //      }); } }, //  commands : { open : function(fm) { this.enabled = false; //    "dblclick" fm.select(function(e) { // ,     / //     ,     Enter this.enabled = e.data.selected.length &gt; 0; }) bind('dblclick', function(e) { //     fm.ajax({cmd : 'open', target : e.data.target}); }); } } }</span></span></code> </pre> <br><br>  I repeat once again that the code is greatly simplified and significantly differs from the real code of our project.  If you are curious to see what it looks like in reality - a <a href="https://github.com/Studio-42/elFinder/tree/experimental">project on github</a> <br><br><h4>  And now let's summarize. </h4><br><h5>  What benefits did we get by using the event-driven model? </h5><br><ol><li>  Weakly connected components of the application and, as a result, are good opportunities for its further expansion. </li><li>  Open API.  This is not obvious at first, but without doing anything on purpose, <br>  we have created an API that will allow other developers to create extensions without interfering with the main project code.  And any external script will be able to interact with our application. </li></ol><br><h5>  Disadvantages: </h5><br><ol><li>  "Broadcast".  You can not send a message to a specific listener.  In our case it is not important. </li><li>  "Insecurity".  Any object can listen to any event and any object can generate an event.  In our case, the second is important.  That is, students can not trust the data that is transmitted to them.  It is solved by checking the data in the listener. </li><li>  Who is the first - that and sneakers.  Any listener can stop further notification of the event.  In theory, not solved in any way.  Partially solved by controlling the sequence of connecting modules / subscriptions to events.  But we are not the first year working with DOM events and this flaw is well known to us. </li></ol><br>  In my opinion, the only significant minus for us does not outweigh all the advantages of using this remarkable pattern. <br><br>  Related Links: <br>  <a href="http://en.wikipedia.org/wiki/Coupling_(computer_science)">en.wikipedia.org/wiki/Coupling_(computer_science)</a> <br>  <a href="http://en.wikipedia.org/wiki/Event-driven_architecture">en.wikipedia.org/wiki/Event-driven_architecture</a> <br>  <a href="http://ru.wikipedia.org/wiki/%25D0%25A1%25D0%25BE%25D0%25B1%25D1%258B%25D1%2582%25D0%25B8%25D0%25B9%25D0%25BD%25D0%25BE-%25D0%25BE%25D1%2580%25D0%25B8%25D0%25B5%25D0%25BD%25D1%2582%25D0%25B8%25D1%2580%25D0%25BE%25D0%25B2%25D0%25B0%25D0%25BD%25D0%25BD%25D0%25BE%25D0%25B5_%25D0%25BF%25D1%2580%25D0%25BE%25D0%25B3%25D1%2580%25D0%25B0%25D0%25BC%25D0%25BC%25D0%25B8%25D1%2580%25D0%25BE%25D0%25B2%25D0%25B0%25D0%25BD%25D0%25B8%25D0%25B5">ru.wikipedia.org/wiki/Event-oriented_programming</a> </div><p>Source: <a href="https://habr.com/ru/post/119304/">https://habr.com/ru/post/119304/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../119291/index.html">HTML5 + CSS3 + Daft Punk</a></li>
<li><a href="../119298/index.html">Microsoft can become a partner Baidu</a></li>
<li><a href="../119300/index.html">GPH Caanoo FAQ</a></li>
<li><a href="../119301/index.html">Search files phpinfo.php, part 2</a></li>
<li><a href="../119302/index.html">From June 2 to 5, 2011, with the support of the Russian Venture Company, we will organize the Founders BootCamp in the MSU Science Park</a></li>
<li><a href="../119305/index.html">Another Canvas Guide [3]: Drawing Images and Text, Saving Images and States</a></li>
<li><a href="../119306/index.html">We create and remember a long password in a short period of time.</a></li>
<li><a href="../119308/index.html">Quickly create a temporary project</a></li>
<li><a href="../119309/index.html">Development of IFrame application for VKontakte</a></li>
<li><a href="../119311/index.html">How do you set the font-size property today?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
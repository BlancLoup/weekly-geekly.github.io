<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Practice functional JavaScript programming using Ramda</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="We at rangle.io have been fond of functional programming for a long time, and have already tested Underscore and Lodash . But we recently stumbled upo...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Practice functional JavaScript programming using Ramda</h1><div class="post__text post__text-html js-mediator-article">  We at <a href="http://rangle.io/">rangle.io</a> have been <a href="http://rangle.io/">fond of</a> functional programming for a long time, and have already tested <a href="http://underscorejs.org/">Underscore</a> and <a href="https://lodash.com/">Lodash</a> .  But we recently stumbled upon the <a href="http://ramdajs.com/docs/">Ramda</a> library, which at first glance looks like Underscore, but differs in a small but important area.  Ramda offers roughly the same set of methods as Underscore, but it organizes the work with them in such a way that the functional composition becomes easier. <br><br>  The difference between Ramda and Underscore is in two key places - currying and composition. <br><a name="habracut"></a><br><h4>  Currying </h4><br>  Currying is the transformation of a function that expects several parameters to one that, when it receives less of them, returns a new function that waits for the remaining parameters. <br><br><pre><code class="javascript hljs">R.multiply(<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">10</span></span>); <span class="hljs-comment"><span class="hljs-comment">//  20</span></span></code> </pre> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      We passed both parameters to the function. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> multiplyByTwo = R.multiply(<span class="hljs-number"><span class="hljs-number">2</span></span>); multiplyByTwo(<span class="hljs-number"><span class="hljs-number">10</span></span>); <span class="hljs-comment"><span class="hljs-comment">//  20</span></span></code> </pre><br><br>  Cool.  We have created a new function multiplyByTwo, which is essentially 2, embedded in multiply ().  Now you can pass any value to our multiplyByTwo.  And perhaps this is because in the Ramda all functions support currying. <br><br>  The process goes from right to left: if you miss a few arguments, Ramda assumes that you missed the ones on the right.  Therefore, functions that take an array and a function usually expect a function as the first argument and an array as the second.  And in Underscore, the opposite is true: <br><br><pre> <code class="javascript hljs">_.map([<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span>,<span class="hljs-number"><span class="hljs-number">3</span></span>], _.add(<span class="hljs-number"><span class="hljs-number">1</span></span>)) <span class="hljs-comment"><span class="hljs-comment">// 2,3,4</span></span></code> </pre><br><br>  Vs: <br><br><pre> <code class="javascript hljs">R.map(R.add(<span class="hljs-number"><span class="hljs-number">1</span></span>), [<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span>,<span class="hljs-number"><span class="hljs-number">3</span></span>]); <span class="hljs-comment"><span class="hljs-comment">// 2,3,4</span></span></code> </pre><br><br>  Combining the ‚Äúfirst operation, then the data‚Äù approach with the right-to-left currying allows us to specify what we need to do and return to the function that does it.  Then we can transfer the necessary data to this function.  Currying becomes simple and practical. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> addOneToAll = R.map(R.add(<span class="hljs-number"><span class="hljs-number">1</span></span>)); addOneToAll([<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span>,<span class="hljs-number"><span class="hljs-number">3</span></span>]); <span class="hljs-comment"><span class="hljs-comment">//  2,3,4</span></span></code> </pre><br><br>  Here is an example more complicated.  Suppose we make a request to the server, get an array and extract the value of the cost (cost) from each element.  Using Underscore, one could do this: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">return</span></span> getItems() .then(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">items</span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> _.pluck(items, <span class="hljs-string"><span class="hljs-string">'cost'</span></span>); });</code> </pre><br><br>  Using Ramda, you can remove unnecessary operations: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">return</span></span> getItems() .then(R.pluck(<span class="hljs-string"><span class="hljs-string">'cost'</span></span>));</code> </pre><br><br>  When we call R.pluck ('cost'), it returns a function that extracts cost from each element of the array.  Namely, this is what we need to transfer to .then ().  But for complete happiness, it is necessary to combine the currying with the composition. <br><br><h4>  Composition </h4><br>  A functional composition is an operation that takes functions f and g and returns a function h such that h (x) = f (g (x)).  Ramda has a compose () function for this.  Combining these two concepts, we can build the complex work of functions from smaller components. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> getCostWithTax = R.compose( R.multiply(<span class="hljs-number"><span class="hljs-number">1</span></span> + TAX_RATE), <span class="hljs-comment"><span class="hljs-comment">//   R.prop('cost') //   'cost' );</span></span></code> </pre><br><br>  It turns out a function that pulls the cost out of the object and multiplies the result by 1.13 <br><br>  The standard ‚Äúcompose‚Äù function performs right-to-left operations.  If this seems counterintuitive to you, you can use R.pipe (), which works, R.compose (), only from left to right: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> getCostWithTax = R.pipe( R.prop(<span class="hljs-string"><span class="hljs-string">'cost'</span></span>), <span class="hljs-comment"><span class="hljs-comment">//   'cost' R.multiply(1 + TAX_RATE) //   );</span></span></code> </pre><br><br>  The R.compose and R.pipe functions can take up to 10 arguments. <br><br>  Underscore, of course, also supports currying and composition, but they are rarely used there, because currying in Underscore is inconvenient to use.  Ramda makes it easy to combine these two techniques. <br><br>  At first we fell in love with Ramda.  Its style generates extensible, declarative code that is easy to test.  The composition is performed in a natural way and leads to a code that is easy to understand.  But then ... <br><br>  We found that things become more confusing when using asynchronous functions that return promises: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> getCostWithTaxAsync = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> getCostWithTax = R.pipe( R.prop(<span class="hljs-string"><span class="hljs-string">'cost'</span></span>), <span class="hljs-comment"><span class="hljs-comment">//   'cost' R.multiply(1 + TAX_RATE) //    1.13 ); return getItem() .then(getCostWithTax); }</span></span></code> </pre><br><br>  Of course, this is better than without Ramda, but I would like to get something like: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> getCostWithTaxAsync = R.pipe( getItem, <span class="hljs-comment"><span class="hljs-comment">//   R.prop('cost'), //   'cost' R.multiply(1 + TAX_RATE) //   1.13 );</span></span></code> </pre><br><br>  But this will not work, because getItem () returns a promise, and the function returned by R.prop () expects a value. <br><br><h4>  Promise composition </h4><br>  We contacted the developers of Ramda and offered a version of the composition that would automatically unwrap promises, and asynchronous functions could be associated with functions that expect value.  After much discussion, we agreed to implement this approach in the form of new functions: R.pCompose () and R.pPipe () - where ‚Äúp‚Äù means ‚Äúpromise‚Äù. <br><br>  And with R.pPipe we can do what we need: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> getCostWithTaxAsync = R.pPipe( getItem, <span class="hljs-comment"><span class="hljs-comment">//   R.prop('cost'), //   'cost' R.multiply(1 + TAX_RATE) //   1.13 ); //    cost  </span></span></code> </pre></div><p>Source: <a href="https://habr.com/ru/post/251729/">https://habr.com/ru/post/251729/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../251711/index.html">Blog of the Department of Information Technology of the city of Moscow on "Habrahabr"</a></li>
<li><a href="../251715/index.html">How I passed the interview in Yandex: my difficult but successful experience</a></li>
<li><a href="../251717/index.html">What is SBC (Border Controller Sessions) and why is it needed?</a></li>
<li><a href="../251721/index.html">Install Drupal 7.x + modules + localization in a few minutes</a></li>
<li><a href="../251723/index.html">Create your first desktop application with HTML, JS and Node-WebKit</a></li>
<li><a href="../251745/index.html">MongoDB 3 Announcement</a></li>
<li><a href="../251747/index.html">Do it yourself: MSc Computer Science at the level of top American universities from home</a></li>
<li><a href="../251749/index.html">FindBugs 3.0.1 released</a></li>
<li><a href="../251751/index.html">Proof of the incorrect sorting algorithm Android, Java and Python</a></li>
<li><a href="../251755/index.html">Visualize it</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Mediabox</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Mediabox - GPL3 web application that allows you to store files, play audio and video in formats that play medialement js , display images, make notes ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Mediabox</h1><div class="post__text post__text-html js-mediator-article">  Mediabox - GPL3 web application that allows you to store files, play audio and video in formats that play <a href="http://mediaelementjs.com/">medialement js</a> , display images, make notes on them, add tags and write comments. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ad1/c50/c40/ad1c50c40c818de9124b0f70ed5c26c7.png"><br><br>  Mediabox continues the ideas of past Ostora <a href="https://github.com/Zazza/fm">FM</a> and <a href="https://github.com/Zazza/photo">Photo</a> , and is also a slightly modified Mediabox, created for Xvid. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <a name="habracut"></a><br><br>  The application has been in beta for a long time, but since it has been open source, it‚Äôs time to share it.  Any comments, edits and improvements are welcome. <br>  The logo and the CSS styles themselves were created by XVID and remained unchanged. <br><br>  The application consists of three parts: <br><br>  1) <b>Frontend</b> .  Uses many different libraries: <br>  - jquery <br>  - Kendo UI Web, or rather version 2013.3.1119.open-source (https://github.com/Zazza/Kenju) <br>  - bootstrap2 - JS is used only for displaying a dropdown <br>  - medialement - to play audio and video files <br>  - jquery.Jcrop - to make marks on images <br>  - jquery.timer.js - need for swipebox <br>  - jquery.swipebox.js - view images on full screen and slideshow <br>  - shift.jquery.js - selection of files in the usual way (CTRL, SHIFL) <br>  - load-image.js - create preview images on the frontend side <br>  - webtoolkit.url.js - UTF8 URL decode <br><br>  RequireJS is used for convenient work with a large number of JS files. <br>  Frontend works with Backend and Storage through the API. <br><br>  2) <b>Backend</b> .  It stores information about the file structure, files (including preview for images) and provides user authorization. <br>  The original backend was written entirely in JS ( <a href="http://threecrickets.com/prudence/">Prudence</a> ).  Frontend is an independent part of the application, and therefore weakly connected with the backend.  This approach made it relatively easy to create backend using PHP using Yii.  Transferring the application to PHP was made specifically so that as many users as possible can work with the mediabox.  I am not a big fan of using the Yii framework to create applications with non-standard functionality.  But nevertheless, he allowed to achieve the necessary task as quickly as possible thanks to the powerful Active Record and simple unambiguous structure of the application. <br><br>  DB schema: <br><img src="https://habrastorage.org/getpro/habr/post_images/097/67a/ee6/09767aee634c0c2236ecd0ad1d26a3d6.png"><br><br>  3) <b>Storage</b> .  The task of storage is to store, read and delete files in the file system.  Theoretically, storage can use both local or remote FS and cloud storage for storing files: Amazon S3, Google Drive, Yandex disk, etc. <br>  &lt;a href=" <a href="https://github.com/Zazza/mediabox-storage">github.com/Zazza/mediabox-storage</a> ‚Äù&gt; Simple Mediabox Storage - PHP application, Silex framework.  The application does not use the database, I wanted to make it as simple as possible. <br><br><h5>  Demo </h5><br><br>  <b>URL:</b> <a href="http://mediabox.8x86.ru/">mediabox.8x86.ru</a> <br>  <b>Login / Password:</b> test / test <br><br><h5>  Installation </h5><br><br>  Github: <a href="https://github.com/Zazza/mediabox-php-yii">github.com/Zazza/mediabox-php-yii</a> <br><br>  From the SQL directory, you need to import mediabox-structure.sql and mediabox-data.sql files into the database. <br><br>  Then in /app/config/main.php you need to fix: <br><pre><code class="php hljs"><span class="hljs-string"><span class="hljs-string">'db'</span></span>=&gt;<span class="hljs-keyword"><span class="hljs-keyword">array</span></span>( <span class="hljs-string"><span class="hljs-string">'connectionString'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'mysql:host=localhost;dbname=mediabox'</span></span>, <span class="hljs-string"><span class="hljs-string">'emulatePrepare'</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>, <span class="hljs-string"><span class="hljs-string">'username'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'mediabox'</span></span>, <span class="hljs-string"><span class="hljs-string">'password'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'mediabox'</span></span>, <span class="hljs-string"><span class="hljs-string">'charset'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'utf8'</span></span>, ),</code> </pre> <br><br>  Backend requires YII framework files, by default the framework directory is located in the same place as app and web. <br><br>  Login / password to enter: admin / admin <br><br>  Installing Simple Storage: <br>  Github: <a href="https://github.com/Zazza/mediabox-storage">github.com/Zazza/mediabox-storage</a> <br><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> mediabox-storage/silex/ php composer.phar install</code> </pre><br><br><h5>  API </h5><br><br><h6>  File management </h6><br><br><table><tbody><tr><td>  <b>URL</b> </td><td>  <b>Request</b> </td><td>  <b>Answer</b> </td><td>  <b>Description</b> </td></tr><tr><td>  / fm / fs / </td><td>  $ _GET ["id"] </td><td>  Json <br>  { <br>  text: ..., <br>  id: ..., <br>  hasChildren: [true or false], <br>  spriteCssClass: "[folder]" <br>  } <br></td><td>  Gets the directory structure for treeview </td></tr><tr><td>  / fm / chdir / </td><td>  $ _GET ["id"] </td><td>  * File JSON Object </td><td>  Gets a list of files in the current directory </td></tr><tr><td>  / fm / upload / </td><td>  $ _GET ["file"] <br>  $ _GET ["size"] <br>  $ _GET ["extension"] </td><td>  * File JSON Object </td><td>  Adds a new file to the database </td></tr><tr><td>  / fm / thumb / [FILE_ID] / </td><td>  $ _POST ["data"] </td><td></td><td>  Saves a preview if the uploaded file is an image. </td></tr><tr><td>  / fm / getThumb / </td><td>  $ _GET ["name"], where name = file_id </td><td>  Content-Type: image / png <br>  Binary data </td><td>  Gets a preview </td></tr><tr><td>  / fm / copy / </td><td>  $ _POST ["file"] (mb several) <br>  $ _POST ["folder"] (several MB) </td><td></td><td>  Saves in session a list of files to copy. </td></tr><tr><td>  / fm / restore / </td><td>  $ _POST ["file"] (mb several) <br>  $ _POST ["folder"] (several MB) </td><td></td><td>  Recover files from recycle bin </td></tr><tr><td>  / fm / getTypesNum / </td><td>  $ _GET ["id"] </td><td>  Json <br>  { <br>  all =&gt; [total files], <br>  image =&gt; [number of image files], <br>  video =&gt; [number of video files], <br>  audio =&gt; [number of audio files], <br>  other =&gt; [number of other files], <br>  path =&gt; [HTML STRING] <br>  } </td><td>  Gets the number of files by type and HTML string of the current path in FS </td></tr><tr><td>  / fm / create / </td><td>  $ _GET ["name"] </td><td>  ** Folder JSON Object </td><td>  Create a folder </td></tr><tr><td>  / fm / getTrash / </td><td>  $ _GET ["id"] (many) </td><td>  * File JSON Object </td><td>  Get the list of files in the basket </td></tr><tr><td>  / fm / fileToTrash / </td><td>  $ _GET ["id"] (many) </td><td></td><td>  Move file to recycle bin </td></tr><tr><td>  / fm / folderToTrash / </td><td>  $ _GET ["id"] (many) </td><td></td><td>  Move directory to trash </td></tr><tr><td>  / fm / remove / </td><td>  $ _GET ["id"] </td><td></td><td>  Delete file from database and storage </td></tr><tr><td>  / fm / rmFolder / </td><td>  $ _GET ["id"] </td><td></td><td>  Remove directory from DB and storage <br></td></tr><tr><td>  / fm / removeFileByName / </td><td>  $ _GET ["name"] </td><td>  PLAIN TEXT <br>  return file_id </td><td>  Delete the file from the database in the current directory by name (needed to cancel the current download) </td></tr><tr><td>  / fm / buffer / </td><td>  * File JSON Object </td><td></td><td>  Get a list of files in the buffer (for copying) </td></tr><tr><td>  / fm / past / </td><td></td><td></td><td>  Moves files from session to current directory </td></tr><tr><td>  / fm / deleteFileFromBuffer / <br></td><td>  $ _GET ["id"] </td><td>  * File JSON Object </td><td>  Delete file from clipboard (for copying) </td></tr><tr><td>  / fm / clearBuffer / </td><td></td><td></td><td>  Clear buffer (copy) <br></td></tr><tr><td>  / fm / sort / </td><td>  $ _GET ["type"] </td><td></td><td>  Apply file sorting </td></tr><tr><td>  / fm / view / </td><td>  $ _GET [¬´view¬ª] </td><td></td><td>  Apply file display mode <br></td></tr><tr><td>  / fm / types / </td><td>  $ _GET ["other"] <br>  $ _GET ["image"] <br>  $ _GET ["video"] <br>  $ _GET ["music"] </td><td></td><td>  Save the list - which file types to display and which not </td></tr></tbody></table><br><br>  * File JSON Object: <br><pre> <code class="javascript hljs">{ <span class="hljs-attr"><span class="hljs-attr">id</span></span>: ‚Ä¶, <span class="hljs-attr"><span class="hljs-attr">name</span></span>: ‚Ä¶, <span class="hljs-attr"><span class="hljs-attr">shortname</span></span>: ‚Ä¶, <span class="hljs-attr"><span class="hljs-attr">obj</span></span>: file‚Äù, <span class="hljs-attr"><span class="hljs-attr">type</span></span>: [video,audio,‚Ä¶], <span class="hljs-attr"><span class="hljs-attr">mimetype</span></span>: ‚Ä¶, <span class="hljs-attr"><span class="hljs-attr">size</span></span>: ‚Ä¶, <span class="hljs-attr"><span class="hljs-attr">date</span></span>: ‚Ä¶, <span class="hljs-attr"><span class="hljs-attr">ico</span></span>: ‚Ä¶, <span class="hljs-attr"><span class="hljs-attr">src</span></span>: ‚Ä¶, <span class="hljs-attr"><span class="hljs-attr">ext</span></span>: ‚Ä¶, }</code> </pre><br><br>  ** Folder JSON Object: <br><pre> <code class="nginx hljs">{ Id: ‚Ä¶, name: ‚Ä¶, shortname: ‚Ä¶, obj: "folder", date: ‚Ä¶, size: ‚Ä¶, ico: ‚Ä¶, parent: [<span class="hljs-attribute"><span class="hljs-attribute">ID</span></span>   ] }</code> </pre><br><br><h6>  Audio </h6><br><br><table><tbody><tr><td>  <b>URL</b> </td><td>  <b>Request</b> </td><td>  <b>Answer</b> </td><td>  <b>Description</b> </td></tr><tr><td>  / audio / saveList / </td><td>  $ _POST ["track"] (many) </td><td></td><td>  Save track in current playlist </td></tr><tr><td>  / audio / createList / </td><td>  $ _GET ["name"] </td><td></td><td>  Create New Playlist </td></tr><tr><td>  / audio / showList / </td><td></td><td>  Json <br>  { <br>  Id: ..., <br>  name: ... <br>  } </td><td>  Get a list of playlists </td></tr><tr><td>  / audio / getTracksList / </td><td>  Json <br>  { <br>  Id: ..., <br>  name: ... <br>  } </td><td></td><td>  Current tracks in the default playlist </td></tr><tr><td>  / audio / setPlaylist / </td><td>  $ _GET ["playlist-id"] </td><td></td><td>  Make playlist current </td></tr><tr><td>  / audio / deletePlaylist / </td><td>  $ _GET ["playlist-id"] </td><td></td><td>  Delete playlist </td></tr><tr><td>  / audio / volume / </td><td>  $ _GET ["level"] </td><td></td><td>  Change volume </td></tr></tbody></table><br><br><h6>  Images </h6><br><table><tbody><tr><td>  <b>URL</b> </td><td>  <b>Request</b> </td><td>  <b>Answer</b> </td><td>  <b>Description</b> </td></tr><tr><td>  / image / setCrop / </td><td>  $ _GET ["_ id"] <br>  $ _GET ["desc"] <br>  $ _GET ["ws"] <br>  $ _GET ["x1"] <br>  $ _GET ["x2"] <br>  $ _GET ["y1"] <br>  $ _GET ["y2"] </td><td></td><td>  Save tag to photo </td></tr><tr><td>  / image / addTag / </td><td>  $ _GET ["_ id"] <br>  $ _GET ["tag"] </td><td></td><td>  Add a tag </td></tr><tr><td>  / image / getCrops / </td><td>  $ _GET ["id"] </td><td>  Json <br>  { <br>  x1: ..., <br>  x2: ..., <br>  y1: ..., <br>  y2: ..., <br>  ws: [image height when ticking], <br>  description: ..., <br>  } </td><td>  Get tagging (coordinates and text) for the image </td></tr><tr><td>  / image / getTags / </td><td>  $ _GET ["id"] </td><td>  Json <br>  { <br>  tag: ... <br>  } </td><td>  Get tags for image </td></tr><tr><td>  / image / addComment / </td><td>  $ _GET ["id"] <br>  $ _GET ["text"] </td><td></td><td>  Add a comment </td></tr><tr><td>  / image / getComments / </td><td>  $ _GET ["id"] </td><td>  Json <br>  { <br>  text: ..., <br>  user: ..., <br>  timestamp: ..., <br>  } </td><td>  Get comments for the image </td></tr><tr><td>  / image / getAllTags / </td><td></td><td>  Json <br>  { <br>  tag, tag, ... <br>  } </td><td>  Get a list of all tags </td></tr><tr><td>  / image / getAllCrops / </td><td></td><td>  Json <br>  { <br>  label name, label name, ... <br>  } </td><td>  Get a list of all notes </td></tr><tr><td>  / image / selTag / </td><td>  $ _GET ["tag"] </td><td></td><td>  Select tag - returns a list of tags and labels for current images. </td></tr><tr><td>  / image / selCrop / </td><td>  $ _GET ["crop"] </td><td></td><td>  Select a tag - returns a list of tags and labels for current images </td></tr><tr><td>  / image / getFsImg / </td><td></td><td>  * File JSON Object: <br>  { <br>  id: ..., <br>  name: ..., <br>  shortname: ..., <br>  obj: file ‚Äù, <br>  type: [video, audio, ...], <br>  mimetype: ..., <br>  size: ..., <br>  date: ..., <br>  ico: ..., <br>  src: ..., <br>  ext: ..., <br>  } </td><td>  Get a list of images that satisfy the selected tags and tags. </td></tr></tbody></table><br><br><h6>  API Storage </h6><br><br><table><tbody><tr><td>  <b>URL</b> </td><td>  <b>Request</b> </td><td>  <b>Answer</b> </td><td>  <b>Description</b> </td></tr><tr><td>  / save / </td><td>  $ _POST ["id"] <br>  $ _POST ["name"] + file </td><td>  Save file </td></tr><tr><td>  / get / </td><td>  $ _GET ["id"] </td><td>  File streaming </td><td>  Get file </td></tr><tr><td>  / remove / </td><td>  $ _GET ["id"] </td><td></td><td>  Delete a file </td></tr></tbody></table><br><br>  PS <br>  <a href="https://github.com/Zazza/mediabox">Old version</a> with a different backend. </div><p>Source: <a href="https://habr.com/ru/post/221737/">https://habr.com/ru/post/221737/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../221721/index.html">PVS-Studio now supports C ++ / CLI</a></li>
<li><a href="../221723/index.html">No one can handle errors</a></li>
<li><a href="../221727/index.html">Last day of registration for the all-Ukrainian UA Web Challenge VI championship for front-end developers</a></li>
<li><a href="../221733/index.html">What is the difference between factory and provider in AngularJS (on fingers)</a></li>
<li><a href="../221735/index.html">Imagine Cup 2014, as it was or a three-year path to the final</a></li>
<li><a href="../221739/index.html">We try native Inferno OS on Raspberry Pi</a></li>
<li><a href="../221741/index.html">Entering passwords when building projects using gradle</a></li>
<li><a href="../221743/index.html">Python-digest # 25. News, interesting projects, articles and interviews [April 28, 2014 - May 4, 2014]</a></li>
<li><a href="../221745/index.html">IPv6 in Cisco or the future is near (Part 1)</a></li>
<li><a href="../221751/index.html">Highscreen Zera S - a compact smartphone with a 4.5 "screen</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
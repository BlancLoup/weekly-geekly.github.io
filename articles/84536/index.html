<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Netbook tuning for maximum HDTV performance</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Good day, habrovchane! 

 On Habr√© there was already a small article on this topic, it was called "Acceleration of HD-video playback . " For those to ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Netbook tuning for maximum HDTV performance</h1><div class="post__text post__text-html js-mediator-article">  <b>Good day, habrovchane!</b> <br><br>  On Habr√© there was already a small article on this topic, it was called <a href="http://habrahabr.ru/blogs/i_am_clever/57676/">"Acceleration of HD-video playback</a> . <a href="http://habrahabr.ru/blogs/i_am_clever/57676/">"</a>  For those to whom even the methods suggested in it did not help, I wrote this text - having considered, among other things, the issue with the work of subtitles. <br><br>  I myself also belong to the people mentioned above, because I use one of the first netbooks (Asus EeePc 701), the nominal frequency of its processor is 600 MHz, and above 810 it does not ‚Äúchase‚Äù me - it crashes to BSOD.  In addition, it has an Intel GMA 900 video card built into the chipset that does not have any hardware support for HD video.  <font color="#0000AA">Update: RAM I bought up to 2 GB.</font>  The task was to force the netbook to play the file with the following characteristics: <br><ul><li>  mp4 container </li><li>  1280x720 resolution (HDTV 720p) </li><li>  H264 / AVC video </li><li>  sound AAC 160-250 Kbps </li><li>  average total bitrate 1.9 Mbps </li><li>  maximum video bitrate 14 Mbps </li></ul><br><a name="habracut"></a><br>  Unlike any other HD-video (I over-endured short brakes and look further), my task has additional difficulties: <br>  <b>1. the need to display subtitles.</b>  With such limited resources as that of a similar netbook, the output of subtitles in the "standard" way (via VobSub) when decoding HDTV "at the limit" gives a sensitive additional load <br>  <b>2. Output subtitles should not run away, desynchronizing with the video.</b> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      I took a test file, the characteristics of which are listed above, and began to try on it various combinations of codecs, players and settings.  It took about 3 days to sort through the options.  If you tell about all those that did not work - the article will be several times more :) therefore I will limit myself to those examples that are given in the above text ‚ÄúAcceleration of HD-video playback‚Äù. <br><br>  First, about choosing a test video.  This is a piece of the usual anime (characterized by a lower bit rate with the same resolution and quality as the movies), but with a completely unscrupulous screensaver, where each frame is a highly detailed picture with an abundance of the smallest details, and such kind of pictures "appear" through one another, in addition to the ‚Äúcamera‚Äù movement.  It turns out the effect of "noise" of the image, which gives just a wild load when decoding.  I thought that if I could force the computer to scroll through this fragment, without having synchronized the sound and subtitles with the video track, the method will work for any anime within the specified bit rate (up to 10 Mbps - with a guarantee).  Most likely, the specified maximum video bitrate of 14 Mbps corresponds to this screensaver, or rather its smallest heaviest piece. <br><br>  <i>Among other things, VobSub didn‚Äôt want to show subtitles out of the box, and I decided not to add new variables to myself and do with the subtitles that the player gives.</i>  <i>First ‚Äúgo‚Äù, and then you can take care of ‚Äúcheckers‚Äù - so setting up VobSub will be the subject of my next ‚Äústudy‚Äù :)</i> <br><br>  <b>So, the result of the work:</b> <br><br>  Any options with Media Player Classic (HomeCinema mod) ended in failure.  Torn video - using the built-in H264 / AVC decoder, using ffmpeg-mt from ffdshow, and using the DivX h264 / AVC codec.  The video slows down, the sound is normal, as a result - the sound runs forward.  Tried heaps of options for settings - with the omission of frames, changing the priority of the player and other things.  For a tick, I will mention that any postprocessing was (essno!) Disabled, both in the codec settings and in the player, and in addition to the player no demanding tasks were launched. <br><br>  The situation drastically changed when I installed CoreAVC 2.0 - yes, this is a paid codec, so I don‚Äôt provide any links and leave it to the reader‚Äôs conscience.  Now his website has a price of ~ $ 10 - inexpensive, considering that this is the only way to watch HDTV-video on such a weak gland, like mine.  So, the video has become noticeably smooth - though without sharp jerks.  Actually, this solves the problem only in part - from time to time the video playback slows down a lot, and the subtitles behave completely unpredictably, the timing is constantly lost.  It seems to fit the text under the sound / video ... and then a small excerpt with a high bit rate - and again out of sync. <br><br>  And then I turn to the third part of my story - the problem solves one single player.  This is a well-known Crystal Player, from which I personally "wept" a few years ago.  I didn‚Äôt have a special desire to use it again - everyone would be satisfied with MPC HomeCinema ... But only Crystal Player had a key opportunity - decoding the video stream ‚Äúhenceforth‚Äù into the buffer, in accordance with the set buffer size.  I did not find such an opportunity with any other player.  To clear my conscience, I should say that I watched only the most popular players (BSPlayer, VLC, smplayer, others), and not all of them installed.  If suddenly you find this opportunity in someone else - write to me!  So, nominally, the setting is called ‚ÄúFrame Buffer Size‚Äù with a maximum value of ‚Äú50% of memory‚Äù. <br><br>  Why nominally?  The fact is that when setting this value in ‚Äú10% of memory‚Äù, the player caches up to 93 frames.  When exhibiting ‚Äú50% of memory‚Äù, the number of cached frames increases to (93x5 = 465 frames? Horseradish bald!) - only to 97. TaskManager shows the memory consumption of 180 MB by the player and 800 MB by the total system.  Another 1.2 GB is idle.  It is easy to calculate that by giving the player all 1.2 GB of buffer, you can get the ability to decode a movie up to 24 seconds ahead, which would easily be enough for the most dynamic scenes. <br><br>  But what is not - is not.  In any case, 97 pre-coded frames ‚Äúsmooth out‚Äù the video stream, the buffer smoothly (but quickly: () is emptied during dynamic scenes and filled with relatively static ones. There remains one unsolved problem - the subtitles. For their work, after considerable anguish, the solution was found: player settings <u>‚Äúspeed problems solving‚Äù</u> &gt;&gt; <u>‚Äúskip over key frames</u> . <u>‚Äù</u> It is this option, nothing more. It feels as if each frame was a key bit at a high bit rate, so just ‚Äúframe skipping‚Äù almost did not produce a result. <br><br>  So, to summarize.  The settings of the OS in order to enable the necessary codec at the right time, I can not say - everyone decides this issue on his own machine individually. <br><br>  <b>CoreAVC settings:</b> <br><br>  <b>"Input levels"</b> , <b>"Output levels"</b> , <b>"Input colorspace"</b> put in <b>"TV"</b> , <b>"PC"</b> , <b>"autodetect",</b> respectively. <br><br>  The guide on which it was oriented is <a href="http://nunnally.ahmygoddess.net/watching-h264-videos-using-compute-unified-device-architecture-cuda/">here</a> - it lists the CoreAVC setting for using Nvidia CUDA Acceleration.  There it is indicated that for Input levels ‚ÄúTV‚Äù should stand in any scenario, and for Output, ‚ÄúTV‚Äù should be set if you use MPC HomeCinema.  In this case, <i>"let the MPC</i> : HC be set in the menu <u>" render settings "</u> &gt;&gt; <u>" output range "</u> &gt; &gt; <u>"16-235"</u> .  I have this item in MPC is not available, and without this, the picture significantly loses "juiciness", and in Crystal there is no such setting at all - so select <b>"Output levels" - "PC"</b> . <br><br>  <b>Deinterlacing: None (Weave)</b> <br>  (I didn‚Äôt have anything to do with the interlaced video, I had to choose it if I had one) <br><br>  <b>Deblocking: Skip always</b> ( <b>turn</b> off post-processing by codec) <br><br>  <b>[] Aggressive deinterlacing</b> (set if you want to do a deinterlacing codec) <br>  <b>[X] Crop 1088 to 1080</b> (I don‚Äôt even want to think about HDTV 1080p on my hardware!) <br>  <b>[] Force VMR AR correction</b> (they say we don‚Äôt need it) <br>  <b>[X] Preferred decoder option</b> (A strange option, even when turned on, the H264 / AVC video was opened in my DivX-ohm until I demolished it. Beware! <br>  <b>[X] Use tray icon</b> (Captain Obvious to the rescue!) <br>  <b>[n / a] Prefer CUDA Acceleration</b> (for lucky Nvidia cardholders) <br><br>  In the list of "output formats" the first three set: <br>  <b>1. YV12</b> <b><br></b>  <b>2. YUY2</b> <b><br></b>  <b>3. NV12</b> <br>  tick off the rest <br>  <i>(here I may be mistaken, the information was taken from the nvidia-oriented fak, it was thought that the letters NV could be related to.)</i> <br><br>  <b>Next, the Crystal Player settings.</b> <br><br>  To begin with, we are trying to ensure that the video is opened through CoreAVC - checked by <u>‚Äúright click on the player‚Äù</u> &gt;&gt; <u>‚ÄúProperties‚Äù</u> , the video stream compressor is in my <b>[AVC1] CoreAVC video decoder</b> .  I didn‚Äôt focus on audio, it‚Äôs not defined at all, but it works :) <br><br>  So, the main guideline should be the statistics window, called by the same right button or via the hotkey ‚ÄúS‚Äù. <br><br>  In the top line, something like <b>‚Äú1194x679 Overlay Flipping YV12‚Äù</b> should be desirable, most importantly, the <b>YV12 is the fastest possible mode</b> .  Also valid is YUY2. <br>  In the large text field should be: <b>"No comments, the fastest mode</b> . <b>"</b>  If this is not the case, then follow the instructions in this field, and disable ALL unnecessary in the settings.  Here you can see the fields with the current state of the video and audio buffers - I used it constantly to determine if the netbook has time to ‚Äúdigest‚Äù the current bitrate. <br><br>  In the menu <u>"Parsers"</u> &gt;&gt; <u>"Read data"</u> set the maximum data blocks.  The remaining settings are not particularly critical, the main thing is to apply common sense when they change. <br><br>  The result of all the above actions: <br><ul><li>  <b>Celeron M 0.8 GHz turns 720p HDTV up to 10 Mbps without brakes</b> </li><li>  <b>CoreAVC picture quality is noticeably worse</b> (checked with post-processing enabled!) than with other decoders, but this is ‚Äúslightly‚Äù compensated by the resolution of the video itself, and generally with such hardware, the main thing is ‚Äúto go‚Äù and not ‚Äúcheckered‚Äù :) <font color="#0000AA"><i>Update: how pretty Clearly showed in the comments screenshots one of the users, CoreAVC gives indistinguishable from other decoders quality, with the included post-processing.</i></font>  <font color="#0000AA"><i>I leave this point in the article "for history"</i></font> </li><li>  <b>Bit rate ‚Äúfloat‚Äù is compensated by Crystal Player buffer</b> </li><li>  Increasing the bitrate to a state ‚Äúnoticeably higher than what you can digest‚Äù causes frame drop, which looks like a slight flicker and a bit of a ragged and slightly slow video, and the sound begins to stutter, synchronizing.  I did not solve this problem and do not see any options at all as it is possible - the video speed has changed, it has to adjust to the sound.  But this is with an extremely large bitrate, which the iron does not pull! </li><li>  <b>Subtitles with all this obscurantism do not disappear</b> , arising on the screen at the right time.  Alt + K, Alt + L regulate the subtitle shift in time in increments of 100 ms, which is very convenient. </li></ul><br><br>  <font color="#0000AA"><b>UPDATE: It turned out that the processor frequency with the above experiments was 765 MHz instead of 810, as I thought.</b></font>  <font color="#0000AA"><b>After increasing to 810, no major changes, of course, have happened, but the framedrop has generally decreased.</b></font> <br><br>  <font color="#0000AA"><b>UPDATE:</b></font> <font color="#0000AA"><br></font>  <font color="#0000AA">- I tried MPlayer - it turned out that it does not have the option to set the size of the buffer with pre-rendered frames, the -cache parameter and the like refer to the ‚Äúpreliminary‚Äù buffer (useful for video over the network)</font> <font color="#0000AA"><br></font>  <font color="#0000AA">- haali video renderer did not work for me, I don‚Äôt know how to make it.</font>  <font color="#0000AA">In the comments they say that it is slow, although it has a buffer for pre-rendered frames (256 MB max.)</font> <font color="#0000AA"><br></font> <br><br>  <i>PS For those who are interested, ‚Äúwhy torture such a weak iron by forcing it to turn HDTV‚Äù: I have been using this netbook as a desktop for 1.5 years - with a full keyboard, mouse and monitor for 17 ‚Äù... and I don‚Äôt have much choice anime, and it is in HDTV only :)</i> </div><p>Source: <a href="https://habr.com/ru/post/84536/">https://habr.com/ru/post/84536/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../84523/index.html">Sony headphones</a></li>
<li><a href="../84524/index.html">Deploying a wifi network to school</a></li>
<li><a href="../84529/index.html">Genetic Code 2.0</a></li>
<li><a href="../84530/index.html">Why don't plans work? Personal experience in the form of a webinar</a></li>
<li><a href="../84533/index.html">IPhone Olympiad</a></li>
<li><a href="../84538/index.html">2012: the beginning of the end or why the end of the world will not be?</a></li>
<li><a href="../84541/index.html">The first Ukrainian game for Android - Fox Hunter</a></li>
<li><a href="../84542/index.html">Wikipedia on the bookshelf</a></li>
<li><a href="../84543/index.html">Network games - "Do you remember how it all began? ..."</a></li>
<li><a href="../84545/index.html">HABRAtopic PDF</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
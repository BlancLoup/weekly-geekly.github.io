<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Web interface for your Asterisk. Statistics for call-centers, sales departments, listening to calls and much more</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Since our last publication on the statistics interface for IP-PBX, Asterisk has been almost a year old. The project grows, develops, feedback from cus...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Web interface for your Asterisk. Statistics for call-centers, sales departments, listening to calls and much more</h1><div class="post__text post__text-html js-mediator-article">  Since our last publication on the statistics interface for IP-PBX, Asterisk has been almost a year old.  The project grows, develops, feedback from customers and habouriers allowed much to rethink and significantly improve its functionality. <br><br>  We also launched the <a href="https://vistep.ru/">site</a> , affiliate, wiki, public in social.  networks, wrote a billing, rewrote the synchronization daemon on golang ... and did another bunch of cool stuff - you can't list them all. <br><br>  Today I want to share with the community our achievements in product development. <br>  This is how the menu and the start report now look like: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/webt/59/ee/9a/59ee9aca215c0661285074.png"><br><br>  Under the cut, I will expand all the points in detail and talk in detail about working with the interface. <br>  And of course, in honor of the "anniversary", all the gifts! <br><a name="habracut"></a><br><h2>  What we can do today </h2><br>  In the current software version ( <a href="https://vistep.ru/changelog/">1.1.0</a> ), the ViStep.RU statistics allows: <br><br><ul><li>  Listen to and download recorded calls <br>  (and you can download all the records found by the search filter in one archive). </li><li>  Monitor the quality of call processing, evaluate their effectiveness <br>  (who how many received / missed / made calls; their duration). </li><li>  Create internal number groups and view reports in the context of these groups <br>  (for outgoing calls, in incoming reports, subscribers are grouped through Asterisk queues). </li><li>  Give each supervisor access to groups and queues whose reports he can view. </li><li>  View incoming call statistics for each ‚Äúexternal‚Äù number <br>  (how many incoming for the period was for each number, how much is accepted / omitted). </li><li>  View detailed logs of external, internal, and missed calls, as well as a caller's first call you (tabular reports with a flexible search filter). </li><li>  Export all reports to Excel. </li><li>  Add comments to calls (in tabular reports). </li><li>  Monitor PBX <br>  (we have integrated our service with zabbix and will send you email / sms in case of detection of problems). </li><li>  Estimate the time of work and breaks of each operator in the queue for the selected period. </li><li>  Add your company logo <br>  (on the authorization page and in the header for the local version and only in the header for the cloud version). </li><li>  Ask any question to support directly from the interface. </li><li>  See a breakdown by the number of incoming and outgoing calls by regions / edges and other subjects of the Russian Federation on Yandex.Map. </li></ul><br>  - OK, you can do it today, but what about tomorrow? <br>  - We regularly publish all the information about the nearest development plans in the wiki-section of the <a href="https://wiki.vistep.ru/doku.php%3Fid%3Droad_map">Road map</a> - come in, we will be happy! <br><br><h2>  the main </h2><br>  The menu is divided into two reports: <br><br><ul><li>  <b>"General"</b> , which provides information on all incoming calls to the PBX in the context of external ("city") numbers. <br>  The screenshot of the top of the page was before the kata, below are charts and graphs: <br><br><img src="https://habrastorage.org/webt/59/ee/9b/59ee9b9c9379c846657042.png"><br></li><li>  <b>"Queues and Groups"</b> , which displays information about incoming calls: <br><br><img src="https://habrastorage.org/webt/59/ee/9c/59ee9cb6ae51f198687438.png"><br><br><img src="https://habrastorage.org/webt/59/ee/9d/59ee9d223a239669162793.png"><br><br>  Here you can select all the queues at the same time (I repeat - Asterisk queues), or one / several required ones. <br><br>  Screenshots of the report on outgoing calls under the spoiler below, so as not to burden the post <br><br><div class="spoiler">  <b class="spoiler_title">Queues and groups - Outgoing</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/59/ee/9d/59ee9d80efefa971247812.png"><br><br><img src="https://habrastorage.org/webt/59/ee/9d/59ee9d9ff2c79022791382.png"><br><br><img src="https://habrastorage.org/webt/59/ee/9d/59ee9debbc3cf505910165.png"><br></div></div><br>  The report is based on all outgoing calls of employees outside, or in the context of a group that you can create in Settings - Groups. <br></li></ul><br>  Reports in this section will help: <br><br><ul><li>  evaluate the "exhaust" of the advertising company, where you indicated a specific phone number </li><li>  understand which number is the most ‚Äúpopular‚Äù among customers </li><li>  find out the ratio of received / missed to incoming calls to the PBX in general </li><li>  receive a picture of incoming calls both in turn (s) and for each operator individually </li><li>  track the quantitative and qualitative characteristics of outgoing employee calls </li></ul><br>  And many of the items in the <b>‚ÄúHome‚Äù</b> report group are clickable and lead straight to the reports in the <b>‚ÄúCalls‚Äù</b> submenu.  About him and talk. <br><br><h2>  Calls </h2><br>  Here are collected 4 tabular reports: <br><br><ul><li>  <b>"External calls"</b> <br>  Shows all calls received from the outside to the PBX or made by its subscribers outside.  It is divided into incoming and outgoing and allows you to search for calls by queues and / or groups. <br>  In addition to the queue (s), you can select a group in the incoming filter (for example, if <i>Dial () is</i> in the dialplan after <i>Queue</i> <i>()</i> , then there are calls too). <br>  In addition to the main filters: date, queue (s) and / or group, there are a number of additional ones under the spoiler.  Here's what it looks like: <br><br><img src="https://habrastorage.org/webt/59/ee/9e/59ee9e5a5d0f7837054302.png"><br><br>  Switch the plate <b>Calls:</b> at the top of the page to "Outgoing" <br><br><div class="spoiler">  <b class="spoiler_title">screen under spoiler</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/59/ee/9e/59ee9eddcd669464813329.png"><br></div></div><br>  The filter is slightly different, but in general, all the same. <br><br>  I also note that additional filters can search for calls either by the internal number of the subscriber or by his full name (the full name is set in ‚ÄúSettings - Numbers - Internal‚Äù, I will tell you a little later) </li><li>  <b>"Internal calls"</b> <br><br>  The report will find you all calls between internal numbers, i.e.  ATS subscribers. <br><br><div class="spoiler">  <b class="spoiler_title">screen under spoiler</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/59/ee/a0/59eea08962668882364315.png"><br></div></div><br>  I will not stop in detail, I think everything is clear here. </li><li>  <b>"Missed calls"</b> <br>  This is a tabular execution of the <b>‚ÄúHome - General‚Äù</b> report in terms of missed calls, i.e.  will show: who / where / how much you called and remained unanswered. <br><br><div class="spoiler">  <b class="spoiler_title">screen</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/59/ee/a0/59eea0e22a037513370062.png"><br></div></div></li><li>  <b>"They called for the first time"</b> <br>  - And who called us for the first time in a specified period of time (i.e., in general, as long as the database of calls is conducted taking into account the selected period)? <br>  - But who (the screen again under the spoiler). <br><br><div class="spoiler">  <b class="spoiler_title">Called for the first time</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/59/ee/a1/59eea105d1f4f812787700.png"><br></div></div><br>  As with all tabular reports, we see: <br>  the date of the call, which of the employees answered, the caller's number and our city number, duration and other data. <br></li></ul><br>  You also probably noticed these icons on each of the described pages: <br><br><img src="https://habrastorage.org/webt/59/dd/ba/59ddbab37755c361850442.png"><img src="https://habrastorage.org/webt/59/ee/a1/59eea13dc292b527391317.png"><br><br>  the first one will save the report in xls format, by clicking on the second one you will download the archive with all the call recording files found by the search filter, and the third will take to our wiki on the <a href="https://wiki.vistep.ru/doku.php%3Fid%3Dfaq">FAQ of the</a> open report or setting. <br><br>  The <b>‚ÄúCalls‚Äù</b> report group helps to search for detailed information on any call, it provides the ability to listen to and download call recordings and upload a table to Excel. <br><br>  Here I have everything, we go further. <br><br><h2>  Operators work </h2><br>  The report will show how much each of the queue operators has worked for a period of time.  The operator can be added and removed from the queue, can pause himself (for a lunch break, for example) and remove from the pause. <br><br>  All these events you will see in this report and be able to estimate how much time each operator of the queue spent in it (the time of pauses and the time of addition / deletion is subtracted from the total). <br><br><img src="https://habrastorage.org/webt/59/ee/a3/59eea316c695f454609513.png"><br><br><img src="https://habrastorage.org/webt/59/ee/a3/59eea33ecc37b695222878.png"><br><br>  I note, to build this page, Asterisk needs to be configured properly, i.e.  The operators or supervisor should provide a mechanism for adding / deleting and removing / pausing the queue participants. <br><br><h2>  GEO </h2><br>  Geolocation of incoming and outgoing calls. <br>  We took the database of correspondence of numbers of their territorial belonging, to speed up the work, we pushed it into reddis, fastened Yandex.Maps and got this picture: <br><br><img src="https://habrastorage.org/webt/59/ee/a4/59eea43af2e51741250341.png"><br><br><img src="https://habrastorage.org/webt/59/ee/a4/59eea4b7e5b0d421649431.png"><br><br>  It works only in Russia, in the context of incoming and outgoing calls. <br>  For incoming there is an additional filter - external number, i.e.  You can get the result both for all ‚Äúcity‚Äù numbers and for each separately. <br><br>  I am sure that everything is clearly on the screenshots, I will not waste your time and the letters - we will continue. <br><br><h2>  PBX.  Status </h2><br>  The statistics service is integrated with the popular Zabbix monitoring system. <br>  In the user's personal account, in this menu, we report the presence of any problems and display several graphs of PBX resources: <br><br><img src="https://habrastorage.org/webt/59/ee/a5/59eea52594f19464071855.png"><br><br>  The menu is "highlighted" by the number of triggers triggered. <br><br><div class="spoiler">  <b class="spoiler_title">The graphics are clickable</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/59/ee/a5/59eea5482957c783731831.png"><br></div></div><br>  If you want, when the trigger is triggered, we will send you an email or sms about the problem. <br>  Plus, for a small surcharge, take your Asterisk under your ‚Äúwing‚Äù and immediately eliminate the problem that occurred. <br><br><h2>  PBX.  Options </h2><br>  The settings of various alerts from the monitoring system, the balance on the sms-account, and the button for enabling / disabling the PBX support service are located here. <br><br><img src="https://habrastorage.org/webt/59/ee/a7/59eea71b11eae050495918.png"><br><br><h2>  Additional reports </h2><br>  I completely forgot to mention - after all, we also have additional reports. <br>  The idea is that you may not have enough functionality out of the box and require a highly specialized report for specific business processes (or call processing logic, if you wish).  We will write this in your TK. <br><br>  For example, here‚Äôs the <b>‚ÄúWho answered‚Äù</b> report written for the client‚Äôs call-center: <br><br><img src="https://habrastorage.org/webt/59/de/cd/59decd9927525608910551.png"><br><br>  The incoming call is first addressed to the operator's queue (let's call them the first line), then, if the first line is missed or everyone is busy, it is sent to the managers (second line). <br>  It is important for the manager to know which calls were received by the first line, which were the second and those that were completely unanswered.  We have provided such a picture - in addition to the standard date / who / where and so on. Each call has a <b>‚ÄúStatus‚Äù</b> field: <br><br><img width="290" height="50" src="https://habrastorage.org/webt/59/de/d1/59ded1243df1a112719858.png"><br><br><img width="290" height="50" src="https://habrastorage.org/webt/59/de/ce/59dece4a51690530433618.png"><br><br><img width="290" height="50" src="https://habrastorage.org/webt/59/de/ce/59dece4a218fa605364253.png"><br><br>  With the reports managed, now I will talk about the settings. <br><br><h2>  Settings </h2><br>  A variety of interface configuration options are located in a separate subgroup: <br><br><img width="172" height="235" src="https://habrastorage.org/webt/59/de/ed/59deed35416e0640051868.png"><br><br><ul><li>  <b>"Basic"</b> <br><div class="spoiler">  <b class="spoiler_title">screen</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/59/ee/a8/59eea84431d2a743145348.png"><br></div></div>  The path to the conversation recording files, your logo, whether to display the status of the PBX, and other settings are located here.  Also, at the bottom of the page, there is a daemon to synchronize PBX data to the cloud version and instructions for setting it up. </li><li>  <b>"Rooms"</b> <br><ul><li>  <b>"External"</b> <br><br><div class="spoiler">  <b class="spoiler_title">screen</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/59/de/f1/59def17cb6f15057770207.png"><br></div></div><br>  On this page you need to bring all your "city" numbers and a clear legend (for example, "Moscow", "Peter", "Advertising", etc.) for them. </li><li>  <b>"Internal"</b> <br><br><div class="spoiler">  <b class="spoiler_title">screen</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/59/de/f2/59def23ff34c4562314635.png"><br></div></div><br>  The beginning of the work with the setting is the button ‚ÄúLoad numbers from DB‚Äù. <br>  It will pull the internal number &lt;-&gt; callerid from the database (in the request, all calls for the last year are used). <br><br>  Next, the list is maintained manually, you can correct it, add it, and also set a password for each employee, so that he can log in and watch his calls. </li></ul></li><li>  <b>"Groups"</b> <br>  Grouping internal numbers is useful if there are a lot of them or division is needed, for example, into departments or shifts.  The list of all groups is as follows: <br><br><div class="spoiler">  <b class="spoiler_title">screen</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/59/de/ff/59deff7eab525920097804.png"><br></div></div><br>  You can add / delete employees one by one using the multi-select (ctrl / cmd + LMB): <br><br><div class="spoiler">  <b class="spoiler_title">screen</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/59/de/ff/59deff7e6081c451064588.png"><br></div></div><br>  and search: <br><br><div class="spoiler">  <b class="spoiler_title">screen</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/59/de/ff/59deff7e60464156805569.png"><br></div></div><br></li><li>  <b>"Supervisors"</b> <br>  It is here that the administrator edits the list of supervisors and assigns them access to reports of groups and queues. <br><br><div class="spoiler">  <b class="spoiler_title">screen</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/59/df/01/59df01f4cf035399858473.png"><br><br><img src="https://habrastorage.org/webt/59/df/01/59df01f4df32d013303687.png"><br></div></div><br>  The configuration menu of the supervisor is similar to the configuration of groups, there are all the same features. <br><br>  Here's what it looks like: <br><br><div class="spoiler">  <b class="spoiler_title">screen</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/59/df/02/59df028c9bb17615748715.png"><br></div></div><br></li><li>  <b>"Comments"</b> <br>  Make the necessary comments, and then you will be able to set one of them for any call in the group of table reports. <br><br><div class="spoiler">  <b class="spoiler_title">screenshots</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/59/ee/a8/59eea8a533876063951755.png"><br><br><img src="https://habrastorage.org/webt/59/ee/a8/59eea8ca8e52a770878257.png"><br></div></div><br></li></ul><br><h2>  Help desk and Wiki </h2><br>  <b>Help desk</b> will allow you to ask a question, ask for help or clarify something in the work of statistics.  We integrated it with the ticket system and immediately receive notifications of new requests, and you can track all the correspondence right from the interface. <br><br><div class="spoiler">  <b class="spoiler_title">Under the spoiler a few screenshots</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/59/ee/a9/59eea9eebb2b2718353811.png"><br><img src="https://habrastorage.org/webt/59/ee/aa/59eeaa5173a3f278275716.png"><br><img src="https://habrastorage.org/webt/59/ee/aa/59eeaa6f4b378287902892.png"><br></div></div><br>  <b>‚ÄúWiki‚Äù</b> is just a <a href="https://wiki.vistep.ru/">link</a> to our knowledge base, where we store the instructions for working with the interface and collect different life hacks on the Asterisk part. <br><br><h2>  Instead of conclusion </h2><br>  Instead, because the work on new features is in full swing now, the project does not stand still and is constantly being improved.  For example, in one of the following releases, we plan to add the ‚ÄúReal-time‚Äù menu. <br><br>  We will collect there such indicators as: <br><br><ul><li>  The number and status of trunks </li><li>  Number and status of internal numbers </li><li>  Queue status </li><li>  Active calls </li><li>  And something cool </li></ul><br>  In general, we managed to follow the paradigm of Agile somehow natively, something that feedback allows you to plan each new iteration and move on.  Therefore, we will be glad to your comments and suggestions! <br><br>  No account on Habr√©?  It does not matter - all my coordinates in the profile of <a href="https://habrahabr.ru/users/fessaectan/" class="user_link">FessAectan</a> , write directly. <br><br><h3>  No, I did not forget </h3><br>  Thanks to everyone who mastered and reached the final publication.  The authors of the five coolest comments on product improvement are the month of free use of the cloud version!  Winners will be announced on Friday 10/27/2017. </div><p>Source: <a href="https://habr.com/ru/post/322278/">https://habr.com/ru/post/322278/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../322268/index.html">We write game logic in C #. Part 2/2</a></li>
<li><a href="../322270/index.html">In defense, Zuckerberg takes Evan Spiegel "by the throat"</a></li>
<li><a href="../322272/index.html">How to wind 40k views on Habrahabr. Bug or feature?</a></li>
<li><a href="../322274/index.html">Business rule repositories and corresponding code blocks that are embedded in production</a></li>
<li><a href="../322276/index.html">Myths about the CAP theorem</a></li>
<li><a href="../322280/index.html">Optimization of animations in Unity3D</a></li>
<li><a href="../322282/index.html">‚ÄúOther blogs‚Äù: Lecturers, graduates and students of the ITMO University on Habr√©</a></li>
<li><a href="../322284/index.html">5 hobbies of a real developer</a></li>
<li><a href="../322286/index.html">Advantages of the Interval Memory Method</a></li>
<li><a href="../322288/index.html">Organization of control over the observance of response time to customer calls in the service department</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
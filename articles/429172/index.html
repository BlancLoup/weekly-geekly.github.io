<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>1C on Proxmox. General notes</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="After a few years of using 1C in container virtualization of Proxmox, there are enough stuffed cones that I will draw here as short general notes on t...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>1C on Proxmox. General notes</h1><div class="post__text post__text-html js-mediator-article">  After a few years of using 1C in container virtualization of Proxmox, there are enough stuffed cones that I will draw here as short general notes on the stages of the implementation process. <br><br>  This is not a manual or manual.  If any of the items should be described in more detail - please do not hesitate to comment. <br><a name="habracut"></a><br><h3>  Planning and Risk Assessment </h3><br>  When you, with burning eyes, wrote down to the management the amounts of savings, stability, scalability and other goodies - do not forget about yourself.  The minimum is a good hardware, normal ride, fast drives, x64 version of 1C server.  It is also desirable to claim some kind of training on the topic.  So that management has an understanding that it is investing in its own infrastructure and personnel, and not just out of the blue it saves a lump sum. <br><br><h3>  Buying software.  Integrator. </h3><br>  It is advisable to choose someone who had at least some experience supporting linux-versions of 1C.  Do not be lazy to call and ask.  In the end, no one will help you anyway, and you will be left alone with all the problems, but at least without the annoying silly advice about rdp and mssql. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h3>  Host setup </h3><br>  When working with proxmox, it‚Äôs a sin not to use the wonderful lxc.mount mechanism to mount directories from a host into containers (and, moreover, with acl preservation).  To prevent containers from swelling from logs and backups, you need to create in advance on the host partitions and directories for these purposes, and cron-tasks for rotation and cleaning.  So you will be driving backups and logs through one place, and you will see that this is good. <br><br><h3>  Selection of application server and database server configuration </h3><br>  You, for certain, are already familiar with the classical approach of the 1s-guru, on placing the database on the same server as the application server.  Now is a great chance not to do this.  The fact is that if you measure the speed of the "network" data transfer between the containers, you will get at least 25-30 Gbit / s.  Feel free to drive the database from the beach, and you get a lightweight monolithic application server and several database servers that can be easily profiled, backed up and maintained. <br><br><h3>  Database Server Setup </h3><br>  PostgreSQL from 1C or Postgres Professional work fine in out-of-the-box containers. <br>  Only, for convenience, I would first make an empty container template with a database server, and then clone it for each information base that is connected to the application server.  In this template, you should immediately mount the log and backup directories from the host, and, accordingly, redirect the thickest logs there.  It also makes sense to immediately make backup tasks, for example, via the pg_dump all mechanism to these directories.  When generating output files use $ hostname.  So you get a gentleman's set for any occasion. <br><br><h3>  Application Server Setup </h3><br>  Everything passes without features, routinely and boringly, only if you do not install an x86 server on x64 OS.  But even in this case, everything can be solved.  For example, if you put x86 1C on Centos7, there is an excellent repository with x86 packages <a href="http://mirror.centos.org/altarch/7/os/i386/Packages/">mirror.centos.org/altarch/7/os/i386/Packages</a> <br>  From there you will definitely need: ImageMagick-c ++ - devel, fontconfig, libgsf, http, httpd-devel, as well as libpng and libpng-devel for printing barcodes <br><br><h3>  Licensing </h3><br>  Many are against software licenses and are fighting for a more expensive but reliable HASP.  It's like skiing and snowboarding.  It‚Äôs up to you to break a clavicle or ankle.  There are also problems with throwing hasp into the container, and with the correct receipt of software licenses. <br><br>  If you decide to take software licenses, be careful with the CPU cores.  As stated in the documentation, you can increase (but not reduce) the number of cores and processors without relicensing.  However, Proxmox, when the number of available processor cores in a container changes, changes the CoreID of the first core.  That is, if you made a container with 1 core for the start and attached to CoreID 0 during licensing, you will be surprised when increasing the number of cores to 4, CoreID numbering will not be 0.1,2.3 but 1,2,2,4 .  Accordingly, the licenses will fly <br><br>  If this happens - do not despair.  Licenses can be simply reactivated by the attached codes.  And it is possible in the configuration of the container to put on one core more than the actual amount.  For example, 9 for an eight-core server.  Then CoreID 0 will return and will not leave you. <br><br>  I hope these notes will help someone. </div><p>Source: <a href="https://habr.com/ru/post/429172/">https://habr.com/ru/post/429172/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../429158/index.html">The impostor syndrome affects men no less than women ... and other findings from 10,000 technical interviews</a></li>
<li><a href="../429160/index.html">Nintendo DS console GPU and its interesting features</a></li>
<li><a href="../429162/index.html">‚ÄúTo achieve change, understand why people resist them‚Äù: Jim Holmes on the culture of testing</a></li>
<li><a href="../429166/index.html">Multicrystal: from history to speculation about the future</a></li>
<li><a href="../429168/index.html">Through fire and water: the history of Russian popular science literature</a></li>
<li><a href="../429174/index.html">BlueStacks 4: testing on weak hardware + developer comments</a></li>
<li><a href="../429176/index.html">Stream analytics: quick start with SAS ESP</a></li>
<li><a href="../429178/index.html">Microsoft has ordered a model of a new campus in Minecraft</a></li>
<li><a href="../429180/index.html">Go to goto</a></li>
<li><a href="../429182/index.html">Artificial Intelligence rested on the barrier of understanding</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
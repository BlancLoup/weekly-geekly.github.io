<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>asp.net: description of the page caching mechanism via OutputCache</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="One way to manage page caching in asp.net is a declarative way with the <% @ OutputCache%> directive. Below is a description and study of the work of ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>asp.net: description of the page caching mechanism via OutputCache</h1><div class="post__text post__text-html js-mediator-article">  One way to manage page caching in asp.net is a declarative way with the &lt;% @ OutputCache%&gt; directive.  Below is a description and study of the work of this directive.  Most of the information is taken from msdn, but this is not a translation, but rather a summary.  The text also contains my own research on how a particular parameter affects http-headers. <br><a name="habracut"></a><br>  A directive is used to specify page caching or user controls. <br>  <b>&lt;% @ OutputCache%&gt;</b> .  It is usually specified after the Page or Control directive. <br><blockquote><code>&lt;%@ Page Language="C#" AutoEventWireup="true" CodeFile="ResumeList.aspx.cs" Inherits="services_vacancies_ResumeList" %&gt; <br> <br> &lt;%@ OutputCache Duration="60" VaryByParam="none" %&gt; <br></code> </blockquote><br><br>  &lt;% @ OutputCache%&gt; has several parameters: <br><br><h1>  Cacheprofile </h1><br>  CacheProfile - this parameter is optional and defaults to an empty string.  This parameter cannot be used in .ascx files.  CacheProfile is used to specify the caching profile specified via web.config and the caching section. <br>  Example: <br>  The web.config defines the caching section. <br><blockquote>  <font color="black"><font color="#0000ff">&lt;</font> <font color="#800000">caching</font> <font color="#0000ff">&gt;</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">&lt;</font> <font color="#800000">outputCacheSettings</font> <font color="#0000ff">&gt;</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">&lt;</font> <font color="#800000">outputCacheProfiles</font> <font color="#0000ff">&gt;</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">&lt;</font> <font color="#800000">add</font> <font color="#ff0000">name</font> <font color="#0000ff">= "Cache30Seconds"</font> <font color="#ff0000">duration</font> <font color="#0000ff">= "30"</font></font> <font color="black"><br></font>  <font color="black"><font color="#ff0000">varyByParam</font> <font color="#0000ff">= "none"</font> <font color="#0000ff">/&gt;</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">&lt;/</font> <font color="#800000">outputCacheProfiles</font> <font color="#0000ff">&gt;</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">&lt;/</font> <font color="#800000">outputCacheSettings</font> <font color="#0000ff">&gt;</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">&lt;/</font> <font color="#800000">caching</font> <font color="#0000ff">&gt;</font></font> <font color="black"><br></font>  <font color="gray">* This source code was highlighted with <a href="http://poison.qsh.ru/"><font color="gray">Source Code Highlighter</font></a> .</font> </blockquote><br>  This section is used declaratively on the page, via CacheProfile <br>  &lt;% @ OutputCache CacheProfile = "Cache30Seconds"%&gt; 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      CacheProfile is convenient to use when there are several well-established caching rules for pages on the site.  It makes sense to put such rules into the profile of the configuration file, and on the page only specify a link to this profile. <br><br><h1>  Duration </h1><br>  Duration is a required parameter.  Duration sets the time value in seconds during which the page or user element is cached.  In fact, this parameter determines the value of the max-age parameter in the http-header of the server response for the Cache-Control field: <br><br>  Cache-Control: public, max-age = 60 <br><br><h1>  Location </h1><br>  Location ‚Äî This parameter describes the rule for the cache's storage location and takes one of the values ‚Äã‚Äãof the OutputCacheLocation enumeration.  This parameter cannot be used in .ascx files.  By default, Location is set to OutputCacheLocation.Any.  All possible Location values ‚Äã‚Äãare listed below: <br><br><h4>  Any </h4><br>  the cache can be stored everywhere, including at the client, on the server, on intermediate proxy servers.  This value defines the Cache-Control HTTP header as public. <br><br><h4>  Client </h4><br>  the cache is stored on the client side.  This value defines the Cache-Control HTTP header as private. <br><br><h4>  Downstream </h4><br>  The cache can be stored on any http 1.1-compatible device, including the proxy server or the client, but not on the server.  In fact, in the header will be the following information: <br><br>  Cache-Control: public <br><br><h4>  Server </h4><br>  the cache is stored only on the server where the request was processed.  This value identifies the Cache-Control HTTP header as server.  In fact, after specifying Location = "Server", the following information will be in the header: <br><br>  Cache-Control: no-cache <br>  Pragma: no-cache <br>  Expires: -1 <br><br><h4>  None </h4><br>  This value indicates that the page or user element cannot be cached.  This value identifies the Cache-Control HTTP header as nocache.  The generated header will be the same as when using Server. <br><br><h4>  Serverandclient </h4><br>  the cache can only be stored on the server or on clients, proxy servers should not cache the contents.  This value defines the Cache-Control HTTP header as a combination of private and server values.  In fact, the title will contain: <br><br>  Cache-Control: private <br>  Vary: * <br><br><h1>  NoStore </h1><br>  NoStore accepts a boolean value.  If true, adds the no-store parameter to the Cache-Control http-header directive.  This parameter cannot be used in .ascx files.  This option can be useful for preventing page caching in firefox (described here <a href="http://aspadvice.com/blogs/rjdudley/archive/2006/04/07/16280.aspx">aspadvice.com/blogs/rjdudley/archive/2006/04/07/16280.aspx</a> ). <br><br><h1>  Shared </h1><br>  Shared - this parameter takes a boolean value and indicates that the user control can be shared with different pages.  Default Shared = ‚Äùfalse‚Äù.  This parameter cannot be used in .aspx files.  In fact, the inclusion of this parameter means that any page using the ascx file will be able to retrieve the saved data from one cache.  By default, the same ascx files for each page are saved in different places.  In most cases, enabling this option will allow you to save memory on the server. <br><br><h1>  SqlDependency </h1><br>  SqlDependency - may contain a string of ‚Äúdatabase: table‚Äù pairs on which caching depends. <br>  &lt;% @ OutputCache Duration = "3600" VaryByParam = "None" SqlDependency = "Northwind: Products; Northwind: Categories"%&gt; <br>  It is assumed that when the specified tables are updated, the elements (page or user control) are removed from the cache.  SqlDependency for aspx only can contain the value CommandNotification, then you need to register a notification through the SqlDependency class. <br><br><h1>  VaryByContentEncoding </h1><br>  VaryByContentEncoding specifies a caching condition depending on the contents of the Accept-Encoding http-header directive.  The following example will allow caching pages compressed with gzip only: <br><br>  &lt;% @ OutputCache Duration = "60" VaryByParam = "none" VaryByContentEncoding = "gzip"%&gt; <br><h1>  VaryByControl </h1><br>  VaryByControl - specifies a string that contains a semicolon-separated list of control IDs to be cached on the server.  For the OutputCache directive, this attribute is mandatory or VaryByParam.  This attribute adds the parameter Vary to the http header: *. <br><br>  &lt;% @ OutputCache Duration = "60" VaryByControl = "AddResumeCtrl; LoggerCtrl"%&gt; <br><br><h1>  VaryByCustom </h1><br>  VaryByCustom - any text to control caching.  If this text is equal to ‚Äúbrowser‚Äù, then caching will be done conditionally by the name of the browser and its major version.  If a string is specified for VaryByCustom, then you must override the GetVaryByCustomString method in the Global.asax file to implement conditional caching. <br><br><h1>  VaryByHeader </h1><br>  VaryByHeader is a string with semicolon-separated values ‚Äã‚Äãof http-headers by which conditional caching will be performed.  This parameter cannot be used in .ascx files.  Adds the vary parameter to the http header with the corresponding value.  For example, the following code: <br><br>  &lt;% @ OutputCache Duration = "30" VaryByParam = "none" VaryByHeader = "Referer"%&gt; <br><br>  will add to the http-response header: <br><br>  Vary: Referer <br><br>  but only when paired with Location = "Downstream" or Location = "Any". <br><br><h1>  VaryByParam </h1><br>  VaryByParam - sets conditional caching based on the values ‚Äã‚Äãof the query string during GET or parameters during POST.  Values ‚Äã‚Äãmust be separated by a semicolon.  It seems that conditional caching occurs only on the server, because regardless of the value of VaryByParam in the Vary http-header is "*".  VaryByParam - required to be specified if the VaryByControl attribute is not specified.  VaryByParam can be equal to ‚Äúnone‚Äù and then conditional on caching parameters does not occur, or VaryByParam can be equal to ‚Äú*‚Äù and then conditional caching is performed on all parameters. </div><p>Source: <a href="https://habr.com/ru/post/26146/">https://habr.com/ru/post/26146/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../261451/index.html">Throwable exception and php7 errors</a></li>
<li><a href="../261453/index.html">Stash Contest: How to Get a License from JetBrains for Your Code</a></li>
<li><a href="../261455/index.html">Truly responsive letters. Part one</a></li>
<li><a href="../261457/index.html">Deploying the Postgres-xl Cluster for Dummies</a></li>
<li><a href="../261459/index.html">Analysis of tasks of the Competitive Intelligence Competition on PHDays V</a></li>
<li><a href="../261461/index.html">Automate routine operations between Excel and AutoCAD using VBA</a></li>
<li><a href="../261463/index.html">Comparing the speed of .NET providers for working with Oracle DB</a></li>
<li><a href="../261467/index.html">Rapid development on 1C-Bitrix or how I met gulp</a></li>
<li><a href="../261469/index.html">Love and mathematics. Heart of hidden reality</a></li>
<li><a href="../26147/index.html">How to solve IT problems? (Question)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
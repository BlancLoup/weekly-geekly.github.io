<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Jarakan</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="For several months already, a small team of developers and testers has been working on creating a new ECMAScript / JavaScript engine for Opera. When t...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Jarakan</h1><div class="post__text post__text-html js-mediator-article">  For several months already, a small team of developers and testers has been working on creating a new ECMAScript / JavaScript engine for Opera.  When the current ECMAScript engine, Futhark, was first made public, it was the fastest on the market.  Futhark was designed primarily for fast code execution.  Traditionally, this is the right compromise between different platforms under which Opera works. <br><br>  The web is a constantly changing environment and tomorrow's advanced web applications require fast execution of scripts, so Opera again takes part in a competition to develop the fastest scripting engine. <br><br>  The name Dzarakan, like the previous names of the engines, is given - it is a form of writing.  (Futhark - Scandinavian alphabet; Dzarakan, also known as charakan - syllable script for the Javanese language) 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Improvement efforts are focused on three main areas. <a name="habracut"></a>  : <br><br><h2>  Register bytecode </h2><br><br>  The latest generations of Opera scripting engines used instruction stack installation.  This type of setting instructions is based on a stack of values, where most of the instructions take incoming operands from the stack value, process them and put them back on the stack.  Some instructions simply either put the values ‚Äã‚Äãon the stack or mix the values ‚Äã‚Äãin it.  This gives compact bytecode programs and provides ease of generating bytecode for them.  <i>(in general, the stack can be compared with a sort of card deck, upward of which you can put cards and withdraw them from there, but you cannot take them from the middle)</i> <br><br>  In the new engine, instead, instructions based on registers were used.  In a register machine, instead of a stack of values ‚Äã‚Äãdynamically changing in size, blocks of fixed size are used, where values ‚Äã‚Äãare called registers.  Thus, instead of being able to work only with the top of the stack, each instruction can access any register.  Due to the fact that for work you need to copy less data from the top of the stack, fewer instructions are necessary for execution and less data will be copied. <br><br><h2>  Machine code generation </h2><br><br>  Despite the fact that the new method of installing instructions in the engine allows you to significantly accelerate the execution of bytecode, there are still overloaded operations with simple ECMAScript code, such as loops with an integer in bytecode interpretation.  To cope with these overloads, we have implemented a compilation of ECMAScript programs and functions into native code, in whole or in part. <br><br>  The compilation of machine code is based on static analysis of data types (using tools better than usual in ECMAScript), which is performed in order to get rid (where possible) of unnecessary type checks, deferred types (taking into account undefined static types), and on the register allocator, which allows you to generate a compact machine code using several operations with registers and memory. <br><br>  When working with ECMAScript code, which in practice is well suited to be converted into machine code, our generated code is more or less similar to the assembler code written by hand, trying to keep everything in registers. <br><br>  The register allocator is designed to be executed architecturally independently, as well as the generation of ‚Äúfinal‚Äù machine code, which complicates the solutions we create.  At first, work with 32 and 64x x86 architecture was implemented, but preliminary work has already begun, for generating machine code, for other processor architects, such as ARM, for example. <br><br>  In addition to generating machine code for standard ECMAScript, we also generate machine code that looks for matches for simple regular expressions.  This greatly increases performance when finding matches in long strings for simple regular expressions.  For really long strings, this makes searching for substrings through regular expressions faster than the same search through String.prototype.indexOf.  For short strings, the speed is limited by the overload from compiling a regular expression. <br><br>  Code generation for more complex regular expressions becomes slower and gives a smaller performance gain, because the regular expression engine is fast enough.  The basis of the regular expression engine was developed quite recently, but it debuted in Presto 2.2.  (Opera 10a).  We can say that this is a regular regular expression engine, but it does some tricks to avoid unnecessary returns, which gives it greater performance. <br><br><h2>  Automatic classification of objects </h2><br><br>  Another area for a big increase in performance in our current engine is another representation of ECMAScript objects.  In the new engine, each object is assigned to a class, which in turn collects various information about the object, such as the prototype, the order and the names of some or all of its properties.  Assigning classes to objects is in itself a very dynamic thing, because ECMAScript is a dynamic language, but it is organized in such a way that objects with the same prototype and the same properties are assigned to one class. <br><br>  Such a change in the representation allows compact storage of custom objects, because most of the complex structures represent the properties of an object stored in a class, where they are located along with other objects of the same class.  In actually working programs, storing multiple objects in one class can significantly reduce memory consumption.  It is expected that most programs that create a lot of objects have only a few different classes. <br><br>  The general table of structures for properties also improves the search for properties between different objects.  For two objects with one class, it is true that if, when searching for the property ‚ÄúX‚Äù for the first object, we get the result ‚ÄúY‚Äù, then for the second object the same search will also give ‚ÄúY‚Äù.  It is used to cache the retrieval of individual properties in ECMAScript programs for searching, and this greatly improves the performance of code containing multiple read or write properties. <br><br><h2>  Performance </h2><br><br>  So how fast is Jarakan?  Using the standard cross-platform mechanism for quick debugging (without any generated machine code), Jarakan is now 2.5 times faster than the current ECMAScript engine in Presto 2.2 (Opera 10a).  In this case, it is worth remembering that Opera releases special versions for different architectures, and this is important for performance. <br><br>  The generation of machine code in Jarakan is not yet ready for full-scale testing, but several individual compatible tests show a gap of 5 and 50 times, which is already very promising. <br><br>  <i>This translation was edited by <a href="http://habrahabr.ru/users/zerobrain/" class="user_link">zerobrain</a> so that it was written in Russian ( <a href="http://zerobrain.habrahabr.ru/">applause</a> ).</i>  <i>Taking this opportunity, I also want to ask a good person with the nickname <a href="http://habrahabr.ru/users/enilight/" class="user_link">enilight</a> to correct karma</i> </div><p>Source: <a href="https://habr.com/ru/post/51935/">https://habr.com/ru/post/51935/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../51925/index.html">Unixtime in its original form</a></li>
<li><a href="../51927/index.html">7 deadly sins when looking for a job (with JobSeeker)</a></li>
<li><a href="../51929/index.html">Perfect storm. Postmortem unannounced project.</a></li>
<li><a href="../51930/index.html">Escape from City 17</a></li>
<li><a href="../51931/index.html">IntelliJ IDEA 8.1 released</a></li>
<li><a href="../51936/index.html">Paid applications will appear in the Android Market. Next week.</a></li>
<li><a href="../51937/index.html">Site about special gadgets for geeks</a></li>
<li><a href="../51938/index.html">The collision of satellites in Google Earth</a></li>
<li><a href="../51939/index.html">Protection list of private trackers</a></li>
<li><a href="../51940/index.html">in the circle of friends and property rights</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
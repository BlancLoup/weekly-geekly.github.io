<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Fonts for android</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Good afternoon! In this article I want to discuss such an important issue as fonts in Android. We will create our TextView with the ability to add fon...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Fonts for android</h1><div class="post__text post__text-html js-mediator-article">  Good afternoon!  In this article I want to discuss such an important issue as fonts in Android.  We will create our TextView with the ability to add fonts to xml and visually display them in the preview.  We will also solve one important problem - the use of fonts in the list, without glitches and straining for our smaller brothers, our Android devices. <br><a name="habracut"></a><br>  Next I'll write out how to create the assets folder and add my own fonts, so you can skip this. <br><br><div class="spoiler">  <b class="spoiler_title">Creating the assets folder and adding fonts</b> <div class="spoiler_text">  The assets folder is needed to store a wide variety of resources, including fonts.  You can create it either manually in the main root: <br>  \ app \ src \ main \ assets <br>  Or in a simpler way. <br><img src="https://habrastorage.org/getpro/habr/post_images/0b0/f28/f0d/0b0f28f0d97e7fa1addc0aad280f7855.png" alt="image"><br><br>  Next, files with the .ttf format are thrown in assets or at the root, or we create the fonts folder, as assets supports nesting. <br></div></div><br>  So, now let's turn to the implementation of the use of fonts for TextView, in its pure form it looks like this: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre><code class="java hljs">Typeface type = Typeface.createFromAsset(getAssets(),<span class="hljs-string"><span class="hljs-string">"fonts/font1.ttf"</span></span>); myTextView.setTypeface(type);</code> </pre> <br>  When it comes to more than five TextViews, this process becomes annoying.  But irritation is not the only problem with which a developer using this design is encountered.  The fact is that the processing of the font file itself and its transformation into a Typeface object is a rather laborious process, therefore, the use of such a construction in the sheet will cause incredible glitches. <br><br>  I propose to solve this problem with an ordinary sington.  And so we create something similar: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SingletonFonts</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> Typeface font1; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> Typeface font2; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> Typeface font3; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Typeface </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getFont1</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> font1; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Typeface </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getFont2</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> font2; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Typeface </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getFont3</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> font3; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setFont1</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Typeface font1)</span></span></span><span class="hljs-function"> </span></span>{ SingletonFonts.font1 = font1; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setFont2</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Typeface font2)</span></span></span><span class="hljs-function"> </span></span>{ SingletonFonts.font2 = font2; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setFont3</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Typeface font3)</span></span></span><span class="hljs-function"> </span></span>{ SingletonFonts.font3 = font3; } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">volatile</span></span> SingletonFonts instance; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SingletonFonts</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> SingletonFonts </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getInstance</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Context activity)</span></span></span><span class="hljs-function"> </span></span>{ SingletonFonts localInstance = instance; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (localInstance == <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">synchronized</span></span> (SingletonFonts.class) { localInstance = instance; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (localInstance == <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) { instance = localInstance = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SingletonFonts(); } } setFont1(Typeface.createFromAsset(activity.getAssets(), <span class="hljs-string"><span class="hljs-string">"fonts/font1.ttf"</span></span>)); setFont2(Typeface.createFromAsset(activity.getAssets(), <span class="hljs-string"><span class="hljs-string">"fonts/font2.ttf"</span></span>)); setFont3(Typeface.createFromAsset(activity.getAssets(), <span class="hljs-string"><span class="hljs-string">"fonts/font3.ttf"</span></span>)); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> localInstance; } }</code> </pre> <br>  And install the fonts using singleton, like this: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MainActivity</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AppCompatActivity</span></span></span><span class="hljs-class"> </span></span>{ TextView textView1; TextView textView2; TextView textView3; <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onCreate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Bundle savedInstanceState)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.onCreate(savedInstanceState); setContentView(R.layout.activity_main); textView1 = (TextView) findViewById(R.id.text_view_1); textView2 = (TextView) findViewById(R.id.text_view_2); textView3 = (TextView) findViewById(R.id.text_view_3); textView1.setTypeface(SingletonFonts.getInstance(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>).getFont1()); textView2.setTypeface(SingletonFonts.getInstance(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>).getFont2()); textView3.setTypeface(SingletonFonts.getInstance(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>).getFont3()); } }</code> </pre><br>  Using this construction, we solved the second problem, regarding the lags in the sheet, but not the first, the most important, you still need to find all the text fields and mesh the fonts again and again, write separate methods and lose nerve cells.  Another problem is that in the preview - the standard font, hence the width, height of its font.  You can only see it on a live device or an emulator, this is not very convenient. <br><br>  I will introduce the above problems, we will now write your TextView with blackjack and fonts. <br><br>  First of all, create a class that inherits the usual TextView with constructors: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CustomFontsTextView</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TextView</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CustomFontsTextView</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Context context)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>(context); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CustomFontsTextView</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Context context, AttributeSet attrs)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>(context, attrs); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CustomFontsTextView</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Context context, AttributeSet attrs, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> defStyleAttr)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>(context, attrs, defStyleAttr); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CustomFontsTextView</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Context context, AttributeSet attrs, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> defStyleAttr, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> defStyleRes)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>(context, attrs, defStyleAttr, defStyleRes); } }</code> </pre><br>  Next, create the attrs.xml file in the values ‚Äã‚Äãfolder. <br><br><div class="spoiler">  <b class="spoiler_title">Create attrs.xml</b> <div class="spoiler_text">  Come here <br><br><img src="https://habrastorage.org/getpro/habr/post_images/966/e53/c34/966e53c341f110bba6678d59f1ab0ae2.png" alt="image"><br><br>  and create a file called attrs.xml, after creation it should look something like this: <br><br><pre> <code class="xml hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">resources</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">resources</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br></div></div><br>  In it we create the following block of code: <br><br><pre> <code class="xml hljs"> //   <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">declare-styleable</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"CustomFontsTextView"</span></span></span><span class="hljs-tag">&gt;</span></span> //    . name = "fonts" -  xml  <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">attr</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"fonts"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">format</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"enum"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">enum</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"font1"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"0"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">enum</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"font2"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"1"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">enum</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"font3"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"2"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">attr</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">declare-styleable</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  Then we return to our class <b>CustomFontsTextView</b> and write the following method: <br><br><pre> <code class="java hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CustomFontsTextView</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TextView</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CustomFontsTextView</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Context context)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>(context); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CustomFontsTextView</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Context context, AttributeSet attrs)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>(context, attrs); setFonts(attrs,context); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CustomFontsTextView</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Context context, AttributeSet attrs, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> defStyleAttr)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>(context, attrs, defStyleAttr); setFonts(attrs,context); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CustomFontsTextView</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Context context, AttributeSet attrs, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> defStyleAttr, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> defStyleRes)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>(context, attrs, defStyleAttr, defStyleRes); setFonts(attrs,context); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setFonts</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(AttributeSet attributeSet, Context context)</span></span></span></span>{ TypedArray a = context.getTheme().obtainStyledAttributes( attributeSet, R.styleable.CustomFontsTextView, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>); a.recycle(); <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> fonts = a.getInt(R.styleable.CustomFontsTextView_fonts,-<span class="hljs-number"><span class="hljs-number">1</span></span>); SingletonFonts singltonFonts = SingletonFonts.getInstance(context); <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (fonts){ <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> (<span class="hljs-number"><span class="hljs-number">0</span></span>): setTypeface(singltonFonts.getFont1()); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> (<span class="hljs-number"><span class="hljs-number">1</span></span>): setTypeface(singltonFonts.getFont2()); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> (<span class="hljs-number"><span class="hljs-number">2</span></span>): setTypeface(singltonFonts.getFont3()); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; } } }</code> </pre><br>  That's all.  Now you need to rebuild the project so that you have custom attributes.  After that we go to our activation xml file and write: <br><br><pre> <code class="java hljs">&lt;?xml version=<span class="hljs-string"><span class="hljs-string">"1.0"</span></span> encoding=<span class="hljs-string"><span class="hljs-string">"utf-8"</span></span>?&gt; &lt;LinearLayout xmlns:android=<span class="hljs-string"><span class="hljs-string">"http://schemas.android.com/apk/res/android"</span></span> xmlns:tools=<span class="hljs-string"><span class="hljs-string">"http://schemas.android.com/tools"</span></span> xmlns:app=<span class="hljs-string"><span class="hljs-string">"http://schemas.android.com/apk/res-auto"</span></span> android:id=<span class="hljs-string"><span class="hljs-string">"@+id/activity_main"</span></span> android:layout_width=<span class="hljs-string"><span class="hljs-string">"match_parent"</span></span> android:layout_height=<span class="hljs-string"><span class="hljs-string">"match_parent"</span></span> android:orientation=<span class="hljs-string"><span class="hljs-string">"vertical"</span></span> tools:context=<span class="hljs-string"><span class="hljs-string">"library.draw.myapplication.MainActivity"</span></span>&gt; &lt;library.draw.myapplication.CustomFontsTextView android:layout_width=<span class="hljs-string"><span class="hljs-string">"wrap_content"</span></span> android:layout_height=<span class="hljs-string"><span class="hljs-string">"wrap_content"</span></span> android:layout_gravity=<span class="hljs-string"><span class="hljs-string">"center_horizontal"</span></span> android:layout_margin=<span class="hljs-string"><span class="hljs-string">"16dp"</span></span> app:fonts=<span class="hljs-string"><span class="hljs-string">"font1"</span></span> android:textSize=<span class="hljs-string"><span class="hljs-string">"24sp"</span></span> android:id=<span class="hljs-string"><span class="hljs-string">"@+id/text_view_1"</span></span> android:text=<span class="hljs-string"><span class="hljs-string">"Hello World!"</span></span> /&gt; &lt;library.draw.myapplication.CustomFontsTextView android:layout_width=<span class="hljs-string"><span class="hljs-string">"wrap_content"</span></span> android:layout_height=<span class="hljs-string"><span class="hljs-string">"wrap_content"</span></span> android:layout_gravity=<span class="hljs-string"><span class="hljs-string">"center_horizontal"</span></span> android:layout_margin=<span class="hljs-string"><span class="hljs-string">"16dp"</span></span> android:textSize=<span class="hljs-string"><span class="hljs-string">"48sp"</span></span> app:fonts=<span class="hljs-string"><span class="hljs-string">"font2"</span></span> android:id=<span class="hljs-string"><span class="hljs-string">"@+id/text_view_2"</span></span> android:text=<span class="hljs-string"><span class="hljs-string">"Hello World!"</span></span> /&gt; &lt;library.draw.myapplication.CustomFontsTextView android:layout_width=<span class="hljs-string"><span class="hljs-string">"wrap_content"</span></span> android:layout_height=<span class="hljs-string"><span class="hljs-string">"wrap_content"</span></span> android:layout_gravity=<span class="hljs-string"><span class="hljs-string">"center_horizontal"</span></span> android:layout_margin=<span class="hljs-string"><span class="hljs-string">"16dp"</span></span> android:textSize=<span class="hljs-string"><span class="hljs-string">"24sp"</span></span> app:fonts=<span class="hljs-string"><span class="hljs-string">"font3"</span></span> android:id=<span class="hljs-string"><span class="hljs-string">"@+id/text_view_3"</span></span> android:text=<span class="hljs-string"><span class="hljs-string">"Hello World!"</span></span> /&gt; &lt;/LinearLayout&gt;</code> </pre><br>  In the preview, we will see already completely finished text fields with our fonts. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/9d2/4f7/eaf/9d24f7eafd3c8ef15850593c40527d37.png" alt="image"><br>  It is better to refer to our custom text fields as to ordinary TextView, in a standard form: <br><br><pre> <code class="java hljs"> TextView textView = (TextView) findViewById(R.id.text_view_1);</code> </pre> <br>  Thanks for attention. </div><p>Source: <a href="https://habr.com/ru/post/315478/">https://habr.com/ru/post/315478/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../315468/index.html">Stripe Service Discovery</a></li>
<li><a href="../315470/index.html">History of programming languages: from BASIC to Visual Basic</a></li>
<li><a href="../315472/index.html">Cloud on Microsoft Hyper-V, Part 3: Storage Spaces Storage</a></li>
<li><a href="../315474/index.html">Snowden to Russia, Hammond behind bars</a></li>
<li><a href="../315476/index.html">Deep learning for newbies: fine tuning neural network</a></li>
<li><a href="../315480/index.html">Managing the robot at Arduino from the application on Node.js</a></li>
<li><a href="../315482/index.html">What is the strength of the affiliate network, why does power become weak as it progresses, and what to do about it</a></li>
<li><a href="../315484/index.html">Artificial intelligence, challenges and risks - through the eyes of an engineer</a></li>
<li><a href="../315486/index.html">One of the vulnerabilities of WPS technology</a></li>
<li><a href="../315488/index.html">We make a motor control loop with a current reference</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
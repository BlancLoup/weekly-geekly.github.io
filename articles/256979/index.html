<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Create an isomorphic application on React and Flummox</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Today I want to show how to use React, Flummox and Express to create a complete isomorphic application. 

 The idea of ‚Äã‚Äãisomorphism has long been in ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Create an isomorphic application on React and Flummox</h1><div class="post__text post__text-html js-mediator-article">  Today I want to show how to use React, Flummox and Express to create a complete isomorphic application. <br><br>  The idea of ‚Äã‚Äãisomorphism has long been in the air, but no one knew this word, so nothing really changed until <a href="http://nerds.airbnb.com/isomorphic-javascript-future-web-apps/">airbnb arrived</a> . <br><br>  React appeared six months before, later Flux and many of its implementations appeared, one not worse than the other.  But all these implementations focused only on work on the client side, they worked through singletons and, often, they could not be used properly on the server.  I managed to try a few, but I did not like one.  Until two months ago, I stumbled upon Flummox.  According to the developer, Flummox was created just for isomorphic applications, it does not use the singletons inherent in other implementations, and is as simple as possible to use. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      You are expected to have experience with React and have heard of Flux.  So let's go ... <br>  You can pick up the finished code <a href="https://github.com/asdf404/flummox-isomorphic-todo">here</a> . <br><a name="habracut"></a><br><h3>  Step 0: Defining the Idea </h3><br>  Our idea is to create an application for recording other ideas.  This will be a TODO list (like <a href="http://todomvc.com/">Todo MVC</a> ) with data stored on the server.  Requirements are: <br><ul><li>  adding tasks; </li><li>  marking the task as "completed"; </li><li>  deleting (completed) tasks; </li></ul><br>  The internal memory of the process will be used as a database, but it will emulate the use of an external database (data is returned via <a href="https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Global_Objects/Promise">Promise</a> ). <br>  At the same time, we will learn how you can already touch ES2015 and ES2016 (hereinafter, for brevity, I will call them ES6 / ES7) in my application. <br><br><h3>  Step 1: Install the necessary packages </h3><br>  For the server, we will use <a href="http://expressjs.com/">Express</a> to avoid headaches with low-level components, <a href="http://acdlite.github.io/flummox">Flummox</a> to operate on data and <a href="https://facebook.github.io/react/">React</a> to work comfortably with the DOM tree, and in order to run all this we need <a href="http://babeljs.io/">Babel</a> . <br><br>  In this step, we will initialize our Express application and install the basic components. <br><br><pre><code class="bash hljs">$ express $ npm install react flummox isomorphic-fetch todomvc-app-css react-router --save $ npm install babel webpack babel-core babel-loader brfs transform-loader --save-dev</code> </pre> <br>  What did we just put in addition to React: <br><ul><li>  <code>flummox</code> is that isomorphic Flux; </li><li>  <code>react-router</code> - the router of the client part of our application; </li><li>  <code>isomorphic-fetch</code> is the polyfill for the new <a href="https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API">fetch</a> method, which replaces XMLHttpRequest. </li><li>  <code>todomvc-app-css</code> - package with standard styles for TODOMVC applications; </li><li>  <code>babel</code> , <code>babel-core</code> , <code>babel-loader</code> , <code>brfs</code> and <code>transform-loader</code> - ES6 / ES7 to ES5 translator and other auxiliary packages required when building a client application; </li><li>  <code>webpack</code> - utility to build the client side. </li></ul><br>  To run, we will use <code>babel-node</code> , since  It allows you to broadcast ES6 / ES7 code to ES5 on the fly.  Therefore, we add a launch command to <code>package.json</code> : <br><br><pre> <code class="javascript hljs"><span class="hljs-string"><span class="hljs-string">"scripts"</span></span>: { <span class="hljs-string"><span class="hljs-string">"start"</span></span>: <span class="hljs-string"><span class="hljs-string">"babel-node --stage 0 ./bin/www"</span></span> }</code> </pre><br><h3>  Step 2: Skeleton Application </h3><br>  Let's start writing the code of our application.  To do this, create a directory structure in which our files will be located: <br><br><pre> <code class="hljs axapta">. ‚îú‚îÄ‚îÄ bin ‚îú‚îÄ‚îÄ <span class="hljs-keyword"><span class="hljs-keyword">client</span></span> ‚îú‚îÄ‚îÄ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> ‚îÇ ‚îî‚îÄ‚îÄ js ‚îú‚îÄ‚îÄ <span class="hljs-keyword"><span class="hljs-keyword">server</span></span> ‚îÇ ‚îî‚îÄ‚îÄ storages ‚îú‚îÄ‚îÄ shared ‚îÇ ‚îú‚îÄ‚îÄ actions ‚îÇ ‚îú‚îÄ‚îÄ components ‚îÇ ‚îú‚îÄ‚îÄ handlers ‚îÇ ‚îî‚îÄ‚îÄ stores ‚îî‚îÄ‚îÄ utils</code> </pre><br>  Now you need to define the structure of the application and create basic components: <code>TodoList</code> , <code>TodoInput</code> and <code>TodoItem</code> - a list, a new task entry field and a separate list item (separate task), respectively.  Components will be located in the <code>shared/components</code> folder, stores (stores) in the <code>shared/stores</code> folder, and actions (actions) in the <code>shared/actions</code> folder. <br>  The application logic is divided into server, client and general, and is located in the <code>server</code> , <code>client</code> and <code>shared</code> folders, respectively.  The <code>shared</code> folder just contains all the isomorphic components that will be used on the client and the server. <br><br>  The code of the main components needed to display: <br><br><div class="spoiler">  <b class="spoiler_title">shared / components / TodoList.js</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> TodoItem <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./TodoItem'</span></span>; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TodoList</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{ onToggleStatus(id, completed) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props.onToggleStatus(id, completed); } onDeleteTask(id) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props.onDeleteTask(id); } render() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ( <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">ul</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">className</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"todo-list"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> {this.props.tasks.map(task =&gt; </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">TodoItem</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">key</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{task.id}</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">task</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{task}</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">onToggleStatus</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{this.onToggleStatus.bind(this,</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">task.id</span></span></span></span><span class="xml"><span class="hljs-tag">)} </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">onDeleteTask</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{this.onDeleteTask.bind(this,</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">task.id</span></span></span></span><span class="xml"><span class="hljs-tag">)} /&gt;</span></span></span><span class="xml"> )} </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">ul</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> ); } } export default TodoList;</span></span></code> </pre><br></div></div><br><div class="spoiler">  <b class="spoiler_title">shared / components / TodoItem.js</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span>; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TodoItem</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>(props) { <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>(props); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.state = props.task; } handleToggleStatus() { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> completed = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.refs.completed.getDOMNode().checked; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props.onToggleStatus(completed); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setState({completed}); } handleDeleteTask() { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props.onDeleteTask(); } render() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ( &lt;li className={this.state.completed ? 'completed' : ''}&gt; &lt;div className="view"&gt; &lt;input className="toggle" type="checkbox" defaultChecked={this.state.completed} onChange={this.handleToggleStatus.bind(this)} ref="completed" /&gt; &lt;label&gt;{this.state.text}&lt;/label&gt; &lt;button className="destroy" onClick={this.handleDeleteTask.bind(this)} /&gt; &lt;/div&gt; &lt;input className="edit" defaultValue={this.state.text} /&gt; &lt;/li&gt; ); } } export default TodoItem;</code> </pre><br></div></div><br>  Add a handler for all (except the API) incoming requests that will be processed by the reactor's router (see below): <br><br><div class="spoiler">  <b class="spoiler_title">Code</b> <div class="spoiler_text"><pre> <code class="javascript hljs">app.use(<span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">req, res, next</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> flux = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Flux(); <span class="hljs-comment"><span class="hljs-comment">//   ,       let router = Router.create({ routes: routes, location: req.url }); let {Handler, state} = await new Promise((resolve, reject) =&gt; { router.run((Handler, state) =&gt; resolve({Handler, state}) ); }); //  , .  ‚Ññ4 await performRouteHandlerStaticMethod(state.routes, 'routerWillRun', {state, flux}); //     let html = React.renderToString( &lt;FluxComponent flux={flux}&gt; &lt;Handler {...state} /&gt; &lt;/FluxComponent&gt; ); //      , ..    res.send(` &lt;!DOCTYPE html&gt; &lt;html&gt; &lt;head&gt; &lt;meta charset="utf-8"&gt; &lt;meta name="viewport" content="width=device-width, initial-scale=1"&gt; &lt;title&gt;HabraIsoTODO&lt;/title&gt; &lt;link rel="stylesheet" href="/css/index.css"&gt; &lt;/head&gt; &lt;body&gt; &lt;div id="app"&gt; ${html} &lt;/div&gt; &lt;/body&gt; &lt;/html&gt;` ); });</span></span></code> </pre><br></div></div><br>  Great, now we have a main client request handler. <br><br>  Here we use new features that will become available in ES7 - <a href="http://jakearchibald.com/2014/es7-async-functions/">async / await</a> .  They allow you to save the code from callback-hell (which previously had to be solved using the wonderful <a href="https://github.com/caolan/async">async</a> module or similar). <br><br>  Tip: wrap all operations inside this handler in a try-catch block to catch errors.  Since  if something breaks inside, then without try-catch you will <a href="https://github.com/babel/babel/issues/1234">not see</a> an error message. <br><br><h3>  Step 3: API </h3><br>  Add a little API that allows the client and server to interact.  We will use the REST approach, since  It fits perfectly into this task.  Define the base paths: <br><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">GET</span></span> /api/tasks #   POST /api/tasks #   PUT /api/tasks #    <span class="hljs-keyword"><span class="hljs-keyword">GET</span></span> /api/tasks/active #   <span class="hljs-keyword"><span class="hljs-keyword">GET</span></span> /api/tasks/completed #   <span class="hljs-keyword"><span class="hljs-keyword">DELETE</span></span> /api/tasks/completed #   PUT /api/tasks/:id #    <span class="hljs-keyword"><span class="hljs-keyword">DELETE</span></span> /api/tasks/:id #   </code> </pre><br>  Then we write them in the form of routes: <br><br><div class="spoiler">  <b class="spoiler_title">server / routes.js</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> {Router} <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'express'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> MemoryStorage <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./storages/MemoryStorage'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> http <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'http'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> router = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Router(); <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> storage = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MemoryStorage(); router.get(<span class="hljs-string"><span class="hljs-string">'/tasks'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> (req, res) =&gt; { res.json(<span class="hljs-keyword"><span class="hljs-keyword">await</span></span> storage.list()); }); router.post(<span class="hljs-string"><span class="hljs-string">'/tasks'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> (req, res, next) =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!req.body.text || !req.body.text.length) { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> err = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Error</span></span>(http.STATUS_CODES[<span class="hljs-number"><span class="hljs-number">400</span></span>]); err.status = <span class="hljs-number"><span class="hljs-number">400</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> next(err); } <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> task = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> storage.save({ <span class="hljs-attr"><span class="hljs-attr">text</span></span>: req.body.text.substr(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">256</span></span>), <span class="hljs-attr"><span class="hljs-attr">completed</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span> }); res.status(<span class="hljs-number"><span class="hljs-number">201</span></span>).send(task); }); router.put(<span class="hljs-string"><span class="hljs-string">'/tasks'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> (req, res) =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> completed = req.body.completed; <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> tasks = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">await</span></span></span></span><span class="hljs-function"><span class="hljs-params"> storage.list(</span></span></span><span class="hljs-function">)).</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">map</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">task =&gt; { </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">return</span></span></span></span><span class="hljs-function"><span class="hljs-params"> storage.update(task.id, { text: task.text, completed: </span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">Boolean</span></span></span></span><span class="hljs-function"><span class="hljs-params">(completed</span></span></span><span class="hljs-function">) }); }); </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">res</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">status</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">201</span></span></span></span></span><span class="hljs-function">).</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">json</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">await</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">Promise</span></span></span></span><span class="hljs-function"><span class="hljs-params">.all(tasks</span></span></span><span class="hljs-function">)); }); </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">router</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">get</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">'/tasks/active'</span></span></span></span><span class="hljs-function"><span class="hljs-params">, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">async</span></span></span></span><span class="hljs-function"><span class="hljs-params"> (req, res</span></span></span><span class="hljs-function">) =&gt;</span></span> { res.json(<span class="hljs-keyword"><span class="hljs-keyword">await</span></span> storage.list(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">task</span></span></span><span class="hljs-function">) =&gt;</span></span> !task.completed)); }); router.get(<span class="hljs-string"><span class="hljs-string">'/tasks/completed'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> (req, res) =&gt; { res.json(<span class="hljs-keyword"><span class="hljs-keyword">await</span></span> storage.list(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">task</span></span></span><span class="hljs-function">) =&gt;</span></span> task.completed)); }); router.delete(<span class="hljs-string"><span class="hljs-string">'/tasks/completed'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> (req, res, next) =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> deleted = []; <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> items = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> storage.list(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">task</span></span></span><span class="hljs-function">) =&gt;</span></span> task.completed); items.forEach(<span class="hljs-keyword"><span class="hljs-keyword">async</span></span> (item) =&gt; { deleted.push(item.id); <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> storage.remove(item.id); }); res.status(<span class="hljs-number"><span class="hljs-number">200</span></span>).json({deleted}); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (err) { next(err); } }); router.get(<span class="hljs-string"><span class="hljs-string">'/tasks/:id'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> (req, res, next) =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> id = req.params.id; <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> item = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> storage.fetch(id); res.status(<span class="hljs-number"><span class="hljs-number">200</span></span>).send(item); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (err) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> next(err); } }); router.put(<span class="hljs-string"><span class="hljs-string">'/tasks/:id'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> (req, res, next) =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> id = req.params.id; <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> item = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> storage.fetch(id); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (err) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> next(err); } <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> updated = item; <span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>.keys(req.body).forEach(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">key</span></span></span><span class="hljs-function">) =&gt;</span></span> { updated[key] = req.body[key]; }); <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> task = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> storage.update(id, updated); res.status(<span class="hljs-number"><span class="hljs-number">200</span></span>).json(task); }); router.delete(<span class="hljs-string"><span class="hljs-string">'/tasks/:id'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> (req, res, next) =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> id = req.params.id; <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> removed = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> storage.remove(id); res.status(<span class="hljs-number"><span class="hljs-number">200</span></span>).send({id, removed}); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (err) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> next(err); } }); <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> router;</code> </pre><br></div></div><br>  Now we will mount routes to the main application: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> api <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./server/routes'</span></span>; <span class="hljs-comment"><span class="hljs-comment">// ... app.use('/api', api);</span></span></code> </pre><br>  Since  the data must be stored somewhere, then let's create a storage: <br><br><div class="spoiler">  <b class="spoiler_title">server / storages / MemoryStorage.js</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> http <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'http'</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">clone</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">obj</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-built_in"><span class="hljs-built_in">JSON</span></span>.parse(<span class="hljs-built_in"><span class="hljs-built_in">JSON</span></span>.stringify(obj)); } <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MemoryStorage</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>() { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._items = { <span class="hljs-number"><span class="hljs-number">1</span></span>: { <span class="hljs-attr"><span class="hljs-attr">id</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-attr"><span class="hljs-attr">text</span></span>: <span class="hljs-string"><span class="hljs-string">'Rule the World'</span></span>, <span class="hljs-attr"><span class="hljs-attr">completed</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span> }, <span class="hljs-number"><span class="hljs-number">2</span></span>: { <span class="hljs-attr"><span class="hljs-attr">id</span></span>: <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-attr"><span class="hljs-attr">text</span></span>: <span class="hljs-string"><span class="hljs-string">'Be an Awesome'</span></span>, <span class="hljs-attr"><span class="hljs-attr">completed</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span> } }; } count() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Promise</span></span>(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">resolve</span></span></span><span class="hljs-function">) =&gt;</span></span> { resolve(<span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>.keys(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._items).length); }); } save(item) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Promise</span></span>(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">resolve</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> obj = clone(item); obj.id = <span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.round(<span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.random() * <span class="hljs-number"><span class="hljs-number">10000000</span></span>).toString(<span class="hljs-number"><span class="hljs-number">36</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._items[obj.id] = obj; resolve(obj); }); } fetch(id) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Promise</span></span>(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">resolve, reject</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._items[id]) { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> err = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Error</span></span>(http.STATUS_CODES[<span class="hljs-number"><span class="hljs-number">404</span></span>]); err.status = <span class="hljs-number"><span class="hljs-number">404</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> reject(err); } resolve(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._items[id]); }); } update(id, item) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Promise</span></span>(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">resolve, reject</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> obj = clone(item); <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> existed = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._items[id]; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!existed) { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> err = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Error</span></span>(http.STATUS_CODES[<span class="hljs-number"><span class="hljs-number">404</span></span>]); err.status = <span class="hljs-number"><span class="hljs-number">404</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> reject(err); } obj.id = existed.id; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._items[obj.id] = obj; resolve(obj); }); } remove(id) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Promise</span></span>(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">resolve, reject</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._items[id]) { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> err = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Error</span></span>(http.STATUS_CODES[<span class="hljs-number"><span class="hljs-number">404</span></span>]); err.status = <span class="hljs-number"><span class="hljs-number">404</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> reject(err); } <span class="hljs-keyword"><span class="hljs-keyword">delete</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._items[id]; resolve(<span class="hljs-literal"><span class="hljs-literal">true</span></span>); }); } list(check) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Promise</span></span>(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">resolve</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> items = <span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>.keys(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._items).map(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">key</span></span></span><span class="hljs-function">) =&gt;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._items[key]).reduce(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">memo, item</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (check &amp;&amp; check(item)) { memo.push(item); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!check) { memo.push(item); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> memo; }, []); resolve(items); }); } }</code> </pre><br></div></div><br>  This component will store our tasks in the process memory.  The attentive reader may have noticed that we return the Promise from all methods.  This is exactly the place where work with external DB is emulated. <br><br>  You can also see that this component throws HTTP errors in some methods.  You can't do this in the real world, because the repository doesn't need to know anything about HTTP. <br><br><h3>  Step 4: Components and Storage </h3><br>  The API is nice, of course, but we still need to connect everything with the components.  To do this, we will create a set of Actions and Store, which will communicate with the server, returning the state for drawing into our components. <br><br>  First, let's declare our Actions and Store in the main Flux class: <br><br><div class="spoiler">  <b class="spoiler_title">shared / flux.js</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> {Flux} <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'flummox'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> TodoListAction <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./actions/TodoActions'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> TodoListStore <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./stores/TodoStore'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Flux</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>() { <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>(); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.createActions(<span class="hljs-string"><span class="hljs-string">'todo'</span></span>, TodoListAction); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.createStore(<span class="hljs-string"><span class="hljs-string">'todo'</span></span>, TodoListStore, <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>); } }</code> </pre><br></div></div><br>  Here we registered our actions and storage under the name <code>todo</code> .  By this name we can get them anywhere in the application. <br><br>  Now let's announce the actions and the repository: <br><br><div class="spoiler">  <b class="spoiler_title">shared / actions / TodoActions.js</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> {Actions} <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'flummox'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> fetch <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'isomorphic-fetch'</span></span>; <span class="hljs-comment"><span class="hljs-comment">//     , ..         location.host const API_HOST = 'http://localhost:3000'; class TodoListActions extends Actions { async getTasks() { return (await fetch(`${API_HOST}/api/tasks`, { headers: { 'Accept': 'application/json' } })).json(); } async getActiveTasks() { return (await fetch(`${API_HOST}/api/tasks/active`, { headers: { 'Accept': 'application/json' } })).json(); } async getCompletedTasks() { return (await fetch(`${API_HOST}/api/tasks/completed`, { headers: { 'Accept': 'application/json' } })).json(); } async deleteCompletedTasks() { return (await fetch(`${API_HOST}/api/tasks/completed`, { method: 'DELETE', headers: { 'Accept': 'application/json' } })).json(); } async createTask(task) { return (await fetch(`${API_HOST}/api/tasks`, { method: 'POST', headers: { 'Accept': 'application/json', 'Content-Type': 'application/json' }, body: JSON.stringify(task) })).json(); } async deleteTask(id) { return (await fetch(`${API_HOST}/api/tasks/${id}`, { method: 'DELETE', headers: { 'Accept': 'application/json' } })).json(); } async toggleTask(id, completed) { return (await fetch(`${API_HOST}/api/tasks/${id}`, { method: 'PUT', headers: { 'Accept': 'application/json', 'Content-Type': 'application/json' }, body: JSON.stringify({completed}) })).json(); } async toggleAll(completed) { return (await fetch(`${API_HOST}/api/tasks`, { method: 'PUT', headers: { 'Accept': 'application/json', 'Content-Type': 'application/json' }, body: JSON.stringify({completed}) })).json(); } } export default TodoListActions;</span></span></code> </pre><br></div></div><br><div class="spoiler">  <b class="spoiler_title">shared / stores / TodoStore.js</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> {Store} <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'flummox'</span></span>; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TodoListStore</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Store</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>(flux) { <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>(); <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> actions = flux.getActionIds(<span class="hljs-string"><span class="hljs-string">'todo'</span></span>); <span class="hljs-comment"><span class="hljs-comment">//       this.register(actions.getTasks, this.handleNewTasks); this.register(actions.getActiveTasks, this.handleNewTasks); this.register(actions.getCompletedTasks, this.handleNewTasks); this.register(actions.createTask, this.handleNewTask); this.register(actions.toggleTask, this.handleUpdateTask); this.register(actions.toggleAll, this.handleNewTasks); this.register(actions.deleteTask, this.handleDeleteTask); this.register(actions.deleteCompletedTasks, this.handleDeleteTasks); } handleNewTask(task) { if (task &amp;&amp; task.id) { this.setState({ tasks: this.state.tasks.concat([task]) }); } } handleNewTasks(tasks) { this.setState({ tasks: tasks ? tasks : [] }); } handleUpdateTask(task) { let id = task.id; this.setState({ tasks: this.state.tasks.map(t =&gt; { return (t.id == id) ? task : t; }) }); } handleDeleteTask(task) { let id = task.id; this.setState({ tasks: this.state.tasks.map(t =&gt; { if (t.id != id) { return t; } }).filter(Boolean) }); } handleDeleteTasks({deleted}) { this.setState({ tasks: this.state.tasks.filter(task =&gt; deleted.indexOf(task.id) &lt; 0 ) }); } } export default TodoListStore;</span></span></code> </pre><br></div></div><br>  In fact, only Action communicates with the server, and the Store only stores data and links it to components. <br><br>  In the storage designer ( <code>TodoStore</code> ), we register handlers that will be automatically called when data is received from the server. <br><br>  Now, after calling the method from Action, it will automatically update the state of the Store, and that in turn will update the state of the component. <br><br><h3>  Step 5: Routing </h3><br>  Routing is one of the most important components of any modern application.  Client routing is given to the component of the reactor and it already decides what to show. <br>  <code>react-router</code> allows you to set paths in a declarative style, which is exactly in the spirit of React.  Let's declare the paths we need: <br><br><div class="spoiler">  <b class="spoiler_title">client / routes.js</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> {Route, DefaultRoute, NotFoundRoute} <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react-router'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> AppHandler <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'../shared/handlers/AppHandler'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> TodoHandler <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'../shared/handlers/TodoHandler'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> ( &lt;Route handler={AppHandler}&gt; &lt;DefaultRoute handler={TodoHandler} /&gt; &lt;Route name="all" path="/" handler={TodoHandler} action="all" /&gt; &lt;Route name="active" path="/active" handler={TodoHandler} action="active" /&gt; &lt;Route name="completed" path="/completed" handler={TodoHandler} action="completed" /&gt; &lt;/Route&gt; );</code> </pre><br></div></div><br>  As you can see, each route has its own handler.  Handlers in our application will load data and be so-called.  "smart" (see attached links) components.  There will be two of them: <br><br><div class="spoiler">  <b class="spoiler_title">shared / handlers / AppHandler.js</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> {RouteHandler} <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react-router'</span></span>; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AppHandler</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{ render() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ( <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">section</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">className</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"todoapp"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">RouteHandler</span></span></span></span><span class="xml"><span class="hljs-tag"> {</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">...this.props</span></span></span></span><span class="xml"><span class="hljs-tag">} </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">key</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{this.props.pathname}</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">section</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> ); } } export default AppHandler;</span></span></code> </pre><br></div></div><br><div class="spoiler">  <b class="spoiler_title">shared / handlers / TodoHandler.js</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Flux <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'flummox/component'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> TodoList <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'../components/TodoList'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> TodoInput <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'../components/TodoInput'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> ItemsCounter <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'../components/ItemsCounter'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> ToggleAll <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'../components/ToggleAll'</span></span>; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TodoHandler</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> routerWillRun({flux, state}) { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> action = state.routes[state.routes.length - <span class="hljs-number"><span class="hljs-number">1</span></span>].name; <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> todoActions = flux.getActions(<span class="hljs-string"><span class="hljs-string">'todo'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (action) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'active'</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> todoActions.getActiveTasks(); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'completed'</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> todoActions.getCompletedTasks(); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'all'</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> todoActions.getTasks(); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; } } <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> handleNewTask(text) { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> actions = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props.flux.getActions(<span class="hljs-string"><span class="hljs-string">'todo'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> actions.createTask({text}); } <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> handleToggleStatus(id, status) { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> actions = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props.flux.getActions(<span class="hljs-string"><span class="hljs-string">'todo'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> actions.toggleTask(id, status); } <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> handleToggleAll(status) { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> actions = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props.flux.getActions(<span class="hljs-string"><span class="hljs-string">'todo'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> actions.toggleAll(status); } <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> handleDeleteTask(id) { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> actions = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props.flux.getActions(<span class="hljs-string"><span class="hljs-string">'todo'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> actions.deleteTask(id); } <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> handleDeleteCompletedTasks(id) { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> actions = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props.flux.getActions(<span class="hljs-string"><span class="hljs-string">'todo'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> actions.deleteCompletedTasks(); } render() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ( &lt;div&gt; &lt;header className="header"&gt; &lt;h1&gt;todos&lt;/h1&gt; &lt;TodoInput handleNewTask={this.handleNewTask.bind(this)} /&gt; &lt;/header&gt; &lt;section className="main"&gt; &lt;Flux connectToStores={['todo']}&gt; &lt;ToggleAll onToggleStatus={this.handleToggleAll.bind(this)} /&gt; &lt;/Flux&gt; &lt;Flux connectToStores={['todo']}&gt; &lt;TodoList onToggleStatus={this.handleToggleStatus.bind(this)} onDeleteTask={this.handleDeleteTask.bind(this)} /&gt; &lt;/Flux&gt; &lt;/section&gt; &lt;footer className="footer"&gt; &lt;Flux connectToStores={['todo']}&gt; &lt;ItemsCounter count={0} /&gt; &lt;/Flux&gt; &lt;ul className="filters"&gt; &lt;li&gt; &lt;a href="/"&gt;All&lt;/a&gt; &lt;/li&gt; &lt;li&gt; &lt;a href="/active"&gt;Active&lt;/a&gt; &lt;/li&gt; &lt;li&gt; &lt;a href="/completed"&gt;Completed&lt;/a&gt; &lt;/li&gt; &lt;/ul&gt; &lt;button className="clear-completed" onClick={this.handleDeleteCompletedTasks.bind(this)}&gt; Clear completed &lt;/button&gt; &lt;/footer&gt; &lt;/div&gt; ); } } export default TodoHandler;</code> </pre><br></div></div><br>  The <code>TodoHandler</code> component is smart and you may have noticed the <code>routerWillRun</code> static method, this is where the initial data loading takes place in the Store.  How to call this method will be shown below.  The remaining components, respectively, will be "stupid" and only react in a certain way to changes in the surrounding world and events from the user. <br><br>  It also shows that some components are wrapped in a <code>&lt;Flux /&gt;</code> component.  Its <code>connectToStores</code> property establishes a connection between the repository and the child component.  Everything that is in the <code>state</code> repository becomes available in the <code>props</code> child component. <br><br><h3>  Step 6: Rendering the home page </h3><br>  It is time to render our components.  But in order to do this correctly, we need to preload all existing tasks.  As you remember, tasks are loaded via the HTTP API.  But we have a <code>TodoAction</code> for this, which describes the <code>getTasks</code> method.  In the Flummox example, a method is <a href="">described</a> with the terribly long name <code>performRouteHandlerStaticMethod</code> , which should trigger the loading of data for the storage using the <code>routerWillRun</code> method described above. <br><br>  Add it to yourself. <br><br><div class="spoiler">  <b class="spoiler_title">utils / performRouteHandlerStaticMethod.js</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">performRouteHandlerStaticMethod</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">routes, methodName, ...args</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Promise</span></span>.all(routes .map(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">route</span></span></span><span class="hljs-function"> =&gt;</span></span> route.handler[methodName]) .filter(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">method</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span> method === <span class="hljs-string"><span class="hljs-string">'function'</span></span>) .map(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">method</span></span></span><span class="hljs-function"> =&gt;</span></span> method(...args)) ); }</code> </pre><br></div></div><br>  It needs to be added to the server and client parts of the application. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> performRouteHandlerStaticMethod <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'../utils/performRouteHandlerStaticMethod'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> performRouteHandlerStaticMethod(state.routes, <span class="hljs-string"><span class="hljs-string">'routerWillRun'</span></span>, {state, flux});</code> </pre><br><br>  How it looks you can see <a href="">here</a> and <a href="">here</a> . <br><br>  Now, when this handler is <code>routerWillRun</code> , the <code>routerWillRun</code> method will be called, which will load the necessary data into the Store and it will be displayed in the component. <br><br><h3>  Step 7: Build the client side </h3><br>  We knowingly installed a <code>webpack</code> .  He will help us build our application to work on the client.  To do this, let's configure it. <br><br><div class="spoiler">  <b class="spoiler_title">webpack.config.js</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> path = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'path'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> webpack = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'webpack'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> DEBUG = process.env.NODE_ENV !== <span class="hljs-string"><span class="hljs-string">'production'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> plugins = [ <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> webpack.optimize.OccurenceOrderPlugin() ]; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!DEBUG) { plugins.push( <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> webpack.optimize.UglifyJsPlugin() ); } <span class="hljs-built_in"><span class="hljs-built_in">module</span></span>.exports = { <span class="hljs-attr"><span class="hljs-attr">cache</span></span>: DEBUG, <span class="hljs-attr"><span class="hljs-attr">debug</span></span>: DEBUG, <span class="hljs-attr"><span class="hljs-attr">target</span></span>: <span class="hljs-string"><span class="hljs-string">'web'</span></span>, <span class="hljs-attr"><span class="hljs-attr">devtool</span></span>: DEBUG ? <span class="hljs-string"><span class="hljs-string">'#inline-source-map'</span></span> : <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-attr"><span class="hljs-attr">entry</span></span>: { <span class="hljs-attr"><span class="hljs-attr">client</span></span>: [<span class="hljs-string"><span class="hljs-string">'./client/app.js'</span></span>] }, <span class="hljs-attr"><span class="hljs-attr">output</span></span>: { <span class="hljs-attr"><span class="hljs-attr">path</span></span>: path.resolve(<span class="hljs-string"><span class="hljs-string">'public/js'</span></span>), <span class="hljs-attr"><span class="hljs-attr">publicPath</span></span>: <span class="hljs-string"><span class="hljs-string">'/'</span></span>, <span class="hljs-attr"><span class="hljs-attr">filename</span></span>: <span class="hljs-string"><span class="hljs-string">'bundle.js'</span></span>, <span class="hljs-attr"><span class="hljs-attr">pathinfo</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span> }, <span class="hljs-attr"><span class="hljs-attr">module</span></span>: { <span class="hljs-attr"><span class="hljs-attr">loaders</span></span>: [ { <span class="hljs-attr"><span class="hljs-attr">test</span></span>: <span class="hljs-regexp"><span class="hljs-regexp">/\.js/</span></span>, <span class="hljs-attr"><span class="hljs-attr">loaders</span></span>: [<span class="hljs-string"><span class="hljs-string">'transform?brfs'</span></span>, <span class="hljs-string"><span class="hljs-string">'babel-loader?stage=0'</span></span>] }, { <span class="hljs-attr"><span class="hljs-attr">test</span></span>: <span class="hljs-regexp"><span class="hljs-regexp">/\.json$/</span></span>, <span class="hljs-attr"><span class="hljs-attr">loaders</span></span>: [<span class="hljs-string"><span class="hljs-string">'json-loader'</span></span>] } ] }, <span class="hljs-attr"><span class="hljs-attr">plugins</span></span>: plugins, <span class="hljs-attr"><span class="hljs-attr">resolve</span></span>: { <span class="hljs-attr"><span class="hljs-attr">extensions</span></span>: [<span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">'.js'</span></span>, <span class="hljs-string"><span class="hljs-string">'.json'</span></span>, <span class="hljs-string"><span class="hljs-string">'.jsx'</span></span>] } };</code> </pre><br></div></div><br>  The application will be <code>bundle.js</code> in the <code>bundle.js</code> file, so it must be connected on the client: <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/javascript"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"/js/bundle.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br>  Add a command to build in <code>package.json</code> : <br><br><pre> <code class="javascript hljs"><span class="hljs-string"><span class="hljs-string">"scripts"</span></span>: { <span class="hljs-string"><span class="hljs-string">"build"</span></span>: <span class="hljs-string"><span class="hljs-string">"webpack"</span></span> }</code> </pre><br>  Now you can run the assembly: <br><br><pre> <code class="bash hljs">$ npm run build</code> </pre><br>  After some time, the file <code>/public/js/bundle.js</code> will appear, which is the client version of our application. <br><br><h3>  Step 8: Let's see what happened </h3><br>  We have just created an isomorphic application.  Now we can run it <code>npm start</code> and <a href="http://localhost:3000/">see</a> what happened. <br><br><h3>  Afterword </h3><br>  I tried to convey my thoughts as clearly as possible, so some things are greatly simplified and made not quite right.  Also, in order not to confuse the code, in some places there are no checks for errors. <br><br>  I would also like to thank <a href="https://twitter.com/ikr">Ivan Krechetov</a> for reading the draft and recommendations for improving the quality of the code. <br><br><h3>  Useful reading: </h3><br><ul><li>  <a href="http://nerds.airbnb.com/isomorphic-javascript-future-web-apps/">Isomorphic JavaScript: The Future of Web Apps</a> ; </li><li>  <a href="http://acdlite.github.io/flummox/docs/guides/quick-start">Flummox: Quick start</a> ; </li><li>  <a href="https://medium.com/%40dan_abramov/smart-and-dumb-components-7ca2f9a7c7d0">Smart and Dumb Components</a> ; </li><li>  <a href="http://jakearchibald.com/2014/es7-async-functions/">ES7 async functions</a> ; </li></ul><br>  Happy coding! </div><p>Source: <a href="https://habr.com/ru/post/256979/">https://habr.com/ru/post/256979/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../256965/index.html">What is Virtual DOM?</a></li>
<li><a href="../256967/index.html">Apple is investing $ 1.9 billion in EU infrastructure. What is it, expansion to Europe or escape from the USA?</a></li>
<li><a href="../256971/index.html">Waski loader is used to distribute the banker Dyreza Trojan</a></li>
<li><a href="../256975/index.html">Audit of one ‚Äúslow‚Äù application in one large concern</a></li>
<li><a href="../256977/index.html">Step-by-Step: Preparing Mac OS Installation Packages. Part one</a></li>
<li><a href="../256981/index.html">The use of STM32 in industrial machines on the example of the blow molding machine CHODOS (Czech Republic)</a></li>
<li><a href="../256985/index.html">Step-by-Step: Preparing Mac OS Installation Packages. Part two. Package Creation in Package Maker</a></li>
<li><a href="../256987/index.html">Chatbot on neural networks</a></li>
<li><a href="../256989/index.html">Hacker implanted an NFC chip in his hand to bypass security scanners and control android phones</a></li>
<li><a href="../256993/index.html">Looking for the perfect review system for an online store</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Using cucumber as a business rules engine</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In this article I would like to share with you the idea of ‚Äã‚Äãusing cucumber as a business rule engine and an approach to checking such rules. 


 In t...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Using cucumber as a business rules engine</h1><div class="post__text post__text-html js-mediator-article"><p>  In this article I would like to share with you the idea of ‚Äã‚Äãusing <a href="https://github.com/cucumber/cucumber">cucumber</a> as a business rule engine and an approach to checking such rules. </p><br><p>  In the examples, I will refer to an application that solves the problem of distributing customers into groups depending on various parameters.  Application requirements are as follows: </p><br><ul><li>  For the client, the group must be selected according to the established distribution rules. </li><li>  only one group should be selected for each client </li></ul><br><p>  The client may have such parameters: country, ID, language, etc. </p><br><blockquote>  Cucumber is a tool that supports the development of software. <br>  Gherkin is a Business Readable, it is implemented. <br><a name="habracut"></a><br></blockquote><br><h2 id="prichiny">  The reasons </h2><br><p>  The reasons prompted to address this issue are presented below, and I even numbered them to show that there are 3 of them. </p><br><h3 id="prichina-1">  Reason 1 </h3><br><p>  In many projects where I participate, drools are used.  The rules are strictly covered by unit tests, and some where even BDD (Behavior Driven Development) tests are used with cucumber.  In one of these projects, I noticed a strange thing - the BDD code of the tests is much like the code of drools rules. <br>  I will give an example.  The drools code looks like this: </p><br><pre><code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">rule</span></span> "For client from country ENG group will be England" <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> Client(country == "ENG") <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> <span class="hljs-keyword"><span class="hljs-keyword">insert</span></span>(<span class="hljs-built_in"><span class="hljs-built_in">new</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Group</span></span>("England")); <span class="hljs-keyword"><span class="hljs-keyword">end</span></span></code> </pre> <br><p>  The feature description ( <a href="https://github.com/cucumber/cucumber/wiki/Feature-Introduction">cucumber feature</a> in <a href="https://github.com/cucumber/cucumber/wiki/Gherkin">gherkin</a> language) in the BDD test looks like this: </p><br><pre> <code class="hljs vhdl"> Scenario: <span class="hljs-keyword"><span class="hljs-keyword">For</span></span> client from country ENG <span class="hljs-keyword"><span class="hljs-keyword">group</span></span> will be England <span class="hljs-keyword"><span class="hljs-keyword">When</span></span> client<span class="hljs-symbol"><span class="hljs-symbol">'s</span></span> country <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-string"><span class="hljs-string">"ENG"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Then</span></span> <span class="hljs-keyword"><span class="hljs-keyword">group</span></span> will be <span class="hljs-string"><span class="hljs-string">"England"</span></span></code> </pre> <br><p>  If we ignore the syntax - one to one!  The example is mostly synthetic, but nonetheless it is honest - in a real project it all happened.  In fact, our expectations are described in two places in two different ways and it seems that the second (gherkin) is clearly more understandable.  So why not immediately write on it? </p><br><h3 id="prichina-2">  Reason 2 </h3><br><p>  It is necessary to provide the customer (in this case, the ‚Äúcustomer‚Äù is the one who forms the requirements for the application, uses it in his client-side ecosystem in the way he needs) a simple and understandable tool that allows you to describe your intentions / requirements for the functionality using business rules and apply them in real time.  Those.  in our example, the customer wants to change the rules for the distribution of customers into groups himself, while the programmer now does this - he implements the customer's requirements in the form of rules, tests them with unit tests and a tester (with all the respect inherent in this case) and delivers them as part of The new version of the application. </p><br><p>  As I mentioned above, we use drools and love it (although these are probably not the same romantic feelings, but simply a habit), and to solve the voiced problem in the drools ecosystem, there is a tool ‚Äî the <strong>drools workbench</strong> , which has a rich (and most importantly sufficient) functionality.  But it seems to me that giving the customer this tool ‚Äúas is‚Äù and let him write the rules as he pleases is a very optimistic idea.  Because drools are complex and you need to be at least specially trained in order to manage it.  At the same time, it is strictly necessary to cover drools-rules with tests - this is of course my opinion, but I impose it on everyone. <br>  To simplify working with <strong>drools workbench,</strong> you can use the following: </p><br><ul><li>  implement dsl with simplified syntax </li><li>  use disicion tables </li></ul><br><p>  At the same time, tables are another level of abstraction and more configuration than implementation through business rules. <br>  Drools dsl allows you to do so instead of </p><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">when</span></span> Client(country == "ENG") <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> <span class="hljs-keyword"><span class="hljs-keyword">insert</span></span>(<span class="hljs-built_in"><span class="hljs-built_in">new</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Group</span></span>("England")); <span class="hljs-keyword"><span class="hljs-keyword">end</span></span></code> </pre> <br><p>  can write like this </p><br><pre> <code class="hljs vhdl"><span class="hljs-keyword"><span class="hljs-keyword">when</span></span> client<span class="hljs-symbol"><span class="hljs-symbol">'s</span></span> country <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-string"><span class="hljs-string">"ENG"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> <span class="hljs-keyword"><span class="hljs-keyword">group</span></span> will be <span class="hljs-string"><span class="hljs-string">"England"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span></code> </pre> <br><p>  Dsl is the right way and it lies in the steppe where cucumber is <strong>already</strong> grazing with its gherkin. </p><br><h3 id="prichina-3">  Reason 3 </h3><br><p>  This reason is related to the problem of testing - it is not clear how the customer will test the rules written by himself.  It's ideal to write tests, but I believe in it even less than in the customer who writes in drools.  The minimum that a programmer needs to do in this case is to provide general tests of the basic logic.  For example, for our application requirements are described: </p><br><blockquote><ul><li>  For the client, the group must be selected according to the established distribution rules. </li><li>  only one group should be selected for each client </li></ul><br></blockquote><p>  it turns out that no matter what distribution rules will be written by the customer, these requirements must always be met.  And we can check it out like this: </p><br><ul><li>  get all possible options for the parameters (client's country, language, etc.) </li><li>  build a set of all combinations of possible options for parameters </li><li>  calculate a group for each combination </li><li>  check conditions </li></ul><br><h2 id="realizaciya">  Implementation </h2><br><p>  <strong>Cucumber is</strong> not <strong>intended</strong> to be used outside the test environment, but persuasion and threats succeeded in making it work.  An example of the proof of concept can be found here <a href="https://github.com/avvero/crools">https://github.com/avvero/crools</a> .  Actually, cucumber can be used as a business rule engine.  That's all Folks! </p><br><h2 id="testirovanie">  Testing </h2><br><p>  For our application, you need to test the following: </p><br><ol><li>  For the client, the group must be selected according to the established distribution rules. </li><li>  only one group should be selected for each client </li><li>  for parameter set A, group B is selected </li></ol><br><p>  At the same time, points 1 and 2 are general requirements, they do not depend on the specific distribution rules that the customer has implemented / implements, so you can prepare tests for checking their execution in advance and run them when changing distribution rules.  I propose to do this through the formation of dataset - a set of all combinations of possible options for parameters.  It is built intuitively and thanks to the current implementation of cucumber is quite simple.  Why is it intuitive?  I will give an example. </p><br><p>  If we take the condition: </p><br><pre> <code class="hljs vhdl">client<span class="hljs-symbol"><span class="hljs-symbol">'s</span></span> country <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-symbol"><span class="hljs-symbol">'RUS</span></span>'</code> </pre> <br><p>  then I would write a unit test for these country values: </p><br><ul><li>  null </li><li>  RUS </li><li>  undefined </li></ul><br><p>  If we take the conditions: </p><br><pre> <code class="hljs vhdl">client<span class="hljs-symbol"><span class="hljs-symbol">'s</span></span> country <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-symbol"><span class="hljs-symbol">'RUS</span></span>' client<span class="hljs-symbol"><span class="hljs-symbol">'s</span></span> country <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-symbol"><span class="hljs-symbol">'CHL</span></span>'</code> </pre> <br><p>  then I would write a unit test for these country values: </p><br><ul><li>  null </li><li>  RUS </li><li>  Chl </li><li>  undefined </li></ul><br><p>  If we take the condition: </p><br><pre> <code class="hljs scala">client<span class="hljs-symbol"><span class="hljs-symbol">'s</span></span> payment &gt; <span class="hljs-symbol"><span class="hljs-symbol">'100</span></span>0'</code> </pre> <br><p>  then I would write a unit test for these values: </p><br><ul><li>  null </li><li>  0 </li><li>  999 </li><li>  1000 </li><li>  1001 </li><li>  -1000 </li></ul><br><p>  Thus, all the necessary options for the parameters can be obtained from the rules themselves!  A combination of options can be obtained simply by mixing. </p><br><div class="spoiler">  <b class="spoiler_title">For those who are not familiar with cucumber</b> <div class="spoiler_text"><p>  The rules described in the feature file (in the gherkin language) must be supported in the definition file (I use the java implementation).  Support in this case is the ability to match (via the regular record) an entry from the feature file to a method from the definition file, otherwise the entry will not be clear and will not be processed (either an error or ignoring the whole rule).  For example for </p><br><pre> <code class="hljs vhdl"> Scenario: <span class="hljs-keyword"><span class="hljs-keyword">For</span></span> client from country ENG <span class="hljs-keyword"><span class="hljs-keyword">group</span></span> will be England <span class="hljs-keyword"><span class="hljs-keyword">When</span></span> client<span class="hljs-symbol"><span class="hljs-symbol">'s</span></span> country <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-string"><span class="hljs-string">"ENG"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Then</span></span> <span class="hljs-keyword"><span class="hljs-keyword">group</span></span> will be <span class="hljs-string"><span class="hljs-string">"England"</span></span></code> </pre> <br><p>  methods should be described </p><br><pre> <code class="java hljs"> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Set&lt;String&gt; groups = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> HashSet&lt;&gt;(); <span class="hljs-meta"><span class="hljs-meta">@When</span></span>(<span class="hljs-string"><span class="hljs-string">"^client country is \"([^\"]*)\"$"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">clientCountryIs</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String code)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> Throwable </span></span>{ Assert.isTrue(code.equals(client.getCountry())); } <span class="hljs-meta"><span class="hljs-meta">@Then</span></span>(<span class="hljs-string"><span class="hljs-string">"^group will be \"([^\"]*)\"$"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">groupWillBe</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String code)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> Throwable </span></span>{ groups.add(code); }</code> </pre> <br><p>  It turns out that the definition file describes all possible expressions that can be used when describing scripts. </p></div></div><br><p>  Obtaining variants of parameters can be implemented by describing an additional file definition with the implementation of the methods in this way </p><br><pre> <code class="java hljs"> <span class="hljs-meta"><span class="hljs-meta">@When</span></span>(<span class="hljs-string"><span class="hljs-string">"^client's country is \"([^\"]*)\"$"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">clientCountryIs</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String code)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> Throwable </span></span>{ factDictionary.getCountries().add(<span class="hljs-keyword"><span class="hljs-keyword">null</span></span>); factDictionary.getCountries().add(code); factDictionary.getCountries().add(UNDEFINED); }</code> </pre> <br><p>  Those.  The developer, in addition to the basic definition of the file, which forms the possibilities for describing scenarios, also provides an additional one, which allows to extract datasets. </p><br><p>  Let's analyze a couple of examples of such testing (you can use your own via the <a href="http://avvero.pw/crools/">http://avvero.pw/crools/</a> demo) </p><br><h4 id="primer-1">  Example 1 </h4><br><pre> <code class="hljs sql">Feature: <span class="hljs-keyword"><span class="hljs-keyword">Select</span></span> <span class="hljs-keyword"><span class="hljs-keyword">group</span></span> Scenario: England <span class="hljs-keyword"><span class="hljs-keyword">When</span></span> <span class="hljs-keyword"><span class="hljs-keyword">client</span></span> country <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-string"><span class="hljs-string">"ENG"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Then</span></span> <span class="hljs-keyword"><span class="hljs-keyword">group</span></span> will be <span class="hljs-string"><span class="hljs-string">"England"</span></span></code> </pre> <br><p>  Result of checking </p><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">Some</span></span> entries have <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> been distributed: #<span class="hljs-number"><span class="hljs-number">0</span></span> {"client":{},"deposit":{}} #<span class="hljs-number"><span class="hljs-number">1</span></span> {"client":{"country":"any"},"deposit":{}}</code> </pre> <br><p>  So you need to add another rule. </p><br><pre> <code class="hljs sql">Feature: <span class="hljs-keyword"><span class="hljs-keyword">Select</span></span> <span class="hljs-keyword"><span class="hljs-keyword">group</span></span> Scenario: England <span class="hljs-keyword"><span class="hljs-keyword">When</span></span> <span class="hljs-keyword"><span class="hljs-keyword">client</span></span> country <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-string"><span class="hljs-string">"ENG"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Then</span></span> <span class="hljs-keyword"><span class="hljs-keyword">group</span></span> will be <span class="hljs-string"><span class="hljs-string">"England"</span></span> Scenario: <span class="hljs-keyword"><span class="hljs-keyword">Default</span></span> <span class="hljs-keyword"><span class="hljs-keyword">When</span></span> <span class="hljs-keyword"><span class="hljs-keyword">client</span></span> country <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> <span class="hljs-string"><span class="hljs-string">"ENG"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Then</span></span> <span class="hljs-keyword"><span class="hljs-keyword">group</span></span> will be <span class="hljs-string"><span class="hljs-string">"Default"</span></span></code> </pre> <br><h4 id="primer-2">  Example 2 </h4><br><pre> <code class="hljs sql">Feature: <span class="hljs-keyword"><span class="hljs-keyword">Select</span></span> <span class="hljs-keyword"><span class="hljs-keyword">group</span></span> Scenario: England <span class="hljs-keyword"><span class="hljs-keyword">When</span></span> <span class="hljs-keyword"><span class="hljs-keyword">client</span></span> country <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-string"><span class="hljs-string">"ENG"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Then</span></span> <span class="hljs-keyword"><span class="hljs-keyword">group</span></span> will be <span class="hljs-string"><span class="hljs-string">"England"</span></span> Scenario: Russia <span class="hljs-keyword"><span class="hljs-keyword">When</span></span> <span class="hljs-keyword"><span class="hljs-keyword">client</span></span> country <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-string"><span class="hljs-string">"RUS"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Then</span></span> <span class="hljs-keyword"><span class="hljs-keyword">group</span></span> will be <span class="hljs-string"><span class="hljs-string">"Russia"</span></span> Scenario: RichRussia <span class="hljs-keyword"><span class="hljs-keyword">When</span></span> <span class="hljs-keyword"><span class="hljs-keyword">client</span></span> country <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-string"><span class="hljs-string">"RUS"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">And</span></span> deposit &gt;= <span class="hljs-number"><span class="hljs-number">1000</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Then</span></span> <span class="hljs-keyword"><span class="hljs-keyword">group</span></span> will be <span class="hljs-string"><span class="hljs-string">"RichRussia"</span></span></code> </pre> <br><p>  Result of checking </p><br><pre> <code class="hljs vbscript">Some entries have <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> been distributed #<span class="hljs-number"><span class="hljs-number">0</span></span> {<span class="hljs-string"><span class="hljs-string">"client"</span></span>:{<span class="hljs-string"><span class="hljs-string">"country"</span></span>:<span class="hljs-string"><span class="hljs-string">"any"</span></span>},<span class="hljs-string"><span class="hljs-string">"deposit"</span></span>:{<span class="hljs-string"><span class="hljs-string">"amount"</span></span>:<span class="hljs-number"><span class="hljs-number">999</span></span>}} #<span class="hljs-number"><span class="hljs-number">1</span></span> {<span class="hljs-string"><span class="hljs-string">"client"</span></span>:{},<span class="hljs-string"><span class="hljs-string">"deposit"</span></span>:{<span class="hljs-string"><span class="hljs-string">"amount"</span></span>:<span class="hljs-number"><span class="hljs-number">1001</span></span>}} #<span class="hljs-number"><span class="hljs-number">2</span></span> {<span class="hljs-string"><span class="hljs-string">"client"</span></span>:{<span class="hljs-string"><span class="hljs-string">"country"</span></span>:<span class="hljs-string"><span class="hljs-string">"any"</span></span>},<span class="hljs-string"><span class="hljs-string">"deposit"</span></span>:{<span class="hljs-string"><span class="hljs-string">"amount"</span></span>:<span class="hljs-number"><span class="hljs-number">1001</span></span>}} ... Some entries have been distributed <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> more than one group {<span class="hljs-string"><span class="hljs-string">"client"</span></span>:{<span class="hljs-string"><span class="hljs-string">"country"</span></span>:<span class="hljs-string"><span class="hljs-string">"RUS"</span></span>}, {<span class="hljs-string"><span class="hljs-string">"amount"</span></span>:<span class="hljs-number"><span class="hljs-number">1001</span></span>}}: Russia, RichRussia</code> </pre> <br><p>  Correct the problem with getting into more than one group by adding the condition <code>And deposit &lt; 1000</code> </p><br><pre> <code class="hljs pgsql"> Scenario: Russia (<span class="hljs-keyword"><span class="hljs-keyword">no</span></span> deposit) <span class="hljs-keyword"><span class="hljs-keyword">When</span></span> client country <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> "RUS" <span class="hljs-keyword"><span class="hljs-keyword">And</span></span> deposit <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-keyword"><span class="hljs-keyword">null</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Then</span></span> <span class="hljs-keyword"><span class="hljs-keyword">group</span></span> will be "Russia" Scenario: Russia <span class="hljs-keyword"><span class="hljs-keyword">When</span></span> client country <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> "RUS" <span class="hljs-keyword"><span class="hljs-keyword">And</span></span> deposit &lt; <span class="hljs-number"><span class="hljs-number">1000</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Then</span></span> <span class="hljs-keyword"><span class="hljs-keyword">group</span></span> will be "Russia"</code> </pre> <br><p>  And the problem with the lack of rules for part of the options is such a rule </p><br><pre> <code class="hljs pgsql"> Scenario: <span class="hljs-keyword"><span class="hljs-keyword">Default</span></span> <span class="hljs-keyword"><span class="hljs-keyword">When</span></span> client country <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> |ENG| |RUS| <span class="hljs-keyword"><span class="hljs-keyword">Then</span></span> <span class="hljs-keyword"><span class="hljs-keyword">group</span></span> will be "Default"</code> </pre> <br><p>  It turns out that a ‚Äúgood‚Äù set of rules will look like this. </p><br><pre> <code class="hljs sql"> Feature: <span class="hljs-keyword"><span class="hljs-keyword">Select</span></span> <span class="hljs-keyword"><span class="hljs-keyword">group</span></span> Scenario: England <span class="hljs-keyword"><span class="hljs-keyword">When</span></span> <span class="hljs-keyword"><span class="hljs-keyword">client</span></span> country <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-string"><span class="hljs-string">"ENG"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Then</span></span> <span class="hljs-keyword"><span class="hljs-keyword">group</span></span> will be <span class="hljs-string"><span class="hljs-string">"England"</span></span> Scenario: Russia (<span class="hljs-keyword"><span class="hljs-keyword">no</span></span> deposit) <span class="hljs-keyword"><span class="hljs-keyword">When</span></span> <span class="hljs-keyword"><span class="hljs-keyword">client</span></span> country <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-string"><span class="hljs-string">"RUS"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">And</span></span> deposit <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-literal"><span class="hljs-literal">null</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Then</span></span> <span class="hljs-keyword"><span class="hljs-keyword">group</span></span> will be <span class="hljs-string"><span class="hljs-string">"Russia"</span></span> Scenario: Russia <span class="hljs-keyword"><span class="hljs-keyword">When</span></span> <span class="hljs-keyword"><span class="hljs-keyword">client</span></span> country <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-string"><span class="hljs-string">"RUS"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">And</span></span> deposit &lt; <span class="hljs-number"><span class="hljs-number">1000</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Then</span></span> <span class="hljs-keyword"><span class="hljs-keyword">group</span></span> will be <span class="hljs-string"><span class="hljs-string">"Russia"</span></span> Scenario: RichRussia <span class="hljs-keyword"><span class="hljs-keyword">When</span></span> <span class="hljs-keyword"><span class="hljs-keyword">client</span></span> country <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-string"><span class="hljs-string">"RUS"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">And</span></span> deposit &gt;= <span class="hljs-number"><span class="hljs-number">1000</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Then</span></span> <span class="hljs-keyword"><span class="hljs-keyword">group</span></span> will be <span class="hljs-string"><span class="hljs-string">"RichRussia"</span></span> Scenario: <span class="hljs-keyword"><span class="hljs-keyword">Default</span></span> <span class="hljs-keyword"><span class="hljs-keyword">When</span></span> <span class="hljs-keyword"><span class="hljs-keyword">client</span></span> country <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> |ENG| |RUS| <span class="hljs-keyword"><span class="hljs-keyword">Then</span></span> <span class="hljs-keyword"><span class="hljs-keyword">group</span></span> will be <span class="hljs-string"><span class="hljs-string">"Default"</span></span></code> </pre> <br><p>  Thus formed dataset gives us an idea of ‚Äã‚Äãthe set of values ‚Äã‚Äãof parameters and their combinations.  And based on it, we can already draw conclusions about how our distribution rules work.  And the most important thing is to show it to the customer in gui in real time during editing. <br>  As for the remaining verification </p><br><blockquote>  3 for the set of parameters A select group B </blockquote><p>  , then you will still have to look with your eyes - is it true that the right groups are filled with customers with the correct parameters.  But thanks to dataset, this can be done easily and there is no need to go through the checklist and check the options with your hands. </p><br><p>  Depending on the requirements and other conditions (such as "I can assume possible customer use cases"), other dataset-based checks can be added. <br>  Checks like "is it true that a client from Russia with a deposit of 2000 will fall into the RichRussia group?"  it can be done this way - to see (after providing the GUI for such an activity) which customers got into RichRussia or where customers from Russia got with a deposit of more than 1000. </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/346482/">https://habr.com/ru/post/346482/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../346472/index.html">Tiny CI of your Symfony project in 2 minutes</a></li>
<li><a href="../346474/index.html">Our experience creating web flow chart editor</a></li>
<li><a href="../346476/index.html">OpenStreetMap conferences in 2017</a></li>
<li><a href="../346478/index.html">User Reddit under the name DeepFakes has taught neural networks to create intimate videos with stars</a></li>
<li><a href="../346480/index.html">Features scanning antivirus executable files and trust the results of VirusTotal</a></li>
<li><a href="../346484/index.html">The largest events of 2018: design and front-end</a></li>
<li><a href="../346486/index.html">Overview of the procurement of web applications on the Zend Framework 3</a></li>
<li><a href="../346488/index.html">21 tips to make better use of Composer</a></li>
<li><a href="../346490/index.html">What to look at the weekend? Review of the best reports in the public domain. Part Two, JBreak 2017</a></li>
<li><a href="../346492/index.html">A story about how I live via meltdown on your phones using npm</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
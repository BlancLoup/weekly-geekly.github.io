<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Horizontal autoscale of Kubernetes and Prometheus hearths for high availability and availability of the infrastructure</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Salute, habrovchane! The translation of the next article was prepared specifically for students of the course ‚ÄúInfrastructure platform based on Kubern...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Horizontal autoscale of Kubernetes and Prometheus hearths for high availability and availability of the infrastructure</h1><div class="post__text post__text-html js-mediator-article">  Salute, habrovchane!  The translation of the next article was prepared specifically for students of the course <a href="https://otus.pw/f6BC/">‚ÄúInfrastructure platform based on Kubernetes‚Äù</a> , which classes will start tomorrow.  Let's start. <br><br><img src="https://habrastorage.org/webt/ex/tr/ly/extrlyzx2l86vdau8i-upyejtf4.png"><br><br><h3>  Auto scaling in Kubernetes </h3><br>  Autoscaling allows you to automatically increase and decrease workloads depending on resource usage. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Kubernetes autoscaling has two dimensions: <br><br><ul><li>  cluster autoscaling (Cluster Autoscaler), which is responsible for scaling nodes; </li><li>  Horizontal Pod Autoscaler (HPA), which automatically scales the number of pitches in a deployment or replica set. </li></ul><br>  Cluster autoscaling can be used in conjunction with horizontal automatic scaling of hearths to dynamically adjust computing resources and the degree of system parallelism required to comply with service level agreements (SLAs). <a name="habracut"></a><br><br>  Cluster autoscaling is highly dependent on the capabilities of the cloud infrastructure provider that hosts the cluster, and HPA can operate independently of the IaaS / PaaS provider. <br><br><h3>  HPA development </h3><br>  The horizontal autoscaling of the hearth has undergone major changes since it appeared in Kubernetes v1.1.  The first version of HPA scaled hearths based on measured CPU consumption, and later on based on memory usage.  Kubernetes 1.6 introduced a new API called Custom Metrics, which provided HPA with access to arbitrary metrics.  And in Kubernetes 1.7, an aggregation level was added that allows third-party applications to extend the Kubernetes API, registering as an API add-on. <br><br>  Thanks to the Custom Metrics API and the level of aggregation, monitoring systems such as Prometheus can provide HPA-specific application performance. <br><br>  Horizontal autoscale podov implemented in the form of a control loop, which periodically requests the Resource Metrics API (Resource Metrics API) key indicators, such as CPU and memory usage, and in the Custom Metrics API (User Metrics API) specific application indicators. <br><br><img src="https://habrastorage.org/webt/j3/7c/-b/j37c-bs-leoz4u_a8tg6ov6zflu.png"><br><br>  Below is a step-by-step guide to configuring HPA v2 for Kubernetes 1.9 and later. <br><br><ol><li>  Install the Metrics Server Add-in, which provides key metrics. </li><li>  Run the demo application to see how the auto-scaling of the hearths works based on CPU and memory usage. </li><li>  Deploy Prometheus and a dedicated API server.  Register a special API server at the aggregation level. </li><li>  Configure HPA using the special metrics provided by the sample application. </li></ol><br>  Before you start, you must install Go version 1.8 (or later) and clone the <a href="https://github.com/stefanprodan/k8s-prom-hpa">k8s-prom-hpa repository</a> in <code>GOPATH</code> : <br><br><pre> <code class="go hljs">cd $GOPATH git clone https:<span class="hljs-comment"><span class="hljs-comment">//github.com/stefanprodan/k8s-prom-hpa</span></span></code> </pre> <br><h2>  1. Setting up a metrics server </h2><br>  Kubernetes <a href="https://github.com/kubernetes-incubator/metrics-server">metrics</a> server is an intracluster resource utilization aggregator that replaces <a href="https://github.com/kubernetes/heapster">Heapster</a> .  The metrics server collects information about CPU and memory usage for nodes and pods from <code>kubernetes.summary_api</code> .  The Summary API is a memory-efficient API for transferring Kubelet / cAdvisor data metrics to the server. <br><br><img src="https://habrastorage.org/webt/a-/ks/a5/a-ksa5k66aqr8auak_onalu3jki.png"><br><br>  The first version of HPA needed the Heapster aggregator to get CPU and memory metrics.  In HPA v2 and Kubernetes 1.8, you only need a metric server with <code>horizontal-pod-autoscaler-use-rest-clients</code> enabled.  This option is enabled by default in Kubernetes 1.9.  GKE 1.9 comes with a pre-installed metrics server. <br><br>  <code>kube-system</code> metrics server in the <code>kube-system</code> namespace: <br><br><pre> <code class="go hljs">kubectl create -f ./metrics-server</code> </pre> <br>  After 1 minute, the <code>metric-server</code> will begin transmitting data about CPU and memory usage by the nodes and heartbeats. <br><br>  View node metrics: <br><br><pre> <code class="go hljs">kubectl get --raw <span class="hljs-string"><span class="hljs-string">"/apis/metrics.k8s.io/v1beta1/nodes"</span></span> | jq .</code> </pre> <br>  View scores: <br><br><pre> <code class="go hljs">kubectl get --raw <span class="hljs-string"><span class="hljs-string">"/apis/metrics.k8s.io/v1beta1/pods"</span></span> | jq .</code> </pre> <br><h2>  2. Autoscale based on CPU and memory usage </h2><br>  You can use the Golang web-based small web application to test horizontal auto scaling (HPA). <br><br>  <a href="https://github.com/stefanprodan/k8s-podinfo">Deploy podinfo</a> in the <code>default</code> namespace: <br><br><pre> <code class="go hljs">kubectl create -f ./podinfo/podinfo-svc.yaml,./podinfo/podinfo-dep.yaml</code> </pre> <br>  Contact <code>podinfo</code> using the NodePort service at <code>http://&lt;K8S_PUBLIC_IP&gt;:31198</code> . <br><br>  Specify an HPA that will serve at least two replicas and scale up to ten replicas if the average CPU usage exceeds 80% or if the memory consumption is above 200 Mbyte: <br><br><pre> <code class="go hljs">apiVersion: autoscaling/v2beta1 kind: HorizontalPodAutoscaler metadata: name: podinfo spec: scaleTargetRef: apiVersion: extensions/v1beta1 kind: Deployment name: podinfo minReplicas: <span class="hljs-number"><span class="hljs-number">2</span></span> maxReplicas: <span class="hljs-number"><span class="hljs-number">10</span></span> metrics: - <span class="hljs-keyword"><span class="hljs-keyword">type</span></span>: Resource resource: name: cpu targetAverageUtilization: <span class="hljs-number"><span class="hljs-number">80</span></span> - <span class="hljs-keyword"><span class="hljs-keyword">type</span></span>: Resource resource: name: memory targetAverageValue: <span class="hljs-number"><span class="hljs-number">200</span></span>Mi</code> </pre> <br>  Create an HPA: <br><br><pre> <code class="go hljs">kubectl create -f ./podinfo/podinfo-hpa.yaml</code> </pre> <br>  After a couple of seconds, the HPA controller will contact the metrics server and get information about CPU and memory usage: <br><br><pre> <code class="go hljs">kubectl get hpa NAME REFERENCE TARGETS MINPODS MAXPODS REPLICAS AGE podinfo Deployment/podinfo <span class="hljs-number"><span class="hljs-number">2826240</span></span> / <span class="hljs-number"><span class="hljs-number">200</span></span>Mi, <span class="hljs-number"><span class="hljs-number">15</span></span>% / <span class="hljs-number"><span class="hljs-number">80</span></span>% <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">10</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">5</span></span>m</code> </pre> <br>  To increase CPU utilization, perform a load test with rakyll / hey: <br><br><pre> <code class="go hljs">#install hey <span class="hljs-keyword"><span class="hljs-keyword">go</span></span> get -u github.com/rakyll/hey #do <span class="hljs-number"><span class="hljs-number">10</span></span>K requests hey -n <span class="hljs-number"><span class="hljs-number">10000</span></span> -q <span class="hljs-number"><span class="hljs-number">10</span></span> -c <span class="hljs-number"><span class="hljs-number">5</span></span> http:<span class="hljs-comment"><span class="hljs-comment">//&lt;K8S_PUBLIC_IP&gt;:31198/</span></span></code> </pre> <br>  You can monitor HPA events as follows: <br><br><pre> <code class="go hljs">$ kubectl describe hpa Events: Type Reason Age From Message ---- ------ ---- ---- ------- Normal SuccessfulRescale <span class="hljs-number"><span class="hljs-number">7</span></span>m horizontal-pod-autoscaler New size: <span class="hljs-number"><span class="hljs-number">4</span></span>; reason: cpu resource utilization (percentage of request) above target Normal SuccessfulRescale <span class="hljs-number"><span class="hljs-number">3</span></span>m horizontal-pod-autoscaler New size: <span class="hljs-number"><span class="hljs-number">8</span></span>; reason: cpu resource utilization (percentage of request) above target</code> </pre> <br>  Temporarily remove podinfo (you will have to redeploy it in one of the following steps in this guide). <br><br><pre> <code class="go hljs">kubectl <span class="hljs-built_in"><span class="hljs-built_in">delete</span></span> -f ./podinfo/podinfo-hpa.yaml,./podinfo/podinfo-dep.yaml,./podinfo/podinfo-svc.yaml</code> </pre> <br><h2>  3. Custom Metrics server setup </h2><br>  To scale on the basis of special indicators, two components are needed.  The first ‚Äî the <a href="https://prometheus.io/">Prometheus</a> time series database ‚Äî collects application metrics and saves them.  The second component, <a href="https://github.com/DirectXMan12/k8s-prometheus-adapter">k8s-prometheus-adapter</a> , complements Custom Metrics API Kubernetes with indicators provided by the assembler. <br><br><img src="https://habrastorage.org/webt/hf/g5/-j/hfg5-js5hf_5ldfgkrhk0dwgfu0.png"><br><br>  A dedicated namespace is used to deploy Prometheus and the adapter. <br><br>  Create a namespace <code>monitoring</code> : <br><br><pre> <code class="go hljs">kubectl create -f ./namespaces.yaml</code> </pre> <br>  Deploy Prometheus v2 in the <code>monitoring</code> namespace: <br><br><pre> <code class="go hljs">kubectl create -f ./prometheus</code> </pre> <br>  Generate the TLS certificates required for the Prometheus adapter: <br><br><pre> <code class="go hljs"><span class="hljs-built_in"><span class="hljs-built_in">make</span></span> certs</code> </pre> <br>  Deploy the Prometheus Adapter for Custom Metrics API: <br><br><pre> <code class="go hljs">kubectl create -f ./custom-metrics-api</code> </pre> <br>  Get a list of the special metrics provided by Prometheus: <br><br><pre> <code class="go hljs">kubectl get --raw <span class="hljs-string"><span class="hljs-string">"/apis/custom.metrics.k8s.io/v1beta1"</span></span> | jq .</code> </pre> <br>  Then retrieve the file system usage data for all subs in the <code>monitoring</code> namespace: <br><br><pre> <code class="go hljs">kubectl get --raw <span class="hljs-string"><span class="hljs-string">"/apis/custom.metrics.k8s.io/v1beta1/namespaces/monitoring/pods/*/fs_usage_bytes"</span></span> | jq .</code> </pre> <br><h2>  4. Autoscale based on special indicators </h2><br>  Create the NodePort <code>podinfo</code> service and deploy to the <code>default</code> namespace: <br><br><pre> <code class="go hljs">kubectl create -f ./podinfo/podinfo-svc.yaml,./podinfo/podinfo-dep.yaml</code> </pre> <br>  <code>podinfo</code> will pass a special indicator <code>http_requests_total</code> .  The Prometheus adapter will remove the <code>_total</code> suffix and mark this indicator as a counter-indicator. <br><br>  Get the total requests per second from the Custom Metrics API: <br><br><pre> <code class="go hljs">kubectl get --raw <span class="hljs-string"><span class="hljs-string">"/apis/custom.metrics.k8s.io/v1beta1/namespaces/default/pods/*/http_requests"</span></span> | jq . { <span class="hljs-string"><span class="hljs-string">"kind"</span></span>: <span class="hljs-string"><span class="hljs-string">"MetricValueList"</span></span>, <span class="hljs-string"><span class="hljs-string">"apiVersion"</span></span>: <span class="hljs-string"><span class="hljs-string">"custom.metrics.k8s.io/v1beta1"</span></span>, <span class="hljs-string"><span class="hljs-string">"metadata"</span></span>: { <span class="hljs-string"><span class="hljs-string">"selfLink"</span></span>: <span class="hljs-string"><span class="hljs-string">"/apis/custom.metrics.k8s.io/v1beta1/namespaces/default/pods/%2A/http_requests"</span></span> }, <span class="hljs-string"><span class="hljs-string">"items"</span></span>: [ { <span class="hljs-string"><span class="hljs-string">"describedObject"</span></span>: { <span class="hljs-string"><span class="hljs-string">"kind"</span></span>: <span class="hljs-string"><span class="hljs-string">"Pod"</span></span>, <span class="hljs-string"><span class="hljs-string">"namespace"</span></span>: <span class="hljs-string"><span class="hljs-string">"default"</span></span>, <span class="hljs-string"><span class="hljs-string">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"podinfo-6b86c8ccc9-kv5g9"</span></span>, <span class="hljs-string"><span class="hljs-string">"apiVersion"</span></span>: <span class="hljs-string"><span class="hljs-string">"/__internal"</span></span> }, <span class="hljs-string"><span class="hljs-string">"metricName"</span></span>: <span class="hljs-string"><span class="hljs-string">"http_requests"</span></span>, <span class="hljs-string"><span class="hljs-string">"timestamp"</span></span>: <span class="hljs-string"><span class="hljs-string">"2018-01-10T16:49:07Z"</span></span>, <span class="hljs-string"><span class="hljs-string">"value"</span></span>: <span class="hljs-string"><span class="hljs-string">"901m"</span></span> }, { <span class="hljs-string"><span class="hljs-string">"describedObject"</span></span>: { <span class="hljs-string"><span class="hljs-string">"kind"</span></span>: <span class="hljs-string"><span class="hljs-string">"Pod"</span></span>, <span class="hljs-string"><span class="hljs-string">"namespace"</span></span>: <span class="hljs-string"><span class="hljs-string">"default"</span></span>, <span class="hljs-string"><span class="hljs-string">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"podinfo-6b86c8ccc9-nm7bl"</span></span>, <span class="hljs-string"><span class="hljs-string">"apiVersion"</span></span>: <span class="hljs-string"><span class="hljs-string">"/__internal"</span></span> }, <span class="hljs-string"><span class="hljs-string">"metricName"</span></span>: <span class="hljs-string"><span class="hljs-string">"http_requests"</span></span>, <span class="hljs-string"><span class="hljs-string">"timestamp"</span></span>: <span class="hljs-string"><span class="hljs-string">"2018-01-10T16:49:07Z"</span></span>, <span class="hljs-string"><span class="hljs-string">"value"</span></span>: <span class="hljs-string"><span class="hljs-string">"898m"</span></span> } ] }</code> </pre> <br>  The letter <code>m</code> means <code>milli-units</code> , so, for example, <code>901m</code> is 901 milliquery. <br><br>  Create an HPA that will expand the podinfo deployment if the number of requests exceeds 10 requests per second: <br><br><pre> <code class="go hljs">apiVersion: autoscaling/v2beta1 kind: HorizontalPodAutoscaler metadata: name: podinfo spec: scaleTargetRef: apiVersion: extensions/v1beta1 kind: Deployment name: podinfo minReplicas: <span class="hljs-number"><span class="hljs-number">2</span></span> maxReplicas: <span class="hljs-number"><span class="hljs-number">10</span></span> metrics: - <span class="hljs-keyword"><span class="hljs-keyword">type</span></span>: Pods pods: metricName: http_requests targetAverageValue: <span class="hljs-number"><span class="hljs-number">10</span></span></code> </pre> <br>  <code>podinfo</code> HPA <code>podinfo</code> in the <code>default</code> namespace: <br><br><pre> <code class="go hljs">kubectl create -f ./podinfo/podinfo-hpa-custom.yaml</code> </pre> <br>  After a few seconds, HPA will get the value of <code>http_requests</code> from the API metrics: <br><br><pre> <code class="go hljs">kubectl get hpa NAME REFERENCE TARGETS MINPODS MAXPODS REPLICAS AGE podinfo Deployment/podinfo <span class="hljs-number"><span class="hljs-number">899</span></span>m / <span class="hljs-number"><span class="hljs-number">10</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">10</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>m</code> </pre> <br>  Apply load to the podinfo service with 25 requests per second: <br><br><pre> <code class="go hljs">#install hey <span class="hljs-keyword"><span class="hljs-keyword">go</span></span> get -u github.com/rakyll/hey #do <span class="hljs-number"><span class="hljs-number">10</span></span>K requests rate limited at <span class="hljs-number"><span class="hljs-number">25</span></span> QPS hey -n <span class="hljs-number"><span class="hljs-number">10000</span></span> -q <span class="hljs-number"><span class="hljs-number">5</span></span> -c <span class="hljs-number"><span class="hljs-number">5</span></span> http:<span class="hljs-comment"><span class="hljs-comment">//&lt;K8S-IP&gt;:31198/healthz</span></span></code> </pre> <br>  After a few minutes, HPA will begin to scale the deployment: <br><br><pre> <code class="go hljs">kubectl describe hpa Name: podinfo Namespace: <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> Reference: Deployment/podinfo Metrics: ( current / target ) <span class="hljs-string"><span class="hljs-string">"http_requests"</span></span> on pods: <span class="hljs-number"><span class="hljs-number">9059</span></span>m / <span class="hljs-number"><span class="hljs-number">10</span></span>&lt; Min replicas: <span class="hljs-number"><span class="hljs-number">2</span></span> Max replicas: <span class="hljs-number"><span class="hljs-number">10</span></span> Events: Type Reason Age From Message ---- ------ ---- ---- ------- Normal SuccessfulRescale <span class="hljs-number"><span class="hljs-number">2</span></span>m horizontal-pod-autoscaler New size: <span class="hljs-number"><span class="hljs-number">3</span></span>; reason: pods metric http_requests above target</code> </pre> <br>  With the current number of requests per second, the deployment will never reach a maximum value of 10 levels.  Three replicas are enough to ensure that the number of requests per second for each pod is less than 10. <br><br>  When the load tests are complete, HPA will scale down the deployment to the original number of replicas: <br><br><pre> <code class="go hljs">Events: Type Reason Age From Message ---- ------ ---- ---- ------- Normal SuccessfulRescale <span class="hljs-number"><span class="hljs-number">5</span></span>m horizontal-pod-autoscaler New size: <span class="hljs-number"><span class="hljs-number">3</span></span>; reason: pods metric http_requests above target Normal SuccessfulRescale <span class="hljs-number"><span class="hljs-number">21s</span></span> horizontal-pod-autoscaler New size: <span class="hljs-number"><span class="hljs-number">2</span></span>; reason: All metrics below target</code> </pre> <br>  You may have noticed that the autoscaling tool does not immediately respond to changes in indicators.  By default, they are synchronized every 30 seconds.  In addition, scaling occurs only if during the last 3-5 minutes there has been no increase and decrease in workloads.  This helps prevent the execution of conflicting solutions and leaves time to connect the cluster autoscaling tool. <br><br><h2>  Conclusion </h2><br>  Not all systems can enforce SLA requirements only on the basis of CPU or memory utilization rates (or both).  Most web servers and mobile servers need to autoscale based on the number of requests per second to handle traffic surges. <br><br>  For ETL applications (from the English Extract Transform Load - ‚Äúextraction, transformation, loading‚Äù), autoscaling can be launched, for example, when the specified threshold length of the job queue is exceeded. <br><br>  In all cases, application instrumentation with Prometheus and highlighting the necessary auto-scaling metrics enable fine-tuning of applications to improve the processing of traffic bursts and ensure high infrastructure availability. <br><br>  Ideas, questions, comments?  Join the <a href="https://slack.weave.works/">Slack</a> discussion! <br><br>  Here is such a material.  We are waiting for your comments and see you on the <a href="https://otus.pw/f6BC/">course</a> ! </div><p>Source: <a href="https://habr.com/ru/post/457742/">https://habr.com/ru/post/457742/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../457728/index.html">Hash tables in Go. Implementation details</a></li>
<li><a href="../45773/index.html">Perfect paginator</a></li>
<li><a href="../457730/index.html">In the office there is an illusion of control - it is not on the remote. Conversation with devhab</a></li>
<li><a href="../457736/index.html">"Tools are not as important as the ability to think about the systems they create." Big interview with Martin Kleppman</a></li>
<li><a href="../457738/index.html">How we implemented SD-Access, and why it was needed</a></li>
<li><a href="../457746/index.html">Meteorology and flights</a></li>
<li><a href="../457750/index.html">Working with JSON RPC in symfony 4</a></li>
<li><a href="../457752/index.html">Not moon rovers and no jokers. What do we know about robots in Fukushima</a></li>
<li><a href="../457756/index.html">The book "Kafka Streams in action. Real-time applications and microservices</a></li>
<li><a href="../45776/index.html">What do independent experts think about the USE?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
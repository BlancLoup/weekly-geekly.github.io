<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ClangFormat and Notepad ++ integration</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ClangFormat is one of the best tools for automatic formatting of source codes in C, C ++, Java, JavaScript, Objective-C, C # languages. There are plug...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>ClangFormat and Notepad ++ integration</h1><div class="post__text post__text-html js-mediator-article">  ClangFormat is one of the best tools for automatic formatting of source codes in C, C ++, Java, JavaScript, Objective-C, C # languages.  There are plug-ins for popular development environments (IDE), but often you need to quickly format a file or part of a file with source code without launching a cumbersome IDE, experiment with formatting settings and different versions of ClangFormat with the ability to quickly cancel changes.  Using the console version of ClangFormat for this purpose is inconvenient.  A possible solution is to call ClangFormat from a text editor.  The <a href="https://clang.llvm.org/docs/ClangFormat.html">official website</a> describes how to integrate with Vim, Emacs and some other editors, but there is no information on integration with Notepad ++.  The following is a simple guide for Notepad ++ (for Windows). <br><a name="habracut"></a><br><h2>  Initial requirements </h2><br><ul><li>  formatting a file opened in Notepad ++ using ClangFormat; </li><li>  formatting the selection in the file; </li><li>  cancellation of changes; </li><li>  switching style (set of rules) formatting; </li><li>  switching to another version of ClangFormat; </li><li>  If possible, use standard tools, without rebuilding ClangFormat and without writing a new plug-in for Notepad ++. </li></ul><br><h2>  Installation and Setup </h2><br><h3>  1. If Notepad ++ is not installed yet, download and install it. </h3><br>  <a href="https://notepad-plus-plus.org/">https://notepad-plus-plus.org</a> <br><br><h3>  2. In Notepad ++, install the NppExec plugin </h3><br>  NppExec allows you to call third-party applications from Notepad ++ and interact with the components of the Scintilla library, on the basis of which Notepad ++ is written. <br><br> <code>Plugins ‚Äì&gt; Plugin Admin... ‚Äì&gt; NppExec ‚Äì&gt; Install</code> <br>  Notepad ++ will restart, after which the <code>&lt;Notepad++&gt;/plugins/NppExec/</code> and the <code>Plugins ‚Äì&gt; NppExec</code> menu item will <code>Plugins ‚Äì&gt; NppExec</code> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h3>  3. Download the executable file ClangFormat </h3><br>  To do this, on the page <a href="https://llvm.org/builds/">https://llvm.org/builds/</a> we find and download the installation file for Windows, for example <code>LLVM-XXX-rYYYYYY-win64.exe</code> .  The whole package can not be installed, it is enough to extract the file <code>clang-format.exe</code> .  You can use 7-zip: delete the <code>.exe</code> extension from the <code>.exe</code> , open the file with 7-zip and extract the <code>clang-format.exe</code> file from the <code>bin/</code> subdirectory <code>bin/</code> .  We place the file <code>clang-format.exe</code> in the <code>&lt;Notepad++&gt;/plugins/NppExec/clang-format/</code> directory. <br><br><h3>  4. Add configuration files for ClangFormat </h3><br>  Configuration files must be named <code>.clang-format</code> or <code>_clang-format</code> .  They contain a set of rules (styles) of formatting, the format of which is described in the <a href="https://clang.llvm.org/docs/ClangFormatStyleOptions.html">ClangFormat Style Options</a> manual. <br><br>  For example, use files from <a href="https://github.com/torvalds/linux/blob/master/.clang-format">Linux Kernel</a> and <a href="https://github.com/qt-creator/qt-creator/blob/master/.clang-format">Qt</a> projects. <br><br>  The <code>.clang-format</code> files downloaded from GitHub are placed in the appropriate directories: <br> <code>&lt;Notepad++&gt;/plugins/NppExec/clang-format/LINUX_KERNEL/ <br> &lt;Notepad++&gt;/plugins/NppExec/clang-format/QT/</code> <br> <br><h3>  5. Create a script for NppExec </h3><br>  Open the window for editing and running scripts NppExec <code>Plugins ‚Äì&gt; NppExec ‚Äì&gt; Execute...</code> or press <code>F6</code> .  Copy and paste the script text below into the window and save the script called <code>clang-format</code> with the <code>Save...</code> button. <br><br><div class="spoiler">  <b class="spoiler_title">NppExec script</b> <div class="spoiler_text"><pre> <code class="xml hljs">// Hide console NPP_CONSOLE 0 //------------------------------------------------------------------------------ // Uncomment a line to select a style //set style = LINUX_KERNEL set style = QT //------------------------------------------------------------------------------ //------------------------------------------------------------------------------ set clangformatexe = $(CWD)\plugins\NppExec\clang-format\clang-format.exe set clangformatcfgdir = $(CWD)\plugins\NppExec\clang-format set tmpdir = $(SYS.TEMP) set clangformatcfgfile = $(clangformatcfgdir)\$(style)\.clang-format set srcfiletmp = $(tmpdir)\~src.tmp //------------------------------------------------------------------------------ cmd.exe /c if exist "$(clangformatexe)" (exit 0) else (exit 1) if $(EXITCODE) != 0 then NPP_CONSOLE 1 echo ERROR: "$(clangformatexe)" not found exit endif cmd.exe /c if exist "$(clangformatcfgfile)" (exit 0) else (exit 1) if $(EXITCODE) != 0 then NPP_CONSOLE 1 echo ERROR: "$(clangformatcfgfile)" not found exit endif // Copy $(clangformatcfgfile) to $(tmpdir)\.clang-format if their temestamps are different cmd.exe /v /c " for %i in ("$(clangformatcfgfile)") do set date1="%~ti" &amp;&amp; for %i in ("$(tmpdir)\.clang-format") do set date2="%~ti" &amp;&amp; if not "!date1!"=="!date2!" ( echo !date1! != !date2! &amp;&amp; echo COPYING $(clangformatcfgfile) to $(tmpdir)\ &amp;&amp; copy "$(clangformatcfgfile)" "$(tmpdir)\" /Y )" if $(EXITCODE) != 0 then NPP_CONSOLE 1 echo ERROR copying "$(clangformatcfgfile)" to "$(tmpdir)" exit endif // Get selected text length sci_sendmsg SCI_GETSELTEXT // If nothing is selected - select the current line if $(MSG_RESULT) == 1 then sci_sendmsg SCI_VCHOMEWRAP sci_sendmsg SCI_LINEENDWRAPEXTEND endif // Save selected text to $(srcfiletmp) sel_saveto "$(srcfiletmp)" :a cmd.exe /c if exist "$(srcfiletmp)" (exit 0) else (exit 1) if $(EXITCODE) != 0 then NPP_CONSOLE 1 echo ERROR: "$(srcfiletmp)" not found exit endif // Run ClangFormat $(clangformatexe) -i -style=file "$(srcfiletmp)" if $(EXITCODE) != 0 then NPP_CONSOLE 1 echo ERROR running "$(clangformatexe)" exit endif // Replace selected text with $(srcfiletmp) sel_loadfrom "$(srcfiletmp)" // Delete $(srcfiletmp) file cmd.exe /c del "$(srcfiletmp)"</code> </pre> <br></div></div><br>  After launching the script, based on the selected formatting style specified in the <code>style</code> variable, selects the required <code>.clang-format</code> file, checks the date of its change and, if necessary, copies it to a temporary directory.  There, the selected fragment of the source code is copied to the temporary file, after which <code>clang-format.exe</code> .  The formatted fragment is copied back to the Notepad ++ window.  Then the temporary file is deleted. <br><br>  In ClangFormat, it is not possible to specify the path to the <code>.clang-format</code> configuration file.  ClangFormat will search for it in the directory of the formatted file and, if it does not find it, will go to the search in the parent directories.  After the script is <code>.clang-format</code> file will remain in the temporary directory in order not to copy it every time you start formatting. <br><br>  At all stages of the script, an error check is performed, and when they occur, the NppExec console window opens, in which a message is displayed. <br><br><h3>  6. In Notepad ++, add a new menu item to run the script. </h3><br>  Open <code>Plugins ‚Äì&gt; NppExec ‚Äì&gt; Advanced Options...</code> , select the name of the <code>clang-format</code> script in the drop-down list of the <code>Associated script</code> and click on the <code>Add/Modify</code> button. <br><br>  Restart Notepad ++, after which the menu item <code>Plugins ‚Äì&gt; NppExec ‚Äì&gt; clang-format</code> will appear. <br><br><img src="https://habrastorage.org/webt/mm/zr/0o/mmzr0ohwwuitlc-syqrgfaenwmk.png" alt="image"><br><br><h3>  7. In Notepad ++, we configure the keyboard shortcut to run the script. </h3><br>  We will use the <code>Ctrl + I</code> combination by analogy with QtCreator.  Open <code>Settings ‚Äì&gt; Shortcut Mapper</code> . <br><br>  By default, the <code>Ctrl + I</code> combination is busy, so you need to release it with the <code>Clear</code> button in the <code>Main Menu</code> tab (line 38 <code>Split Lines</code> in the current version of Notepad ++).  After that, in the tab <code>Plugin commands</code> assign the <code>Ctrl + I</code> combination to the <code>clang-format</code> script. <br><br>  Done, we can use! <br><br><h2>  Instructions for use </h2><br>  Open the file with the source code in Notepad ++, select the desired fragment or all the text and press <code>Ctrl + I</code>  If nothing is selected, the current line will be formatted. <br><br><img src="https://habrastorage.org/webt/st/td/7d/sttd7dp75prza067taz-ix4h6m0.gif" alt="image"><br><br>  To undo the changes, use the standard editor tools ( <code>Ctrl + Z</code> ). <br>  To change the formatting rules, edit the <code>.clang-format</code> configuration files in the <code>&lt;Notepad++&gt;/plugins/NppExec/clang-format/</code> directory <code>&lt;Notepad++&gt;/plugins/NppExec/clang-format/</code> <br>  If you need to use another version of ClangFormat, then change the path to the executable file in the script. <br> <code>set clangformat = "\path\to\clang-format.exe"</code> <br>  To select a different formatting style, press <code>F6</code> and in the text of the <code>clang-format</code> script, select the desired style by uncommenting one of the lines <br>  <code>set style = STYLE_NAME</code> . <br><br>  All necessary files are in the <a href="https://my-files.ru/y7yrxh">archive</a> . <br><br>  Successful formatting! </div><p>Source: <a href="https://habr.com/ru/post/457972/">https://habr.com/ru/post/457972/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../457964/index.html">Real virtuality: workstations ++</a></li>
<li><a href="../457966/index.html">‚ÄúI would open a special IT zone in the south of Russia‚Äù - 10 questions for programmer # 11. New season</a></li>
<li><a href="../457968/index.html">Parallels that intersect - the Ministry of Communications overnight burned billions in budgets</a></li>
<li><a href="../45797/index.html">Installing Deluge from SVN-branch</a></li>
<li><a href="../457970/index.html">Linters in Go. How to cook them. Denis Isaev</a></li>
<li><a href="../457978/index.html">18 tricks to work with Visual Studio</a></li>
<li><a href="../457980/index.html">Neural networks and deep learning: online tutorial, chapter 2</a></li>
<li><a href="../457982/index.html">Moving to work abroad: 6 services to help expatriates in the United States and Canada</a></li>
<li><a href="../457986/index.html">JetBrains Open Day 2019: Broadcast Reports</a></li>
<li><a href="../457988/index.html">Checklist: we launch SCRUM-commands and we make vaccinations against zombie scram</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>SDL 2 Tutorial: Lesson 2 - Main Not Rubber</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello! This is my second lesson on SDL 2. I still take the information from here . 

 So, I welcome you to the lesson. 

 Main not rubber 
 In the las...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>SDL 2 Tutorial: Lesson 2 - Main Not Rubber</h1><div class="post__text post__text-html js-mediator-article">  Hello!  This is my second lesson on SDL 2. I still take the information <a href="http://lazyfoo.net/tutorials/SDL/index.php">from here</a> . <br><br>  So, I welcome you to the lesson. <br><br><h2>  Main not rubber </h2><br>  In the last lesson, I arranged everything beautifully in the <b>Main ()</b> function, but for large programs this is not good.  That is why the opportunity to write functions appeared.  Now we will use it. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Let's start writing code with connecting the SDL and declaring several global variables. <br><a name="habracut"></a><br><pre><code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;SDL2/SDL.h&gt; const int SCREEN_WIDTH = 640; const int SCREEN_HEIGHT = 480; SDL_Window *win = NULL; SDL_Surface *scr = NULL; SDL_Surface *smile = NULL;</span></span></span></span></code> </pre> <br>  Here we are outside the <b>Main ()</b> function declared window objects ( <b>win</b> ), screen surfaces ( <b>scr</b> ) and the image of this <a href="https://drive.google.com/file/d/1MD_D9G03FdpKozg3pPqQkz-oKHk7Nj0d/view%3Fusp%3Dsharing">emoticon</a> ( <b>smile</b> ). <br><br>  Let's write a function to initialize SDL, create a window and drawing surface.  It looks like this: <br><br><div class="spoiler">  <b class="spoiler_title">Init ()</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">init</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (SDL_Init(SDL_INIT_VIDEO) != <span class="hljs-number"><span class="hljs-number">0</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>; } win = SDL_CreateWindow(<span class="hljs-string"><span class="hljs-string">"Main  "</span></span>, SDL_WINDOWPOS_UNDEFINED, SDL_WINDOWPOS_UNDEFINED, SCREEN_WIDTH, SCREEN_HEIGHT, SDL_WINDOW_SHOWN); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (win == <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>; } scr = SDL_GetWindowSurface(win); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>; }</code> </pre></div></div><br>  This code should be familiar to you from the previous lesson.  Here we initialized the video system, created a window with the name ‚ÄúMain not rubber‚Äù, unspecified coordinates and with previously specified dimensions, and also obtained the window surface, saving it in <b>scr</b> .  On error, this function returns 1, otherwise 0. <br><br>  Now you can write a function to download the necessary media files.  Here she is: <br><br><div class="spoiler">  <b class="spoiler_title">Load ()</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">load</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ smile = SDL_LoadBMP(<span class="hljs-string"><span class="hljs-string">"smile.bmp"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (smile == <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>; }</code> </pre></div></div><br>  This feature is extremely simple.  We load the .bmp image using the <b>SDL_LoadBMP</b> function.  This function takes the path to the image file (full or relative), and returns the object of the <b>SDL_Surface</b> class.  You should also check the correctness of the execution: if there were problems with loading (file not found, broken file), then the <b>SDL_LoadBMP</b> function will return <b>NULL</b> . <br><br>  Also write a program to complete the application. <br><br><div class="spoiler">  <b class="spoiler_title">Quit ()</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">quit</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ SDL_FreeSurface(smile); smile = <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>; SDL_DestroyWindow(win); SDL_Quit(); }</code> </pre></div></div><br>  Here is a new feature <b>SDL_FreeSurface</b> , which simply cleans the surface.  After assigning the variable <b>smile</b> value <b>NULL</b> .  All other functions were discussed in the previous lesson. <br><br>  This ended the writing of the functions and you can proceed to <b>Main ()</b> . <br><br><div class="spoiler">  <b class="spoiler_title">Main ()</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> argc, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> ** args)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (init() == <span class="hljs-number"><span class="hljs-number">1</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (load() == <span class="hljs-number"><span class="hljs-number">1</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>; } SDL_BlitSurface(smile, <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, scr, <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>); SDL_UpdateWindowSurface(win); SDL_Delay(<span class="hljs-number"><span class="hljs-number">2000</span></span>); quit(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>; };</code> </pre></div></div><br>  Here we first call the function <b>init ()</b> , written earlier, then the <b>load ()</b> function, which we also wrote earlier.  Next we display <b>smile</b> in <b>scr</b> , using the <b>SDL_BlitSurface</b> function.  This function accepts a surface for drawing, a rectangle that should be cut from this surface (it is necessary for animation), if you don‚Äôt need to cut anything, the <b>NULL</b> is transferred, the surface onto which the rectangle is drawn, the coordinates of which are used for drawing.  If the coordinates are zero, we pass <b>NULL</b> . <br><br>  It's time to talk about the coordinates.  The SDL uses a different coordinate system, not the one everyone is used to.  Here the point with coordinates (0, 0) is in the upper left corner.  This is important to consider when displaying to avoid unpleasant situations. <br><br>  Well, it was fascinating, we continue.  Next, we update the window with the familiar function, make the program freeze for 2 seconds, call the <b>quit ()</b> function written by us and end the program.  At the exit, we have a program that displays a cool smile for 2 seconds.  All code looks like this: <br><br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;SDL2/SDL.h&gt; const int SCREEN_WIDTH = 640; const int SCREEN_HEIGHT = 480; SDL_Window *win = NULL; SDL_Surface *scr = NULL; SDL_Surface *smile = NULL; int init() { if (SDL_Init(SDL_INIT_VIDEO) != 0) { return 1; } win = SDL_CreateWindow("Main  ", SDL_WINDOWPOS_UNDEFINED, SDL_WINDOWPOS_UNDEFINED, SCREEN_WIDTH, SCREEN_HEIGHT, SDL_WINDOW_SHOWN); if (win == NULL) { return 1; } scr = SDL_GetWindowSurface(win); return 0; } int load() { smile = SDL_LoadBMP("smile.bmp"); if (smile == NULL) { return 1; } return 0; } void quit() { SDL_FreeSurface(smile); SDL_DestroyWindow(win); SDL_Quit(); } int main (int argc, char ** args) { if (init() == 1) { return 1; } if (load() == 1) { return 1; } SDL_BlitSurface(smile, NULL, scr, NULL); SDL_UpdateWindowSurface(win); SDL_Delay(2000); quit(); return 0; };</span></span></span></span></code> </pre><br>  I hope everything was clear.  Good luck to all! </div><p>Source: <a href="https://habr.com/ru/post/454414/">https://habr.com/ru/post/454414/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../454404/index.html">Training Cisco 200-125 CCNA v3.0. Day 6. Fill in the blanks (DHCP, TCP, ‚Äúhandshake‚Äù, common port numbers)</a></li>
<li><a href="../454406/index.html">Akihabara: Otaku nesting site</a></li>
<li><a href="../454408/index.html">Hardware bit banding CortexM3 / M4 (ARM), kernel architecture, assembler, C / C ++ 14 and a drop of metaprogramming</a></li>
<li><a href="../45441/index.html">Antispam by postfix + spamassassin</a></li>
<li><a href="../454410/index.html">New in PHP 7.4</a></li>
<li><a href="../454416/index.html">Import Substitute Hadoop Distribution</a></li>
<li><a href="../454418/index.html">Three unobvious examples of using template engines in backend.</a></li>
<li><a href="../454420/index.html">Backup, part 3: Review and testing duplicity, duplicati</a></li>
<li><a href="../454422/index.html">On the perverted interpretation of Newton's First Law in modern physics</a></li>
<li><a href="../454426/index.html">ARTificial: at the dawn of artificial intelligence</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
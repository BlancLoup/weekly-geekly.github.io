<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Do not protect the site from scraping: resistance is useless</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Over the past decade, I have implemented many projects related to aggregation and content analysis. Often, aggregation involves the removal of data fr...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Do not protect the site from scraping: resistance is useless</h1><div class="post__text post__text-html js-mediator-article">  Over the past decade, I have implemented many projects related to aggregation and content analysis.  Often, aggregation involves the removal of data from third-party sites, that is, scraping.  Although I try to avoid this term.  He turned into a label with which many delusions are connected.  The main misconception is that you can block web scraping with X, Y, Z. <br><br>  tl;  dr;  It is impossible. <br><br><h1>  From a business perspective </h1><br>  Last week, I met with a senior executive from the industry in which I am developing my <a href="https://go2cinema.com/">GO2CINEMA</a> business.  Without a doubt, this is one of the smartest and most knowledgeable people in the film industry. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The GO2CINEMA business model is based on aggregating, from various sources, information about the schedule of sessions, free seats and ticket prices, as well as fulfilling requests to purchase tickets on these websites on behalf of the user. <br><br>  I consulted with this person about finding investments.  He offered his help and asked to prepare an analysis of all the ways to block my current business, including scraping content (from a technical and legal point of view).  I prepared the necessary documents and shared with him before our meeting.  His reaction was something like this: <br><br><blockquote>  <i>Yes, thorough research.</i>  <i>But still there are ways to block you.</i>  <i>* grins *</i> </blockquote><br>  No, man, no such ways. <br><a name="habracut"></a><br><h1>  Real users are no different from bots </h1><br>  People far from IT, there is such an idealized idea of ‚Äã‚Äãprogramming as in computer games of the 80s - you put on a virtual reality helmet and immerse yourself in the Network.  In fact, all information and all interactions are zeros and ones.  There is nothing human here.  There is no difference between data entered by a computer or person. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/933/11b/07d/93311b07d1fce798085f528e2ec1b429.gif"><br>  <i><font color="gray">Inspecting Web Traffic</font></i> <br><br>  I will say in a simple way.  As long as visitors can access content on your site, the bot can get the same access.  All technological solutions against scraping will prevent real users as much as bots. <br><br>  If you do not believe, let us consider all the technical ways that a website can try to block a bot using the example of my business. <br><br><h1>  Technical countermeasures </h1><br>  Although the technical specialist some of these theses seem stupid, but investors really expressed all these fears - and I had to respond.  So really bear with me. <br><br><h3>  User Agent Blocking </h3><br>  Each HTTP request contains HTTP headers, including the <a href="https://en.wikipedia.org/wiki/User_agent">user agent</a> , the HTTP client identifier.  Therefore, the cinema can identify bots using information from HTTP headers - and block them. <br><br>  Solution: fake HTTP headers to simulate real users. <br><br>  Example: GO2CINEMA bots use HTTP headers that mimic real user sessions (for example, in the Google Chrome browser).  HTTP headers are randomized between scraping sessions. <br><br>  Conclusion: it is impossible to block GO2CINEMA bots using HTTP metadata sent by the client, such as HTTP headers, without blocking real users. <br><br><h3>  IP blocking </h3><br>  The cinema may try to determine and block the IP addresses of the GO2CINEMA bots. <br><br>  Solution: ‚Äúfake‚Äù IP addresses (using a proxy). <br><br><img src="https://habrastorage.org/getpro/habr/post_images/9c7/965/b11/9c7965b11ce5479eace562debeea9f43.gif"><br>  <i><font color="gray">Mass identification</font></i> <br><br>  Example: <br><br>  GO2CINEMA uses a combination of request scheduling and IP rotation to avoid identifiable patterns of bot behavior.  Here are some of the precautions: <br><br><ol><li>  Randomization of IP addresses. </li><li>  Allocation of IP addresses that are geographically as close as possible to the cinema. </li><li>  Saving the dedicated IP address during the scraping session. </li><li>  The proxy pool changes every 24 hours. </li></ol><br>  It is worth noting that in the current installation there is one drawback: IP addresses (proxies) are registered to various data centers, and not to home addresses, like real people.  Theoretically, the cinema can get a list of subnets of all data centers in the UK - and block them.  This will successfully block bots in the current settings.  But: <br><br><ol><li>  It will cost.  For example, such services are provided by MaxMind (a <a href="https://www.maxmind.com/en/solutions/geoip2-enterprise-product-suite/anonymous-ip-database">database</a> with IP addresses of anonymizers, proxies, and VPN, price not disclosed) and Blocked ($ 12,000 per year). </li><li>  This can lead to blocking real users. </li></ol><br>  <a href="https://www.netflix.com/">Netflix</a> is an example of a provider that blocks the IP addresses of known VPNs and proxies. <br><br>  If the theaters start blocking the IP addresses of the data centers, you will have to use the home users' IPs via home address proxies like <a href="https://luminati.io/">Luminati</a> .  This approach has two drawbacks: <br><br><ol><li>  Cost (our current traffic will cost ¬£ 1000 per month). </li><li>  Reliability.  The performance and speed of proxy home addresses is difficult to predict. </li></ol><br>  Some cinemas have already tried to block the IP addresses of our bot.  The source told us that cinema X thinks (or at least thought) that it successfully blocked our IP addresses.  But it is not.  Activity bot GO2CINEMA did not stop.  It seems that cinema X blocked someone else who collected the same data. <br><br>  It is important to emphasize that it is theoretically possible to distinguish HTTP requests from people and bots by surfing patterns (see the ‚ÄúInvisible Captcha‚Äù section).  But it will be very difficult to identify HTTP requests from the GO2CINEMA bots (for the reasons given in the section ‚ÄúBlock User Agent‚Äù). <br><br>  Conclusion: it is extremely difficult to block GO2CINEMA bots by the black list of IP addresses, because 1) it is extremely difficult to identify bots and 2) we have access to a large number of IP addresses of data centers and home users. <br><br>  Blocking by IP will not prevent our bots from continuing to scraping cinema sites. <br><br><h3>  Use captcha </h3><br>  The cinema can add captcha to restrict access to certain sections of the site (for example, displaying occupied seats in the auditorium) or restricting certain actions (for example, completing a payment transaction). <br><br>  Solution: API for captcha solution. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/05e/0e8/754/05e0e8754959152b1feb807ae6c46db1.gif"><br>  <i><font color="gray">Fully automated public Turing test for distinguishing between computers and people (CAPTCHA)</font></i> <br><br>  Captcha will only add inconvenience to ordinary users.  All captcha methods (including for Google's reCAPTCHA) are easily managed with third-party services like <a href="https://2captcha.com/">2Captcha</a> .  In these services, real people solve the tasks assigned to our bot.  The cost of services is minimal (for example, 2 pounds for 1000 tasks). <br><br>  Conclusion: adding a captcha will not prevent our bots from continuing scraping cinemas. <br><br><h3>  Invisible Captcha </h3><br>  Cinemas can use behavior-based identification and blocking mechanisms (the so-called ‚Äúinvisible captcha‚Äù). <br><br>  Invisible captcha uses a combination of different variables to assess the likelihood that a particular client's interactions are automated.  There is no single recipe for how to implement it.  Different providers use different parameters for profiling users.  This service is provided by some CDNs (for example, Cloudflare) and traditional captcha providers, like Google reCAPTCHA. <br><br>  According to the former head of Google‚Äôs click-click recognition department, Schumann Gosemajumder, this opportunity "creates a new type of problem that very advanced bots can still get around, but it generates much less difficulty for a real person." <br><br>  Conclusion: identification by behavior profiles will not prevent our bots from continuing to scraping cinemas, this is just another problem that needs to be circumvented. <br><br><h3>  Email Verification </h3><br>
         , ,  .<br>
<br>
:  ¬´¬ª.<br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/eeb/0d0/a8c/eeb0d0a8c2d1c791991ce9f1cbb63f9e.gif"><br>
<i><font color="gray">      ,      ‚Äî Kidmograph</font></i><br>
<br>
:<br>
<br>
          . GO2CINEMA    <code>go2cinema.mail</code>   .         (, john1@go2cinema.mail). ,    ,   GO2CINEMA.<br>
<br>
   :<br>
<br>
<ol>
<li>      .</li>
<li>      .</li>
</ol><br>
  ,         .<br>
<br>
        <code>go2cinema.mail</code>,   -  :<br>
<br>
<ol>
<li>    .</li>
<li>    ,      (, <a href="https://www.mailinator.com/">Mailinator</a>).</li>
<li>        (Yahoo, Gmail  .&nbsp;.).</li>
<li>   .</li>
</ol><br>
:          .<br>
<br>
<h3> </h3><br>
            .<br>
<br>
:   .<br>
<br>
         (,   ,   ),         (, <a href="https://www.twilio.com/">Twillio</a>)     .<br>
<br>
      ,       (, 1     ).<br>
<br>
  ,     ,          :<br>
<br>
<ol>
<li> SMS .</li>
<li> ,            .</li>
<li>       (    ,    ).</li>
</ol><br>
     ,     .<br>
<br>
:         .<br>
<br>
<h3> BIN</h3><br>
       (BIN).<br>
<br>
:          (, Barclays).<br>
<br>
:<br>
<br>
GO2CINEMA       .       MasterCard   <a href="https://entropay.com/">Entropay</a>. Entropay   , . .      BIN 522093. ,     BIN.<br>
<br>
  BIN     .         .    MasterCard       5.10.1:<br>
<br>
<blockquote><i>5.10.1   <br>
        -   ,        .         ,      .</i></blockquote><br>
         MoviePass  :<br>
<br>
<blockquote><i>¬´    MasterCard,  AMC       ,    MasterCard.   ,        MasterCard¬ª. ‚Äî <a href="http://uk.businessinsider.com/moviepass-amc-theatres-pushback-2017-8"></a></i></blockquote><br>
 ,           .        -  , ,   .<br>
<br>
:  BIN       .<br>
<br>
<h3>  </h3><br>
      .<br>
<br>
     ,    .           .      .<br>
<br>
 ,       -, :<br>
<br>
<ul>
<li>    .</li>
<li>      API.</li>
<li>  ,    .</li>
<li>     .</li>
</ul><br>
:          .<br>
<br>
<h3> API    API</h3><br>
  ( ) ,     GO2CINEMA,    API    API.<br>
<br>
<blockquote><i>:      API,    API.<br>
:  API?<br>
: API    .<br>
:     ?<br>
: .<br>
:         API     .</i></blockquote><br>
   ,      ,  API      .<br>
<br>
:    API    API       ,    API.<br>
<br>
<h1></h1><br>
                .         .<br>
<br>
 ,          ,             1)&nbsp;    2)    .<br>
<br>
<h1> 98% </h1><br>
    ,         ,    .<br>
<br>
    ?     :<br>
<br>
<ul>
<li>       /?</li>
<li>     ?</li>
</ul><br>
     ,     .<br>
<br>
<h1> </h1><br>
      .         ?<br>
<br>
 :  ( <i></i> ,     ).<br>
<br>
          ,               .<br>
<br>
<h1> </h1><br>
,    ,        (. <a href="https://www.reddit.com/r/webdev/comments/8aypjv/do_not_protect_your_website_from_scraping_part_1/"> Reddit</a>).   .<br>
<br>
      X   IP- (   ¬´ IP-¬ª),       ,  -   .   &nbsp;‚Äî     ¬´, ¬ª,         .<br>
<br>
   ,  -         Excel    .           API ‚Äî      ,         -.<br>
<br>
     ,     ,     API.         .</div><p>Source: <a href="https://habr.com/ru/post/353348/">https://habr.com/ru/post/353348/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../353338/index.html">Binary tree numbering</a></li>
<li><a href="../353340/index.html">How to create a startup empire without selling your freedom</a></li>
<li><a href="../353342/index.html">How I learn Agile practices and values</a></li>
<li><a href="../353344/index.html">And we count you. Universal labeling of goods is coming in Russia</a></li>
<li><a href="../353346/index.html">Riot Games: the anatomy of technical duty</a></li>
<li><a href="../353350/index.html">In addition to cryptocurrency: what else is the blockchain used for?</a></li>
<li><a href="../353352/index.html">From Korutin to ARKit: everything you can find out on Mobius 2018 Piter</a></li>
<li><a href="../353354/index.html">Angular: event handling optimization</a></li>
<li><a href="../353356/index.html">What do Crossover, Space, and NASA have in common?</a></li>
<li><a href="../353358/index.html">I / O Extended 2018 Moscow: invitation</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
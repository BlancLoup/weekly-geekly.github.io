<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Pure javascript.Classes</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Translation of the book by Ryan McDermott clean-code-javascript 

 Table of contents: 


- Introduction 
- Variables 
- Functions 
- Classes 
- Object...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Pure javascript.Classes</h1><div class="post__text post__text-html js-mediator-article">  Translation of the book by Ryan McDermott <a href="https://github.com/ryanmcdermott/clean-code-javascript">clean-code-javascript</a> <br><br><h3>  Table of contents: </h3><br><ul><li>  <a href="https://habrahabr.ru/post/319472/">Introduction</a> </li><li>  <a href="https://habrahabr.ru/post/319476/">Variables</a> </li><li>  <a href="https://habrahabr.ru/post/319480/">Functions</a> </li><li>  Classes </li><li>  <a href="https://habrahabr.ru/post/319894/">Objects and data structures.</a>  <a href="https://habrahabr.ru/post/319894/">Asynchrony.</a>  <a href="https://habrahabr.ru/post/319894/">Error processing.</a> </li><li>  <a href="https://habrahabr.ru/post/320084/">Testing.</a>  <a href="https://habrahabr.ru/post/320084/">Formatting</a>  <a href="https://habrahabr.ru/post/320084/">Comments</a> </li></ul><br><div style="text-align:center;"><img src="https://habrastorage.org/files/7b3/683/28c/7b368328c8694ce89bb8705203b655cc.gif"></div><a name="habracut"></a><br><h4>  The principle of sole responsibility (SRP) </h4><br>  As it is written in the clean code, ‚ÄúThere must be only one reason for changing the class‚Äù.  It is tempting to shove everything into one class, like in a travel case.  The problem is that your class will not be consensually connected, and you will often change it for every sneeze.  It is very important to minimize changes in the classroom.  When you make changes to a class with great functionality, it is hard to track the effects of your changes. <br><br>  Poorly: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre><code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UserSettings</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>(user) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.user = user; } changeSettings(settings) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.verifyCredentials()) { <span class="hljs-comment"><span class="hljs-comment">// ... } } verifyCredentials() { // ... } }</span></span></code> </pre> <br>  Good: <br><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UserAuth</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>(user) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.user = user; } verifyCredentials() { <span class="hljs-comment"><span class="hljs-comment">// ... } } class UserSettings { constructor(user) { this.user = user; this.auth = new UserAuth(user); } changeSettings(settings) { if (this.auth.verifyCredentials()) { // ... } } }</span></span></code> </pre><br><h4>  The principle of openness / closeness (OCP) </h4><br>  As stated by Bertrand Meyer, ‚Äúentities (classes, modules, functions, etc.) should be open for extension, but closed for modification‚Äù (software entities (classes, modules, functions, etc.) should be open for extension, but closed for modification).  What does it mean?  This means that you must give the opportunity to extend the functionality of the entity without changing the existing code. <br><br>  Poorly: <br><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AjaxAdapter</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Adapter</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>() { <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>(); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.name = <span class="hljs-string"><span class="hljs-string">'ajaxAdapter'</span></span>; } } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">NodeAdapter</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Adapter</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>() { <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>(); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.name = <span class="hljs-string"><span class="hljs-string">'nodeAdapter'</span></span>; } } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">HttpRequester</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>(adapter) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.adapter = adapter; } fetch(url) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.adapter.name === <span class="hljs-string"><span class="hljs-string">'ajaxAdapter'</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> makeAjaxCall(url).then(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">response</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-comment"><span class="hljs-comment">//   }); } else if (this.adapter.name === 'httpNodeAdapter') { return makeHttpCall(url).then((response) =&gt; { //   }); } } } function makeAjaxCall(url) { //      } function makeHttpCall(url) { //      }</span></span></code> </pre><br>  Good: <br><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AjaxAdapter</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Adapter</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>() { <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>(); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.name = <span class="hljs-string"><span class="hljs-string">'ajaxAdapter'</span></span>; } request(url) { <span class="hljs-comment"><span class="hljs-comment">//      } } class NodeAdapter extends Adapter { constructor() { super(); this.name = 'nodeAdapter'; } request(url) { //      } } class HttpRequester { constructor(adapter) { this.adapter = adapter; } fetch(url) { return this.adapter.request(url).then((response) =&gt; { //   }); } }</span></span></code> </pre><br><h4>  Barbara Liskov substitution principle </h4><br>  This is a scary term for a very simple concept. <br><br>  Definition: <br><br>  ‚ÄúLet q (x) be a property true for objects of some type T. Then q (y) must also be true for objects of type S, where S is a subtype of type T.‚Äù <a href="https://ru.wikipedia.org/wiki/%25D0%259F%25D1%2580%25D0%25B8%25D0%25BD%25D1%2586%25D0%25B8%25D0%25BF_%25D0%25BF%25D0%25BE%25D0%25B4%25D1%2581%25D1%2582%25D0%25B0%25D0%25BD%25D0%25BE%25D0%25B2%25D0%25BA%25D0%25B8_%25D0%2591%25D0%25B0%25D1%2580%25D0%25B1%25D0%25B0%25D1%2580%25D1%258B_%25D0%259B%25D0%25B8%25D1%2581%25D0%25BA%25D0%25BE%25D0%25B2">Wikipedia</a> The definition is even worse than the name. <br><br>  The bottom line is that if you have a parent and child classes, then they can be interchanged without errors.  This can still be confusing, so let's look at a classic example of a rectangle area.  Mathematically, a square is a rectangle, but if you solve this problem with the help of inheritance, then you will have problems.  More details about the principle can be read <a href="https://habrahabr.ru/post/83269/">here</a> . <br><br>  Poorly: <br><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Rectangle</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>() { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.width = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.height = <span class="hljs-number"><span class="hljs-number">0</span></span>; } setColor(color) { <span class="hljs-comment"><span class="hljs-comment">// ... } render(area) { // ... } setWidth(width) { this.width = width; } setHeight(height) { this.height = height; } getArea() { return this.width * this.height; } } class Square extends Rectangle { setWidth(width) { this.width = width; this.height = width; } setHeight(height) { this.width = height; this.height = height; } } function renderLargeRectangles(rectangles) { rectangles.forEach((rectangle) =&gt; { rectangle.setWidth(4); rectangle.setHeight(5); const area = rectangle.getArea(); // BAD: Will return 25 for Square. Should be 20. rectangle.render(area); }); } const rectangles = [new Rectangle(), new Rectangle(), new Square()]; renderLargeRectangles(rectangles);</span></span></code> </pre><br>  Good: <br><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Shape</span></span></span><span class="hljs-class"> </span></span>{ setColor(color) { <span class="hljs-comment"><span class="hljs-comment">// ... } render(area) { // ... } } class Rectangle extends Shape { constructor() { super(); this.width = 0; this.height = 0; } setWidth(width) { this.width = width; } setHeight(height) { this.height = height; } getArea() { return this.width * this.height; } } class Square extends Shape { constructor() { super(); this.length = 0; } setLength(length) { this.length = length; } getArea() { return this.length * this.length; } } function renderLargeShapes(shapes) { shapes.forEach((shape) =&gt; { switch (shape.constructor.name) { case 'Square': shape.setLength(5); break; case 'Rectangle': shape.setWidth(4); shape.setHeight(5); } const area = shape.getArea(); shape.render(area); }); } const shapes = [new Rectangle(), new Rectangle(), new Square()]; renderLargeShapes(shapes);</span></span></code> </pre><br><h4>  Interface Separation Principle (ISP) </h4><br>  In javascript, there are no intefaces, so this principle cannot be fully utilized.  Nevertheless, it is important to use it, even in the absence of a javascript type system. <br><br>  The ISP states that ‚ÄúUsers should not depend on classes that they do not use‚Äù ().  Interfaces are conditional conventions in JavaScript due to implicit typing.  A good example in javascript can be classes with large configs.  Do not force users of your class to enter a bunch of configs.  They, as a rule, will not use them all.  You will not have a ‚Äúbold interface‚Äù if you make them optional. <br><br>  Poorly: <br><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DOMTraverser</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>(settings) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.settings = settings; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setup(); } setup() { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.rootNode = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.settings.rootNode; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.animationModule.setup(); } traverse() { <span class="hljs-comment"><span class="hljs-comment">// ... } } const $ = new DOMTraverser({ rootNode: document.getElementsByTagName('body'), animationModule() {} //       . // ... });</span></span></code> </pre><br>  Good: <br><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DOMTraverser</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>(settings) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.settings = settings; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.options = settings.options; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setup(); } setup() { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.rootNode = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.settings.rootNode; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setupOptions(); } setupOptions() { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.options.animationModule) { <span class="hljs-comment"><span class="hljs-comment">// ... } } traverse() { // ... } } const $ = new DOMTraverser({ rootNode: document.getElementsByTagName('body'), options: { animationModule() {} } });</span></span></code> </pre><br><h4>  Dependency Inversion Principle (DIP) </h4><br>  This principle says two important things: <br><br>  1. Top level modules should not be dependent on lower level modules.  Both must depend on abstractions. <br>  2. Abstractions should not be details.  Details must be in child classes. <br><br>  At first it is difficult to understand this principle.  But if you worked with Angular.js, you saw the implementation of this principle as Dependency Injection (DI).  Despite the fact that they are not identical concepts, DIP makes it possible to distinguish high-level modules from the details of low-level modules and their installation.  He can do it through DI.  This principle reduces communication between modules.  If your modules are closely related, they are hard to refactor. <br><br>  Abstractions are the implicit conventions that represent interfaces in JavaScript.  That is, the methods and properties that the object / class provides to another object / class.  In the example below, each instance of the InventoryTracker class will have a requestItems method. <br><br>  Poorly: <br><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">InventoryRequester</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>() { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.REQ_METHODS = [<span class="hljs-string"><span class="hljs-string">'HTTP'</span></span>]; } requestItem(item) { <span class="hljs-comment"><span class="hljs-comment">// ... } } class InventoryTracker { constructor(items) { this.items = items; //  ,        . //    requestItems        this.requester = new InventoryRequester(); } requestItems() { this.items.forEach((item) =&gt; { this.requester.requestItem(item); }); } } const inventoryTracker = new InventoryTracker(['apples', 'bananas']); inventoryTracker.requestItems();</span></span></code> </pre><br>  Good: <br><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">InventoryTracker</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>(items, requester) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.items = items; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.requester = requester; } requestItems() { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.items.forEach(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">item</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.requester.requestItem(item); }); } } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">InventoryRequesterV1</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>() { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.REQ_METHODS = [<span class="hljs-string"><span class="hljs-string">'HTTP'</span></span>]; } requestItem(item) { <span class="hljs-comment"><span class="hljs-comment">// ... } } class InventoryRequesterV2 { constructor() { this.REQ_METHODS = ['WS']; } requestItem(item) { // ... } } //      ,    //      ,     const inventoryTracker = new InventoryTracker(['apples', 'bananas'], new InventoryRequesterV2()); inventoryTracker.requestItems();</span></span></code> </pre><br><h4>  Prefer classes (ES2015 / ES6) over simple functions (ES5) </h4><br>  With the help of classical (ES5) classes, it is difficult to implement readable inheritance, construction and definition of methods.  If you need inheritance, do not hesitate to use (ES2015 / ES6) classes.  However, give preference to small functions rather than classes, until there is a need for larger and more complex objects. <br><br>  Poorly: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> Animal = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">age</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span> <span class="hljs-keyword"><span class="hljs-keyword">instanceof</span></span> Animal)) { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Error</span></span>(<span class="hljs-string"><span class="hljs-string">'Instantiate Animal with `new`'</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.age = age; }; Animal.prototype.move = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">move</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{}; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> Mammal = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">age, furColor</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span> <span class="hljs-keyword"><span class="hljs-keyword">instanceof</span></span> Mammal)) { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Error</span></span>(<span class="hljs-string"><span class="hljs-string">'Instantiate Mammal with `new`'</span></span>); } Animal.call(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, age); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.furColor = furColor; }; Mammal.prototype = <span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>.create(Animal.prototype); Mammal.prototype.constructor = Mammal; Mammal.prototype.liveBirth = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">liveBirth</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{}; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> Human = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">age, furColor, languageSpoken</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span> <span class="hljs-keyword"><span class="hljs-keyword">instanceof</span></span> Human)) { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Error</span></span>(<span class="hljs-string"><span class="hljs-string">'Instantiate Human with `new`'</span></span>); } Mammal.call(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, age, furColor); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.languageSpoken = languageSpoken; }; Human.prototype = <span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>.create(Mammal.prototype); Human.prototype.constructor = Human; Human.prototype.speak = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">speak</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{};</code> </pre><br>  Good: <br><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Animal</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>(age) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.age = age; } move() { <span class="hljs-comment"><span class="hljs-comment">/* ... */</span></span> } } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Mammal</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Animal</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>(age, furColor) { <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>(age); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.furColor = furColor; } liveBirth() { <span class="hljs-comment"><span class="hljs-comment">/* ... */</span></span> } } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Human</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Mammal</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>(age, furColor, languageSpoken) { <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>(age, furColor); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.languageSpoken = languageSpoken; } speak() { <span class="hljs-comment"><span class="hljs-comment">/* ... */</span></span> } }</code> </pre><br><h4>  Use the chain method </h4><br>  This pattern is very useful in javascript.  It is used by many libraries, such as jQuery and Lodash.  This makes your code expressive and not verbose.  Using this pattern, you will see how much your code will become cleaner.  Just return this at the end of your methods and you can call them in a chain. <br><br>  Poorly: <br><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Car</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>() { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.make = <span class="hljs-string"><span class="hljs-string">'Honda'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.model = <span class="hljs-string"><span class="hljs-string">'Accord'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.color = <span class="hljs-string"><span class="hljs-string">'white'</span></span>; } setMake(make) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.make = make; } setModel(model) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.model = model; } setColor(color) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.color = color; } save() { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.make, <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.model, <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.color); } } <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> car = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Car(); car.setColor(<span class="hljs-string"><span class="hljs-string">'pink'</span></span>); car.setMake(<span class="hljs-string"><span class="hljs-string">'Ford'</span></span>); car.setModel(<span class="hljs-string"><span class="hljs-string">'F-150'</span></span>); car.save();</code> </pre><br>  Good: <br><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Car</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>() { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.make = <span class="hljs-string"><span class="hljs-string">'Honda'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.model = <span class="hljs-string"><span class="hljs-string">'Accord'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.color = <span class="hljs-string"><span class="hljs-string">'white'</span></span>; } setMake(make) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.make = make; <span class="hljs-comment"><span class="hljs-comment">//  this     return this; } setModel(model) { this.model = model; //  this     return this; } setColor(color) { this.color = color; //  this     return this; } save() { console.log(this.make, this.model, this.color); //  this     return this; } } const car = new Car() .setColor('pink') .setMake('Ford') .setModel('F-150') .save();</span></span></code> </pre><br><h4>  Present composition over inheritance </h4><br>  As stated in the book Design Patterns from the Gang of Four, preference should be given to composition over inheritance, where you can.  There are many reasons to use inheritance and many reasons to use composition.  If your brain instinctively sees inheritance, try presenting a solution to your problem using composition. <br><br>  When to use inheritance?  It depends on the specific problem.  Here is a list of cases where inheritance makes more sense than composition: <br><br><ol><li>  When inheritance is an ‚Äúis‚Äù relationship, not ‚Äúhas‚Äù (Human-&gt; Animal vs. User-&gt; UserDetails) </li><li>  You can reuse the class (People can move like all animals). </li><li>  You want, by making changes to the parent class, to change the child classes <br>  (Change in calorie consumption of all animals when they move). </li></ol><br>  Poorly: <br><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Employee</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>(name, email) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.name = name; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.email = email; } <span class="hljs-comment"><span class="hljs-comment">// ... } //     .      . class EmployeeTaxData extends Employee { constructor(ssn, salary) { super(); this.ssn = ssn; this.salary = salary; } // ... }</span></span></code> </pre><br>  Good: <br><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">EmployeeTaxData</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>(ssn, salary) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.ssn = ssn; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.salary = salary; } <span class="hljs-comment"><span class="hljs-comment">// ... } class Employee { constructor(name, email) { this.name = name; this.email = email; } setTaxData(ssn, salary) { this.taxData = new EmployeeTaxData(ssn, salary); } // ... }</span></span></code> </pre></div><p>Source: <a href="https://habr.com/ru/post/319804/">https://habr.com/ru/post/319804/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../319790/index.html">Recursion Quick look</a></li>
<li><a href="../319794/index.html">Grouping alerts in Android 7</a></li>
<li><a href="../319796/index.html">Episode 3 - a new hope for the success of the game for Android</a></li>
<li><a href="../319798/index.html">Why do people play games</a></li>
<li><a href="../319800/index.html">What are the service providers of data centers, and how to choose the best?</a></li>
<li><a href="../319806/index.html">Product development: two years of work on the Otkrytie Bank mobile app</a></li>
<li><a href="../319808/index.html">Fighting borrowing verification</a></li>
<li><a href="../319810/index.html">Z-order vs R-tree, continued</a></li>
<li><a href="../319812/index.html">International Student School Recent Advances in Algorithms: St. Petersburg, May 22‚Äì26, 2017</a></li>
<li><a href="../319814/index.html">What to catch in the career of an IT architect: expectations VS reality</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
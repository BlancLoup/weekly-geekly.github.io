<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How programmers look for apartments</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In fact, everything is going wrong ... 

 A friend of mine asked me to write this article. The article will talk about his adventures, which may (coul...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How programmers look for apartments</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/4dd/183/cad/4dd183cad32b4981960ef1da9afaa55d.jpg" alt="image"><br><br>  <i>In fact, everything is going wrong ...</i> <br><br>  <i>A friend of mine asked me to write this article.</i>  <i>The article will talk about his adventures, which may (could) be misunderstood by the administration of certain Internet resources.</i>  <i>And those, in turn, can (could) complain about my friend where it should be.</i>  <i>Therefore, I am writing an article with his words.</i>  <i>And he left.</i>  <i>To Honduras.</i>  <i>All right.</i> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h2>  Problem </h2><br>  A couple of years ago (finally!) A moment came in my life when I <s>needed</s> to buy an apartment.  It remained to find her.  The matter was complicated by the fact that I had my own views on what my ideal apartment should be.  Namely - it should have been on the top floor.  Well, that no one went to the brain.  <s>Well, do not care at all more convenient.</s> <br><a name="habracut"></a><br>  The central local property search site (the absolute majority of agencies and owners place their apartments here), how to put it more simply, ‚Äúit was made a little inconvenient‚Äù.  The search for apartments on it contained the settings that were standard for such services: year of construction, number of floors, price, not (!) Last / first floor, etc.  And he, the search, when I asked him to give me an apartment with a separate bathroom, sometimes gave out an apartment with a combined one.  There was a similar story with a balcony.  And since he (the search) sometimes gives apartments that do not correspond to my request, then perhaps he does not show the corresponding ones.  And in my sample (apartment on the top floor, a separate node, number of floors&gt; 5, not far from the metro, and blah blah blah), by definition, many apartments could not get into ... <br><br><h2>  Kowalski, options! </h2><br>  There was only one thing left - to unload all the apartments from the site to yourself locally: you save them to some database, you take into the hands of SQL (well, or something like a thread) ‚Äúand drove‚Äù (c). <br><br>  Easy to say, but hard to do.  The first idea was to look at the site's engine, look for any holes in it, reach the server where all the information about apartments is stored, and copy it from there.  But <s>this is bad</s> , apparently, my qualification was not enough at that time. <br><br>  On the target site there was a section for real estate agencies.  Collaboration, everything.  There, provided that you are an agency, you could get (buy?) Access to specialized software, which, judging by the instructions to it and the screenshots, made it possible to automatically submit ads on behalf of the agency (from spammers, right?).  Theoretically, it was also possible to find information on the server side in this software and pull out information about apartments from there.  This is where my qualifications, I think, would be enough.  But I did not have access to the software, but I did not want to become an agency. <br><br>  Therefore, there was nothing left but to write it ... <br><br><h2>  Parser </h2><br>  We go to the site programmatically, ‚Äúsearch‚Äù for all apartments and parsim the results, saving them to a local database.  I decided to write a parser in Python - it was a relatively new language for me at that time, and it was useful to raise the level in it (and therefore the code is appropriate). <br><br>  For the page jump, the standard urllib was used: <br><br><pre><code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> urllib <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> FancyURLopener, quote_plus ... flatsPageContent = urlOpener.open(flatsPageURL).read()</code> </pre> <br>  For parsing HTML I decided to use (after active googling) the lxml library: <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> lxml.html <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> parse ... flatsPageDocument = parse(flatsPageFilePath).getroot() <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> flatsPageDocument <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> <span class="hljs-keyword"><span class="hljs-keyword">None</span></span>: flatsTables = flatsPageDocument.xpath(<span class="hljs-string"><span class="hljs-string">'//*[@id="list"]'</span></span>)</code> </pre><br>  All this is trivial and uninteresting.  And another was interesting. <br><br><h2>  How far is the subway? </h2><br>  Being a man without horses and moving strictly on public transport, for me the proximity of the metro to my future apartment was critical.  Edak, meters no more than 2 thousand.  Therefore, the idea to determine the nearest metro station to the apartment, and its distance to it.  And then the implementation: <br><br><div class="spoiler">  <b class="spoiler_title">Some code</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getFlatLocation</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(flatPageName, flatAddress, mode, geoDBCursor)</span></span></span><span class="hljs-function">:</span></span> logging.info(<span class="hljs-string"><span class="hljs-string">'Retrieving geo code info for flat \'%s\' (mode \'%s\')...'</span></span> % (flatPageName, mode)) flatFullAddress = (flatBaseAddress + flatAddress).encode(<span class="hljs-string"><span class="hljs-string">'utf8'</span></span>) geoCodeResult = <span class="hljs-string"><span class="hljs-string">''</span></span> isGeoCodeResultCached = <span class="hljs-number"><span class="hljs-number">1</span></span> geoDBCursor.execute(<span class="hljs-string"><span class="hljs-string">"SELECT geoCode FROM %s WHERE address = ?"</span></span> % (<span class="hljs-string"><span class="hljs-string">"GeoG"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> mode == <span class="hljs-string"><span class="hljs-string">'G'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-string"><span class="hljs-string">"GeoY"</span></span>), (flatFullAddress,)) geoCodeResultRow = geoDBCursor.fetchone() <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> geoCodeResultRow <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> <span class="hljs-keyword"><span class="hljs-keyword">None</span></span>: geoCodeResult = geoCodeResultRow[<span class="hljs-number"><span class="hljs-number">0</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> geoCodeResult <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-keyword"><span class="hljs-keyword">None</span></span> <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> len(geoCodeResult) == <span class="hljs-number"><span class="hljs-number">0</span></span>: isGeoCodeResultCached = <span class="hljs-number"><span class="hljs-number">0</span></span> geoCodeURL = (<span class="hljs-string"><span class="hljs-string">'http://maps.google.com/maps/api/geocode/json?sensor=false&amp;address='</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> mode == <span class="hljs-string"><span class="hljs-string">"G"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-string"><span class="hljs-string">'http://geocode-maps.yandex.ru/1.x/?format=json&amp;geocode='</span></span>) + quote_plus(flatFullAddress) urlOpener = UrlOpener() geoCodeResult = urlOpener.open(geoCodeURL).read() <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> geoCodeResult <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-keyword"><span class="hljs-keyword">None</span></span>: geoCodeResult = <span class="hljs-string"><span class="hljs-string">''</span></span> logging.info(<span class="hljs-string"><span class="hljs-string">'Geo code result for flat \'%s\' was fetched (mode \'%s\', from cache - %d)'</span></span> % (flatPageName, mode, isGeoCodeResultCached)) flatLocation = <span class="hljs-number"><span class="hljs-number">0</span></span> geoCodeJson = json.loads(geoCodeResult) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> geoCodeJson <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> <span class="hljs-keyword"><span class="hljs-keyword">None</span></span> <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> (len(geoCodeJson[<span class="hljs-string"><span class="hljs-string">'results'</span></span>]) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> mode == <span class="hljs-string"><span class="hljs-string">'G'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> len(geoCodeJson[<span class="hljs-string"><span class="hljs-string">'response'</span></span>])): <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> isGeoCodeResultCached == <span class="hljs-number"><span class="hljs-number">0</span></span>: geoDBCursor.execute(<span class="hljs-string"><span class="hljs-string">"INSERT INTO %s VALUES (?, ?)"</span></span> % (<span class="hljs-string"><span class="hljs-string">"GeoG"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> mode == <span class="hljs-string"><span class="hljs-string">'G'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-string"><span class="hljs-string">"GeoY"</span></span>), (flatFullAddress, geoCodeResult)) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> mode == <span class="hljs-string"><span class="hljs-string">"G"</span></span>: geoCodeLocation = geoCodeJson[<span class="hljs-string"><span class="hljs-string">'results'</span></span>][<span class="hljs-number"><span class="hljs-number">0</span></span>][<span class="hljs-string"><span class="hljs-string">'geometry'</span></span>][<span class="hljs-string"><span class="hljs-string">'location'</span></span>] flatLocation = {<span class="hljs-string"><span class="hljs-string">'lat'</span></span>: float(geoCodeLocation[<span class="hljs-string"><span class="hljs-string">'lat'</span></span>]), <span class="hljs-string"><span class="hljs-string">'lng'</span></span>: float(geoCodeLocation[<span class="hljs-string"><span class="hljs-string">'lng'</span></span>])} <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: geoCodeLocation = geoCodeJson[<span class="hljs-string"><span class="hljs-string">'response'</span></span>][<span class="hljs-string"><span class="hljs-string">'GeoObjectCollection'</span></span>][<span class="hljs-string"><span class="hljs-string">'featureMember'</span></span>][<span class="hljs-number"><span class="hljs-number">0</span></span>][<span class="hljs-string"><span class="hljs-string">'GeoObject'</span></span>][<span class="hljs-string"><span class="hljs-string">'Point'</span></span>][<span class="hljs-string"><span class="hljs-string">'pos'</span></span>] (flatLocationLng, flatLocationLat) = re.search(<span class="hljs-string"><span class="hljs-string">'(.*) (.*)'</span></span>, geoCodeLocation).group(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>) flatLocation = {<span class="hljs-string"><span class="hljs-string">'lat'</span></span>: float(flatLocationLat), <span class="hljs-string"><span class="hljs-string">'lng'</span></span>: float(flatLocationLng)} logging.info(<span class="hljs-string"><span class="hljs-string">'Geo code info for flat \'%s\' was retrieved (mode \'%s\')'</span></span> % (flatPageName, mode)) <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: logging.warning(<span class="hljs-string"><span class="hljs-string">'Geo code info for flat \'%s\' was NOT retrieved (mode \'%s\')'</span></span> % (flatPageName, mode)) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (flatLocation, isGeoCodeResultCached)</code> </pre><br></div></div><br>  As can be seen from the code, Google and Yandex are used as a source of geocoding data.  Why not someone alone?  Just for new streets (and for old ones, or incorrectly entered), someone from the sources could give out incorrect or averaged data (for example, city center coordinates).  Therefore, two engines are used simultaneously so that visually incorrect results can be visually screened out.  It is clear that Google and Yandex also had a quota for the number of requests per day from IP.  Therefore, the results of "punching" addresses were carefully stored in the database for use in subsequent launches of the parser. <br><br>  With the help of google maps, a table was filled with the coordinates of metro stations, including those still under construction.  And the distance was determined simply <s>using the Pythagorean theorem</s> : <br><br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">calculateDistance</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(location1, location2)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-comment"><span class="hljs-comment"># haversine formula, see http://www.movable-type.co.uk/scripts/latlong.html for details R = 6371 * 1000 # Radius of the Earth in m dLat = (location2['lat'] - location1['lat']) * (math.pi / 180) dLng = (location2['lng'] - location1['lng']) * (math.pi / 180) a = math.sin(dLat / 2) * math.sin(dLat / 2) + math.cos(location1['lat'] * (math.pi / 180)) * math.cos(location2['lat'] * (math.pi / 180)) * math.sin(dLng / 2) * math.sin(dLng / 2) c = 2 * math.atan2(math.sqrt(a), math.sqrt(1 - a)) d = R * c return d</span></span></code> </pre><br>  And here is the nearest metro station: <br><br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getFlatDistanceInfo</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(flatLocation)</span></span></span><span class="hljs-function">:</span></span> flatSubwayStationDistances = map(<span class="hljs-keyword"><span class="hljs-keyword">lambda</span></span> subwayStationInfo: calculateDistance(flatLocation, subwayStationInfo[<span class="hljs-string"><span class="hljs-string">'location'</span></span>]), subwayStationInfos) flatNearestSubwayStationDistance = min(flatSubwayStationDistances) flatNearestSubwayStationName = subwayStationInfos[flatSubwayStationDistances.index(flatNearestSubwayStationDistance)][<span class="hljs-string"><span class="hljs-string">'name'</span></span>] flatTownCenterDistance = flatSubwayStationDistances[<span class="hljs-number"><span class="hljs-number">0</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (flatNearestSubwayStationName, flatNearestSubwayStationDistance, flatTownCenterDistance)</code> </pre><br><br><h2>  Apartment price tracking </h2><br>  All of us, probably, more than once read articles like "Prices for apartments in the city N began to decline by X% per month."  So I had my own opinion on this topic. <br><br>  Once all the extracted apartments were saved locally to the base, it was possible to track changes in their prices.  Looking into the old database and finding information about the apartment being extracted there, it was possible to calculate the delta of its price: <br><br><pre> <code class="python hljs">isFlatInfoUpdated = <span class="hljs-number"><span class="hljs-number">0</span></span> flatPriceDelta = <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> len(oldFlatsDBFilePath): oldFlatsDBCursor.execute(<span class="hljs-string"><span class="hljs-string">'''SELECT flatPriceInfo FROM Flats WHERE flatPageURL = ? AND flatAddress = ? AND flatWholeSquare = ? AND flatLivingSquare = ? AND flatKitchenSquare = ?'''</span></span>, (flatPageURL, flatAddress, flatWholeSquare, flatLivingSquare, flatKitchenSquare,)) oldFlatInfoRow = oldFlatsDBCursor.fetchone() <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> oldFlatInfoRow <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> <span class="hljs-keyword"><span class="hljs-keyword">None</span></span> <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> oldFlatInfoRow[<span class="hljs-number"><span class="hljs-number">0</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> <span class="hljs-keyword"><span class="hljs-keyword">None</span></span>: isFlatInfoUpdated = <span class="hljs-number"><span class="hljs-number">1</span></span> oldFlatPriceInfo = oldFlatInfoRow[<span class="hljs-number"><span class="hljs-number">0</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">try</span></span>: flatPriceDelta = float(flatPriceInfo) - float(oldFlatPriceInfo) <span class="hljs-keyword"><span class="hljs-keyword">except</span></span> ValueError: <span class="hljs-keyword"><span class="hljs-keyword">pass</span></span></code> </pre><br>  Therefore, every time I read articles with an analysis of the real estate market, I smiled, knowing that ‚Äúmy‚Äù apartments do not grow in price at all.  Maybe they didn't need anyone but me? <br><br><h2>  Are you separate or combined? </h2><br>  I am a programmer, and programmers think a lot.  Is it possible in the combined bathroom? <br><br>  The problem was that the property search site hid this information inside the apartment description page and did not show it in the list of search results.  Therefore, a special parser mode was added, called ‚ÄúflatsDeepParseMode‚Äù.  As they say, "We need to go deeper" (c).  He allowed the parser to download not only the apartment search results pages, but also the apartment description pages directly.  And already from them the additional information on a bathroom and other was extracted. <br><br><h2>  fault tolerance </h2><br>  In the deep parsing mode, the script could heavily load the server, hammering it with requests to return thousands of pages.  This, in turn, sometimes led to server thoughtfulness, and, at times, to its refusals to fulfill requests.  Therefore, after such incidents, the script began to support the mechanisms of ‚Äúrecalling‚Äù pages with gradually increasing timeout between attempts. <br><br><h2>  Disguise </h2><br>  Once the script stopped working.  There were messages that the server could not answer something, timeouts and blah blah blah.  It turned out that the owners of the real estate website hired a group of specially trained people to filter the filtering of user agents connecting to the client's server (what are they all about?).  And my script got under distribution.  And it was decided simply - the script pretended to be a browser: <br><br><pre> <code class="python hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UrlOpener</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(FancyURLopener, object)</span></span></span><span class="hljs-class">:</span></span> version = <span class="hljs-string"><span class="hljs-string">'Mozilla/5.0 (Windows; U; Windows NT 5.1; it; rv:1.8.1.11) Gecko/20071127 Firefox/2.0.0.11'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">pass</span></span></code> </pre><br>  But one day a terrible thing happened ... <br><br><h2>  You are banned! </h2><br>  Yes, I was banned.  And not only me, as it turned out.  When I came to work in the morning (I had to earn money for an apartment), I saw an already familiar error message that the server was there, timeouts and blah blah blah.  Replacing the user agent with another browser did not help.  After all, even browsers could not open the real estate website ... Yes, our entire static IP was banned on the server side.  I do not know why this happened.  Perhaps, ‚Äúsome kind of virus program sent many requests to the server‚Äù or several dozen employees of the company decided to look for housing.  But be that as it may, we were banned. <br><br>  It so happened, but our company's lawyers needed to search something on that site (perhaps an apartment for our overseas colleagues).  But they did not give the descent of the administration brazen resource.  We haven't done anything like this.  Nobody ddosili.  True true.  In general, we were banned.  Honestly. <br><br><h2>  Features, features, features ... </h2><br>  The parser still knows a lot: parsit apartments to a certain price, marks remote apartments and newly added ones, counts the number of photos of the apartment, etc. <br><br>  ... <br><br><h2>  We take it, wrap </h2><br>  I still found my ideal apartment.  Top floor, near the subway, all things.  Would I have found it without writing a parser?  I do not know, maybe.  But it would be unsporting, not programmerly somehow ... <br><br><h2>  PS </h2><br>  And yes, I remember about the old article in Habre, where the same <s>pervert</s> enthusiast, like me, parsil and analyzed the apartment in the language of R. And he also bought his right apartment.  And that means it works. <br><br>  By the way, my parser may no longer work or work incorrectly (due to possible changes on the site) because  used for a long time.  And be careful with him, but they can be banned (there have been cases). <br><br><h2>  <i>And the <s>compote</s> code ?!</i> </h2> <i><br></i>  <i>At the request of a friend, I post the source of the parser on <a href="https://bitbucket.org/goghAta/flatparser">bitbucket.org</a> .</i>  <i>In turnips, you can also find a file with a rather large SQL query, which renders all the extracted data.</i>  <i>The code, of course, is placed only for your reference.</i> <i><br><br></i>  <i>Thank you all for your attention.</i> </div><p>Source: <a href="https://habr.com/ru/post/242085/">https://habr.com/ru/post/242085/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../242075/index.html">How to deploy web sites in Microsoft Azure?</a></li>
<li><a href="../242077/index.html">Query Builder library for working with SphinxQL</a></li>
<li><a href="../242079/index.html">Professional Invisibility: A fun way to get covered with moss from boredom</a></li>
<li><a href="../242081/index.html">Terrasoft CRM: Developer's Guide</a></li>
<li><a href="../242083/index.html">Amazon + Ansible</a></li>
<li><a href="../242087/index.html">How to become a Fulbright Fellow and go to magistracy in the United States [Practical Guide]</a></li>
<li><a href="../242089/index.html">Layout of business cards in LaTeX</a></li>
<li><a href="../242091/index.html">Using the MVC approach in WinForms for the smallest</a></li>
<li><a href="../242095/index.html">The path of the developer: stories about my fabulous failures, part 1</a></li>
<li><a href="../242097/index.html">Traffic lights in the garage. Present</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
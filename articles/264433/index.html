<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Natural genetic algorithm or evidence of the evolution of living organisms in C ++</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Introduction 
 Models of natural computing are widely used in modern science. The area of ‚Äã‚Äãtheir application is very extensive, they are used to solv...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Natural genetic algorithm or evidence of the evolution of living organisms in C ++</h1><div class="post__text post__text-html js-mediator-article"><h4>  Introduction </h4><br>  Models of natural computing are widely used in modern science.  The area of ‚Äã‚Äãtheir application is very extensive, they are used to solve problems of modeling, artificial intelligence, pattern recognition, control. <br><br>  One of the most common methods of natural computation is genetic algorithms.  To better understand how these algorithms are designed and how they work, it was decided to reproduce one of these algorithms - the genetic one.  In order to apply a method to solve specific problems, this method must be mastered.  Therefore, the genetic algorithm considered in this paper does not solve any specific problem.  The main ones are at the same time the process and the result of the work on creating a program for modeling and visualizing the work of the genetic algorithm.  The programmer's experience is important. <br>  The program models the behavior of a population of the most primitive living organisms.  This program is unlikely to have any practical application, but it vividly illustrates the principle of operation of genetic algorithms. <br><br><h4>  Simulation of the genetic algorithm, in which natural selection is determined by environmental conditions </h4><br>  Modeling is a method of scientific knowledge of the objective world through the construction and study of models. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Visualization is one of the most convenient ways for people to present information.  It is more convenient for a person to perceive information if it is represented graphically, and not as a large array of meaningless numbers, therefore an important part of the work is a graphical representation of the algorithm. <br><br>  Before using any method, it must be studied and tested first on a relatively simple task, possibly several times.  For a programmer, such a study is writing specific programs. <br><br>  A C ++ programming language has been chosen for work, since this language is a powerful, time-tested programming language.  C ++ is widespread among programmers.  For visualization used open graphic library OpenGL. <br><a name="habracut"></a><br><h5>  Goal and tasks </h5><br>  The purpose of the work is to write a program for modeling the work and visualization of a genetic algorithm, in which natural selection is determined depending on environmental conditions. <br>  Tasks <br><ol><li>  To analyze the sources of information. </li><li>  Learn basic concepts related to genetic algorithms. </li><li>  Create a biological species of primitive living organisms. </li><li>  Create a system of interaction of organisms with each other. </li><li>  Organize the life cycle (the birth of new organisms, life expectancy, reproduction and death). </li><li>  Create a driving force of evolution. </li><li>  Organize predator-prey relationships. </li><li>  In conclusion, you need to implement the collection of statistical data on the population. </li></ol><br><h5>  Creating a view </h5><br>  The program is written in the C ++ programming language using the open graphic library OpenGL. <br>  To represent the species, the Bio class was created, which includes the coordinates, speed, lifetime and other parameters of a primitive living organism. <br><br>  Bio Fields <br><pre><code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span>: Code_bio code; <span class="hljs-comment"><span class="hljs-comment">//  float x,y,dx,dy; //   bool life; //   float w,h; //  int num; //   int lifetime; //  float range; //  </span></span></code> </pre> <br>  The Bio class provides a constructor (for creating class objects). <br><pre> <code class="cpp hljs">Bio(<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>) { life=<span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-comment"><span class="hljs-comment">// w=20; //   h=20; num=rand()%10000; range=200; //srand(time(0)); //  x=rand()%(winW-(int)w); y=rand()%(winH-(int)h); //srand(time(0)); dx=rand()%8-4; //  dy=rand()%8-4; lifetime=0; }</span></span></code> </pre><br>  In addition to the constructor, you must create a function set (int a, int b), with which you can manually set the coordinates of the object being created. <br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">set</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> a,</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> b)</span></span></span></span>{ x=a; y=b; life=<span class="hljs-literal"><span class="hljs-literal">true</span></span>; dx=rand()%<span class="hljs-number"><span class="hljs-number">8</span></span><span class="hljs-number"><span class="hljs-number">-4</span></span>; dy=rand()%<span class="hljs-number"><span class="hljs-number">8</span></span><span class="hljs-number"><span class="hljs-number">-4</span></span>; }</code> </pre><br>  To simulate a random movement, we introduce the turn () function, which will rotate an object at a random angle to the left or right at each instant of time. <br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">inline</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">turn</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> vect, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> deg)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>((dx!=<span class="hljs-number"><span class="hljs-number">0</span></span>)||(dy!=<span class="hljs-number"><span class="hljs-number">0</span></span>)) { <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> grad; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>((dx&gt;=<span class="hljs-number"><span class="hljs-number">0</span></span>)&amp;&amp;(dy&lt;<span class="hljs-number"><span class="hljs-number">0</span></span>)) { dy=-dy; grad=<span class="hljs-built_in"><span class="hljs-built_in">atan</span></span>(dx/dy)*<span class="hljs-number"><span class="hljs-number">180</span></span>/pi; grad+=deg; dx=<span class="hljs-built_in"><span class="hljs-built_in">sin</span></span>(grad*pi/<span class="hljs-number"><span class="hljs-number">180</span></span>)*vect; dy=<span class="hljs-built_in"><span class="hljs-built_in">cos</span></span>(grad*pi/<span class="hljs-number"><span class="hljs-number">180</span></span>)*vect; dy=-dy; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>((dx&gt;=<span class="hljs-number"><span class="hljs-number">0</span></span>)&amp;&amp;(dy&gt;=<span class="hljs-number"><span class="hljs-number">0</span></span>)) { grad=<span class="hljs-built_in"><span class="hljs-built_in">atan</span></span>(dx/dy)*<span class="hljs-number"><span class="hljs-number">180</span></span>/pi; grad=<span class="hljs-number"><span class="hljs-number">90</span></span>-grad; grad+=deg; grad=<span class="hljs-number"><span class="hljs-number">90</span></span>-grad; dx=<span class="hljs-built_in"><span class="hljs-built_in">sin</span></span>(grad*pi/<span class="hljs-number"><span class="hljs-number">180</span></span>)*vect; dy=<span class="hljs-built_in"><span class="hljs-built_in">cos</span></span>(grad*pi/<span class="hljs-number"><span class="hljs-number">180</span></span>)*vect; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>((dx&lt;<span class="hljs-number"><span class="hljs-number">0</span></span>)&amp;&amp;(dy&lt;=<span class="hljs-number"><span class="hljs-number">0</span></span>)) { dy=-dy; dx=-dx; grad=<span class="hljs-built_in"><span class="hljs-built_in">atan</span></span>(dx/dy)*<span class="hljs-number"><span class="hljs-number">180</span></span>/pi; grad=<span class="hljs-number"><span class="hljs-number">90</span></span>-grad; grad+=deg; grad=<span class="hljs-number"><span class="hljs-number">90</span></span>-grad; dx=<span class="hljs-built_in"><span class="hljs-built_in">sin</span></span>(grad*pi/<span class="hljs-number"><span class="hljs-number">180</span></span>)*vect; dy=<span class="hljs-built_in"><span class="hljs-built_in">cos</span></span>(grad*pi/<span class="hljs-number"><span class="hljs-number">180</span></span>)*vect; dy=-dy; dx=-dx; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>((dx&lt;<span class="hljs-number"><span class="hljs-number">0</span></span>)&amp;&amp;(dy&gt;=<span class="hljs-number"><span class="hljs-number">0</span></span>)) { dx=-dx; grad=<span class="hljs-built_in"><span class="hljs-built_in">atan</span></span>(dx/dy)*<span class="hljs-number"><span class="hljs-number">180</span></span>/pi; grad+=deg; dx=<span class="hljs-built_in"><span class="hljs-built_in">sin</span></span>(grad*pi/<span class="hljs-number"><span class="hljs-number">180</span></span>)*vect; dy=<span class="hljs-built_in"><span class="hljs-built_in">cos</span></span>(grad*pi/<span class="hljs-number"><span class="hljs-number">180</span></span>)*vect; dx=-dx; } } }</code> </pre><br>  To handle the collision of an object with the edges of the screen, the collx () and colly () functions are needed. <br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">inline</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">collx</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(xw/<span class="hljs-number"><span class="hljs-number">2</span></span>&lt;<span class="hljs-number"><span class="hljs-number">0</span></span>) { x=winW-w/<span class="hljs-number"><span class="hljs-number">2</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(x+w/<span class="hljs-number"><span class="hljs-number">2</span></span>&gt;winW) { x=w/<span class="hljs-number"><span class="hljs-number">2</span></span>; } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">inline</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">colly</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(yh/<span class="hljs-number"><span class="hljs-number">2</span></span>&lt;<span class="hljs-number"><span class="hljs-number">0</span></span>) { y=h/<span class="hljs-number"><span class="hljs-number">2</span></span>; dy=-dy; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(y+h/<span class="hljs-number"><span class="hljs-number">2</span></span>&gt;winH) { y=winH-h/<span class="hljs-number"><span class="hljs-number">2</span></span>; dy=-dy; } } };</code> </pre><br>  Now we need only the main function Draw (), which will change the state of the object and draw it. <br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">void</span></span> Bio::Draw() { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(life) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(dx==<span class="hljs-number"><span class="hljs-number">0</span></span>)dx=rand()%<span class="hljs-number"><span class="hljs-number">30</span></span>/<span class="hljs-number"><span class="hljs-number">10</span></span>+<span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(dy==<span class="hljs-number"><span class="hljs-number">0</span></span>)dy=rand()%<span class="hljs-number"><span class="hljs-number">30</span></span>/<span class="hljs-number"><span class="hljs-number">10</span></span>+<span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-comment"><span class="hljs-comment">// float min=range; bool ok=0; float x2,y2; list&lt;Predator&gt;::iterator i=preds.begin(); for(;i!=preds.end();i++) { if(sqrt( (xi-&gt;x)*(xi-&gt;x)+(yi-&gt;y)*(yi-&gt;y) )&lt;min) { min=sqrt( (xi-&gt;x)*(xi-&gt;x)+(yi-&gt;y)*(yi-&gt;y) ); ok=1; x2=i-&gt;x; y2=i-&gt;y; } } if(ok) { runaway(code.maxspeed,x2,y2); turn(code.maxspeed,(rand()%(2*(int)code.maxturn+1)*10)/10-(int)code.maxturn); } else turn((rand()%(int)(code.maxspeed-code.minspeed+1)*10)/10+code.minspeed, (rand()%(2*(int)code.maxturn+1)*10)/10-(int)code.maxturn); x+=dx; collx(); y+=dy; colly(); // if(1) { glBindTexture(GL_TEXTURE_2D,bio_tex[0]); glBegin(GL_QUADS); glTexCoord2f(0,1); glVertex2f(xw/2,yh/2); glTexCoord2f(1,1); glVertex2f(x+w/2,yh/2); glTexCoord2f(1,0); glVertex2f(x+w/2,y+h/2); glTexCoord2f(0,0); glVertex2f(xw/2,y+h/2); glEnd(); } // makechild(); //.  lifetime++; if(lifetime&gt;code.maxltime) life=0; // w=lifetime/40+20; h=lifetime/40+20; } }</span></span></code> </pre><br>  At the creation of the species ends.  Now the question arises about the storage of all these organisms (after all, there will be a large number of them).  Their number will also constantly change as a result of the life cycle.  A dynamic list array is well suited for storing them. <br><pre> <code class="cpp hljs"><span class="hljs-built_in"><span class="hljs-built_in">list</span></span>&lt;Bio&gt; bios;</code> </pre><br><br><h5>  Life cycle </h5><br>  As a result, the first task is completed.  Next you need to organize the life cycle of the population and the interaction of organisms with each other.  Since the program must simulate the behavior of the most primitive organisms, their relationships will be the simplest.  When two individuals collide, they will die, and their children will appear in random coordinates (from 1 to 3).  Given the computing resources of a regular computer, the program will be able to process up to 200 organisms at a normal speed.  This number is not sufficient for the existence of a stable population, so that the number of organisms does not become too large or too small a condition is introduced - if the population size is less than 50, more children are born (from 1 to 4), if the number is more than 50, reproduction will be slower. <br><br>  In order for the genetic algorithm to work, each individual of the population must have its own genetic code.  For this, a separate code structure has been created in the program.  Each organism of the population has its own copy of this structure.  A cross-breeding function is also needed, which will accept the genetic codes of the parents and return the baby‚Äôs code.  These primitive creatures in the code have only the minimum and maximum speeds, the maximum lifespan and the maximum angle of rotation. <br><pre> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Code_bio</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> maxltime; <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> minspeed,maxspeed; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> maxturn; }; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">inline</span></span></span><span class="hljs-function"> Code_bio </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">childcode</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Code_bio c1, Code_bio c2)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// Code_bio c; c.maxltime=(c1.maxltime+c2.maxltime)/2; c.minspeed=(c1.minspeed+c2.minspeed)/2; c.maxspeed=(c1.maxspeed+c2.maxspeed)/2; c.maxturn=(c1.maxturn+c2.maxturn)/2; // c.maxltime+=c.maxltime/100*((rand()%(maxltime_mut*2+1))-maxltime_mut); c.maxspeed+=c.maxspeed/100*((rand()%(maxspeed_mut*2+1))-maxspeed_mut); c.minspeed+=c.minspeed/100*((rand()%(minspeed_mut*2+1))-minspeed_mut); c.maxturn+=c.maxturn/100*(rand()%(maxturn_mut*2+1)-maxturn_mut); return c; }</span></span></code> </pre><br>  In the Bio class you now need to add a breeding function.  This feature will detect the collision of organisms, kill them and create offspring. <br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">void</span></span> Bio::makechild() { <span class="hljs-built_in"><span class="hljs-built_in">list</span></span>&lt;Bio&gt;::iterator i=bios.begin(); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(;i!=bios.end();i++) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(num!=i-&gt;num) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>((lifetime&gt;<span class="hljs-number"><span class="hljs-number">200</span></span>)&amp;&amp;(i-&gt;lifetime&gt;<span class="hljs-number"><span class="hljs-number">200</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(<span class="hljs-built_in"><span class="hljs-built_in">sqrt</span></span>((xi-&gt;x)*(xi-&gt;x))+((yi-&gt;y)*(yi-&gt;y))&lt;w+i-&gt;w) { life=<span class="hljs-number"><span class="hljs-number">0</span></span>; i-&gt;life=<span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> c; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(bios.size()&lt;<span class="hljs-number"><span class="hljs-number">50</span></span>) c=rand()%<span class="hljs-number"><span class="hljs-number">4</span></span>+<span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> c=rand()%<span class="hljs-number"><span class="hljs-number">3</span></span>+<span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> j=<span class="hljs-number"><span class="hljs-number">0</span></span>;j&lt;c;j++) { Bio b; b.code=childcode(code,i-&gt;code); bios.push_back(b); } } } } }</code> </pre><br>  In the drawing function, you also need to make a change: add reproduction.  All objects are drawn in the timer function with an interval of 20 ms.  In the same function, the program deletes all dead individuals (whose value of life is false). <br><pre> <code class="cpp hljs"><span class="hljs-built_in"><span class="hljs-built_in">list</span></span>&lt;Bio&gt;::iterator i=bios.begin(); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(;i!=bios.end();i++) i-&gt;Draw(); bios.remove_if([](Bio b) {<span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (b.life==<span class="hljs-number"><span class="hljs-number">0</span></span>);}); <span class="hljs-comment"><span class="hljs-comment">// </span></span></code> </pre><br><h5>  Predator </h5><br>  Since the genetic algorithm still has to solve some problem, you need to set this task to it.  In this case, the task will be to find the most fit organism.  The population will be improved all the time as a result of evolution.  Each next generation will be better adapted to environmental conditions.  It is necessary to create a driving factor of evolution, which will select the most adapted individuals.  This factor will be a predator. <br><br>  Predators, as well as victims, can be many.  The predator class from the Bio class will differ only in that the predators will not be able to breed and die.  Their number will always be fixed throughout the program. <br><br>  Predator Class Fields <br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> x,y,dx,dy,speed; <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> life; <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> w,h; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> num; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> lifetime; <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> range; <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> hungry;</code> </pre><br>  The default constructor and the set () function for manual creation. <br><pre> <code class="cpp hljs">Predator(<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>) { life=<span class="hljs-number"><span class="hljs-number">1</span></span>; w=<span class="hljs-number"><span class="hljs-number">100</span></span>; h=<span class="hljs-number"><span class="hljs-number">100</span></span>; num=rand()%<span class="hljs-number"><span class="hljs-number">10000</span></span>; range=<span class="hljs-number"><span class="hljs-number">250</span></span>; speed=<span class="hljs-number"><span class="hljs-number">10.2</span></span>; hungry=<span class="hljs-number"><span class="hljs-number">0</span></span>;<span class="hljs-comment"><span class="hljs-comment">//1*1000/20; //srand(time(0)); x=rand()%(winW-(int)w); y=rand()%(winH-(int)h); //srand(time(0)); dx=rand()%8-4; dy=rand()%8-4; lifetime=0; } void set(int a,int b) { x=a; y=b; life=true; dx=rand()%8-4; dy=rand()%8-4; }</span></span></code> </pre><br>  In the free time from eating the predator will make a random movement.  Its turn () function for changing directions is no different from the similar method of class Bio.  In order for the predator to catch up with the prey, it needs the aim () function, which will accept the coordinates of the victim and the speed with which it must be caught up. <br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">inline</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">aim</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> vect, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> x2, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> y2)</span></span></span><span class="hljs-function"> </span></span>{ dx=((x2-x)*vect)/<span class="hljs-built_in"><span class="hljs-built_in">sqrt</span></span>( (x-x2)*(x-x2)+(y-y2)*(y-y2) ); dy=((y2-y)*vect)/<span class="hljs-built_in"><span class="hljs-built_in">sqrt</span></span>( (x-x2)*(x-x2)+(y-y2)*(y-y2) ); }</code> </pre><br><br>  In the main function Draw (), if a predator is hungry, he will look through his surroundings, find the nearest victim and chase after it.  If he is not hungry, he will randomly move around the screen. <br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">inline</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Draw</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(life) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(dx==<span class="hljs-number"><span class="hljs-number">0</span></span>)dx=rand()%<span class="hljs-number"><span class="hljs-number">30</span></span>/<span class="hljs-number"><span class="hljs-number">10</span></span>+<span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(dy==<span class="hljs-number"><span class="hljs-number">0</span></span>)dy=rand()%<span class="hljs-number"><span class="hljs-number">30</span></span>/<span class="hljs-number"><span class="hljs-number">10</span></span>+<span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-comment"><span class="hljs-comment">//  bool ok=0; float x2,y2; if(hungry&lt;=0) { float min=range; list&lt;Bio&gt;::iterator i=bios.begin(); for(;i!=bios.end();i++) { if(sqrt( (xi-&gt;x)*(xi-&gt;x)+(yi-&gt;y)*(yi-&gt;y) )&lt;w/2+i-&gt;w/2-10) { i-&gt;life=0; hungry=0.01*1000/20; } else if(sqrt( (xi-&gt;x)*(xi-&gt;x)+(yi-&gt;y)*(yi-&gt;y) )&lt;min) { min=sqrt( (xi-&gt;x)*(xi-&gt;x)+(yi-&gt;y)*(yi-&gt;y) ); ok=1; x2=i-&gt;x; y2=i-&gt;y; } } } if(ok) aim(speed,x2,y2); else turn(6,(rand()%(2*15+1)*10)/10-15); x+=dx; collx(); y+=dy; colly(); // if(view) { glBindTexture(GL_TEXTURE_2D,pred_tex[0]); glBegin(GL_QUADS); glTexCoord2f(0,1); glVertex2f(xw/2,yh/2); glTexCoord2f(1,1); glVertex2f(x+w/2,yh/2); glTexCoord2f(1,0); glVertex2f(x+w/2,y+h/2); glTexCoord2f(0,0); glVertex2f(xw/2,y+h/2); glEnd(); } //.  // // hungry--; } }</span></span></code> </pre><br>  It remains only to create a dynamic array of predators. <br><pre> <code class="cpp hljs"><span class="hljs-built_in"><span class="hljs-built_in">list</span></span>&lt;Predator&gt; preds;</code> </pre><br><h5>  Predator-Prey Relationship </h5><br>  In order for the relationship between the predator and the victim to work properly, you need to teach the victim to run away from the predator.  Otherwise, the predator will simply eat the prey and no evolution will occur.  To do this, add the runaway () method to the Bio class.  It is similar to the method of pursuit by the predator of the victim, only directs the object in the opposite direction. <br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">inline</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">runaway</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> vect, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> x2, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> y2)</span></span></span><span class="hljs-function"> </span></span>{ dx=((x-x2)*vect)/<span class="hljs-built_in"><span class="hljs-built_in">sqrt</span></span>( (x-x2)*(x-x2)+(y-y2)*(y-y2) ); dy=((y-y2)*vect)/<span class="hljs-built_in"><span class="hljs-built_in">sqrt</span></span>( (x-x2)*(x-x2)+(y-y2)*(y-y2) ); }</code> </pre><br>  Now we need to finally modify the Draw function of the Bio class.  In addition to the simple chaotic movement, it is necessary to add the detection of a predator and escape from it. <br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(dx==<span class="hljs-number"><span class="hljs-number">0</span></span>)dx=rand()%<span class="hljs-number"><span class="hljs-number">30</span></span>/<span class="hljs-number"><span class="hljs-number">10</span></span>+<span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(dy==<span class="hljs-number"><span class="hljs-number">0</span></span>)dy=rand()%<span class="hljs-number"><span class="hljs-number">30</span></span>/<span class="hljs-number"><span class="hljs-number">10</span></span>+<span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-comment"><span class="hljs-comment">// float min=range; bool ok=0; float x2,y2; list&lt;Predator&gt;::iterator i=preds.begin(); for(;i!=preds.end();i++) { if(sqrt( (xi-&gt;x)*(xi-&gt;x)+(yi-&gt;y)*(yi-&gt;y) )&lt;min) { min=sqrt( (xi-&gt;x)*(xi-&gt;x)+(yi-&gt;y)*(yi-&gt;y) ); ok=1; x2=i-&gt;x; y2=i-&gt;y; } } if(ok) runaway(code.maxspeed,x2,y2); else turn((rand()%(int)(code.maxspeed-code.minspeed+1)*10)/10+code.minspeed, (rand()%(2*code.maxturn+1)*10)/10-code.maxturn);</span></span></code> </pre><br><br>  The likelihood of a prey catching a fast prey is less than the likelihood of catching a slow one.  As a result, fast individuals will be better adapted to environmental conditions, and an increase in the average population rate will gradually be observed. <br><br><h5>  Principle of evolution </h5><br>  For evolution to work, it was necessary to add a few more important points.  When the predator begins to pursue the prey, the prey runs away from it in the opposite direction.  If the speed of the prey is much less than the speed of the predator, then evolution will not occur, because then with minor evolutionary changes in its speed, the predator will still catch up and eat the prey.  If the speed of the victim is greater than the speed of the predator, it will not be able to catch up with it, unless it drives into the corner.  Only one option remains: the speed of the prey should be approximately equal to the speed of the predator.  Then, even with the smallest evolutionary change in the speed of the victim, it will have a significant advantage over the others.  A predator will be less likely to catch up with such a prey. <br><br>  When the program creates an initial population, it sets all individuals the same genotypes, which show the same maximum and minimum speeds.  All parameters of the genotypes of offspring are calculated as the arithmetic average of the parameters of the parents.  For example, the child‚Äôs maximum speed will be the average of the average speeds of the parents.  If the genetic algorithm is launched exactly this way, evolution will not work.  All genotypes will simply be averaged and become the same.  Even if the initial population is created with different genotypes, there will be no evolution anyway.  In addition to natural selection and the driving factor for the evolution of a tedious mutation.  All you need is to calculate it by plus / minus 10% after calculating the arithmetic average.  Then, some individuals as a result of crossing will be born faster, and some - more slowly, and evolution will work. <br><br>  During operation, the program once every 10 seconds records in four files the general population indicators: abundance, average, minimum and maximum speeds.  Using this data, it will be possible to see the result of the genetic algorithm and draw a conclusion about the evolution of the population. <br><br>  Fragment of data collected: <br><br>  Min. Number  Speed ‚Äã‚Äãmax  Speed, Wed.  speed: <br>  45.00 1,01842 9,83393 5,42617 <br>  54.00 1,01048 10,214 5.61252 <br>  53.00 1.00726 10.4374 5.72231 <br>  51.00 0.932109 10.1463 5.53921 <br>  48.00 0.93236 10.6849 5.80864 <br>  45.00 0.908688 11.0295 5.96907 <br>  46.00 0.888795 11.1242 6.0065 <br>  51.00 0.894669 11.1927 6.04366 <br>  48.00 0.933062 11.679 6.30601 <br>  52.00 0.92753 11.9278 6.42764 <br>  54.00 0.899226 12.3086 6.6039 <br>  51.00 0.875113 12.52 6.69756 <br>  43.00 0.902515 12.84 6.87124 <br><br>  Based on these data, the construction of the graph is performed: <br><br><img src="https://habrastorage.org/files/30b/05e/7b5/30b05e7b55c3482ba0d51a3d389f25cd.PNG" alt="image"><br><br>  The graph shows that as a result of evolution, the average maximum speed of all organisms increased 10 times.  This is really a huge leap in the evolution of organisms.  From this graph, we can also conclude that the average minimum velocity of all organisms has not changed.  This is due to the peculiarities of the movement of creatures.  At a time when they do not run away from a predator, they simply run around the screen in random directions.  Moreover, their speed is also subject to random change.  It takes a random value between their minimum possible speed, embedded in the genotype, and the maximum possible speed, also embedded in the genotype.  But when these organisms run away from the enemy, they run at their highest possible speed.  That is why the driving factor of evolution, which makes the selection of the most adapted individuals, changes only their maximum possible speeds, as the graph shows. <br><br><h5>  Results and conclusions </h5><br><ol><li>  Created an artificial biological species for the genetic algorithm. </li><li>  Created a system of interaction of organisms with each other. </li><li>  Organized life cycle (the birth of new organisms, life expectancy, reproduction and death). </li><li>  A predator has been created as a driving factor for evolution. </li><li>  The interaction of predator and prey is organized. </li><li>  An example of statistical data was collected, which clearly demonstrates the operation of the algorithm and proves the evolution of the created population. </li></ol><br><br><img src="https://habrastorage.org/files/c85/23f/e1f/c8523fe1f1304edebda246cd916a669b.PNG"><br>  At the bottom left is a predator. <br><br><h4>  Conclusion </h4><br>  The created program meets all stated requirements.  At first glance, it does not perform any specific socially useful task, but it clearly demonstrates the principle of operation of the genetic algorithm.  The algorithm implemented in this program is quite simple, but without understanding how it works, it is impossible to create a more complex genetic algorithm. <br><br><h5>  Literature </h5><br>  1. N. Ershov. Natural Models of Parallel Computations [Electronic resource] URL: <a href="http://naturalmodels.blogspot.ru/">naturalmodels.blogspot.ru</a> (circulation date <a href="http://naturalmodels.blogspot.ru/">05/10/14</a> ). <br>  2. R. Lafor√© ‚ÄúObject-Oriented Programming in C ++‚Äù, 4th edition, 2011. <br>  3. B. I. Pakhomov "C / C ++ and MS Visual C ++ 2012". </div><p>Source: <a href="https://habr.com/ru/post/264433/">https://habr.com/ru/post/264433/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../264423/index.html">Isomorphic Application with React and Redux</a></li>
<li><a href="../264425/index.html">CometQL - api of work from comets server using MySQL protocol</a></li>
<li><a href="../264427/index.html">Limited offer: a cloud server in the Netherlands and the United States at the price of hosting, cheaper ip-address</a></li>
<li><a href="../264429/index.html">Destroy everything</a></li>
<li><a href="../264431/index.html">Embarcadero Announces Purchase of Raize Components</a></li>
<li><a href="../264435/index.html">Implementing multilingualism on Laravel 5 by the framework</a></li>
<li><a href="../264437/index.html">The digest of interesting materials from the world of web development and IT for the last week? 171 (August 3 - 10, 2015)</a></li>
<li><a href="../264439/index.html">PAP - old, but not useless !?</a></li>
<li><a href="../264441/index.html">ARM programming on Pascal</a></li>
<li><a href="../264443/index.html">Parsing a Word document to pictures or a story about pre-diploma weekdays</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
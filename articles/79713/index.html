<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Fixed point combinator</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="When I was first asked if there could be a function like Func<Func<T,T>,T> without using constructions like default (T) he plunged me into deep cognit...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Fixed point combinator</h1><div class="post__text post__text-html js-mediator-article"> When I was first asked if there could be a function like <code>Func&lt;Func&lt;T,T&gt;,T&gt;</code> without using constructions like <code><font color="#0000ff">default</font> (T)</code> he plunged me into deep cognitive dissonance. <br>  How can there be a function that has nowhere to take values?  About the obvious option <blockquote> <code>T Fix&lt;T&gt;(Func&lt;T,T&gt; func){ <br> <font color="#0000ff">return</font> func(Fix(func)); <br> }</code> </blockquote>  I could not even think.  Is it possible to do such a function?  It will be called endlessly and will not work.  In languages ‚Äã‚Äãlike C #, such a construction will actually cause looping, but it can work in languages ‚Äã‚Äãlike python or haskel.  Now there will be some Haskell code, I hope the syntax will be more or less clear to everyone. <a name="habracut"></a><br>  The simplest example: <blockquote> <code>fix f = f( fix f) <br> const42 x = 42 <br> <font color="#007700">print</font> (fix const42) <font color="#008800">-- ,    ?</font></code> </blockquote>  If we expand the challenge, we will see that the following chain of calculations takes place: <blockquote> <code>fix const42 -&gt; const42 ( fix const42) -&gt; 42</code> </blockquote>  The last transition is due to the fact that we do not need a function argument to calculate its value. <br>  The question arises: if the function will depend on its argument, then the calculation will not stop, then how should we be? <br>  Well, do not stop, okay.  If the value is not used, then it should not be calculated, thanks to the laziness of Haskell. <blockquote>  : Is the function of adding an item to the head of the list.  For example: <code>1:[2,3] = [1,2,3], n:[] = [n]</code> </blockquote><br>  Consider the <code>fix (1:)</code> function.  It returns a list that will obviously be infinite, but you can still use it. <blockquote> <code>take 3 (fix (1:)) -&gt; take 3 (1:fix (1:)) -&gt; 1:take 2 (fix (1:)) -&gt; 1:(1:take 1 (fix (1:))) <br> -&gt; 1:(1:(1:take 0 (fix (1:)))) -&gt; 1:(1:(1:[])) -&gt; 1:(1:[1]) -&gt; 1:[1,1] -&gt; [1,1,1]</code> </blockquote>  So simply we got the result from the function that uses its parameter.  We even created a useful thing: <br>  <code>repeat n = fix (n:)</code> - Generate an infinite list of one repeating element. <br>  Infinity is not a vice, the main thing is that somewhere, still inside or outside, the chain of calculations is broken.  What constructions can break the chain? <br>  Up to this point, we assumed that the function type for fix is ‚Äã‚Äãa significant type.  But why don't we start using <a href="http://ru.wikipedia.org/wiki/%25D0%25A4%25D1%2583%25D0%25BD%25D0%25BA%25D1%2586%25D0%25B8%25D1%258F_%25D0%25B2%25D1%258B%25D1%2581%25D1%2588%25D0%25B5%25D0%25B3%25D0%25BE_%25D0%25BF%25D0%25BE%25D1%2580%25D1%258F%25D0%25B4%25D0%25BA%25D0%25B0">a higher order function</a> ?  Let's try a traditional example: <blockquote> <code>factCore f = \x -&gt; <font color="#0000ff">if</font> x == 0 <font color="#0000ff">then</font> 1 <font color="#0000ff">else</font> x * f (x-1)</code> </blockquote>  Then the <code>fix factCore</code> function will be an ordinary factorial.  In fact, each time instead of the function f, the factCore function will be substituted, which is why everything will become extremely similar to ordinary recursion. <br><br>  Let's try something more complicated.  For example, create all sequences of length k consisting of numbers from 1 to n, moreover, so that there are not two adjacent identical numbers.  The task is sucked from the finger, but nonetheless. <blockquote> <code>allDiffCore nf = \k cond -&gt; <font color="#0000ff">if</font> k == 1 <font color="#0000ff">then</font> <font color="#007700">map</font> (\x-&gt;[x]) $ <font color="#007700">filter</font> cond [1..n] <font color="#0000ff">else</font> <font color="#007700">concat</font> $ <font color="#007700">map</font> (\x -&gt; map (x:) (f (k-1) (/=x)) ) ( <font color="#007700">filter</font> cond [1..n]) <br> sequences nk = fix (allDiffCore n) k (\x-&gt;True)</code> </blockquote>  Small explanations: <blockquote>  <code><font color="#007700">filter</font></code> is a function that takes two parameters: conditions and a list.  Returns a list of objects that satisfy the condition. <br>  <code>/=</code> - ordinary "not equal".  Such is the very mathematical record. <br>  <code><font color="#007700">concat</font></code> is a function that combines the list of lists into one list. </blockquote>  At each step, we take several suitable elements and set a function that determines whether the next element fits.  With this pattern, you can generate many different sequences.  For example, to get ever-increasing sequences, it is enough to change the part responsible for the filtering function, that is, replace (/ = x) with (&gt; x). <br><br>  And now the task is to think: how to write a function that will solve the <a href="http://ru.wikipedia.org/wiki/%25D0%2597%25D0%25B0%25D0%25B4%25D0%25B0%25D1%2587%25D0%25B0_%25D0%25BE_%25D0%25B2%25D0%25BE%25D1%2581%25D1%258C%25D0%25BC%25D0%25B8_%25D1%2584%25D0%25B5%25D1%2580%25D0%25B7%25D1%258F%25D1%2585">problem of queens</a> on an n * n size chessboard? <br>  As you have already noticed, the use of the fix function (by the way, it is a special case of the fixed point combinator) avoids direct recursion in functions, which can be useful, for example, in lambda calculus, since ordinary recursion cannot be used there. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      As a bonus, I offer a certain, strongly trimmed fixed point combinator, for c #: <blockquote> <code><font color="#0000ff">public static</font> Func&lt;T1, T2&gt; Fix&lt;T1, T2&gt;(Func&lt;Func&lt;T1, T2&gt;, Func&lt;T1, T2&gt;&gt; f) <br> { <br> <font color="#008800">//    ,      <br> //     .    </font> <br> <font color="#0000ff">return</font> f(x =&gt; Fix(f)(x)); <br> }</code> </blockquote>  And further use: <blockquote> <code><font color="#0000ff">var</font> fact = Fix&lt; <font color="#0000ff">int</font> , <font color="#0000ff">int</font> &gt;(self =&gt; x =&gt; <br> { <br> <font color="#0000ff">if</font> (x == 0) <br> <font color="#0000ff">return</font> 1; <br> <font color="#0000ff">return</font> x * self(x - 1); <br> }); <br> <font color="#0000ff">var</font> result = fact(5); <font color="#008800">// 120</font></code> </blockquote> </div><p>Source: <a href="https://habr.com/ru/post/79713/">https://habr.com/ru/post/79713/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../79703/index.html">Distributing Licenses for Database Designer for PostgreSQL</a></li>
<li><a href="../79706/index.html">Distributing Personal Licenses for Database Designer for MySQL</a></li>
<li><a href="../79707/index.html">What for?</a></li>
<li><a href="../79709/index.html">New Year's Gift from Moving Pictures</a></li>
<li><a href="../79712/index.html">Work with zip archives in .NET</a></li>
<li><a href="../79714/index.html">#UKRTWEET January 2010 - successor to # RETWEET09?</a></li>
<li><a href="../79715/index.html">The shortest explanation of the G√∂del Theorem</a></li>
<li><a href="../79716/index.html">This is just a holiday of some kind!</a></li>
<li><a href="../79717/index.html">Community of iPhone Developers and iPhoneDevCamp Kyiv</a></li>
<li><a href="../79719/index.html">Qik Launches Video Camera App for iPhone 2G / 3G with Focus on High-Quality Video Recording</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>